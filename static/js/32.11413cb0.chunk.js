(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[32],{344:function(t,e,c){"use strict";c.d(e,"a",(function(){return u})),c.d(e,"b",(function(){return p})),c.d(e,"c",(function(){return h})),c.d(e,"d",(function(){return j}));var s=c(4),r=c(8),i=c(9),n=c.n(i),a=c(16),o=c(14),l=c(11),d=c(13),u=function(t){return t(!0,null,""),function(){var e=Object(r.a)(Object(s.a)().mark((function e(c){var r,i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(l.a)(),e.next=4,n.a.get("".concat(o.d,"/teachertransfers/requesteddde"));case 4:r=e.sent,console.log("===================================="),console.log({getAllTransfers:r}),console.log("===================================="),i=r.data.filter((function(t){return"APPROVED"===t.requested_status})),c({type:a.a.GET_ALL_TRANSFER,payload:i}),t(!1,i,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(d.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},p=function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(r.a)(Object(s.a)().mark((function t(e,c){var r,i,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0,r=0,null,""),t.prev=2,Object(l.a)(),(i=new FormData).append("teacher_supporting_document",e),t.next=8,n.a.post("".concat(o.d,"/teachertransfers/uploadSupportingDocument"),i,{onUploadProgress:function(t){r=+(null===t||void 0===t?void 0:t.loaded)/+t.total*100,c(!0,r,null,"")}});case 8:a=t.sent,console.log("Uploaded document: ",a.data),c(!1,r,a.data,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0),c(!1,r,"",Object(d.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,c){return t.apply(this,arguments)}}(),j=function(t,e,c){c(!0,"");return function(){var i=Object(r.a)(Object(s.a)().mark((function r(i){var u,p;return Object(s.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),c(!0,""),(u=new FormData).append("teacher_transfer_id",t),u.append("mayor_letter",e),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),s.prev=11,Object(l.a)(),s.next=15,n.a.post("".concat(o.d,"/teachertransfers/outgoing"),u);case 15:p=s.sent,console.log("Uploaded document: ",p.data),i({type:a.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:t,mayor_letter:p.data.mayor_letter}}),c(!1,""),s.next=25;break;case 21:s.prev=21,s.t0=s.catch(11),console.error(s.t0),c(!1,Object(d.a)(s.t0));case 25:case"end":return s.stop()}}),r,null,[[11,21]])})));return function(t){return i.apply(this,arguments)}}()}},550:function(t,e,c){"use strict";c.r(e),c.d(e,"PermutationsReports",(function(){return b}));var s=c(41),r=c(33),i=c(28),n=c(29),a=c(30),o=c(31),l=c(3),d=c(381),u=c(27),p=c(16),h=c(344),j=c(52),x=c(48),m=c(2),_=function(t){Object(a.a)(c,t);var e=Object(o.a)(c);function c(t){var n;return Object(i.a)(this,c),(n=e.call(this,t)).FilteredData=function(){var t,e=null===(t=n.props.permutations.permutations)||void 0===t?void 0:t.find((function(t){return t.page===n.state.page}));if(void 0!==e){var c,i=Object(r.a)(e.permutations_data);try{for(i.s();!(c=i.n()).done;){var a=c.value;n.setState({schools_selected:[].concat(Object(s.a)(n.state.schools_selected),Object(s.a)(a.schools))})}}catch(o){i.e(o)}finally{i.f()}return e.permutations_data}return null},n.componentDidMount=function(){var t;null===n.state.districts&&(n.setState({loading:!0}),Object(h.b)((function(t,e,c){console.log({data:e}),null!==e&&n.setState({districts:e,loading:!1}),n.setState({loading:!1})}))),null===n.props.permutations.permutations&&null!==n.props.auth.district&&null!==n.props.auth.role&&"3"===n.props.auth.role.role_id&&n.props.FC_GetPermutationsByDistrict(n.props.auth.district.district_code,n.state.page,n.state.limit,n.setLoading),"4"===(null===(t=n.props.auth.role)||void 0===t?void 0:t.role_id)&&null===n.props.permutations.permutations&&n.props.FC_GetNationalPermutations(n.state.page,n.state.limit,(function(t){n.setState({loading:t})}))},n.FindUser=function(t,e){var c=e.find((function(e){return e.user_id===t}));return void 0!==c?c:null},n.FindSchool=function(t,e){var c=e.find((function(e){return e.school_code===t}));return void 0!==c?c:null},n.setLoading=function(t){return n.setState({loading:t})},n.state={loading:!1,districts:null,selected_district_code:null!==n.props.auth.district&&null!==n.props.auth.role&&"3"===n.props.auth.role.role_id?n.props.auth.district.district_code:null,selected_school_code:null,page:1,limit:1e3,schools_selected:[]},n}return Object(n.a)(c,[{key:"render",value:function(){var t=this;return null===this.state.districts||!0===this.state.loading?Object(m.jsx)(j.a,{children:Object(m.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(m.jsx)(x.a,{}),Object(m.jsx)("div",{children:"Loading permutations..."})]})}):Object(m.jsxs)(j.a,{children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(m.jsxs)("div",{className:"text-3xl font-bold flex flex-col",children:[Object(m.jsx)("span",{children:"Permutations report"}),Object(m.jsx)("span",{className:"text-base font-light text-gray-600",children:"List of permutations"})]}),Object(m.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[null!==this.props.auth.district&&null!==this.props.auth.role&&"3"===this.props.auth.role.role_id?Object(m.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(m.jsx)("span",{className:"text-gray-500",children:"Selected district"}),Object(m.jsx)("span",{className:"font-extrabold",children:this.props.auth.district.district_name})]}):null!==this.props.auth.role&&"4"===this.props.auth.role.role_id&&Object(m.jsxs)("div",{className:"flex flex-col",children:[Object(m.jsx)("span",{children:"Filter district"}),Object(m.jsxs)("select",{value:null===this.state.selected_district_code?"":this.state.selected_district_code,onChange:function(e){return t.setState({selected_district_code:e.target.value})},className:"border border-gray-500 rounded px-3 py-2",children:[Object(m.jsx)("option",{value:"",children:"Choose district"}),this.state.districts.map((function(t,e){return Object(m.jsx)("option",{value:t.district_code,children:t.district_name},e+1)}))]})]}),null!==this.props.auth.school&&null!==this.props.auth.role&&"2"===this.props.auth.role.role_id?Object(m.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(m.jsx)("span",{className:"text-gray-500",children:"Selected school"}),Object(m.jsx)("span",{className:"font-extrabold",children:this.props.auth.school.school_name})]}):Object(m.jsxs)("div",{className:"flex flex-col",children:[Object(m.jsx)("span",{children:"Filter School"}),Object(m.jsxs)("select",{className:"px-3 py-2 rounded border border-gray-500",children:[Object(m.jsx)("option",{value:"",children:"Choose school"}),this.state.schools_selected.map((function(t,e){return Object(m.jsx)("option",{value:t.school_code,children:t.school_name})}))]})]})]})]}),Object(m.jsxs)("div",{className:"flex flex-row items-center w-full mt-2 gap-3",children:[Object(m.jsx)("input",{placeholder:"Search",className:"px-3 py-2 rounded border border-gray-500 w-full"}),Object(m.jsxs)("div",{className:"bg-yellow-100 text-black hover:bg-accent-900 hover:text-white rounded px-3 py-2 flex flex-row items-center gap-2 cursor-pointer",children:[Object(m.jsx)("div",{children:Object(m.jsx)(d.a,{className:"text-xl"})}),Object(m.jsx)("span",{children:"Export"})]})]})]}),Object(m.jsx)("div",{className:"mt-5",children:Object(m.jsxs)("table",{className:"w-full rounded",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{className:"bg-blue-100 rounded-t",children:[Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"#"}),Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"User one"}),Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"School one"}),Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"User two"}),Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"School two"}),Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"Position"}),Object(m.jsx)("td",{className:"px-3 py-2 text-left",children:"Qualification"})]})}),Object(m.jsx)("tbody",{children:null===this.FilteredData()?Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"Loading..."})}):0===this.FilteredData().length?Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"No data found!"})}):this.FilteredData().map((function(e,c){var s,r,i,n;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:c+1}),Object(m.jsx)("td",{children:null===(s=t.FindUser(e.user_one,e.usersInfo))||void 0===s?void 0:s.full_name}),Object(m.jsx)("td",{children:null===(r=t.FindSchool(e.school_one,e.schools))||void 0===r?void 0:r.school_name}),Object(m.jsx)("td",{children:null===(i=t.FindUser(e.user_two,e.usersInfo))||void 0===i?void 0:i.full_name}),Object(m.jsx)("td",{children:null===(n=t.FindSchool(e.school_two,e.schools))||void 0===n?void 0:n.school_name}),Object(m.jsx)("td",{children:e.position_name}),Object(m.jsx)("td",{children:e.qualification_name})]})}))})]})})]})}}]),c}(l.Component),b=Object(u.b)((function(t){return{auth:t.auth,basic:t.basic,permutations:t.permutations}}),{FC_GetPermutationsByDistrict:p.D,FC_GetNationalPermutations:p.A})(_)}}]);
//# sourceMappingURL=32.11413cb0.chunk.js.map