(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[27],{340:function(t,e,s){"use strict";var r=s(4),i=s.n(r),a=s(121),c=s(355),n=s(339),l=s(2),o=function(t){var e=t.fileData,s=t.fileName,r=t.btnName,i=void 0===r?"Excel":r,o=t.className,d=void 0===o?"flex items-center gap-1 px-4 py-1 rounded text-green-700 bg-white border hover:text-white hover:bg-green-700 border-green-700 font-bold":o,b=t.showIcon,u=void 0===b||b;return Object(l.jsxs)("button",{onClick:function(t){return function(t,e){var s={Sheets:{data:c.a.json_to_sheet(t)},SheetNames:["data"]},r=c.b(s,{bookType:"xlsx",type:"array"}),i=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.saveAs(i,e+".xlsx")}(e,s)},className:d,children:[u&&Object(l.jsx)(n.c,{}),i]})};e.a=i.a.memo(o)},343:function(t,e,s){"use strict";s.d(e,"a",(function(){return b})),s.d(e,"b",(function(){return u})),s.d(e,"c",(function(){return p})),s.d(e,"d",(function(){return h}));var r=s(3),i=s(7),a=s(8),c=s.n(a),n=s(13),l=s(15),o=s(10),d=s(11),b=function(t){return t(!0,null,""),function(){var e=Object(i.a)(Object(r.a)().mark((function e(s){var i,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(o.a)(),e.next=4,c.a.get("".concat(l.d,"/teachertransfers/requesteddde"));case 4:i=e.sent,console.log("===================================="),console.log({getAllTransfers:i}),console.log("===================================="),a=i.data.filter((function(t){return"APPROVED"===t.requested_status})),s({type:n.a.GET_ALL_TRANSFER,payload:a}),t(!1,a,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(d.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},u=function(){var t=Object(i.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(i.a)(Object(r.a)().mark((function t(e,s){var i,a,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0,i=0,null,""),t.prev=2,Object(o.a)(),(a=new FormData).append("teacher_supporting_document",e),t.next=8,c.a.post("".concat(l.d,"/teachertransfers/uploadSupportingDocument"),a,{onUploadProgress:function(t){i=+(null===t||void 0===t?void 0:t.loaded)/+t.total*100,s(!0,i,null,"")}});case 8:n=t.sent,console.log("Uploaded document: ",n.data),s(!1,i,n.data,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0),s(!1,i,"",Object(d.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,s){return t.apply(this,arguments)}}(),h=function(t,e,s){s(!0,"");return function(){var a=Object(i.a)(Object(r.a)().mark((function i(a){var b,u;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),s(!0,""),(b=new FormData).append("teacher_transfer_id",t),b.append("mayor_letter",e),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),r.prev=11,Object(o.a)(),r.next=15,c.a.post("".concat(l.d,"/teachertransfers/outgoing"),b);case 15:u=r.sent,console.log("Uploaded document: ",u.data),a({type:n.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:t,mayor_letter:u.data.mayor_letter}}),s(!1,""),r.next=25;break;case 21:r.prev=21,r.t0=r.catch(11),console.error(r.t0),s(!1,Object(d.a)(r.t0));case 25:case"end":return r.stop()}}),i,null,[[11,21]])})));return function(t){return a.apply(this,arguments)}}()}},562:function(t,e,s){"use strict";s.r(e),s.d(e,"GeneralPlacementReport",(function(){return S}));var r=s(27),i=s(28),a=s(29),c=s(30),n=s(4),l=s(17),o=s(32),d=s(13),b=s(343),u=s(18),p=s(43),h=s(26),m=s(96),x=s(23),j=s(38),f=s(340),_=s(36),v=s(55),g=s(2),O=function(t){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"rounded-full h-12 w-12 bg-gray-100 hover:bg-primary-100 flex items-center justify-center",children:Object(g.jsx)(v.a,{className:"text-3xl"})})}),Object(g.jsxs)("div",{className:"font-extrabold text-2xl text-primary-800 border-b border-primary-800 px-3 py-2 w-full",children:[t.selectedDistrictDetails.district_name," District placement details"]})]}),Object(g.jsxs)("div",{className:"grid grid-cols-12 my-8",children:[Object(g.jsxs)("div",{className:"col-span-4 flex flex-row gap-6 pl-3 pt-3",children:[Object(g.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(g.jsx)("span",{className:"font-light",children:"District name"}),Object(g.jsx)("span",{className:"font-extrabold text-xl",children:t.selectedDistrictDetails.district_name})]}),Object(g.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(g.jsx)("span",{className:"font-light",children:"District Code"}),Object(g.jsx)("span",{className:"font-extrabold text-xl",children:t.selectedDistrictDetails.district_code})]})]}),Object(g.jsx)("div",{className:"col-span-8",children:Object(g.jsx)("div",{className:"p-4 grid grid-cols-12 w-full gap-5",children:t.selectedDistrictDetails.details.map((function(t,e){return Object(g.jsxs)("div",{className:"col-span-4 bg-primary-100 rounded-lg overflow-hidden flex flex-row",children:[Object(g.jsx)("div",{className:"text-xl w-full text-center flex items-center justify-center bg-gray-100 p-3 py-5 border-r border-primary-800 font-light",children:t.qualification_name}),Object(g.jsx)("div",{className:"font-extrabold text-3xl text-primary-800 w-full text-center flex items-center justify-center",children:t.total})]},e+1)}))})})]})]})},y=function(t){Object(a.a)(s,t);var e=Object(c.a)(s);function s(t){var i,a,c,n;return Object(r.a)(this,s),(n=e.call(this,t)).getDistrictSchools=function(t,e){var s=e.pla_district_total_summary.find((function(e){return e.district_code===t})),r=e.district_total_summary.find((function(e){return e.district_code===t}));return{total_schools:void 0===r?0:parseInt(r.total),placed_schools:void 0===s?0:parseInt(s.total)}},n.getDistrictData=function(t,e){var s,r=null===(s=n.props.generalReport)||void 0===s?void 0:s.find((function(s){return s.district_code===t&&s.qualification.toLocaleLowerCase()===e.toLocaleLowerCase()}));return void 0!==r?parseInt(r.total):0},n.totalTeachersOnDistrict=function(t){var e,s=0,r=Object(h.a)(n.props.basic.qualifications);try{for(r.s();!(e=r.n()).done;){var i=e.value;s+=n.getDistrictData(t,i.qualification_name)}}catch(a){r.e(a)}finally{r.f()}return s},n.sortData=function(t){var e,s,r,i,a,c,l,o=[];switch(null===(e=n.state.sortBy)||void 0===e?void 0:e.column){case"teachers":o="ASC"===(null===(s=n.state.sortBy)||void 0===s?void 0:s.status)?t.sort((function(t,e){return t.total-e.total})):"DESC"===(null===(r=n.state.sortBy)||void 0===r?void 0:r.status)?t.sort((function(t,e){return e.total-t.total})):t;break;case"schools_submitted":o="ASC"===(null===(i=n.state.sortBy)||void 0===i?void 0:i.status)?t.sort((function(t,e){return t.placed_schools-e.placed_schools})):"DESC"===(null===(a=n.state.sortBy)||void 0===a?void 0:a.status)?t.sort((function(t,e){return e.placed_schools-t.placed_schools})):t;break;case"remaining":o="ASC"===(null===(c=n.state.sortBy)||void 0===c?void 0:c.status)?t.sort((function(t,e){return t.schools-t.placed_schools-(e.schools-e.placed_schools)})):"DESC"===(null===(l=n.state.sortBy)||void 0===l?void 0:l.status)?t.sort((function(t,e){var s=t.schools-t.placed_schools;return e.schools-e.placed_schools-s})):t;break;default:o=t}return o},n.districtsWithTotals=function(){var t=[];if(null!==n.props.districts&&null!==n.props.generalReport&&null!==n.state.schools_submitted_placements){var e,s=Object(h.a)(n.props.districts);try{for(s.s();!(e=s.n()).done;){var r=e.value;t.push({district_code:r.district_code,district_name:r.district_name,total:n.totalTeachersOnDistrict(r.district_code),schools:n.getDistrictSchools(r.district_code,n.state.schools_submitted_placements).total_schools,placed_schools:n.getDistrictSchools(r.district_code,n.state.schools_submitted_placements).placed_schools})}}catch(i){s.e(i)}finally{s.f()}}return t=n.state.pinned_districts.length>0?t.filter((function(t){return void 0!==n.state.pinned_districts.find((function(e){return e===t.district_code}))})):t,Object(u.k)(n.sortData(t),n.state.search_district)},n.getGrandTotal=function(){var t,e=0,s=0,r=0,i=0,a=Object(h.a)(n.districtsWithTotals());try{for(a.s();!(t=a.n()).done;){var c=t.value;e+=c.placed_schools,s+=c.schools,r+=c.schools-c.placed_schools,i+=c.total}}catch(l){a.e(l)}finally{a.f()}return{total_placed_schools:e,total_schools:s,total_pending_schools:r,total_teachers:i}},n.pinDistrict=function(t){var e,s,r;"3"!==(null===(e=n.props.auth.role)||void 0===e?void 0:e.role_id)&&"2"!==(null===(s=n.props.auth.role)||void 0===s?void 0:s.role_id)&&"1"!==(null===(r=n.props.auth.role)||void 0===r?void 0:r.role_id)&&(void 0===n.state.pinned_districts.find((function(e){return e===t}))?n.setState({pinned_districts:[].concat(Object(p.a)(n.state.pinned_districts),[t])}):n.setState({pinned_districts:n.state.pinned_districts.filter((function(e){return e!==t}))}))},n.state={loading:!1,sortBy:null,search_district:"",selectedDistrictDetails:null,schools_submitted_placements:null,pinned_districts:"3"!==(null===(i=n.props.auth.role)||void 0===i?void 0:i.role_id)&&"2"!==(null===(a=n.props.auth.role)||void 0===a?void 0:a.role_id)&&"1"!==(null===(c=n.props.auth.role)||void 0===c?void 0:c.role_id)||null===n.props.auth.district?[]:[n.props.auth.district.district_code]},n}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var t=this;void 0!==this.props.selected_district&&this.setState({selectedDistrictDetails:{district_code:this.props.selected_district.district_code,district_name:this.props.selected_district.district_name,details:this.props.basic.qualifications.map((function(e){return{qualification_name:e.qualification_name,total:t.getDistrictData(t.props.selected_district.district_code,e.qualification_name)}})),total:this.totalTeachersOnDistrict(this.props.selected_district.district_code)}}),null===this.state.schools_submitted_placements&&null!==this.props.basic.academic_calender&&Object(d.Z)(this.props.basic.academic_calender.academic_year_id,this.props.selected_month,(function(e,s,r){console.log(r),t.setState({loading:e}),null!==r&&!1===e&&t.setState({schools_submitted_placements:r,loading:!1})}))}},{key:"render",value:function(){var t,e,s,r,i=this;return!0===this.props.loading||!0===this.state.loading||null===this.props.districts||null===this.props.generalReport?Object(g.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(g.jsx)(_.a,{}),Object(g.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):null!==this.state.selectedDistrictDetails?Object(g.jsx)(O,{selectedDistrictDetails:this.state.selectedDistrictDetails}):Object(g.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(g.jsxs)("div",{className:"flex flex-row justify-between gap-3 mb-5",children:[Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("span",{className:"font-extrabold text-2xl text-primary-800",children:"Teacher placement summary"}),Object(g.jsx)("span",{className:"-mt-1",children:"This file presents number of existing in the district"})]}),Object(g.jsxs)("div",{className:"flex flex-row items-center gap-8 justify-end",children:[Object(g.jsxs)("div",{className:"flex flex-col text-green-700",children:[Object(g.jsx)("span",{children:"Existing teachers"}),Object(g.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-green-600",children:Object(u.f)(this.getGrandTotal().total_teachers)})]}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("span",{children:"Total Schools"}),Object(g.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-gray-800",children:Object(u.f)(this.getGrandTotal().total_schools)})]}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("span",{children:"Submitted Schools"}),Object(g.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-primary-800",children:Object(u.f)(this.getGrandTotal().total_placed_schools)})]}),Object(g.jsxs)("div",{className:"flex flex-col text-yellow-700",children:[Object(g.jsx)("span",{children:"Pending Schools"}),Object(g.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-accent-900",children:Object(u.f)(this.getGrandTotal().total_pending_schools)})]})]})]}),Object(g.jsxs)("div",{className:"mb-3 flex flex-row items-center gap-2",children:[Object(g.jsx)("input",{type:"text",value:this.state.search_district,onChange:function(t){return i.setState({search_district:t.target.value})},placeholder:"Search by district",className:"px-3 py-2 rounded border border-gray-400 w-full font-bold text-primary-800"}),Object(g.jsx)("div",{className:"w-56",children:Object(g.jsx)(f.a,{fileData:this.districtsWithTotals().map((function(t,e){return{no:"".concat(e+1),DistrictCode:"".concat(t.district_code),DistrictName:"".concat(t.district_name),A2:"".concat(i.getDistrictData(t.district_code,"a2")),A1:"".concat(i.getDistrictData(t.district_code,"a1")),A0:"".concat(i.getDistrictData(t.district_code,"a0")),TotalPlacedTeachers:"".concat(t.total),TotalDistrictSchools:"".concat(t.schools),TotalSchoolsSubmitted:"".concat(t.placed_schools),PendingSchools:"".concat(t.schools-t.placed_schools)}})),fileName:"Districts Teacher placement summary",btnName:"Download EXCEL"})})]}),Object(g.jsxs)("table",{className:"w-full",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"text-primary-800 text-left font-extrabold bg-primary-100 text-sm",children:[Object(g.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"#"}),Object(g.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District code"}),Object(g.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District name"}),this.props.basic.qualifications.map((function(t,e){return Object(g.jsx)("th",{className:"border border-blue-300 text-center px-4 py-2",children:t.qualification_name},e+1)})),Object(g.jsx)("th",{className:"border border-blue-300 text-left text-green-700 bg-green-50",children:Object(g.jsxs)("div",{onClick:function(){return i.setState({sortBy:{status:null===i.state.sortBy||"ASC"===i.state.sortBy.status?"DESC":"ASC",column:"teachers"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-left",children:[Object(g.jsx)("span",{children:"Existing teachers"}),Object(g.jsx)(m.c,{})]})}),Object(g.jsx)("th",{className:"border border-blue-300 text-center px-3 py-2",children:"Total schools"}),Object(g.jsx)("th",{className:"border border-blue-300 text-center",children:Object(g.jsxs)("div",{onClick:function(){return i.setState({sortBy:{status:null===i.state.sortBy||"ASC"===i.state.sortBy.status?"DESC":"ASC",column:"schools_submitted"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-center",children:[Object(g.jsx)("span",{children:"Schools submitted"}),Object(g.jsx)(m.c,{})]})}),Object(g.jsx)("th",{className:"border border-blue-300 text-center",children:Object(g.jsxs)("div",{onClick:function(){return i.setState({sortBy:{status:null===i.state.sortBy||"ASC"===i.state.sortBy.status?"DESC":"ASC",column:"remaining"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-center",children:[Object(g.jsx)("span",{children:"Remaining"}),Object(g.jsx)(m.c,{})]})})]})}),Object(g.jsx)("tbody",{children:0===this.districtsWithTotals().length?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:10,className:"text-center text-2xl font-extralight p-5 animate__animated animate__fadeIn border border-gray-300",children:"No Result Found!"})}):this.districtsWithTotals().map((function(t,e){return Object(g.jsxs)("tr",{onClick:function(){return i.pinDistrict(t.district_code)},className:"hover:bg-primary-100 cursor-pointer",children:[Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:e+1}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_code}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_name}),i.props.basic.qualifications.map((function(e,s){return Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-center",children:Object(u.f)(i.getDistrictData(t.district_code,e.qualification_name))},s+1)})),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-green-600 text-center",children:Object(u.f)(t.total)}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-gray-800 text-center",children:null===i.state.schools_submitted_placements?"Loading...":Object(u.f)(t.schools)}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-blue-600 text-center",children:null===i.state.schools_submitted_placements?"Loading...":Object(u.f)(t.placed_schools)}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-accent-900 text-center",children:null===i.state.schools_submitted_placements?"Loading...":Object(u.f)(t.schools-t.placed_schools)})]},e+1)}))})]}),this.state.pinned_districts.length>0&&"3"!==(null===(t=this.props.auth.role)||void 0===t?void 0:t.role_id)&&"2"!==(null===(e=this.props.auth.role)||void 0===e?void 0:e.role_id)&&"1"!==(null===(s=this.props.auth.role)||void 0===s?void 0:s.role_id)&&Object(g.jsx)("div",{className:"my-5",children:Object(g.jsx)(j.a,{onClick:function(){return i.setState({pinned_districts:[]})},theme:"accent",children:"Unpin selected district"})}),"3"===(null===(r=this.props.auth.role)||void 0===r?void 0:r.role_id)&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"my-3",children:"You can view details for the above summary by viewing schools lists and generating PDF format placement reports"}),Object(g.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(g.jsx)(x.b,{className:"bg-accent-800 font-bold px-3 py-2 rounded hover:bg-yellow-800 hover:text-white",to:"/",children:"View placement list details"}),Object(g.jsx)(x.b,{className:"border border-accent-900 text-accent-900 font-bold px-3 py-2 rounded hover:bg-accent-800 hover:text-black",to:"/",children:"Print placement reports"})]})]})]})}}]),s}(n.Component),N=function(t){Object(a.a)(s,t);var e=Object(c.a)(s);function s(t){var i,a,c,n;return Object(r.a)(this,s),(n=e.call(this,t)).getDistrictSummaryLimit=function(t){var e=n.props.districts_limits.find((function(e){return e.district===t}));return void 0===e?null:e},n.getTotalPlacedDistrict=function(t){var e,s=0,r=n.props.districts_placements.filter((function(e){return e.district_code===t})),i=Object(h.a)(r);try{for(i.s();!(e=i.n()).done;){var a=e.value;s+=parseInt(a.total)}}catch(c){i.e(c)}finally{i.f()}return s},n.districtsWithTotals=function(){var t=null===n.props.districts?[]:n.props.districts.map((function(t){return{district_code:t.district_code,district_name:t.district_name,totals:n.getDistrictSummaryLimit(t.district_name),total_placed:n.getTotalPlacedDistrict(t.district_code)}}));return t=n.state.pinned_districts.length>0?t.filter((function(t){return void 0!==n.state.pinned_districts.find((function(e){return e===t.district_code}))})):t,Object(u.k)(t,n.state.search_district)},n.getDistrictData=function(t,e){var s=n.props.districts_placements.find((function(s){return s.district_code===t&&s.qualification.toLocaleLowerCase()===e.toLocaleLowerCase()}));return void 0!==s?parseInt(s.total):0},n.getDistrictDataAvailable=function(t,e){var s=n.props.districts_limits.find((function(e){return e.district===t}));if(void 0!==s)switch(e.toLocaleLowerCase()){case"a2":return s.A2.Total;case"a1":return s.A1.Total;case"a0":return s.A0.Total}return 0},n.totalTeachersOnDistrict=function(t){var e,s=0,r=Object(h.a)(n.props.basic.qualifications);try{for(r.s();!(e=r.n()).done;){var i=e.value;s+=n.getDistrictData(t,i.qualification_name)}}catch(a){r.e(a)}finally{r.f()}return s},n.totalAvailable=function(t){var e=0;if(null!==n.props.districts){var s,r=Object(h.a)(n.props.districts);try{for(r.s();!(s=r.n()).done;){var i=s.value;e+=n.getDistrictDataAvailable(i.district_name,t)}}catch(a){r.e(a)}finally{r.f()}}return e},n.totalPlaced=function(t){var e=0;if(null!==n.props.districts){var s,r=Object(h.a)(n.props.districts);try{for(r.s();!(s=r.n()).done;){var i=s.value;e+=n.getDistrictData(i.district_code,t)}}catch(a){r.e(a)}finally{r.f()}}return e},n.getAllTotalAvailable=function(){var t,e=0,s=Object(h.a)(n.props.basic.qualifications);try{for(s.s();!(t=s.n()).done;){var r=t.value;e+=n.totalAvailable(r.qualification_name)}}catch(i){s.e(i)}finally{s.f()}return e},n.getAllTotalExisting=function(){var t,e=0,s=Object(h.a)(n.props.basic.qualifications);try{for(s.s();!(t=s.n()).done;){var r=t.value;e+=n.totalPlaced(r.qualification_name)}}catch(i){s.e(i)}finally{s.f()}return e},n.pinDistrict=function(t){var e,s,r;"3"!==(null===(e=n.props.auth.role)||void 0===e?void 0:e.role_id)&&"2"!==(null===(s=n.props.auth.role)||void 0===s?void 0:s.role_id)&&"1"!==(null===(r=n.props.auth.role)||void 0===r?void 0:r.role_id)&&(void 0===n.state.pinned_districts.find((function(e){return e===t}))?n.setState({pinned_districts:[].concat(Object(p.a)(n.state.pinned_districts),[t])}):n.setState({pinned_districts:n.state.pinned_districts.filter((function(e){return e!==t}))}))},n.state={loading:!1,search_district:"",sortBy:null,pinned_districts:"3"!==(null===(i=n.props.auth.role)||void 0===i?void 0:i.role_id)&&"2"!==(null===(a=n.props.auth.role)||void 0===a?void 0:a.role_id)&&"1"!==(null===(c=n.props.auth.role)||void 0===c?void 0:c.role_id)||null===n.props.auth.district?[]:[n.props.auth.district.district_code]},n}return Object(i.a)(s,[{key:"render",value:function(){var t,e,s,r,i,a,c,n=this;return Object(g.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(g.jsxs)("div",{className:"flex flex-row justify-between gap-3 mb-5",children:[Object(g.jsxs)("div",{className:"flex flex-col pl-4 pt-5",children:[Object(g.jsx)("span",{className:"font-extrabold text-2xl text-primary-800",children:"Posts management"}),Object(g.jsx)("span",{className:"-mt-1",children:"This includes total ceiling and available teachers comparison"})]}),"3"!==(null===(t=this.props.auth.role)||void 0===t?void 0:t.role_id)&&"2"!==(null===(e=this.props.auth.role)||void 0===e?void 0:e.role_id)&&"1"!==(null===(s=this.props.auth.role)||void 0===s?void 0:s.role_id)&&Object(g.jsx)("div",{className:"",children:Object(g.jsx)("table",{className:"w-full",children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{className:"bg-primary-100 font-light",children:[Object(g.jsx)("td",{className:"border border-blue-300 px-3",children:"Report type"}),this.props.basic.qualifications.map((function(t,e){return Object(g.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300 text-gray-800",children:t.qualification_name},e+1)})),Object(g.jsx)("td",{className:"border border-blue-300 px-3",children:"Total"})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border border-blue-300 px-3 text-accent-900",children:"National Ceiling"}),this.props.basic.qualifications.map((function(t,e){return Object(g.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300 text-accent-900",children:Object(u.f)(n.totalAvailable(t.qualification_name.toLocaleLowerCase()))},e+1)})),Object(g.jsx)("td",{className:"border border-blue-300 px-3",children:Object(u.f)(this.getAllTotalAvailable())})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border border-blue-300 text-primary-800 px-3",children:"Current teachers"}),this.props.basic.qualifications.map((function(t,e){return Object(g.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300 text-primary-800",children:Object(u.f)(n.totalPlaced(t.qualification_name))},e+1)})),Object(g.jsx)("td",{className:"border border-blue-300 px-3",children:Object(u.f)(this.getAllTotalExisting())})]}),Object(g.jsxs)("tr",{className:"bg-accent-400 text-accent-900",children:[Object(g.jsx)("td",{className:"border border-blue-300 font-extrabold text-primary-800 px-3",children:"Total Vacant"}),this.props.basic.qualifications.map((function(t,e){return Object(g.jsx)("td",{className:"px-5 py-1 font-bold border border-blue-300 text-primary-800",children:Object(u.f)(n.totalAvailable(t.qualification_name.toLocaleLowerCase())-n.totalPlaced(t.qualification_name))},e+1)})),Object(g.jsx)("td",{className:"border border-blue-300 px-3 font-extrabold text-black",children:Object(u.f)(this.getAllTotalAvailable()-this.getAllTotalExisting())})]})]})})})]}),Object(g.jsx)("div",{className:"mb-3 flex flex-row items-center gap-2",children:Object(g.jsx)("input",{type:"text",value:this.state.search_district,onChange:function(t){return n.setState({search_district:t.target.value})},placeholder:"Search by district",className:"px-3 py-2 rounded border border-gray-400 w-full font-bold text-primary-800"})}),Object(g.jsxs)("table",{className:"w-full",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"text-primary-800 text-left font-extrabold bg-primary-100 text-sm",children:[Object(g.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"#"}),Object(g.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District code"}),Object(g.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District name"}),this.props.basic.qualifications.map((function(t,e){return Object(g.jsx)("th",{className:"border border-blue-300 text-center",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"my-2",children:t.qualification_name}),Object(g.jsx)("table",{className:"w-full",children:Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:Object(g.jsx)("div",{className:"w-14",children:"Teachers"})}),Object(g.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:Object(g.jsx)("div",{className:"w-14",children:"Ceiling"})})]})})})]})},e+1)})),Object(g.jsx)("th",{className:"border border-blue-300 text-left text-primary-800",children:Object(g.jsx)("div",{onClick:function(){return n.setState({sortBy:{status:null===n.state.sortBy||"ASC"===n.state.sortBy.status?"DESC":"ASC",column:"teachers"}})},className:" flex flex-row items-center gap-3 px-2 py-2 hover:bg-primary-100 cursor-pointer text-left",children:Object(g.jsx)("span",{children:"Total teachers"})})}),Object(g.jsx)("th",{className:"border border-blue-300 text-center px-3 py-2",children:"Total Ceiling"}),Object(g.jsx)("th",{className:"border border-blue-300 text-center",children:Object(g.jsx)("div",{onClick:function(){return n.setState({sortBy:{status:null===n.state.sortBy||"ASC"===n.state.sortBy.status?"DESC":"ASC",column:"schools_submitted"}})},className:" flex flex-row items-center gap-3 px-2 py-2 hover:bg-primary-100 cursor-pointer text-center",children:Object(g.jsx)("span",{children:"Vacant posts"})})})]})}),Object(g.jsx)("tbody",{children:0===this.districtsWithTotals().length?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:10,className:"text-center text-2xl font-extralight p-5 animate__animated animate__fadeIn border border-gray-300",children:"No Result Found!"})}):this.districtsWithTotals().map((function(t,e){return Object(g.jsxs)("tr",{onClick:function(){n.pinDistrict(t.district_code)},className:"hover:bg-primary-100 cursor-pointer",children:[Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:e+1}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_code}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_name}),n.props.basic.qualifications.map((function(e,s){return Object(g.jsx)("td",{className:"border border-gray-300 text-center",children:Object(g.jsx)("div",{children:Object(g.jsx)("table",{className:"w-full",children:Object(g.jsx)("tbody",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border border-blue-300 px-4 py-2 ".concat(n.getDistrictDataAvailable(t.district_name,e.qualification_name)>n.getDistrictData(t.district_code,e.qualification_name)?"":"bg-red-100"),children:Object(g.jsx)("div",{className:"w-14",children:Object(u.f)(n.getDistrictData(t.district_code,e.qualification_name))})}),Object(g.jsx)("td",{className:"border border-blue-300 ".concat(n.getDistrictDataAvailable(t.district_name,e.qualification_name)>=n.getDistrictData(t.district_code,e.qualification_name)?"bg-accent-400":"bg-red-100"," px-4 py-2"),children:Object(g.jsx)("div",{className:"w-14",children:Object(u.f)(n.getDistrictDataAvailable(t.district_name,e.qualification_name))})})]})})})})},s+1)})),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-primary-600 text-center",children:null===t.totals?"Loading...":Object(u.f)(t.totals.Total.Total)}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-gray-800 text-center",children:Object(u.f)(t.total_placed)}),Object(g.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-blue-600 text-center",children:null===t.totals?0:Object(u.f)(t.totals.Total.Total-t.total_placed)})]},e+1)}))})]}),this.state.pinned_districts.length>0&&"3"!==(null===(r=this.props.auth.role)||void 0===r?void 0:r.role_id)&&"2"!==(null===(i=this.props.auth.role)||void 0===i?void 0:i.role_id)&&"1"!==(null===(a=this.props.auth.role)||void 0===a?void 0:a.role_id)&&Object(g.jsx)("div",{className:"my-5",children:Object(g.jsx)(j.a,{onClick:function(){return n.setState({pinned_districts:[]})},theme:"accent",children:"Unpin selected district"})}),"3"===(null===(c=this.props.auth.role)||void 0===c?void 0:c.role_id)&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"my-3",children:"You can view details for the above summary by viewing schools lists and generating PDF format placement reports"}),Object(g.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(g.jsx)(x.b,{className:"bg-accent-800 font-bold px-3 py-2 rounded hover:bg-yellow-800 hover:text-white",to:"/",children:"View placement list details"}),Object(g.jsx)(x.b,{className:"border border-accent-900 text-accent-900 font-bold px-3 py-2 rounded hover:bg-accent-800 hover:text-black",to:"/",children:"Print placement reports"})]})]})]})}}]),s}(n.Component),D=new Date,w=function(t){Object(a.a)(s,t);var e=Object(c.a)(s);function s(t){var i;return Object(r.a)(this,s),(i=e.call(this,t)).setLoading=function(t){return i.setState({loading:t})},i.FC_LoadGeneralReport=function(){i.setLoading(!0),null!==i.props.basic.academic_calender&&Object(d.Ub)(i.props.basic.academic_calender.academic_year_id,i.state.selected_month,(function(t,e,s){i.setLoading(t),!1===t&&""===e&&null!==s?(i.setState({generalReport:s,loading:!1}),console.log("Test report",s)):""!==e&&i.setState({error:e,generalReport:[]})}))},i.componentDidMount=function(){null===i.state.districts_limits&&(i.setLoading(!0),Object(d.Tb)((function(t,e){i.setState({loading:t,districts_limits:e})}))),null===i.state.districts&&(i.setLoading(!0),Object(b.b)((function(t,e,s){null!==e&&i.setState({districts:e,loading:!1})}))),"general"===i.state.report_type&&null===i.state.generalReport&&i.FC_LoadGeneralReport()},i.state={loading:!1,report_type:"general",generalReport:null,selected_month:u.c[D.getMonth()],error:"",districts:null,districts_limits:null},i}return Object(i.a)(s,[{key:"render",value:function(){var t=this;return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"px-3 md:px-6 py-6",children:[Object(g.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(g.jsx)("div",{className:"text-2xl font-extrabold",children:"General placement report"}),Object(g.jsxs)("div",{className:"flex flex-row items-center justify-end gap-1 bg-white p-1 rounded",children:[Object(g.jsx)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"general"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("general"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"),children:"General report"}),Object(g.jsx)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"vacant"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("vacant"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"),children:"Posts Management"})]})]}),Object(g.jsxs)("div",{className:"bg-white p-3 rounded mt-5",children:[""!==this.state.error&&Object(g.jsxs)("div",{title:"Click to close alert",onClick:function(){return t.setState({error:""})},className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 text-base font-light w-full cursor-pointer hover:bg-red-100 flex flex-row items-center justify-between gap-3 mb-3 animate__animated animate__shakeX",children:[Object(g.jsx)("span",{children:this.state.error}),Object(g.jsx)("div",{children:Object(g.jsx)(l.n,{className:"text-2xl hover:text-red-600"})})]}),Object(g.jsxs)("div",{children:["general"===this.state.report_type&&Object(g.jsx)(y,{loading:this.state.loading,generalReport:this.state.generalReport,selected_month:this.state.selected_month,error:this.state.error,districts:this.state.districts,basic:this.props.basic,auth:this.props.auth}),"vacant"===this.state.report_type&&null!==this.state.districts_limits&&null!==this.state.generalReport&&Object(g.jsx)(N,{districts:this.state.districts,basic:this.props.basic,auth:this.props.auth,districts_limits:this.state.districts_limits,districts_placements:this.state.generalReport})]})]})]})})}}]),s}(n.Component),S=Object(o.b)((function(t){return{auth:t.auth,basic:t.basic,placement:t.placement}}),{})(w)}}]);
//# sourceMappingURL=27.7e40e4ab.chunk.js.map