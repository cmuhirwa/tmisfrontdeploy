(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[32],{410:function(e,t,i){"use strict";i(4);var a=i(1);t.a=function(e){var t=e.title,i=e.remain,s=e.total;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:" ".concat(0===i?"bg-green-900":i<5?"bg-yellow-900":"bg-primary-800","  rounded text-center mr-2 overflow-hidden w-52"),children:[Object(a.jsxs)("div",{className:"p-2 pb-1",children:[Object(a.jsx)("h4",{className:"text-white text-lg font-bold m-0",children:t}),Object(a.jsxs)("div",{className:"flex text-center",children:[Object(a.jsxs)("div",{className:"-mt-0.5 px-2 border-r flex-1",children:[Object(a.jsx)("label",{className:"text-sm text-gray-400",children:"Distributed:"}),Object(a.jsx)("h1",{className:"text-xl -mt-2 font-bold text-white",children:s-i})]}),Object(a.jsxs)("div",{className:"-mt-0.5 px-2 flex-1",children:[Object(a.jsx)("label",{className:"text-sm text-gray-400",children:"Remaining:"}),Object(a.jsx)("h1",{className:"text-xl -mt-2 font-bold text-white",children:i})]})]})]}),Object(a.jsx)("div",{className:"bg-blue-300  text-black px-2 py-1",children:Object(a.jsxs)("label",{className:"text-sm",children:["Total: ",Object(a.jsx)("b",{children:s})]})})]})})}},411:function(e,t,i){"use strict";var a=i(28),s=i(4),c=i(23),r=i(1);t.a=function(e){var t=e.onChange,i=e.onChangeComment,d=e.value,n=e.comment,l=e.error,o=e.placeholderComment,m=e.max,u=e.onSave,b=e.onCancel,_=e.loading,j=e.minValue,h=Object(s.useState)(""),x=Object(a.a)(h,2),p=x[0],f=x[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("td",{className:" border  w-20 relative",children:[Object(r.jsx)("input",{type:"number",className:"w-full p-1 border-4 rounded-t border-primary-800 font-bold bg-transparent",value:d,onChange:t,max:m,autoFocus:!0,min:j}),Object(r.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster absolute p-1 bg-primary-800 rounded-b -mt-0.5 rounded-tl  z-40 w-80 right-0 ",children:[""!==p&&Object(r.jsx)("div",{className:"bg-red-200 text-red-800 px-2 animate__animated animate__bounceIn  py-1 rounded text-sm",children:p}),""!==l&&Object(r.jsx)("div",{className:"bg-red-200 text-red-800 px-2 animate__animated animate__bounceIn  py-1 rounded text-sm",children:l}),Object(r.jsx)("label",{className:"px-1 text-sm text-gray-300",htmlFor:"selected_comment",children:"Comment"}),Object(r.jsx)("div",{className:"px-1",children:Object(r.jsx)("textarea",{disabled:_,id:"selected_comment",className:"w-full p-1 rounded bg-white dark:bg-primary-900 dark:text-white",value:n,onChange:i,placeholder:o})}),Object(r.jsxs)("div",{className:"flex gap-2 px-1 pb-1",children:[Object(r.jsx)(c.a,{loading:_,onClick:function(){isNaN(+d)||""===d?(f("Valid number is required"),setTimeout((function(){f("")}),2e3)):void 0!==j&&+d<+j?(f("The minimum value is ".concat(j)),setTimeout((function(){f("")}),2e3)):(u(),f(""))},theme:"success",disabled:_,children:"Save change"}),!1===_&&Object(r.jsx)(c.a,{loading:_,onClick:b,theme:"danger",children:"Cancel"})]})]})]})})}},547:function(e,t,i){"use strict";i.r(t),i.d(t,"CountryPostDistribution",(function(){return q}));var a=i(40),s=i(9),c=i(19),r=i(20),d=i(21),n=i(22),l=i(4),o=i.n(l),m=i(36),u=i(13),b=i(50),_=i(410),j=i(53),h=i(89),x=i(133),p=i(25),f=i(411),v=i(17),O=i(1),g=function(e){Object(d.a)(i,e);var t=Object(n.a)(i);function i(e){var r;return Object(c.a)(this,i),(r=t.call(this,e)).submitLogin=function(e){e.preventDefault()},r.selectRequest=function(e,t){console.log({req:e,request:t,selected_id:r.state.selected_request_id}),""===r.state.selected_request_id&&r.setState({selected_comment:void 0===t?"":t.distribution_comment,selected_request_id:e.post_request_id,selected_value:void 0===t?"0":t.limits+""})},r.cancelRequest=function(){r.setState({selected_comment:"",selected_request_id:"",selected_value:"0",error:{target:null,msg:""}})},r.saveRequest=function(e,t,i){if(null!==r.props.basic.academic_calender){var c=r.props.basic.academic_calender.academic_year_id;r.setState({loading:!0,error:{target:null,msg:""}}),Object(u.Pb)({academic_year_id:c,distribution_comment:r.state.selected_comment,district_code:t.district_code,limits:+r.state.selected_value,minecofin_limit_id:void 0===e?"2":e.minecofin_limit_id,qualification_id:t.qualification_id},(function(e,t,c){!0===e&&null!==t?null!==t.academic_distributed?(r.cleanAlert(),r.setState({loading:!1,error:{target:"main-success",msg:"Post updated successful"},remain_post_by_levels:r.state.remain_post_by_levels.map((function(e){var i=t.total_distributed.find((function(t){return t.qualification_id===e.qualification_id}));return Object(s.a)(Object(s.a)({},e),{},{remain:void 0===i?0:+i.remaining_limits})})),requests:null===t.academic_distributed?r.state.requests:!1===i?[].concat(Object(a.a)(r.state.requests),[{academic_year_id:t.academic_distributed.academic_year_id,archive:t.academic_distributed.archive,archived_by:t.academic_distributed.archived_by,archived_date:t.academic_distributed.archived_date,created_by:t.academic_distributed.created_by,created_date:t.academic_distributed.created_date,dde_post_request:t.academic_distributed.dde_post_request,distribution_comment:t.academic_distributed.distribution_comment,district_code:t.academic_distributed.district_code,district_name:t.academic_distributed.district_name,head_teacher_post_request:t.academic_distributed.head_teacher_post_request,limits:t.academic_distributed.limits,minecofin_limit_id:t.academic_distributed.minecofin_limit_id,qualification_id:t.academic_distributed.qualification_id,reb_distribution_id:t.academic_distributed.reb_distribution_id,updated_by:t.academic_distributed.updated_by,updated_date:t.academic_distributed.updated_date}]):r.state.requests.map((function(e){var i;return e.qualification_id===(null===(i=t.academic_distributed)||void 0===i?void 0:i.qualification_id)&&e.district_code===t.academic_distributed.district_code&&e.academic_year_id===t.academic_distributed.academic_year_id?Object(s.a)(Object(s.a)({},e),{},{limits:+t.academic_distributed.limits,distribution_comment:t.academic_distributed.distribution_comment}):e})),selected_comment:"",selected_value:"",selected_request_id:""})):r.setState({loading:!1,error:{target:"update-error",msg:t.message}}):r.setState({loading:!1,error:{target:"update-error",msg:c}})}))}},r.componentDidMount=function(){if(null!==r.props.basic.academic_calender){var e=r.props.basic.academic_calender.academic_year_id;Object(u.F)(e,(function(e,t,i){!0===e&&null!==t?r.setState({loading_requests:!1,requests:t.academic_distributed.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{limits:+e.limits})})),remain_post_by_levels:r.props.basic.qualifications.map((function(e){var i=t.total_distributed.find((function(t){return t.qualification_id===e.qualification_id}));return{qualification_id:e.qualification_id,qualification_title:e.qualification_name,remain:void 0===i?0:+i.remaining_limits,total:void 0===i?0:+i.limits}})),districts_request:t.districts_request,districts:t.districts}):r.setState({loading_requests:!1,error:{msg:i,target:"requests-error"}})}))}},r.state={loading:!1,requests:[],remain_post_by_levels:[],error:{target:null,msg:""},loading_requests:!0,selected_level:"",selected_request_id:"",selected_value:"0",selected_comment:"",selected_auto_level:"",search:"",districts_request:[],districts:[]},r}return Object(r.a)(i,[{key:"cleanAlert",value:function(){var e=this;setTimeout((function(){e.setState({error:{target:null,msg:""}})}),2e3)}},{key:"render",value:function(){var e=this,t=""===this.state.selected_level?this.state.districts_request:this.state.districts_request.filter((function(t){return t.qualification_id===e.state.selected_level}));return t=Object(v.n)(t,this.state.search,{district_name:!0}),Object(O.jsxs)(O.Fragment,{children:["main-success"===this.state.error.target&&Object(O.jsx)(b.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main"===this.state.error.target&&Object(O.jsx)(b.a,{theme:"danger",children:this.state.error.msg}),"loading-update-error"===this.state.error.target&&Object(O.jsx)(b.a,{theme:"danger",children:this.state.error.msg}),Object(O.jsx)("div",{className:"sticky top-1 z-50",children:Object(O.jsx)(j.a,{children:Object(O.jsxs)("div",{className:"flex items-center mt-2",children:[Object(O.jsxs)("div",{className:" flex-1 pr-3",children:[Object(O.jsx)(h.a,{children:"REB Distribution"}),Object(O.jsxs)("div",{className:"pt-2 pr-4 w-40 ",children:[Object(O.jsx)("label",{className:"text-gray-600 block -mb-2 text-sm ",children:"Qualification:"}),Object(O.jsx)(x.a,{MainContainer_className:"w-full",data:[{title:"All qualifications",value:""}].concat(Object(a.a)(this.props.basic.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})))),error:"",name:"select_level",onChange:function(t){return e.setState({selected_level:t.target.value})},label:"",placeholder:"Select",value:this.state.selected_level,size:"sm"})]})]}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("div",{className:"flex",children:this.state.remain_post_by_levels.map((function(e,t){return t>=5?null:Object(O.jsx)(_.a,{remain:e.remain,title:e.qualification_title,total:e.total},t)}))})})]})})}),Object(O.jsx)(j.a,{children:Object(O.jsxs)("div",{className:"mt-3",children:[Object(O.jsx)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded"}),Object(O.jsxs)("table",{className:"w-full text-left",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"bg-blue-200 bg-opacity-20",children:[Object(O.jsx)("th",{className:"p-1 border",children:"#"}),Object(O.jsx)("th",{className:"p-1 border",children:"District"}),Object(O.jsx)("th",{className:"p-1 border",children:"Qualification"}),Object(O.jsx)("th",{className:"p-1 border",children:"Existing"}),Object(O.jsx)("th",{className:"p-1 border",children:"HT Request"}),Object(O.jsx)("th",{className:"p-1 border",children:"DDE Request"}),Object(O.jsx)("th",{className:"p-1 border",children:"Total distributed "}),Object(O.jsx)("th",{className:"p-1 border",children:"Total posts "}),Object(O.jsx)("th",{className:"p-1 border",children:"Comment"})]})}),Object(O.jsx)("tbody",{children:!0===this.state.loading_requests?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:10,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(O.jsx)(h.a,{size:"md",children:Object(O.jsx)(p.a,{})})})}):t.length<=0?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:10,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(O.jsx)(h.a,{size:"md",children:"No results found"})})}):t.map((function(t,i){var a=e.props.basic.qualifications.find((function(e){return e.qualification_id===t.qualification_id})),s=e.state.districts.find((function(e){return e.district_code===t.district_code})),c=e.state.requests.find((function(e){return e.qualification_id===t.qualification_id&&e.district_code===t.district_code}));return Object(O.jsx)(l.Fragment,{children:Object(O.jsxs)("tr",{className:"border rounded hover:bg-blue-500 hover:bg-opacity-20",children:[Object(O.jsx)("td",{className:"p-2 border",children:i+1},i),Object(O.jsx)("td",{className:"p-2 border",children:null===s||void 0===s?void 0:s.district_name}),Object(O.jsx)("td",{className:"p-2 border",children:null===a||void 0===a?void 0:a.qualification_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.existing_post}),Object(O.jsx)("td",{className:"p-2 border",children:t.ht_post_request}),Object(O.jsx)("td",{className:"p-2 border",children:t.dde_post_request}),e.state.selected_request_id===t.post_request_id?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(f.a,{error:"update-error"===e.state.error.target?e.state.error.msg:"",comment:e.state.selected_comment,onChangeComment:function(t){return e.setState({selected_comment:t.target.value})},loading:e.state.loading,max:12,onCancel:e.cancelRequest.bind(e),onChange:function(t){return e.setState({selected_value:t.target.value})},onSave:e.saveRequest.bind(e,c,t,void 0!==c),placeholderComment:"Add comment",value:e.state.selected_value})}):Object(O.jsx)("td",{className:"p-2 border w-20 font-bold bg-green-50 text-green-900 cursor-pointer",onClick:e.selectRequest.bind(e,t,c),children:void 0===c?0:c.limits}),Object(O.jsx)("td",{className:"p-2 border w-20 font-bold  cursor-pointer",children:void 0===c?0:+c.limits+ +t.existing_post}),Object(O.jsx)("td",{className:"p-2 border",title:void 0===c?"":c.distribution_comment,children:Object(v.o)(void 0===c?"":c.distribution_comment,20)})]})},i)}))})]})]})})]})}}]),i}(o.a.Component),q=Object(m.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(g)}}]);
//# sourceMappingURL=32.fee83a06.chunk.js.map