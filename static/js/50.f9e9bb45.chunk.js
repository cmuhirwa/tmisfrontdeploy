(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[50],{353:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var i=s(27),r=s(28),c=s(29),a=s(30),n=s(4),o=s.n(n),l=s(17),d=s(32),h=s(13),u=s(359),_=s(38),j=s(53),m=s(36),p=s(44),b=s(54),f=s(2),x=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){r.props.district_code||r.loadDistricts(),void 0===r.props.school_code&&r.setState({current_school:!1})},r.loadDistricts=function(){r.state.districts.length<=0&&(r.setState({loading_districts:!0}),Object(h.x)((function(e,t,s){e?r.setState({loading_districts:!1,districts:t}):r.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},r.selectDistrict=function(e){r.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),r.reloadDistrictResurces(e.district_code)},r.reloadDistrictResurces=function(e){e&&(r.setState({loading_resource:!0}),r.props.FC_GetAssignAssets(e,(function(e,t){e?r.setState({loading_resource:!1}):r.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,district_code:r.props.district_code?r.props.district_code:"",district_name:r.props.district_name?r.props.district_name:"",current_school:!0,selected_district:r.props.district_code?r.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,i,r,c=this;return"user-updates-success"===this.state.error.target?Object(f.jsx)(j.a,{className:"animate__animated animate__zoomIn ",children:Object(f.jsxs)("div",{className:"text-center py-10",children:[Object(f.jsx)(l.l,{className:"text-8xl text-green-600 mx-auto"}),Object(f.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(f.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(f.jsx)("br",{})," you can close the window and continue with other users"]}),Object(f.jsx)(_.a,{theme:"success-light",onClick:function(){c.props.close(),c.props.refreshApp&&c.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(f.jsxs)(f.Fragment,{children:["main-error"===this.state.error.target&&Object(f.jsx)(b.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(f.jsx)(b.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(f.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return c.setState({open_select_district:!1})}}),Object(f.jsx)(p.c,{backDrop:!0,backDropClose:!0,close:function(){return c.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:p.b.default,widthSizeClass:p.a.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(f.jsx)(m.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(f.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(f.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(f.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(f.jsx)("h6",{children:e.district_code}),Object(f.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(f.jsx)(_.a,{theme:"accent-light",size:"sm",onClick:c.selectDistrict.bind(c,e),children:"Select district"})]},t)}))})})]}),Object(f.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(f.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(f.jsx)(_.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(f.jsx)(j.a,{children:Object(f.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(f.jsx)("div",{className:"",children:Object(f.jsx)(l.c,{className:"text-6xl"})}),Object(f.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(f.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(f.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(f.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(f.jsx)("b",{children:null===(i=this.props.userDetails)||void 0===i?void 0:i.email})]})]})]})}),Object(f.jsx)("div",{className:"my-2 hidden",children:Object(f.jsx)(j.a,{children:Object(f.jsxs)("div",{className:"flex gap-3",children:[Object(f.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(f.jsx)(f.Fragment,{})}),Object(f.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(f.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(r=this.props)||void 0===r?void 0:r.school_name)}),Object(f.jsx)(_.a,{onClick:function(){return c.setState({current_school:!c.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(u.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!1,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){c.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){c.props.refreshApp&&c.props.refreshApp(),c.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(o.a.Component),g=Object(d.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.r})(x)},549:function(e,t,s){"use strict";s.r(t),s.d(t,"RegisterForDataValidation",(function(){return x}));var i=s(27),r=s(28),c=s(29),a=s(30),n=s(4),o=s.n(n),l=s(32),d=s(13),h=s(359),u=s(38),_=s(53),j=s(54),m=s(61),p=s(353),b=s(2),f=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).CheckNidHandler=function(e){if(e.preventDefault(),r.state.nid.length<=4)return r.setState({error:{target:"nid",msg:"NID or passport is required!"}});r.setState({loading:!0,user_found:null}),Object(d.hb)(r.state.nid,(function(e,t,s){e?r.setState({user_details:t,loading:!1,user_found:null!==t&&null!==t.user_id?"FOUND":"NOT-FOUND"}):r.setState({loading:!1,user_found:"NOT-FOUND"})}))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,error:{msg:"",target:null},nid:"",user_details:null,user_found:null},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,i,r,c,a,n,o=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:" bg-white p-2 flex items-center",children:[null!==this.state.user_found&&Object(b.jsx)(u.a,{onClick:function(){return o.setState({user_found:null})},theme:"default",children:"Back"}),Object(b.jsx)("h1",{className:"text-2xl font-bold pl-3",children:"Create new staff"})]}),"main-error"===this.state.error.target&&Object(b.jsx)(j.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(b.jsx)(j.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(b.jsxs)(_.a,{children:[null===this.state.user_found&&Object(b.jsx)("form",{onSubmit:this.CheckNidHandler,children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(m.a,{error:"nid"===this.state.error.target?this.state.error.msg:"",label:"Nid/Passport",name:"",onChange:function(e){return o.setState({nid:e.target.value})},placeholder:"Enter NID/Phone number",value:this.state.nid,disabled:this.state.loading})}),Object(b.jsx)("div",{className:"pt-8 pl-2",children:Object(b.jsx)(u.a,{loading:this.state.loading,type:"submit",children:"Check Id"})})]})}),null!==this.state.user_found&&Object(b.jsx)(b.Fragment,{children:"FOUND"===this.state.user_found&&null!==this.state.user_details&&null!==this.state.user_details.user_id?Object(b.jsx)("div",{children:null!==this.props.auth.school?Object(b.jsxs)("div",{className:"text-center py-4",children:[Object(b.jsx)("h1",{className:"text-2xl font-bold",children:"Teacher Already in the system and allocated to another school"}),Object(b.jsx)("p",{children:"For more info, call the DDE"})]}):Object(b.jsx)(p.a,{user_id:this.state.user_details.user_id,userDetails:{email:this.state.user_details.email?this.state.user_details.email:"",full_name:null!==(e=this.state.user_details)&&void 0!==e&&e.full_name?null===(t=this.state.user_details)||void 0===t?void 0:t.full_name:"",nid:null!==(s=this.state.user_details)&&void 0!==s&&s.nid?null===(i=this.state.user_details)||void 0===i?void 0:i.nid:"",staff_code:null!==(r=this.state.user_details)&&void 0!==r&&r.staff_code?null===(c=this.state.user_details)||void 0===c?void 0:c.staff_code:""},close:function(){return o.setState({user_found:null})}})}):Object(b.jsx)("div",{children:Object(b.jsx)(h.a,{district_id:null!==(a=this.props.auth.district)&&void 0!==a&&a.district_code?null===(n=this.props.auth.district)||void 0===n?void 0:n.district_code:"",select_district_active:!0,nid_value:this.state.nid,assignType:"REGISTER",exclude_roles:["3","4","18","21","22","25","26"],only_post_for_school:!0,user_id:"",formAccess:{first_name:!0,last_name:!0,full_name:!0,middle_name:!0,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!0,last_name:!0,full_name:!0,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){o.setState({error:{msg:"A new staff has been registered",target:"main-success"}})}})})})]})]})}}]),s}(o.a.Component),x=Object(l.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:d.r})(f)}}]);
//# sourceMappingURL=50.f9e9bb45.chunk.js.map