(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[16],{374:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return i}));var a=s(15),r=function(e,t){var s=t.find((function(t){return e.position_code===t.position_code}));return{match_position:void 0!==s,position:void 0!==s?{position_code:null===s||void 0===s?void 0:s.position_code,position_name:null===s||void 0===s?void 0:s.position_name,qualification_id:null===s||void 0===s?void 0:s.qualification_id,qualification_name:null===s||void 0===s?void 0:s.qualification_name}:{position_code:"",position_name:e.position,qualification_id:"",qualification_name:""}}},i=function(e){var t,s,a,r,i=[];if(!e.user)return{validated:!1,errors:["You are not authenticated, please refresh your browser or login later"]};var c=e.user;return(null===(t=e.user)||void 0===t||!t.first_name||c.first_name.length<=2)&&i.push("First name is not valid"),(!c.last_name||c.last_name.length<=2)&&i.push("Last name is not valid"),(!c.full_name||c.full_name.length<=2)&&i.push("Full names"),(!c.hired_date||c.hired_date.length<=2)&&i.push("Hired date is not valid"),(!c.marital_status||c.marital_status.length<=2)&&i.push("Martial status not valid"),(!c.nid||c.nid.length<=4)&&i.push("NID is not valid"),(!c.phone_numbers||c.phone_numbers.length<=8)&&i.push("Phone number is not valid"),e.position&&e.position.position_code||i.push("You have no position, please ask your head teacher"),e.role&&e.role.role_id||i.push("There is no role assigned to you"),(!e.school||null===(s=e.school)||void 0===s||!s.school_name||(null===(a=e.school)||void 0===a?void 0:a.school_name.length)<=1)&&i.push("No schools found assigned to you!"),(!c.sex||c.sex.length<=2)&&i.push("No sex selected"),(!e.role||(null===(r=e.role)||void 0===r?void 0:r.role_id.length)<=0)&&i.push("Your role id is not validated"),{errors:i,validated:!(i.length>0)}};t.b=function(e){var t,s,r=[];if((!e.first_name||e.first_name.length<=2)&&r.push("First name is not valid"),(!e.last_name||e.last_name.length<=2)&&r.push("Last name is not valid"),(!e.full_name||e.full_name.length<=2)&&r.push("Full names"),(!e.hired_date||e.hired_date.length<=2)&&r.push("Hired date is not valid"),(!e.marital_status||e.marital_status.length<=2)&&r.push("Martial status not valid"),(!e.nationality||e.nationality.length<=2)&&r.push("Nationality is not valid"),e.nid&&e.nid.length>=2&&(16!==e.nid.length&&r.push("NID is not valid"),Object(a.j)(e.nid)||r.push("NID should be numbers only")),(!e.nid||e.nid.length<=0)&&(!e.passport||e.passport.length<=0)&&r.push("Provide NID or a passport"),(!e.dob||e.dob.length<=2)&&r.push("DOB is not valid (".concat(e.dob,")")),e.dob){var i=new Date(e.dob).getFullYear();(i>=2006||i<=1940)&&r.push("DOB is not valid (".concat(e.dob,")"))}((!e.hired_date||e.hired_date.length<=2)&&r.push("Hire date is not valid (".concat(e.hired_date,")")),e.hired_date)&&(new Date(e.hired_date).getFullYear()<=1955&&r.push("Hire date is not valid (".concat(e.hired_date,")")));return(!e.phone_numbers||e.phone_numbers.length<=8)&&r.push("Phone number is not valid"),(!e.position||e.position.length<=2)&&r.push("No selected position"),(!e.qualification||e.qualification.length<=1)&&r.push("No selected qualification"),(!e.role||e.role.length<=2)&&r.push("No selected role"),(!e.school||null===(t=e.school)||void 0===t||!t.school_name||(null===(s=e.school)||void 0===s?void 0:s.school_name.length)<=1)&&r.push("Invalid School"),(!e.sex||e.sex.length<=2)&&r.push("No sex selected"),(!e.specialization||e.specialization.length<=2)&&r.push("Invalid specialization"),(!e.staff_code||e.staff_code.length<=2)&&r.push("Invalid Staff category"),"1"===e.role_id&&(!e.teacher_hierarch||e.teacher_hierarch.length<=0)&&r.push("This user is a teacher, and must have at least one course"),(!e.role||e.role.length<=0)&&r.push("Your role id is not validated"),(!e.teaching_level_id||e.teaching_level_id.length<=2)&&r.push("Teaching level does not found"),(!e.education_certificate_id||e.education_certificate_id.length<=2)&&r.push("Education certificate does not found"),{errors:r,validated:!(r.length>0)}}},393:function(e,t,s){"use strict";var a=s(3),r=s(11),i=s(29),c=s(6),o=s(41),n=s(19),l=s(20),d=s(21),h=s(22),u=s(4),b=s(16),j=s(39),m=s(377),p=s(12),x=s(7),f=s.n(x),_=s(8),g=s(15),v=s(23),O=s(9),y=s(27),N=s(25),w=s(1),S=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var l;return Object(n.a)(this,s),(l=t.call(this,e)).addPositionToSchool=function(e){l.setState({schoolPositionsTemp:[e].concat(Object(o.a)(l.state.schoolPositionsTemp.filter((function(t){return t.position_id!==e.position_id}))))})},l.FilterByPositionsHavingTeacher=function(){return l.state.schoolPositionsTemp.sort((function(e,t){var s=0,a=l.props.schoolPositions.find((function(t){return t.position_code===e.position_code}));return void 0!==a&&(s=parseInt(a.total_on_position)),s>0?-1:1}))},l.addSchoolPositions=Object(c.a)(Object(a.a)().mark((function e(){var t,s,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to add these positions?")){e.next=23;break}if(!(l.state.schoolPositionsTemp.length>0&&void 0===l.props.school?l.props.auth.school:l.props.school)){e.next=23;break}Object(_.a)(),t=[],l.setState({loading:!0}),s=Object(i.a)(l.state.schoolPositionsTemp);try{for(s.s();!(c=s.n()).done;)o=c.value,t.push({school_code:void 0===l.props.school?l.props.auth.school.school_code:l.props.school.school_code,position_code:o.position_code})}catch(a){s.e(a)}finally{s.f()}return console.log("Positions codes: ",t),e.prev=8,e.next=11,f.a.post("".concat(p.e,"/schoolposition/assign"),t);case 11:l.props.appendPositionsToSchool(l.state.schoolPositionsTemp),l.setState({schoolPositionsTemp:[]}),l.setState({loading:!1}),l.setState({success:"Positions added successfully!",error:""}),alert("Positions added successfully!"),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(8),l.setState({loading:!1}),l.setState({error:Object(O.a)(e.t0)}),console.log("Err: ",Object(r.a)({},e.t0));case 23:case"end":return e.stop()}}),e,null,[[8,18]])}))),l.RemoveSchoolPosition=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,s){var i,c,o,n,d,h,u,b;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({loading:!0}),e.prev=1,e.next=4,f.a.post("".concat(p.e,"/schoolposition/delete/").concat(t),{school_code:s});case 4:e.sent&&(l.setState({success:"Positions added successfully!",error:""}),l.props.removePositionsToSchool(t)),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error res: ",null===(i=e.t0.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.users),void 0!==(null===(o=e.t0.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.users)&&e.t0.response.data.users.length>0?(d=l.props.schoolPositions.find((function(e){return e.school_has_position_id===t})),void 0!==(h=l.props.positions.find((function(e){return e.position_code===(null===d||void 0===d?void 0:d.position_code)})))?l.setState({selected_position_users_on_delete:{position:h,data:null===(u=e.t0.response)||void 0===u||null===(b=u.data)||void 0===b?void 0:b.users}}):l.setState({error:"Invalid Position selected!"})):l.setState({error:Object(O.a)(e.t0)}),l.setState({loading:!1}),console.log("Err: ",Object(r.a)({},e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}(),l.PositionsSortByHavingTeacher=function(){var e=[];return e=(e=l.props.positions.sort((function(e,t){var s=l.props.schoolPositions.find((function(t){return t.position_code===e.position_code})),a=l.props.schoolPositions.find((function(e){return e.position_code===t.position_code}));return void 0!==s&&void 0!==a?parseInt(s.total_on_position)>parseInt(a.total_on_position)?-1:1:0}))).filter((function(e){return void 0===l.props.schoolPositions.find((function(t){return t.position_code===e.position_code}))})),Object(g.v)(e,l.state.searchPositionValue)},l.state={searchPositionValue:"",schoolPositionsTemp:[],edit:!1,loading:!1,success:"",error:"",selected_position_users_on_delete:null},l}return Object(l.a)(s,[{key:"render",value:function(){var e,t,s=this;return Object(w.jsxs)(u.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"bg-white dark:bg-dark-800 p-3 rounded overflow-y-auto",style:null===this.state.selected_position_users_on_delete?{}:{maxHeight:"80vh"},children:[Object(w.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2 justify-between w-full",children:[Object(w.jsx)("span",{className:"text-2xl font-bold text-primary-800",children:!0===this.state.edit?"Assign positions to school":"School positions list"}),Object(w.jsx)("div",{children:Object(w.jsxs)(v.a,{onClick:function(){return s.setState({edit:!s.state.edit})},theme:!0===this.state.edit?"default":"accent",className:"flex flex-row items-center gap-3 animate__animated ".concat(!1===this.state.edit?"animate__zoomIn":"animate__fadeInLeft"),children:[Object(w.jsx)("div",{children:!0===this.state.edit?Object(w.jsx)(b.g,{className:"text-2xl"}):Object(w.jsx)(b.d,{className:"text-2xl"})}),Object(w.jsx)("span",{children:!0===this.state.edit?"Back to list":"Add new positions"})]})})]}),void 0!==this.props.close&&Object(w.jsx)("div",{children:Object(w.jsx)("div",{onClick:function(){return s.props.close&&s.props.close()},className:"bg-gray-100 hover:bg-yellow-100 flex items-center justify-center p-1 cursor-pointer rounded-full",children:Object(w.jsx)(b.r,{className:"text-3xl"})})})]}),""!==this.state.success&&Object(w.jsx)("div",{onClick:function(){return s.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(w.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(w.jsxs)("div",{children:["Success: ",this.state.success]}),Object(w.jsx)("div",{children:Object(w.jsx)(b.r,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(w.jsx)("div",{onClick:function(){return s.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(w.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(w.jsxs)("div",{children:["Error: ",this.state.error]}),Object(w.jsx)("div",{children:Object(w.jsx)(b.r,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(w.jsxs)("div",{className:"grid md:grid-cols-".concat(!0===this.state.edit?"2":"1"),children:[Object(w.jsxs)("div",{className:"col-span-1 border-r pr-2 ".concat(!0===this.state.edit?"":"hidden"),children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)(j.a,{onChange:function(e){return s.setState({searchPositionValue:e.target.value})},error:"",placeholder:"Search position...",value:this.state.searchPositionValue,type:"search",name:"post",label:"Search"})}),Object(w.jsx)("div",{className:"h-screen overflow-y-auto",children:0===this.PositionsSortByHavingTeacher().length?Object(w.jsx)("div",{children:"No positions found!"}):this.PositionsSortByHavingTeacher().map((function(e,t){var a;return Object(w.jsxs)("div",{className:"border border-gray-300 px-3 py-2 flex flex- justify-between group bg-white hover:bg-blue-50 hover:border-blue-300 gap-3  items-center cursor-pointer my-1 rounded",onClick:function(){s.addPositionToSchool(e)},children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)("div",{className:"flex flex-row items-center justify-between",children:Object(w.jsxs)("div",{className:"flex flex-row gap-3 items-center text-base font-bold",children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"flex items-center justify-center font-normal rounded-full h-8 -ml-1 w-8 border border-blue-400 bg-blue-100 text-sm",children:t+1})}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsxs)("span",{className:"font-light",children:[e.position_code,"-"]}),Object(w.jsxs)("span",{className:"",children:[e.position_name," (",e.qualification_name,")"]})]}),Object(w.jsxs)("div",{className:"text-sm font-light text-gray-500 group-hover:text-accent-900 -mt-1",children:["Level name: ",e.school_level_name]})]})]})})}),Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[void 0!==s.props.schoolPositions.find((function(t){return t.position_code===e.position_code}))&&Object(w.jsxs)("div",{className:"bg-yellow-100 rounded-full text-sm font-bold px-2 border border-yellow-400 truncate",children:["Total:"," ",null===(a=s.props.schoolPositions.find((function(t){return t.position_code===e.position_code})))||void 0===a?void 0:a.total_on_position]}),Object(w.jsx)("div",{className:"bg-blue-100 text-primary px-3 py-1 rounded cursor-pointer text-base text-primary-800 group-hover:text-white group-hover:bg-primary-800",children:"Select"})]})]},t+1)}))})]}),Object(w.jsxs)("div",{className:"col-span-1 px-3",children:[" ",Object(w.jsx)("div",{className:"flex flex-col border-b pb-3 border-accent-900 mt-2",children:Object(w.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(w.jsxs)("span",{className:"text-accent-900 text-xl font-bold",children:[void 0===this.props.school?null===(e=this.props.auth.school)||void 0===e?void 0:e.school_name:this.props.school.school_name," ","(",void 0===this.props.school?null===(t=this.props.auth.school)||void 0===t?void 0:t.school_code:this.props.school.school_code,")"]}),Object(w.jsx)("div",{className:"font-bold text-2xl",children:[].concat(Object(o.a)(this.state.schoolPositionsTemp),Object(o.a)(this.props.schoolPositions)).length})]})}),Object(w.jsx)("div",{className:"mt-3",children:0===[].concat(Object(o.a)(this.state.schoolPositionsTemp),Object(o.a)(this.props.schoolPositions)).length?Object(w.jsxs)("div",{className:"flex flex-col bg-gray-100 w-full justify-center items-center rounded-md p-4",children:[Object(w.jsx)("div",{className:"text-7xl text-gray-400",children:Object(w.jsx)(m.d,{})}),Object(w.jsx)("span",{className:"text-3xl text-black",children:"School positions not found"}),Object(w.jsx)("span",{className:"text-sm text-gray-600",children:"This school has no positions assigned to it. Please select positions"})]}):Object(w.jsxs)("div",{children:[0!==this.state.schoolPositionsTemp.length&&Object(w.jsx)("div",{className:"text-xl text-primary-800 my-3 font-bold",children:"New pending"}),this.state.schoolPositionsTemp.map((function(e,t){return Object(w.jsx)("div",{className:"border rounded-md px-3 py-2 mb-2 group cursor-pointer ".concat(void 0!==s.state.schoolPositionsTemp.find((function(t){return t.position_id===e.position_id}))?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400 hover:bg-blue-100"," animate__animated animate__zoomIn"),children:Object(w.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)("div",{className:"flex flex-row items-center justify-between",children:Object(w.jsxs)("div",{className:"flex flex-row gap-3 items-center text-base font-bold",children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"flex items-center justify-center font-normal rounded-full h-8 -ml-1 w-8 border border-blue-400 bg-blue-100 text-sm",children:t+1})}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsxs)("span",{className:"font-light",children:[e.position_code,"-"]}),Object(w.jsxs)("span",{className:"",children:[e.position_name," (",e.qualification_name,")"]})]}),Object(w.jsxs)("div",{className:"text-sm font-light text-gray-500 group-hover:text-accent-900 -mt-1",children:["Level name: ",e.school_level_name]})]})]})})}),Object(w.jsx)("div",{className:"",children:Object(w.jsx)("div",{onClick:function(){s.setState({schoolPositionsTemp:s.state.schoolPositionsTemp.filter((function(t){return t.position_id!==e.position_id}))})},className:"bg-white text-accent-900 px-3 py-1 rounded cursor-pointer text-base border border-yellow-400",children:"Remove"})})]})},t+1)})),0!==this.state.schoolPositionsTemp.length&&Object(w.jsx)("div",{children:Object(w.jsx)(v.a,{onClick:function(){s.addSchoolPositions()},theme:"accent",children:"Submit positions"})}),0!==this.props.schoolPositions.length&&Object(w.jsx)("div",{className:"font-bold text-lg text-gray-500 my-3",children:"List of school position"}),this.props.schoolPositions.map((function(e,t){var a;return Object(w.jsxs)("div",{className:"border rounded-md px-3 py-2 mb-2 group cursor-pointer ".concat(void 0!==s.state.schoolPositionsTemp.find((function(t){return t.position_code===e.position_code}))?"bg-yellow-50 border-yellow-400":"bg-gray-100 hover:bg-blue-100"," flex flex-row items-center justify-between gap-4"),children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)("div",{className:"flex flex-row items-center justify-between",children:Object(w.jsxs)("div",{className:"flex flex-row gap-3 items-center text-base font-bold",children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"flex items-center justify-center font-normal rounded-full h-8 -ml-1 w-8 border border-blue-400 bg-blue-100 text-sm",children:t+1})}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsxs)("span",{className:"font-light",children:[e.position_code,"-"]}),Object(w.jsxs)("span",{className:"",children:[e.position_name," (",e.qualification_name,")"]})]}),Object(w.jsxs)("div",{className:"text-sm font-light text-gray-500 group-hover:text-accent-900 -mt-1",children:["Level name: ",e.school_level_name]})]})]})})}),Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsxs)("div",{className:"bg-yellow-100 rounded-full text-sm font-bold px-2 border border-yellow-400 truncate",children:["Total:"," ",null===(a=s.props.schoolPositions.find((function(t){return t.position_code===e.position_code})))||void 0===a?void 0:a.total_on_position]}),void 0!==s.props.schoolPositions.find((function(t){return t.position_code===e.position_code}))&&parseInt(s.props.schoolPositions.find((function(t){return t.position_code===e.position_code})).total_on_position)<=0&&Object(w.jsx)("div",{onClick:function(){""!==e.school_code&&!0===window.confirm("Are you sure do you want to remove this position")&&s.RemoveSchoolPosition(e.school_has_position_id,e.school_code)},className:"bg-white text-red-800 group-hover:text-white group-hover:bg-red-600 px-3 py-1 font-bold text-center rounded -mr-1",children:"Delete"}),void 0!==s.props.schoolPositions.find((function(t){return t.position_code===e.position_code}))&&parseInt(s.props.schoolPositions.find((function(t){return t.position_code===e.position_code})).total_on_position)>0&&Object(w.jsx)("div",{onClick:function(){return s.RemoveSchoolPosition(e.school_has_position_id,e.school_code)},className:"bg-blue-100 border border-white text-primary-800 group-hover:border-primary-800 hover:border-primary-800 group-hover:bg-primary-800 group-hover:text-white px-3 py-1 font-bold text-center rounded -mr-1",children:"Staffs"})]})]},t+1)}))]})})]})]})]})}),null!==this.state.selected_position_users_on_delete&&Object(w.jsx)(y.d,{backDrop:!0,theme:y.c.default,close:function(){return s.setState({selected_position_users_on_delete:null})},backDropClose:!1,widthSizeClass:y.b.extraLarge,displayClose:!1,padding:{body:!0},children:!0===this.state.loading?Object(w.jsxs)("div",{className:"bg-white rounded p-4",children:[Object(w.jsx)(N.a,{}),Object(w.jsx)("div",{className:"text-xl font-light ml-4 -mt-10",children:"Loading, please wait..."})]}):Object(w.jsxs)("div",{className:"bg-white",children:[Object(w.jsxs)("div",{className:"flex flex-row gap-3 justify-between",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"font-extrabold text-2xl",children:this.state.selected_position_users_on_delete.position.position_name}),Object(w.jsx)("div",{children:"List of staffs for the selected position"})]}),Object(w.jsx)("div",{onClick:function(){return s.setState({selected_position_users_on_delete:null})},className:"bg-accent-800 font-bold cursor-pointer px-3 py-2 rounded truncate w-max h-10 flex items-center justify-center",children:"Close window"})]}),Object(w.jsx)("div",{className:"mt-3",children:Object(w.jsxs)("table",{className:"w-full text-left text-base font-light",children:[Object(w.jsx)("thead",{className:"bg-primary-100",children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"px-3 py-1",children:"#"}),Object(w.jsx)("th",{className:"px-3 py-1",children:"Staff code"}),Object(w.jsx)("th",{className:"px-3 py-1",children:"Full name"}),Object(w.jsx)("th",{className:"px-3 py-1",children:"NID"}),Object(w.jsx)("th",{className:"px-3 py-1",children:"Phone number"})]})}),Object(w.jsx)("tbody",{children:this.state.selected_position_users_on_delete.data.map((function(e,t){return Object(w.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":""),children:[Object(w.jsx)("td",{className:"px-3 py-1",children:t+1}),Object(w.jsx)("td",{className:"px-3 py-1",children:e.staff_code}),Object(w.jsx)("td",{className:"px-3 py-1",children:e.full_name}),Object(w.jsx)("td",{className:"px-3 py-1",children:e.nid}),Object(w.jsx)("td",{className:"px-3 py-1",children:e.phone_numbers})]},t+1)}))})]})}),Object(w.jsx)("div",{className:"mt-3 w-full",children:Object(w.jsxs)("div",{className:"flex flex-row gap-2 w-full bg-accent-400 rounded-md p-4 border border-yellow-400",children:[Object(w.jsx)("div",{children:Object(w.jsx)(b.J,{className:"text-5xl"})}),Object(w.jsxs)("div",{className:"text-xl font-light text-black flex flex-col",children:[Object(w.jsx)("span",{className:"font-extrabold",children:"You can not remove this position!"}),Object(w.jsx)("span",{className:"text-base",children:"If you want to remove this position, you need to check these staffs before. Thus, if you decided to remove it, please remove these staffs before removing this position!"})]})]})})]})})]})}}]),s}(u.Component);t.a=S},447:function(e,t,s){"use strict";s.d(t,"a",(function(){return $}));var a=s(29),r=s(41),i=s(11),c=s(19),o=s(20),n=s(21),l=s(22),d=s(4),h=s.n(d),u=s(16),b=s(58),j=s(36),m=s(13),p=s(47),x=s(53),f=s(92),_=s(139),g=s(39),v=s(25),O=s(27),y=s(5),N=s(23),w=s(68),S=s(3),C=s(6),k=s(54),P=s(365),q=s(15),A=s(28),I=s(7),T=s.n(I),H=s(12),D=s(1),z=function(e){var t=Object(d.useState)(void 0===e.addedGroups?[]:e.addedGroups.group),s=Object(A.a)(t,2),a=s[0],i=s[1],c=Object(d.useState)(""),o=Object(A.a)(c,2),n=o[0],l=o[1],h=Object(d.useState)(""),b=Object(A.a)(h,2),j=b[0],m=b[1];return Object(D.jsxs)("div",{className:"absolute bg-primary-800 p-2 rounded-md shadow-xl right-2 md:right-10 animate__animated animate__zoomIn animate__faster mb-10",style:{minWidth:"300px"},children:[Object(D.jsx)("div",{className:"text-lg text-white mb-2 text-left px-2 font-bold",children:"ADD GROUPS"}),Object(D.jsx)("div",{children:0===a.length?Object(D.jsx)("div",{className:"border-2 border-blue-500 text-blue-400 rounded-md px-3 py-4 mb-1 text-center text-base",children:"No groups"}):a.map((function(e,t){return Object(D.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 border-2 border-blue-300 rounded-md pl-3 py-1 pr-1 text-white font-bold mb-1",children:[Object(D.jsx)("div",{className:"uppercase",children:e}),Object(D.jsx)("div",{onClick:function(){return i(Object(r.a)(a.filter((function(t){return t!==e}))))},className:"bg-red-100 rounded-full text-lg p-1 text-red-700 cursor-pointer",children:Object(D.jsx)(u.r,{})})]},t+1)}))}),Object(D.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 mt-2",children:[Object(D.jsx)("input",{value:n,onChange:function(e){m(""),l(e.target.value)},placeholder:"Group name",className:"border-0 px-3 py-2 rounded w-full"}),""!==n&&Object(D.jsx)("div",{onClick:function(){""===n?m("Please fill group name!"):(m(""),i([].concat(Object(r.a)(a.filter((function(e){return e!==n}))),[n])),l(""))},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-blue-500 hover:bg-blue-600 text-white w-36 animate__animated animate__fadeIn animate__faster",children:"Add group"})]}),""!==j&&Object(D.jsx)("div",{className:"bg-red-100 text-red-700 px-3 py-2 rounded my-1 animate__animated animate__zoomIn animate__faster",onClick:function(){return m("")},children:j}),Object(D.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 mt-3 animate__animated animate__fadeInUp animate__faster",children:[Object(D.jsx)("div",{onClick:function(){return e.cancel()},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),a.length>0&&Object(D.jsx)("div",{onClick:function(){console.log("sd: ",e.addedGroups),void 0!==e.addedGroups&&e.addSubjectGroup(e.addedGroups.study_hierarchy_id,a)},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-green-500 hover:bg-green-600 text-white animate__animated animate__fadeInRight animate__faster",children:"Save changes"})]})]})},L=function(){var e=Object(C.a)(Object(S.a)().mark((function e(t,s,a,r){var c,o;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",alert("Please select at least one subject"));case 2:return c=t.map((function(e){return{teacher_code:a,study_hierarchy_id:e.studyhierarchyid,grade_group:void 0===s.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid}))?"A":JSON.stringify(s.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid})).group)}})),r(!1,""),console.log("Sent data: ",c),e.prev=5,e.next=8,T.a.post("".concat(H.e,"/teacherhierarch/create"),c);case 8:o=e.sent,r(!0,"Teacher subjects has added successfully!"),console.log("Success: ",o),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),r(!0,""),console.log("Err: ",Object(i.a)({},e.t0));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,s,a,r){return e.apply(this,arguments)}}(),F=function(e){var t,s=Object(d.useState)(null),i=Object(A.a)(s,2),c=i[0],o=i[1],n=Object(d.useState)(!1),l=Object(A.a)(n,2),h=l[0],j=l[1],p=Object(d.useState)(null),x=Object(A.a)(p,2),f=x[0],_=x[1],g=Object(d.useState)(""),v=Object(A.a)(g,2),O=v[0],y=v[1],N=Object(d.useState)(null),w=Object(A.a)(N,2),S=w[0],C=w[1],I=Object(d.useState)([]),T=Object(A.a)(I,2),H=T[0],F=T[1],R=Object(d.useState)(!1),U=Object(A.a)(R,2),G=U[0],M=U[1],B=Object(d.useState)(""),V=Object(A.a)(B,2),J=V[0],Y=V[1],W=Object(d.useState)(""),Q=Object(A.a)(W,2),K=Q[0],X=Q[1],Z=Object(d.useState)([]),$=Object(A.a)(Z,2),ee=$[0],te=$[1],se=function(e,t){console.log(t),te([].concat(Object(r.a)(ee.filter((function(t){return t.study_hierarchy_id!==e}))),[{study_hierarchy_id:e,group:t}]))},ae=function(){var t=e.teacher_hierarchy_data;return null!==t?(null!==c&&""!==c&&(t=t.filter((function(e){return e.level_code===c}))),null!==f&&(t=t.filter((function(e){return e.combination_code===f}))),t):[]},re=function(t){var s,a=null===e.teacher_hierarchy_data||null===(s=ee.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})))||void 0===s?void 0:s.group;if(void 0!==a)return a;var r,i=null===e.teacher_data||void 0===e.teacher_data||null===(r=e.teacher_data.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})))||void 0===r?void 0:r.grade_group;return void 0!==i?JSON.parse(i):[]},ie=function(){var t,s=0,r=Object(a.a)(H);try{var i=function(){var e=t.value,a=ee.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid}));void 0!==a&&(s+=parseInt(e.teaching_period)*a.group.length)};for(r.s();!(t=r.n()).done;)i()}catch(l){r.e(l)}finally{r.f()}if(null!==e.teacher_hierarchy_data&&e.teacher_hierarchy_data.length>0){var c,o=Object(a.a)(e.teacher_hierarchy_data.filter((function(e){return void 0===H.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))})));try{for(o.s();!(c=o.n()).done;){var n=c.value;s+=parseInt(n.teaching_period)*re(n).length}}catch(l){o.e(l)}finally{o.f()}}return s};return Object(D.jsxs)("div",{className:"fixed bg-black bg-opacity-50 top-0 left-0 w-full h-full z-50 flex items-center justify-center animate__animated animate__fadeIn animate__faster",children:[Object(D.jsxs)("div",{className:"bg-white rounded-md animate__animated animate__zoomIn animate__faster z-50 w-full h-full overflow-auto",children:[Object(D.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 px-2 py-2 border-b border-gray-400",children:[Object(D.jsx)("div",{className:"text-xl font-bold ml-2 uppercase mt-2 text-primary-800",children:"TEACHER SUBJECTS ASSIGNMENT"}),Object(D.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"flex items-center justify-center p-1 rounded-full bg-accent-900 text-3xl hover:bg-yellow-900 text-white cursor-pointer border border-accent-900 hover:border-yellow-900",title:"Close window",children:Object(D.jsx)(u.r,{})})]}),Object(D.jsxs)("div",{className:"p-2 md:p-6",children:[Object(D.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(D.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(D.jsx)("div",{className:"text-5xl text-gray-400",children:Object(D.jsx)(b.h,{})}),Object(D.jsxs)("div",{className:"flex flex-col",children:[Object(D.jsxs)("span",{className:"font-bold -mt-1",children:["Teacher: ",e.full_name]}),Object(D.jsxs)("span",{className:"font-bold -mt-1",children:["School name: ",e.school.school_name," (",e.school.school_code,")"]})]})]}),Object(D.jsxs)("div",{className:"flex flex-col justify-center items-end ".concat(ie()>45?"bg-red-100 text-red-800 rounded p-3":""),children:[Object(D.jsxs)("span",{className:"text-gray-500",children:["Total periods ",ie()>45?"(overloaded)":""]}),Object(D.jsx)("span",{className:"font-extrabold text-3xl",children:ie()})]})]}),Object(D.jsx)("div",{className:"",children:Object(D.jsx)("div",{className:"mb-10",children:Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"p-2 mb-5",children:Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("div",{children:"Filter by"}),Object(D.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(D.jsxs)("select",{onChange:function(e){return o(e.target.value)},value:null===c?"":c,className:"border border-gray-400 rounded px-3 py-2",children:[Object(D.jsx)("option",{value:"",children:"Choose education level"}),Object(D.jsx)("option",{value:"",children:"Show all levels"}),Object(m.mb)(e.allHierarchy,{type:m.yc.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(D.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{onClick:function(){return j(!h)},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===f?Object(D.jsx)("span",{children:"All- Click to filter by combination"}):Object(D.jsx)("span",{children:null===(t=Object(m.mb)(e.allHierarchy,{type:m.yc.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===f})))||void 0===t?void 0:t.combination_name}),Object(D.jsx)("div",{className:"-mr-3",children:!0===h?Object(D.jsx)(u.r,{}):Object(D.jsx)(k.a,{})})]}),!0===h&&Object(D.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(D.jsx)("input",{value:O,onChange:function(e){return y(e.target.value)},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(D.jsx)("div",{children:Object(D.jsx)("div",{onClick:function(){return j(!1)},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(D.jsx)(u.r,{})})})]}),null!==f&&Object(D.jsxs)("div",{onClick:function(){_(null),j(!1)},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(D.jsx)("div",{children:Object(D.jsx)(P.a,{className:"text-xl"})}),Object(D.jsx)("span",{children:"Click to view all"})]})]}),Object(D.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(q.v)(Object(m.mb)(e.allHierarchy,{type:m.yc.COMBINATIONS,status:!0}).combinations,O).length?Object(D.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):Object(q.v)(Object(m.mb)(e.allHierarchy,{type:m.yc.COMBINATIONS,status:!0}).combinations,O).map((function(e,t){return Object(D.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(f===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){_(e.combination_code),j(!1)},children:[Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(D.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]})]})]})}),Object(D.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(D.jsx)("div",{className:"w-full overflow-x-auto",children:Object(D.jsxs)("table",{className:"min-w-full text-left",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"Periods"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(D.jsx)("tbody",{className:"text-sm",children:null===e.teacher_hierarchy_data?Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:7,children:Object(D.jsx)(E,{})})}):0===ae().length?Object(D.jsx)("td",{colSpan:7,className:"text-center p-3 text-xl text-gray-400",children:Object(D.jsx)("div",{children:"No result found"})}):ae().map((function(t,s){return Object(D.jsxs)("tr",{className:"".concat(void 0!==H.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"text-gray-500":null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"hover:bg-yellow-50 hover:text-accent-900":"hover:bg-blue-50 hover:text-primary-800"," group"),children:[Object(D.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(D.jsxs)("td",{className:"p-2 border-b",children:[t.course_code,"-",t.course_name]}),Object(D.jsx)("td",{className:"p-2 border-b",children:t.level_name}),Object(D.jsx)("td",{className:"p-2 border-b",children:t.combination_name}),Object(D.jsx)("td",{className:"p-2 border-b",children:t.grade_name}),Object(D.jsx)("td",{className:"p-2 border-b text-center",children:t.teaching_period}),Object(D.jsx)("td",{className:"p-2 border-b",children:Object(D.jsx)("div",{className:"flex flex-row items-center justify-end gap-2",children:Object(D.jsxs)("div",{className:"mx-3",children:[void 0===H.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?Object(D.jsxs)("div",{className:"flex flex-row items-center justify-end gap-1",children:[Object(D.jsx)("div",{className:"flex flex-row items-center gap-1 justify-end",children:re(t).map((function(e,t){return Object(D.jsx)("div",{className:"bg-blue-100 rounded-md px-2 uppercase text-primary-800",children:e},t+1)}))}),Object(D.jsx)("div",{onClick:function(){var s=null===e.teacher_data?void 0:e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}));(null===S||S===t.studyhierarchyid)&&C(t.studyhierarchyid),se(t.studyhierarchyid,null===e.teacher_hierarchy_data||void 0===s?[]:JSON.parse(s.grade_group))},className:"rounded ".concat(null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"bg-yellow-100 group-hover:bg-accent-900 border-yellow-300 group-hover:border-accent-900":"bg-blue-100 group-hover:bg-primary-800 border-blue-300 group-hover:border-primary-800","   group-hover:text-white px-3 py-2 w-max text-center border cursor-pointer text-sm font-bold -mr-3"),children:null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"Add subject":"Update subj"})]}):Object(D.jsxs)("div",{className:"flex flex-row items-center gap-1 justify-end -mr-3",children:[Object(D.jsx)("div",{className:"flex flex-row items-center gap-1 justify-end",children:re(t).map((function(e,t){return Object(D.jsx)("div",{className:"bg-blue-100 rounded-md px-2 uppercase text-primary-800",children:e},t+1)}))}),Object(D.jsx)("div",{onClick:function(){return e=t,void F(Object(r.a)(H.filter((function(t){return t.studyhierarchyid!==e.studyhierarchyid}))));var e},className:"rounded bg-red-50 group-hover:bg-red-200 text-black border border-red-100 group-hover:border-red-700 group-hover:text-red-800 px-3 py-2 w-max text-center cursor-pointer text-sm font-bold",children:"Remove"})]}),null!==S&&S===t.studyhierarchyid&&Object(D.jsx)(z,{addSubjectGroup:function(e,s){var a;se(e,s),console.log("Test grp: ",ee),a=t,F([].concat(Object(r.a)(H.filter((function(e){return e.studyhierarchyid!==a.studyhierarchyid}))),[a])),C(null)},addedGroups:ee.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})),cancel:function(){return C(null)}})]})})})]},s+1)}))})]})})})]})})})]})]}),H.length>0&&Object(D.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-50 bg-blue-600 p-2 animate__animated animate__fadeInUp",children:!1===G?Object(D.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[""!==K&&Object(D.jsx)("div",{className:"bg-red-200 text-red-800 px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return X("")},children:K}),""!==J&&Object(D.jsx)("div",{className:"bg-green-600 text-white px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return Y("")},children:J}),Object(D.jsxs)("div",{className:"text-white flex flex-col items-end mr-2",children:[Object(D.jsx)("span",{className:"text-sm text-blue-300",children:"Selected subjects"}),Object(D.jsx)("span",{className:"text-2xl font-extrabold -mt-2",children:H.length})]}),Object(D.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"btn bg-gray-200 text-black rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Cancel"}),Object(D.jsx)("div",{onClick:function(){M(!0),null!==e.auth.user&&L(H,ee,e.staff_code,(function(t,s){""!==s&&!0===t&&(Y("School subjects added successfully!"),F([]),e.setAddNew(!1),e.setLoadTeacherSubjects()),""===s&&!0===t&&X("Something went wrong. Try again!")}))},className:"btn bg-green-700 text-white rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Save changes"})]}):Object(D.jsx)("div",{className:"text-white text-lg text-right py-2",children:"Saving, Please wait..."})})]})},R=s(9),E=function(){return Object(D.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(D.jsx)(v.a,{}),Object(D.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]})},U=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).setAddNew=function(e){r.setState({addNew:e,addingNew:!0===e})},r.setAddingNew=function(e){r.setState({addingNew:e})},r.setLoading=function(e){r.setState({loading:e})},r.FilterSchoolHierarchy=function(e){var t,s=[],i=Object(a.a)(e);try{var c=function(){var e=t.value,a=null===r.props.schoolHierarchyStore.hierarchy?void 0:r.props.schoolHierarchyStore.hierarchy.find((function(t){return t.studyhierarchyid===e.shool_hierarch_id}));void 0!==a&&s.push(a)};for(i.s();!(t=i.n()).done;)c()}catch(o){i.e(o)}finally{i.f()}return s},r.FilterTeacherHierarchy=function(e){var t,s=[],i=Object(a.a)(e);try{var c=function(){var e=t.value,a=null===r.props.schoolHierarchyStore.hierarchy?void 0:r.props.schoolHierarchyStore.hierarchy.find((function(t){return t.studyhierarchyid===e.study_hierarchy_id&&"0"!==e.status}));void 0!==a&&s.push(a)};for(i.s();!(t=i.n()).done;)c()}catch(o){i.e(o)}finally{i.f()}return s},r.setLoadSchoolSubjects=function(){if(null!==r.props.auth.school)return Object(m.lb)(r.props.auth.school.school_code,(function(e,t){r.setLoading(!0),!0===e&&null!==t?r.setState({school_hierarchy:t,school_hierarchy_data:r.FilterSchoolHierarchy(t),loading:!1}):r.setState({school_hierarchy:[],school_hierarchy_data:[],loading:!1})}))},r.setLoadTeacherSubjects=function(){return Object(m.tb)(r.props.staff_code,(function(e,t){r.setLoading(!0),!0===e&&null!==t?(console.log("Teacher hie: ",t),r.setState({teacher_hierarchy_data:r.FilterTeacherHierarchy(t),teacherSchoolHierarchy:t,loading:!1}),r.FilteredData(r.FilterTeacherHierarchy(t))):(r.setState({teacher_hierarchy_data:[],teacherSchoolHierarchy:[],loading:!1}),r.FilteredData([]))}))},r.componentDidMount=function(){null===r.props.schoolHierarchyStore.hierarchy&&(r.setLoading(!0),r.props.FC_AllSchoolHierarchyDetails(!1,(function(e,t){!0===e&&""===t&&r.setLoading(!1)}))),r.setLoadSchoolSubjects(),r.setLoadTeacherSubjects()},r.ReturnGradeGroups=function(e){var t,s=null===(t=r.state.teacherSchoolHierarchy.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid})))||void 0===t?void 0:t.grade_group;return void 0!==s?JSON.parse(s):[]},r.FilteredData=function(e){try{console.log("Testing user hierarchy: ",e),null!==r.state.selected_level_code&&""!==r.state.selected_level_code&&(e=e.filter((function(e){return e.level_code===r.state.selected_level_code}))),null!==r.state.selected_combination_code&&(e=e.filter((function(e){return e.combination_code===r.state.selected_combination_code}))),r.setState({FilteredData:e})}catch(t){console.log("Error of loading: ",Object(i.a)({},t))}},r.TotalPeriods=function(){var e=0;if(null!==r.state.teacher_hierarchy_data&&r.state.teacher_hierarchy_data.length>0){var t,s=Object(a.a)(r.state.teacher_hierarchy_data);try{for(s.s();!(t=s.n()).done;){var i=t.value;e+=parseInt(i.teaching_period)*r.ReturnGradeGroups(i).length}}catch(c){s.e(c)}finally{s.f()}}return e},r.RemoveTeacherSchoolHierarchy=function(){var e=Object(C.a)(Object(S.a)().mark((function e(t){var s;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to remove this subject on school?")){e.next=13;break}return r.setLoading(!0),e.prev=2,e.next=5,T.a.post("".concat(H.e,"/teacherhierarch/delete/").concat(t),{});case 5:s=e.sent,console.log("Success: ",s),200===s.status&&(r.setLoadTeacherSubjects(),r.setState({error:"",success:"School subject removed successfully!"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r.setState({error:Object(R.a)(e.t0),success:"",loading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),r.state={loading:!0,school_hierarchy:null,teacher_hierarchy_data:null,selected_level_code:null,selected_combination_code:null,filter_by_combination:!1,search_comb:"",addNew:!1,addingNew:!1,teacherSchoolHierarchy:[],school_hierarchy_data:null,FilteredData:null,success:"",error:""},r}return Object(o.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.state.school_hierarchy||null===this.props.schoolHierarchyStore.hierarchy||!0===this.state.loading||null===this.state.teacher_hierarchy_data||this.state.school_hierarchy_data,Object(D.jsxs)(d.Fragment,{children:[console.log("Teacher subjects: ",this.state.teacher_hierarchy_data),Object(D.jsx)("div",{className:"mb-10 bg-white rounded m-2",children:Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"p-2 mb-5",children:[Object(D.jsxs)("div",{className:"flex flex-row items-center gap-3 justify-between",children:[Object(D.jsx)("div",{className:"flex flex-col",children:Object(D.jsx)("div",{className:"text-2xl font-bold",children:"TEACHER SUBJECTS ASSIGNMENT"})}),Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"flex flex-col ".concat(this.TotalPeriods()>45?"bg-red-100 text-red-800":"bg-blue-100 text-primary-800","  rounded-t-md p-1 px-2 text-center"),children:[Object(D.jsxs)("span",{className:"text-sm",children:["Total periods"," ",this.TotalPeriods()>45?"(overloaded)":""]}),Object(D.jsx)("span",{className:"text-xl font-bold -mt-1",children:this.TotalPeriods()})]}),this.props.allowEdit&&Object(D.jsx)("div",{onClick:function(){t.setAddingNew(!0),t.setAddNew(!0)},className:"border font-bold ".concat(!1===this.state.addingNew?"bg-yellow-100 border-yellow-500 hover:border-yellow-600":"bg-gray-100"," text-black px-3 py-2 rounded text-center hover:bg-accent-900 hover:text-white cursor-pointer text-base"),children:!0===this.state.addingNew?"Loading":null!==this.state.teacher_hierarchy_data&&this.state.teacher_hierarchy_data.length>0?"Add & Update Subjects":"Assign teacher subjects"})]})]}),""!==this.state.success&&Object(D.jsx)("div",{onClick:function(){return t.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(D.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(D.jsxs)("div",{children:["Success: ",this.state.success]}),Object(D.jsx)("div",{children:Object(D.jsx)(u.r,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(D.jsx)("div",{onClick:function(){return t.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(D.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(D.jsxs)("div",{children:["Error: ",this.state.error]}),Object(D.jsx)("div",{children:Object(D.jsx)(u.r,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("div",{children:"Filter by"}),Object(D.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(D.jsxs)("select",{onChange:function(e){return t.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(D.jsx)("option",{value:"",children:"Choose education level"}),Object(D.jsx)("option",{value:"",children:"Filter by all levels"}),null!==this.props.schoolHierarchyStore.hierarchy&&Object(m.mb)(this.props.schoolHierarchyStore.hierarchy,{type:m.yc.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(D.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{onClick:function(){return t.setState({filter_by_combination:!t.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(D.jsx)("span",{children:"All- Click to filter by combination"}):Object(D.jsx)("span",{children:null!==this.props.schoolHierarchyStore.hierarchy&&(null===(e=Object(m.mb)(this.props.schoolHierarchyStore.hierarchy,{type:m.yc.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===t.state.selected_combination_code})))||void 0===e?void 0:e.combination_name)}),Object(D.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(D.jsx)(u.r,{className:"text-xl"}):Object(D.jsx)(k.a,{})})]}),!0===this.state.filter_by_combination&&Object(D.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(D.jsx)("input",{value:this.state.search_comb,onChange:function(e){return t.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(D.jsx)("div",{children:Object(D.jsx)("div",{onClick:function(){return t.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(D.jsx)(u.r,{})})})]}),null!==this.state.selected_combination_code&&Object(D.jsxs)("div",{onClick:function(){return t.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(D.jsx)("div",{children:Object(D.jsx)(P.a,{className:"text-xl"})}),Object(D.jsx)("span",{children:"Click to view all"})]})]}),Object(D.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:null!==this.props.schoolHierarchyStore.hierarchy&&0===Object(q.v)(Object(m.mb)(this.props.schoolHierarchyStore.hierarchy,{type:m.yc.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(D.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):null!==this.props.schoolHierarchyStore.hierarchy&&Object(q.v)(Object(m.mb)(this.props.schoolHierarchyStore.hierarchy,{type:m.yc.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,s){return Object(D.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(t.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){return t.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:s+1})}),Object(D.jsx)("div",{children:e.combination_name})]},s+1)}))})]})]})]})]})]}),Object(D.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(D.jsx)("div",{className:"w-full overflow-x-auto",children:Object(D.jsxs)("table",{className:"min-w-full text-left",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Group"}),this.props.allowEdit&&Object(D.jsx)("th",{className:"p-2 border-b-2 border-gray-300"})]})}),Object(D.jsx)("tbody",{className:"text-sm",children:null===this.state.FilteredData?Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:7,children:Object(D.jsx)(E,{})})}):0===this.state.FilteredData.length?Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:7,className:"text-center p-3 text-xl text-gray-400",children:Object(D.jsx)("div",{children:"No result found"})})}):this.state.FilteredData.map((function(e,s){return Object(D.jsxs)("tr",{className:"hover:bg-yellow-50 group",children:[Object(D.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(D.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(D.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(D.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(D.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(D.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(D.jsx)("td",{className:"p-2 border-b uppercase",children:Object(D.jsx)("div",{className:"flex flex-row gap-1 items-center",children:t.ReturnGradeGroups(e).map((function(e,t){return Object(D.jsx)("div",{className:"bg-blue-100 rounded-md px-3 py-1 text-blue-800 w-max",children:e},t+1)}))})}),t.props.allowEdit&&Object(D.jsx)("td",{className:"border-b",children:Object(D.jsx)("div",{className:"flex justify-end",children:Object(D.jsx)("div",{onClick:function(){if(null!==t.state.teacher_hierarchy_data&&!1===t.state.loading){var s=t.state.teacherSchoolHierarchy.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}));void 0!==s?t.RemoveTeacherSchoolHierarchy(s.teacher_study_hierarchy_id):alert("Plase try again!")}else alert("Plase try again!")},className:"bg-red-50 text-red-800 px-3 py-2 mx-1 my-1 rounded font-bold group-hover:bg-red-700 group-hover:text-white cursor-pointer",children:!0===t.state.loading?"Loading, please wait....":"Remove"})})})]},s+1)}))})]})})})]})}),!0===this.state.addNew&&null!==this.props.auth.school&&null!==this.props.schoolHierarchyStore.hierarchy&&null!==this.state.school_hierarchy&&Object(D.jsx)(F,{auth:this.props.auth,staff_code:this.props.staff_code,full_name:this.props.full_name,school:this.props.auth.school,setAddNew:this.setAddNew,allHierarchy:this.props.schoolHierarchyStore.hierarchy,teacher_hierarchy_data:this.FilterSchoolHierarchy(this.state.school_hierarchy),teacher_data:this.state.teacherSchoolHierarchy,setLoadTeacherSubjects:this.setLoadTeacherSubjects})]})}}]),s}(d.Component),G=Object(j.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_AllSchoolHierarchyDetails:m.f})(U),M=function(e){var t=e.close,s=e.position_code,a=e.success,i=e.user_id,c=e.school_code;console.log({position_code:s,user_id:i});var o=Object(d.useState)(""),n=Object(A.a)(o,2),l=n[0],h=n[1],u=Object(d.useState)(""),b=Object(A.a)(u,2),j=b[0],x=b[1],f=Object(d.useState)(!0),g=Object(A.a)(f,2),y=g[0],w=g[1],S=Object(d.useState)(!1),C=Object(A.a)(S,2),k=C[0],P=C[1],q=Object(d.useState)(""),I=Object(A.a)(q,2),T=I[0],H=I[1],z=Object(d.useState)(""),L=Object(A.a)(z,2),F=L[0],R=L[1],E=Object(d.useState)([]),U=Object(A.a)(E,2),G=U[0],M=U[1];Object(d.useEffect)((function(){""===l&&s&&!0===y&&h(s),console.log({position_code:s}),!0===y&&null!==c&&void 0!==c&&Object(m.qb)(c,(function(e,t,s){w(!1),e||H(s),M(t||[])}))}),[y,l,s,c]);var B=function(e){return e.preventDefault(),""===l?H("Please select a role"):null===c||void 0===c?H("School code does not found."):(P(!0),void Object(m.qc)({position_code:l,user_id:i,qualification_id:j,school_code:c},(function(e,t,s){P(!1),!0===e&&(R("User Role has been updated"),a(l)),!1===e&&H(s)})))};return null===c||void 0===c?Object(D.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:t,backDropClose:!1,widthSizeClass:O.b.medium,displayClose:!0,title:"Change position",padding:{title:!0,body:void 0,footer:void 0},children:Object(D.jsxs)("div",{className:"py-8 px-2 text-center",children:[Object(D.jsx)("h1",{className:"text-2xl font-bold",children:"School code does not found"}),Object(D.jsx)("p",{className:"mt-2 text-gray-700",children:"The school_code doe not found in the system"})]})}):Object(D.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:t,backDropClose:!1,widthSizeClass:O.b.medium,displayClose:!0,title:"Change position",padding:{title:!0,body:void 0,footer:void 0},children:Object(D.jsxs)("div",{className:"border-t p-2",children:[""!==T&&Object(D.jsx)(p.a,{theme:"danger",onClick:function(){return H("")},children:T}),""!==F&&Object(D.jsx)(p.a,{theme:"success",onClick:function(){return R("")},children:F}),!0===y?Object(D.jsx)("div",{className:"text-center p-5",children:Object(D.jsx)(v.a,{})}):Object(D.jsx)("div",{className:"p-1",children:Object(D.jsxs)("form",{onSubmit:B,children:[Object(D.jsx)(_.a,{onChange:function(e){var t=G.find((function(t){return t.position_code===e.target.value}));t?(h(t.position_code),x(t.qualification_id)):H("Failed to select the position")},value:l||"",error:"",label:"Select the position",placeholder:"",name:"",data:[{title:"Select a position",value:""}].concat(Object(r.a)(G.map((function(e){return{title:"".concat(e.position_code," - ").concat(e.position_name," - ").concat(null===e||void 0===e?void 0:e.qualification_name),value:e.position_code}})))),disabled:k}),Object(D.jsx)("div",{className:"pb-1.5 text-right",children:Object(D.jsx)(N.a,{type:"submit",loading:k,children:"Update position"})})]})})]})})},B=function(e){var t=e.close,s=e.role_id,a=e.success,i=e.user_id;console.log({role_id:s,user_id:i});var c=Object(d.useState)(""),o=Object(A.a)(c,2),n=o[0],l=o[1],h=Object(d.useState)(!0),u=Object(A.a)(h,2),b=u[0],j=u[1],x=Object(d.useState)(!1),f=Object(A.a)(x,2),g=f[0],y=f[1],w=Object(d.useState)(""),S=Object(A.a)(w,2),C=S[0],k=S[1],P=Object(d.useState)(""),q=Object(A.a)(P,2),I=q[0],T=q[1],H=Object(d.useState)([]),z=Object(A.a)(H,2),L=z[0],F=z[1];Object(d.useEffect)((function(){""===n&&s&&!0===b&&l(s),console.log({role_id:s}),!0===b&&Object(m.hb)((function(e,t,s){j(!1),e||k(s),F(t||[])}))}),[b,n,s]);var R=function(e){if(e.preventDefault(),""===n)return k("Please select a role");y(!0),Object(m.sc)({role_id:n,user_id:i},(function(e,t){y(!1),!0===e&&(T("User Role has been updated"),a(n)),!1===e&&k(t)}))};return Object(D.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:t,backDropClose:!1,widthSizeClass:O.b.medium,displayClose:!0,title:"Change role",padding:{title:!0,body:void 0,footer:void 0},children:Object(D.jsxs)("div",{className:"border-t p-2",children:[""!==C&&Object(D.jsx)(p.a,{theme:"danger",onClick:function(){return k("")},children:C}),""!==I&&Object(D.jsx)(p.a,{theme:"success",onClick:function(){return T("")},children:I}),!0===b?Object(D.jsx)("div",{className:"text-center p-5",children:Object(D.jsx)(v.a,{})}):Object(D.jsx)("div",{className:"p-1",children:Object(D.jsxs)("form",{onSubmit:R,children:[Object(D.jsx)(_.a,{onChange:function(e){l(e.target.value),k("")},value:n||"",error:"",label:"Select the role",placeholder:"",name:"",data:[{title:"Select a role",value:""}].concat(Object(r.a)(L.map((function(e){return{title:e.role,value:e.role_id}})))),disabled:g}),Object(D.jsx)("div",{className:"pb-1.5 text-right",children:Object(D.jsx)(N.a,{type:"submit",loading:g,children:"Update role"})})]})})]})})},V=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).updateStuffDetails=function(e){var t;if(e.preventDefault(),""!==a.state.nid&&null!==a.state.nid){if(16!==a.state.nid.length)return a.setState({error:{target:"nid",msg:"NID must be 16 digits!"}});if(!Object(q.j)(a.state.nid))return a.setState({error:{target:"nid",msg:"NID must be numbers!"}})}if((""===a.state.passport||null===a.state.passport)&&(""===a.state.nid||null===a.state.nid))return a.setState({error:{target:"nid",msg:"You must provide the passport or the NID"}});if((null===a.state.first_name||""===a.state.first_name)&&a.props.required.first_name)return a.setState({error:{target:"first_name",msg:"Required!"}});if((null===a.state.last_name||(null===(t=a.state.last_name)||void 0===t?void 0:t.length)<=2)&&a.props.required.last_name)return a.setState({error:{target:"last_name",msg:"Required!"}});if(""===a.state.full_name&&a.props.required.full_name)return a.setState({error:{target:"full_name",msg:"Required!"}});if(10!==a.state.phone_numbers.length&&a.props.required.phone_numbers)return a.setState({error:{target:"phone_numbers",msg:"Phone number must be 10 digits!"}});if(!Object(q.j)(a.state.phone_numbers)&&a.props.required.phone_numbers)return a.setState({error:{target:"phone_numbers",msg:"Phone must be numbers!"}});if(""===a.state.email&&a.props.required.email)return a.setState({error:{target:"email",msg:"Required!"}});if(""===a.state.username&&a.props.required.username)return a.setState({error:{target:"username",msg:"Required!"}});if(""===a.state.staff_code&&a.props.required.staff_code)return a.setState({error:{target:"staff_code",msg:"Required!"}});if(""===a.state.sex&&a.props.required.sex)return a.setState({error:{target:"sex",msg:"Required!"}});if(""===a.state.martial_status&&a.props.required.martial_status)return a.setState({error:{target:"martial_status",msg:"Required!"}});if((null===a.state.martial_status||""===a.state.martial_status)&&a.props.required.martial_status)return a.setState({error:{target:"martial_status",msg:"Required!"}});if(""===a.state.rssb_number&&a.props.required.rssb_number)return a.setState({error:{target:"rssb_number",msg:"Required!"}});if(""===a.state.highest_qualification_id&&a.props.required.highest_qualification_id)return a.setState({error:{target:"highest_qualification_id",msg:"Required!"}});if(""===a.state.nationality_id||null===a.state.nationality_id)return a.setState({error:{target:"nationality_id",msg:"Required!"}});if(""===a.state.dob||null===a.state.dob)return a.setState({error:{target:"dob",msg:"Required!"}});if((""===a.state.bank_id||null===a.state.bank_id)&&a.props.required.bank_id)return a.setState({error:{target:"bank_id",msg:"Required!"}});if(""===a.state.bank_account||null===a.state.bank_account)return a.setState({error:{target:"bank_account",msg:"Required!"}});if(""===a.state.graduation_date&&a.props.required.graduation_date)return a.setState({error:{target:"graduation_date",msg:"Required!"}});if(null===a.state.specialization_id||""===a.state.specialization_id)return a.setState({error:{target:"specialization_id",msg:"Required!"}});if((null===a.state.contract_type||""===a.state.contract_type)&&a.props.required.contract_type)return a.setState({error:{target:"contract_type",msg:"Required!"}});if(""===a.state.hired_date&&a.props.required.hired_date)return a.setState({error:{target:"hired_date",msg:"Required!"}});if(""===a.state.bank_account&&a.props.required.bank_account)return a.setState({error:{target:"bank_account",msg:"Required!"}});if(""===a.state.education_certificate_id&&a.props.required.education_certificate_id)return a.setState({error:{target:"education_certificate_id",msg:"Required!"}});if(""===a.state.teaching_level_id&&a.props.required.teaching_level_id)return a.setState({error:{target:"teaching_level_id",msg:"Required!"}});var s={bank_account:a.state.bank_account,bank_id:a.state.bank_id,contract_type:a.state.contract_type,dob:a.state.dob,education_domain_id:a.state.education_domain_id,education_sub_domain_id:a.state.education_domain_id,email:a.state.email,first_name:a.state.first_name,full_name:a.state.full_name,graduation_date:a.state.graduation_date,highest_qualification_id:a.state.highest_qualification_id,hired_date:a.state.hired_date,last_name:a.state.last_name,martial_status:a.state.martial_status,middle_name:a.state.middle_name,nationality_id:a.state.nationality_id,nid:a.state.nid,passport:a.state.passport,phone_numbers:a.state.phone_numbers,rssb_number:a.state.rssb_number,sex:a.state.sex,specialization_id:a.state.specialization_id,staff_category_id:a.state.staff_category_id,staff_code:a.state.staff_code,username:a.state.username,village_code:a.state.village_code,education_certificate_id:a.state.education_certificate_id,teaching_level_id:a.state.teaching_level_id};a.setState({loading:!0}),Object(m.pc)(a.props.user_id,s,(function(e,t){!0===e?(a.setState({loading:!1,error:{target:"main-success",msg:"Staff details updated successfully"}}),a.props.success(a.props.user_id,s)):a.setState({loading:!1,error:{target:"main-error",msg:t}}),setTimeout((function(){a.setState({error:{target:null,msg:""}})}),3e3)}))},a.state={update_user_position:!1,loading_assets:!0,loading:!1,error:{target:null,msg:""},nid:"",passport:"",first_name:"",middle_name:"",last_name:"",full_name:"",phone_numbers:"",email:"",username:"",staff_code:"",sex:"",martial_status:"",highest_qualification_id:"",dob:"",rssb_number:"",nationality_id:"",bank_account:"",bank_id:"",village_code:"",staff_category_id:"",specialization_id:"",contract_type:"",graduation_date:"",education_domain_id:"",education_sub_domain_id:"",hired_date:"",specialization_open:!1,education_certificate_id:"",teaching_level_id:"",role_id:"",position_code:"",update_user_role:!1},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;!0===this.props.basic.register_assets.loading||null===this.props.basic.register_assets.data?this.props.FC_GetRegistrationAssets((function(t,s){!0===t?e.props.FC_GetUserDetailsInfo(e.props.user_id,(function(t,s,a){!0===t&&null!==s?e.setState({loading_assets:!1,bank_account:s.bank_account,bank_id:s.bank_id,contract_type:s.contract_type,dob:s.dob,education_domain_id:s.education_domain_id,education_sub_domain_id:s.education_sub_dommain_id,email:s.email,first_name:s.first_name,full_name:s.full_name,last_name:s.last_name,graduation_date:s.graduation_date,highest_qualification_id:s.highest_qualification_id,hired_date:s.hired_date,martial_status:s.marital_status,middle_name:s.middle_name,nationality_id:s.nationality_id,nid:s.nid,passport:s.passport||"",phone_numbers:s.phone_numbers,rssb_number:s.rssb_number,sex:s.sex,specialization_id:s.specialisation_id,staff_category_id:s.staff_category_id,staff_code:s.staff_code,username:s.username,village_code:s.village_code,education_certificate_id:s.education_certificate_id,teaching_level_id:s.teaching_level_id,position_code:"",error:{target:null,msg:""},role_id:s.role_id}):e.setState({loading_assets:!1,error:{target:"main-error",msg:a}})})):e.setState({error:{target:"main-error",msg:s}})})):this.props.FC_GetUserDetailsInfo(this.props.user_id,(function(t,s,a){!0===t&&null!==s?e.setState({loading_assets:!1,bank_account:s.bank_account,bank_id:s.bank_id,contract_type:s.contract_type,dob:s.dob,education_domain_id:s.education_domain_id,education_sub_domain_id:s.education_sub_dommain_id,email:s.email,first_name:s.first_name,full_name:s.full_name,last_name:s.last_name,graduation_date:s.graduation_date,highest_qualification_id:s.highest_qualification_id,hired_date:s.hired_date,martial_status:s.marital_status,middle_name:s.middle_name,nationality_id:s.nationality_id,nid:s.nid,phone_numbers:s.phone_numbers,rssb_number:s.rssb_number,sex:s.sex,specialization_id:s.specialization_id,staff_category_id:s.staff_category_id,staff_code:s.staff_code,username:s.username,village_code:s.village_code,error:{target:null,msg:""},role_id:s.role_id}):e.setState({loading_assets:!1,error:{target:"main-error",msg:a}})}))}},{key:"render",value:function(){var e,t=this,s=Object(y.c)(null===(e=this.props.auth.role)||void 0===e?void 0:e.access,y.b.UPDATE_USERS_ROLES);if(!0===this.props.basic.register_assets.loading||null===this.props.basic.register_assets.data)return Object(D.jsxs)(x.a,{children:[Object(D.jsx)("div",{className:"py-6 mx-auto text-center",children:Object(D.jsx)(v.a,{})}),Object(D.jsx)("h3",{className:"pt-3 font-bold text-lg text-center",children:"Loading..."})]});if(!0===this.state.loading_assets)return Object(D.jsxs)(x.a,{children:[Object(D.jsx)("div",{className:"py-6 mx-auto text-center",children:Object(D.jsx)(v.a,{})}),Object(D.jsx)("h3",{className:"pt-3 font-bold text-lg text-center",children:"Loading profile info..."})]});var a=this.props.basic.register_assets.data,i=a.specializations.find((function(e){return e.specialization_id===t.state.specialization_id})),c=[];c=[{title:"",value:""}],this.props.basic.education_certificates&&(c=[{title:"",value:""}].concat(Object(r.a)(this.props.basic.education_certificates.map((function(e){return{value:e.education_certificate_id,title:e.education_certificate}})))));var o=[];return o=[{title:"",value:""}],this.props.basic.teaching_levels&&(o=[{title:"",value:""}].concat(Object(r.a)(this.props.basic.teaching_levels.map((function(e){return{value:e.teaching_level_id,title:e.teaching_level}}))))),Object(D.jsxs)(D.Fragment,{children:[s&&!0===this.state.update_user_role&&Object(D.jsx)(B,{user_id:this.props.user_id,close:function(){return t.setState({update_user_role:!1})},role_id:this.state.role_id,success:function(e){return t.setState({role_id:e})}}),s&&!0===this.state.update_user_position&&Object(D.jsx)(M,{user_id:this.props.user_id,close:function(){return t.setState({update_user_position:!1})},school_code:this.props.school_code,position_code:this.state.position_code,success:function(e){return t.setState({position_code:e})}}),"main-error"===this.state.error.target&&Object(D.jsx)(p.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(D.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(D.jsxs)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(D.jsxs)("div",{className:"py-2 flex items-center border-b",children:[Object(D.jsx)("div",{className:"flex-1 opacity-70",children:Object(D.jsx)(f.a,{children:"Update staff"})}),Object(D.jsx)("div",{className:"",children:Object(D.jsx)(N.a,{onClick:this.props.close,theme:"danger-light",children:"Close"})})]}),s&&Object(D.jsxs)("div",{className:"p-3 flex border-b items-center",children:[Object(D.jsxs)("section",{className:"flex-1",children:[Object(D.jsx)("h5",{className:"font-bold text-lg",children:"Change user role"}),Object(D.jsx)("p",{className:"text-sm text-gray-400 -mt-1",children:"Make sure the DDE is aware of this action"})]}),Object(D.jsx)(N.a,{theme:"accent-light",size:"md",onClick:function(){return t.setState({update_user_role:!0})},children:"Change user role"})]}),Object(D.jsxs)("div",{className:"p-3 flex border-b items-center",children:[Object(D.jsxs)("section",{className:"flex-1",children:[Object(D.jsx)("h5",{className:"font-bold text-lg",children:"Change user position"}),Object(D.jsx)("p",{className:"text-sm text-gray-400 -mt-1",children:"Make sure the DDE is aware of this action"})]}),Object(D.jsx)(N.a,{theme:"accent-light",size:"md",onClick:function(){return t.setState({update_user_position:!0})},children:"Change user position"})]}),Object(D.jsxs)("form",{onSubmit:this.updateStuffDetails,children:[Object(D.jsxs)("div",{className:"p-2 flex flex-wrap",children:[Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"National ID",name:"nid",type:"text",onChange:function(e){return t.setState({nid:e.target.value,error:{target:null,msg:""}})},value:this.state.nid,error:"nid"===this.state.error.target?this.state.error.msg:"",placeholder:"National Id",className:"p-2"})}),Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Passport(*)",name:"passport",type:"text",onChange:function(e){return t.setState({passport:e.target.value,error:{target:null,msg:""}})},value:this.state.passport,error:"passport"===this.state.error.target?this.state.error.msg:"",placeholder:"Passport",className:"p-2"})}),this.props.formAccess.first_name&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"First name (Irinyarwanda)",name:"first_name",onChange:function(e){return t.setState({first_name:e.target.value,full_name:"".concat(null!==e.target.value?e.target.value:""," ").concat(null!==t.state.middle_name?t.state.middle_name:""," ").concat(null!==t.state.last_name?t.state.last_name:""),error:{target:null,msg:""}})},value:this.state.first_name,error:"first_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Ex: KAMANA",className:"p-2"})}),this.props.formAccess.middle_name&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Middle name",name:"middle_name",onChange:function(e){return t.setState({middle_name:e.target.value,full_name:"".concat(null!==t.state.first_name?t.state.first_name:""," ").concat(null!==e.target.value?e.target.value:""," ").concat(null!==t.state.last_name?t.state.last_name:""),error:{target:null,msg:""}})},value:this.state.middle_name,error:"middle_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Middle name",className:"p-2"})}),this.props.formAccess.last_name&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Last name",name:"last_name",onChange:function(e){return t.setState({last_name:e.target.value,full_name:"".concat(null!==t.state.first_name?t.state.first_name:""," ").concat(null!==t.state.middle_name?t.state.middle_name:""," ").concat(null!==e.target.value?e.target.value:""),error:{target:null,msg:""}})},value:this.state.last_name,error:"last_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Ex: Emmanuel",className:"p-2"})}),this.props.formAccess.full_name&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:!0,label:"Full name",name:"full_name",onChange:function(e){},value:this.state.full_name,error:"full_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Full name",className:"p-2"})}),this.props.formAccess.phone_numbers&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Phone number",name:"phone_numbers",onChange:function(e){return t.setState({phone_numbers:e.target.value,error:{target:null,msg:""}})},value:this.state.phone_numbers,error:"phone_numbers"===this.state.error.target?this.state.error.msg:"",placeholder:"0700000000",className:"p-2"})}),this.props.formAccess.email&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"email",name:"email",onChange:function(e){return t.setState({email:e.target.value,error:{target:null,msg:""}})},value:this.state.email,error:"email"===this.state.error.target?this.state.error.msg:"",placeholder:"my@email.com",className:"p-2"})}),this.props.formAccess.username&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Username (your number)",name:"username",onChange:function(e){return t.setState({username:e.target.value,error:{target:null,msg:""}})},value:this.state.username,error:"username"===this.state.error.target?this.state.error.msg:"",placeholder:"0780000000",className:"p-2"})}),this.props.formAccess.staff_code&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Staff code",name:"staff_code",onChange:function(e){return t.setState({staff_code:e.target.value,error:{target:null,msg:""}})},value:this.state.staff_code,error:"staff_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Staff code",className:"p-2"})}),this.props.formAccess.sex&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:[{title:this.state.sex?this.state.sex:"",value:this.state.sex?this.state.sex:""},{title:"",value:""},{title:"MALE",value:"MALE"},{title:"FEMALE",value:"FEMALE"}],error:"sex"===this.state.error.target?this.state.error.msg:"",value:this.state.sex,onChange:function(e){return t.setState({sex:e.target.value,error:{target:null,msg:""}})},label:"Gender",name:"gender",placeholder:"Select gender"})}),this.props.formAccess.martial_status&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:[{title:this.state.martial_status?this.state.martial_status:"",value:this.state.martial_status?this.state.martial_status:""}].concat(Object(r.a)(a.marital.map((function(e){return{title:e,value:e}})))),error:"martial_status"===this.state.error.target?this.state.error.msg:"",value:this.state.martial_status,onChange:function(e){t.setState({martial_status:e.target.value,error:{target:null,msg:""}})},label:"Martial Status",name:"matrias_status",placeholder:"Select a value"})}),this.props.formAccess.rssb_number&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"RSSB Number",name:"rssb_number",onChange:function(e){return t.setState({rssb_number:e.target.value,error:{target:null,msg:""}})},value:this.state.rssb_number,error:"rssb_number"===this.state.error.target?this.state.error.msg:"",placeholder:"RSSB number",className:"p-2"})}),this.props.formAccess.highest_qualification_id&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:[{title:"",value:""}].concat(Object(r.a)(this.props.basic.qualifications.filter((function(e){return"HIGH"===e.qualification_status})).map((function(e){return{value:e.qualification_id,title:e.qualification_name}})))),error:"highest_qualification_id"===this.state.error.target?this.state.error.msg:"",value:this.state.highest_qualification_id,onChange:function(e){return t.setState({highest_qualification_id:e.target.value,error:{target:null,msg:""}})},label:"Highest Qualification",name:"highest_qualification",placeholder:"Select a highest qualification"})}),this.props.formAccess.nationality_id&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:[{title:"",value:"Select a country"}].concat(Object(r.a)(a.nationality.map((function(e){return{title:e.country,value:e.country_id}})))),error:"nationality_id"===this.state.error.target?this.state.error.msg:"",value:this.state.nationality_id,onChange:function(e){return t.setState({nationality_id:e.target.value,error:{target:null,msg:""}})},label:"Nationality",name:"nationality",placeholder:"Select a country"})}),this.props.formAccess.dob&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Date of birth",name:"dob",type:"date",onChange:function(e){return t.setState({dob:e.target.value,error:{target:null,msg:""}})},value:this.state.dob,error:"dob"===this.state.error.target?this.state.error.msg:"",placeholder:"DOB",className:"p-2"})}),this.props.formAccess.bank_id&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:[{title:"",value:""}].concat(Object(r.a)(a.banks.map((function(e){return{title:e.bank,value:e.bank_id}})))),error:"bank_id"===this.state.error.target?this.state.error.msg:"",value:this.state.bank_id,onChange:function(e){return t.setState({bank_id:e.target.value,error:{target:null,msg:""}})},label:"Select a bank",name:"bank",placeholder:"Select bank"})}),this.props.formAccess.bank_account&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Bank Account",name:"bank_account",type:"number",onChange:function(e){return t.setState({bank_account:e.target.value,error:{target:null,msg:""}})},value:this.state.bank_account,error:"bank_account"===this.state.error.target?this.state.error.msg:"",placeholder:"Bank account",className:"p-2"})}),this.props.formAccess.village_code&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Village",name:"village_code",onChange:function(e){return t.setState({village_code:e.target.value,error:{target:null,msg:""}})},value:this.state.village_code,error:"village_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Village",className:"p-2"})}),this.props.formAccess.graduation_date&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Graduation date",name:"graduation_date",type:"date",onChange:function(e){return t.setState({graduation_date:e.target.value,error:{target:null,msg:""}})},value:this.state.graduation_date,error:"graduation_date"===this.state.error.target?this.state.error.msg:"",placeholder:"Graduation date",className:"p-2"})}),this.props.formAccess.specialization_id&&Object(D.jsx)(D.Fragment,{children:this.state.specialization_open?Object(D.jsxs)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:[Object(D.jsx)("label",{className:"block",children:"Specialization"}),Object(D.jsx)(w.a,{click:function(e){return t.setState({specialization_id:e.specialization_id,specialization_open:!1})},close:function(){return t.setState({specialization_open:!1})},data:[{value:"",title:""}].concat(Object(r.a)(a.specializations.map((function(e){return{specialization_id:e.specialization_id,specialization_name:e.specialization_name}})))),id:"specialization_id",title:"specialization_name",loading:this.state.loading})]}):Object(D.jsx)("div",{onClick:function(){return t.setState({specialization_open:!0})},className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{error:"specialization_id"===this.state.error.target?this.state.error.msg:"",label:"Specialization",name:"",onChange:function(e){},placeholder:"",value:void 0===i?"":i.specialization_name})})}),this.props.formAccess.contract_type&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:[{title:this.state.contract_type?this.state.contract_type:"",value:this.state.contract_type?this.state.contract_type:""}].concat(Object(r.a)(a.contract_types.map((function(e){return{value:e,title:e}})))),error:"contract_type"===this.state.error.target?this.state.error.msg:"",value:this.state.contract_type,onChange:function(e){return t.setState({contract_type:e.target.value,error:{target:null,msg:""}})},label:"Contract type",name:"staff_category",placeholder:"Select category"})}),this.props.formAccess.hired_date&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(g.a,{disabled:this.state.loading,label:"Date of hire (Date in education)",name:"hired_date",onChange:function(e){return t.setState({hired_date:e.target.value,error:{target:null,msg:""}})},value:this.state.hired_date,error:"hired_date"===this.state.error.target?this.state.error.msg:"",type:"date",placeholder:"Hired date",className:"p-2"})}),this.props.formAccess.education_certificate_id&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:c,error:"education_certificate_id"===this.state.error.target?this.state.error.msg:"",value:this.state.education_certificate_id,onChange:function(e){return t.setState({education_certificate_id:e.target.value,error:{target:null,msg:""}})},label:"Education certificate",name:"education_certificate_id",placeholder:"Select a value"})}),this.props.formAccess.teaching_level_id&&Object(D.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(D.jsx)(_.a,{data:o,error:"teaching_level_id"===this.state.error.target?this.state.error.msg:"",value:this.state.teaching_level_id,onChange:function(e){return t.setState({teaching_level_id:e.target.value,error:{target:null,msg:""}})},label:"Teaching level",name:"teaching_level_id",placeholder:"Select a value"})})]}),Object(D.jsxs)("div",{className:"px-6 text-right flex",children:[Object(D.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(D.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(D.jsx)("div",{className:"",children:Object(D.jsx)(N.a,{type:"submit",size:"lg",loading:this.state.loading,children:"Update staff details"})})]})]})]}),Object(D.jsx)(x.a,{children:Object(D.jsx)("div",{className:"bg-gray-100 py-1 mt-4 rounded",children:""!==this.state.staff_code?Object(D.jsx)(G,{allowEdit:!0,staff_code:this.state.staff_code,full_name:this.state.full_name}):Object(D.jsx)("div",{className:"bg-gray-100 rounded-md px-6 py-3 font-extrabold text-gray-500 text-center text-2xl",children:"Loading, please wait..."})})})]})}}]),s}(h.a.Component),J=Object(j.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_GetRegistrationAssets:m.eb,FC_GetUserDetailsInfo:m.Cb})(V),Y=s(448),W=s(374),Q=s(26),K=function(e,t){return null!==e?e.filter((function(s){return s.qualification_name===t.qualification&&null!==e})):[]},X=function(e){var t=Object(d.useState)(null),s=Object(A.a)(t,2),a=s[0],r=s[1],i=Object(d.useState)(!1),c=Object(A.a)(i,2),o=c[0],n=c[1],l=Object(d.useState)(""),h=Object(A.a)(l,2),u=h[0],j=h[1],p=Object(d.useState)(null),x=Object(A.a)(p,2),f=x[0],_=x[1],g=function(){var t=Object(C.a)(Object(S.a)().mark((function t(){var s,r,i;return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.auth.user||""===u){t.next=22;break}if(n(!0),null===e.basic.positions){t.next=18;break}return t.prev=3,t.next=6,T.a.post("".concat(H.e,"/user/assign/position"),{user_id:e.user.user_id,school_code:e.school.school_code,position_code:u,qualification_id:null===(s=e.basic.positions.find((function(e){return e.position_code===u})))||void 0===s?void 0:s.qualification_id});case 6:r=t.sent,null!==a&&void 0!==(i=a.find((function(e){return e.position_code===u})))&&(_(i.position_name),e.updateUserPosition(e.user.user_id,i.position_name)),console.log("Success: ",r),e.close&&e.close(),alert("User position assignment done successfully!"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log("Err: ",t.t0);case 16:t.next=19;break;case 18:alert("Wait for positions to be loaded!");case 19:n(!1),t.next=23;break;case 22:alert("Please select a position!");case 23:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(){return t.apply(this,arguments)}}();return Object(d.useEffect)((function(){null===a&&e.basic.academic_calender&&Object(m.nb)(e.school.school_code,e.basic.academic_calender.academic_year_id,(function(e,t,s){n(!0),!0===e&&null!==t&&(r(t.school_positions),n(!1))}))})),null!==a&&0===K(a,e.user).length?Object(D.jsx)("div",{className:"p-7 mb-7",children:Object(D.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[Object(D.jsx)("div",{children:Object(D.jsx)(b.c,{className:"text-8xl text-gray-300"})}),Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"text-accent-900 font-extrabold text- text-3xl flex flex-row items-center gap-3",children:[Object(D.jsx)("span",{children:"Missing positions for "}),Object(D.jsx)("div",{className:"font-extrabold bg-accent-900 text-white px-1 rounded-md w-max text-2xl",children:e.user.qualification})]}),Object(D.jsx)("div",{className:"text-gray-600 text- text-lg",children:"There are no available positions for selected qualification in the school. Please, you need to add positions first before assigning to a staff!"}),Object(D.jsx)("div",{className:"flex items-center justify-cente mt-4",children:Object(D.jsx)(Q.b,{to:"/assign-school-position",children:Object(D.jsx)("div",{className:"bg-primary-800 text-white rounded text-base font-bold text-center px-3 py-2 cursor-pointer w-max",children:"Click to add school positions"})})})]})]})}):Object(D.jsxs)("div",{className:"px-4 pb-4 bg-gray-50 border-t rounded-b",children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:"School name: "}),Object(D.jsxs)("div",{className:"text-xl font-bold",children:[e.school.school_name," (",e.school.school_code,")"]})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:"Teacher: "}),Object(D.jsxs)("div",{className:"text-xl font-bold text-primary-800",children:[e.user.first_name," ",e.user.last_name," (",e.user.role,")"]})]}),!0===o?Object(D.jsx)("div",{className:"flex flex-col items-center justify-center w-full p-3 rounded",children:Object(D.jsx)(v.a,{})}):null!==f?Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:"Submitted position: "}),Object(D.jsx)("div",{className:"text-xl font-bold text-green-700 bg-green-100 rounded-lg px-4 py-2",children:f})]}):null!==e.user.position&&Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:"Current position: "}),Object(D.jsx)("div",{className:"text-xl font-bold text-green-700 bg-green-100 rounded-lg px-4 py-2",children:e.user.position})]}),!0===o||null===a||!0===e.loading?Object(D.jsx)("div",{className:"text-2xl font-bold text-yellow-700 text-center",children:"Loading, Please wait..."}):Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{children:[null===e.user.position?"Choose position for (".concat(e.user.qualification,")"):"Update position for (".concat(e.user.qualification,")"),":"," "]}),Object(D.jsx)("div",{children:0===K(a,e.user).length?Object(D.jsxs)("div",{className:"bg-red-100 text-red-900 font-bold px-4 py-2 text-xl rounded",children:["No available posts on your qualification (",e.user.qualification,")"]}):Object(D.jsxs)("select",{value:u,onChange:function(e){return j(e.target.value)},className:"px-3 py-2 rounded-md w-full border-2 border-primary-900",children:[Object(D.jsx)("option",{value:"",children:"Choose school position"}),K(a,e.user).filter((function(t){return t.position_name!==e.user.position})).map((function(e,t){return Object(D.jsx)("option",{value:e.position_code,children:e.position_name+" ("+e.qualification_name+")"},t+1)}))]})})]}),!1===o&&Object(D.jsxs)("div",{className:"flex flex-row justify-between mt-2",children:[Object(D.jsx)("div",{onClick:function(){return e.close&&e.close()},className:"bg-gray-200 text-black px-4 py-2 rounded cursor-pointer w-max",children:"Cancel"}),Object(D.jsx)("div",{onClick:function(){g()},className:"bg-primary-800 text-white px-4 py-2 rounded cursor-pointer w-max",children:"Submit"})]})]})},Z=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).submitLogin=function(e){e.preventDefault()},a.componentDidMount=function(){a.startApp()},a.DisableUser=function(e){console.log("deleting candidate"),!0===window.confirm("Are you sure you want to deactivate this user?")&&(a.setState({disable_user_loading:!0}),a.props.FC_DisableUser(e,(function(t,s){!0===t?a.setState({data:a.state.data.filter((function(t){return t.user_id!==e})),disable_user_loading:!1}):a.setState({disable_user_loading:!1,error:{target:"main-error",msg:s}})})))},a.startApp=function(){if(null===a.props.basic.academic_calender)a.setState({error:{target:"main-error",msg:"failed to load data, please reload the page (Refresh)"}});else if(null===a.props.auth.school&&void 0===a.props.school_code)a.setState({error:{target:"main-error",msg:"No school assigned to you"}});else{var e,t=void 0===a.props.school_code?null===(e=a.props.auth.school)||void 0===e?void 0:e.school_code:a.props.school_code;if(a.setState({error:{target:null,msg:""},loading_data:!0}),void 0===t)return a.setState({error:{target:"main-error",msg:"Invalid school ID"}});Object(m.ub)(t,(function(e,s,r){if(!0===e&&null!==s){var i=s.staff.filter((function(e){return"Active"===e.status}));a.setState({loading_data:!1,data:i,roles:s.role}),Object(m.qb)(t+"",(function(e,t,s){!0===e?a.setState({schools_positions:t,school_positions_loading:!1}):a.setState({schools_positions:[],school_positions_loading:!1,error:{msg:s,target:"main-error"}})}))}else a.setState({loading_data:!1,error:{msg:r,target:"main-error"}})}))}},a.state={disable_user_loading:!1,loading:!1,data:[],roles:[],error:{target:null,msg:""},loading_data:!0,selected_role:"",selected_request_id:"",selected_value:"0",selected_comment:"",selected_auto_level:"",search:"",selected_qualification:"",edit_staff_id:"",addUserPositions:null,view_staff_id:"",change_teacher_post:null,school_register_assets:null,school_register_assets_loading:!0,selected_position_id:"",selected_qualification_id:"",selected_school_code:"",selected_check_validation:"",schools_positions:[],school_positions_loading:!1},a}return Object(o.a)(s,[{key:"render",value:function(){var e,t,s,c,o=this;if("main-error"===this.state.error.target)return Object(D.jsx)(p.a,{theme:"danger",fixed:!0,children:this.state.error.msg});var n=""===this.state.selected_role?this.state.data:this.state.data.filter((function(e){return e.role_id===o.state.selected_role}));return n=""===this.state.selected_qualification?n:n.filter((function(e){return e.qualification===o.state.selected_qualification})),n=Object(q.v)(n,this.state.search,{email:!0,first_name:!0,full_name:!0,last_name:!0,phone_numbers:!0,qualification:!0,role:!0,role_id:!0,status:!0,user_id:!0,username:!0,nid:!0}),!0===this.state.loading_data?Object(D.jsx)("div",{className:"p-8 text-center",children:Object(D.jsx)("div",{className:"mx-auto",children:Object(D.jsx)(v.a,{})})}):""!==this.state.edit_staff_id?Object(D.jsx)(J,{user_id:this.state.edit_staff_id,school_code:this.props.school_code?this.props.school_code:(null===(e=this.props.auth.school)||void 0===e?void 0:e.school_code)+"",success:function(e,t){o.setState({data:o.state.data.map((function(s){return s.user_id===e?Object(i.a)(Object(i.a)({},s),{},{email:t.email,first_name:t.first_name,full_name:t.full_name,last_name:t.last_name,phone_numbers:t.phone_numbers,username:t.username}):s}))})},formAccess:{first_name:!0,middle_name:!0,last_name:!0,full_name:!0,phone_numbers:!0,email:!0,username:!0,staff_code:!0,sex:!0,martial_status:!0,highest_qualification_id:!0,dob:!0,rssb_number:!0,nationality_id:!0,bank_account:!0,bank_id:!0,specialization_id:!0,village_code:!1,contract_type:!0,education_domain_id:!0,education_sub_domain_id:!0,graduation_date:!0,hired_date:!1,staff_category_id:!0,education_certificate_id:!0,teaching_level_id:!0},required:{first_name:!0,middle_name:!1,last_name:!0,full_name:!0,phone_numbers:!0,email:!1,username:!0,staff_code:!0,sex:!0,martial_status:!0,highest_qualification_id:!0,dob:!0,rssb_number:!0,nationality_id:!0,bank_account:!0,bank_id:!0,specialization_id:!0,village_code:!1,contract_type:!0,education_domain_id:!0,education_sub_domain_id:!0,graduation_date:!0,hired_date:!1,staff_category_id:!0,education_certificate_id:!0,teaching_level_id:!0},close:function(){return o.setState({edit_staff_id:""})}}):!Object(q.r)(this.state.view_staff_id)&&null===this.state.addUserPositions&&Object(q.r)(this.state.edit_staff_id)?Object(D.jsx)(Y.UserProfile,{isExternal:!0,user_id:this.state.view_staff_id,close:function(){return o.setState({view_staff_id:""})},setEditStaff:function(e){return o.setState({edit_staff_id:e})},user_data:n.find((function(e){return e.user_id===o.state.view_staff_id})),setAddUserPositions:function(e){return o.setState({addUserPositions:e})},DisableUser:function(e){return o.DisableUser(e)}}):Object(D.jsxs)(d.Fragment,{children:[Object(D.jsxs)(D.Fragment,{children:["main-success"===this.state.error.target&&Object(D.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(D.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),!0===this.state.disable_user_loading&&Object(D.jsx)(p.a,{theme:"info",fixed:!0,children:Object(D.jsx)("span",{className:"animate__animated animate__fadeIn animate__infinite",children:"Disabling..."})}),Object(D.jsxs)(x.a,{children:["main"===this.state.error.target&&Object(D.jsx)(p.a,{theme:"danger",children:this.state.error.msg}),"loading-update-error"===this.state.error.target&&Object(D.jsx)(p.a,{theme:"danger",children:this.state.error.msg}),Object(D.jsxs)("div",{className:"flex items-center",children:[Object(D.jsxs)("div",{className:"flex-1",children:[Object(D.jsx)(f.a,{children:"Staff list"}),Object(D.jsx)("p",{className:"opacity-60 text-lg -mt-1 font-bold text-accent-900 dark:text-accent-800",children:null===(t=this.props.auth.school)||void 0===t?void 0:t.school_name})]}),Object(D.jsx)("div",{className:""})]}),Object(D.jsxs)("div",{className:"mt-3",children:[Object(D.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center pl-3 pr-2 rounded",children:[Object(D.jsx)("div",{className:"flex-1 pr-2",children:Object(D.jsx)(g.a,{error:"",label:"Search",name:"",type:"search",onChange:function(e){return o.setState({search:e.target.value})},placeholder:"Search by name, nid",value:this.state.search,size:"sm"})}),!this.props.auth.school&&Object(D.jsx)("div",{className:"",children:Object(D.jsx)(_.a,{data:[{title:"All Occupations",value:""}].concat(Object(r.a)(this.state.roles.map((function(e){return{title:e.role,value:e.role_id}})))),error:"",name:"select_role",onChange:function(e){return o.setState({selected_role:e.target.value})},label:"Occupation",placeholder:"Select Occupation",value:this.state.selected_role,size:"sm"})}),null!==this.props.basic.qualifications&&Object(D.jsx)("div",{className:"px-2",children:Object(D.jsx)(_.a,{data:[{title:"All",value:""}].concat(Object(r.a)(this.props.basic.qualifications.filter((function(e){return"HIGH"!==e.qualification_status})).map((function(e){return{title:e.qualification_name,value:e.qualification_name}})))),error:"",name:"select_qualification",onChange:function(e){return o.setState({selected_qualification:e.target.value})},label:"Qualification",placeholder:"Select Qualification",value:this.state.selected_qualification,size:"sm"})}),Object(D.jsxs)("div",{className:"p-2 px-3 ml-3 bg-accent-800 bg-opacity-30 rounded",children:[Object(D.jsx)("label",{className:"",children:"Results:"}),Object(D.jsx)("h4",{className:"text-2xl -mt-1 font-bold",children:n.length})]})]}),Object(D.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{className:"p-2 border",children:"#"}),Object(D.jsx)("th",{className:"p-2 border",children:"NID"}),Object(D.jsx)("th",{className:"p-2 border",children:"Passport"}),Object(D.jsx)("th",{className:"p-2 border",children:"Staff code"}),Object(D.jsx)("th",{className:"p-2 border",children:"Names"}),Object(D.jsx)("th",{className:"p-2 border",children:"Phone number"}),Object(D.jsx)("th",{className:"p-2 border",children:"Position"}),Object(D.jsx)("th",{className:"p-2 border",children:"Occupation"}),Object(D.jsx)("th",{className:"p-2 border",children:"Validated"}),Object(D.jsx)("th",{className:"p-2 border"}),null!==this.props.auth.role&&"2"!==this.props.auth.role.role_id&&"1"!==this.props.auth.role.role_id&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("th",{className:"p-2 border",children:"Qualification"}),Object(D.jsx)("th",{className:"p-2 border",children:"School"})]}),void 0===this.props.school_code&&Object(D.jsx)("th",{})]})}),Object(D.jsx)("tbody",{children:n.length<=0?Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(D.jsx)(f.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):n.map((function(e,t){var s,a=Object(W.b)(e),c=Object(W.a)(e,o.state.schools_positions);return!1===c.match_position&&(a=Object(i.a)(Object(i.a)({},a),{},{errors:[].concat(Object(r.a)(a.errors),["Position: ".concat(c.position.position_name," is not assigned to this school")])})),Object(D.jsxs)(d.Fragment,{children:[Object(D.jsxs)("tr",{className:"group border rounded hover:bg-yellow-600 hover:bg-opacity-10 text-sm",children:[Object(D.jsx)("td",{className:"p-2 border",children:t+1},t),Object(D.jsx)("td",{className:"p-2 border",children:e.nid}),Object(D.jsx)("td",{className:"p-2 border",children:(null===e||void 0===e?void 0:e.passport)||""}),Object(D.jsx)("td",{className:"p-2 border",children:e.staff_code}),Object(D.jsx)("td",{className:"p-2 border",children:e.full_name}),Object(D.jsx)("td",{className:"p-2 border",children:e.phone_numbers}),Object(D.jsx)("td",{className:"p-2 border",children:e.position}),Object(D.jsx)("td",{className:"p-2 border",children:e.role}),Object(D.jsx)("td",{className:"w-24 text-center parent-hide-child",children:!1===a.validated?Object(D.jsx)("button",{onClick:function(){return o.setState({selected_check_validation:e.user_id})},className:"text-xs bg-red-400 text-white p-0.5 rounded-full",children:"Non-Validated"}):Object(D.jsx)("span",{className:"text-xs bg-green-500 text-white p-0.5 rounded-full",children:"Validated"})}),null!==o.props.auth.role&&"2"!==o.props.auth.role.role_id&&"1"!==o.props.auth.role.role_id&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("td",{className:"p-2 border",children:e.qualification}),Object(D.jsx)("td",{className:"p-2 border",children:null===(s=e.school)||void 0===s?void 0:s.school_name})]}),void 0===o.props.school_code&&Object(D.jsx)("td",{className:"p-1 border",children:Object(D.jsx)("button",{onClick:function(){return o.setState({view_staff_id:e.user_id})},className:"opacity-80 group-hover:opacity-100 bg-accent-800 bg-opacity-0 hover:bg-opacity-100 hover:text-white text-accent-900 font-semibold py-2 px-4 rounded",children:"View"})})]}),o.state.selected_check_validation===e.user_id&&Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:10,className:"pb-5",children:Object(D.jsxs)("div",{className:"pb-2 rounded-b-lg -mt-1 animate__animated animate__zoomIn animate__faster border bg-red-100",children:[Object(D.jsxs)("div",{className:"p-1 px-2 flex bg-red-200",children:[Object(D.jsx)("h2",{className:"flex-1 text-lg font-bold",children:"Please validate"}),Object(D.jsx)(N.a,{className:"",size:"sm",theme:"danger-light",onClick:function(){return o.setState({selected_check_validation:""})},children:"Close"})]}),Object(D.jsx)("div",{className:"px-2 gap-1 rounded grid md:grid-cols-2 lg:grid-cols-3 pt-2",children:a.errors.map((function(e,t){return Object(D.jsxs)("div",{className:"border rounded full mb-1 mx-2 border-red-300 bg-white p-1 flex",children:[Object(D.jsx)(u.Rb,{className:"pr-1 text-xl inline-block text-yellow-600"})," ",Object(D.jsx)("p",{children:e})]},t)}))})]})})})]},t)}))})]})]})]})]}),Object(y.c)(null===(s=this.props.auth)||void 0===s||null===(c=s.role)||void 0===c?void 0:c.access,y.b.EDIT_USERS_POSITION)&&null!==this.state.addUserPositions&&null!==this.props.auth.school&&Object(D.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:function(){o.setState({addUserPositions:null})},backDropClose:null!==this.state.addUserPositions.qualification&&""!==this.state.addUserPositions.qualification,widthSizeClass:O.b.large,displayClose:null!==this.state.addUserPositions.qualification&&""!==this.state.addUserPositions.qualification,title:null===this.state.addUserPositions.qualification||""===this.state.addUserPositions.qualification?"":Object(D.jsx)("div",{className:"text-2xl w-full text-primary-800 -mb-2",children:"ADD USER POSITION"}),padding:{title:!0},children:null===this.state.addUserPositions.qualification||""===this.state.addUserPositions.qualification?Object(D.jsxs)("div",{className:"p-7",children:[Object(D.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[Object(D.jsx)("div",{children:Object(D.jsx)(b.c,{className:"text-8xl text-gray-300"})}),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"text-accent-900 font-extrabold text- text-3xl",children:"Staff qualification is missing"}),Object(D.jsx)("div",{className:"text-black text- text-lg",children:"Please assign qualification. Go to staff profile, then click on change school/position to add qualification"})]})]}),Object(D.jsx)("div",{className:"flex items-center justify-center mt-4",children:Object(D.jsx)("div",{onClick:function(){return o.setState({addUserPositions:null})},className:"bg-primary-800 text-white rounded text-base font-bold text-center px-3 py-2 cursor-pointer w-max",children:"Click to add qualification"})})]}):Object(D.jsx)(X,{user:this.state.addUserPositions,school:this.props.auth.school,auth:this.props.auth,loading:this.state.loading,basic:this.props.basic,close:function(){return o.setState({addUserPositions:null})},updateUserPosition:function(e,t){var s,r=[],i=Object(a.a)(o.state.data);try{for(i.s();!(s=i.n()).done;){var c=s.value;c.user_id===e?r.push({email:c.email,first_name:c.first_name,full_name:c.full_name,last_name:c.last_name,phone_numbers:c.phone_numbers,qualification:c.qualification,role:c.role,role_id:c.role_id,status:c.status,user_id:c.user_id,position:t,username:c.username,bank_account:c.bank_account,dob:c.dob,marital_status:c.marital_status,nationality_id:c.nationality_id,nid:c.nid,passport:c.passport,rssb_number:c.rssb_number,location:c.location,school:c.school,sex:c.sex,specialization:c.specialization,staff_category:c.staff_category,staff_code:c.staff_code,start_date_in_the_school:c.start_date_in_the_school,teacher_hierarch:c.teacher_hierarch,position_code:c.position_code}):r.push(c)}}catch(n){i.e(n)}finally{i.f()}o.setState({data:r})}})})]})}}]),s}(h.a.Component),$=Object(j.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_DisableUser:m.x})(Z)},451:function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var a=s(3),r=s(6),i=s(29),c=s(19),o=s(20),n=s(21),l=s(22),d=s(4),h=s(54),u=s(16),b=s(365),j=s(13),m=s(15),p=s(25),x=s(41),f=s(28),_=s(11),g=s(7),v=s.n(g),O=s(58),y=s(12),N=s(1),w=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t,s,r){var i,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",alert("Please select atleast one subject"));case 2:return i=t.map((function(e){return{school_code:s,shool_hierarch_id:e.studyhierarchyid}})),r(!1,""),e.prev=4,e.next=7,v.a.post("".concat(y.e,"/schoolhierarch/create"),i);case 7:c=e.sent,r(!0,"School subjects has added successfully!"),console.log("Success: ",c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),r(!0,""),console.log("Err: ",Object(_.a)({},e.t0));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,s,a){return e.apply(this,arguments)}}(),S=function(e){var t,s=Object(d.useState)(null),a=Object(f.a)(s,2),r=a[0],i=a[1],c=Object(d.useState)(!1),o=Object(f.a)(c,2),n=o[0],l=o[1],p=Object(d.useState)(null),_=Object(f.a)(p,2),g=_[0],v=_[1],y=Object(d.useState)(""),S=Object(f.a)(y,2),C=S[0],P=S[1],q=Object(d.useState)([]),A=Object(f.a)(q,2),I=A[0],T=A[1],H=Object(d.useState)(!1),D=Object(f.a)(H,2),z=D[0],L=D[1],F=Object(d.useState)(""),R=Object(f.a)(F,2),E=R[0],U=R[1],G=Object(d.useState)(""),M=Object(f.a)(G,2),B=M[0],V=M[1],J=Object(d.useState)(""),Y=Object(f.a)(J,2),W=Y[0],Q=Y[1],K=function(){var t=e.school_hierarchy_data;return null!==t?(null!==r&&""!==r&&(t=t.filter((function(e){return e.level_code===r}))),null!==g&&(t=t.filter((function(e){return e.combination_code===g}))),t):[]};return Object(N.jsxs)("div",{className:"fixed bg-black bg-opacity-50 top-0 left-0 w-full h-full z-50 flex items-center justify-center animate__animated animate__fadeIn animate__faster",children:[Object(N.jsxs)("div",{className:"bg-white rounded-md animate__animated animate__zoomIn animate__faster z-50 w-full h-full overflow-auto",children:[Object(N.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 px-2 py-2 border-b border-gray-400",children:[Object(N.jsx)("div",{className:"text-xl font-bold ml-2 uppercase mt-2",children:"Assign new subject"}),Object(N.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"flex items-center justify-center p-1 rounded-full bg-gray-100 text-2xl hover:bg-yellow-100 hover:text-accent-900 cursor-pointer",title:"Close window",children:Object(N.jsx)(u.r,{})})]}),Object(N.jsxs)("div",{className:"p-2 md:p-6",children:[Object(N.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(N.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(N.jsx)("div",{className:"text-5xl text-gray-400",children:Object(N.jsx)(O.h,{})}),Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("span",{className:"text-gray-600",children:"School name"}),Object(N.jsxs)("span",{className:"font-bold -mt-1",children:[e.school.school_name," (",e.school.school_code,")"]})]})]}),Object(N.jsx)("div",{className:"flex flex-col justify-center items-end"})]}),Object(N.jsx)("div",{className:"",children:Object(N.jsx)("div",{className:"mb-10",children:Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"p-2 mb-5",children:Object(N.jsxs)("div",{className:"mt-4",children:[Object(N.jsx)("div",{children:"Filter by"}),Object(N.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(N.jsxs)("select",{onChange:function(e){return i(e.target.value)},value:null===r?"":r,className:"border border-gray-400 rounded px-3 py-2",children:[Object(N.jsx)("option",{value:"",children:"Choose education level"}),Object(N.jsx)("option",{value:"",children:"Show all levels"}),Object(j.mb)(e.allHierarchy,{type:j.yc.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(N.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(N.jsxs)("div",{className:"w-full",children:[Object(N.jsxs)("div",{onClick:function(){return l(!n)},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===g?Object(N.jsx)("span",{children:"All- Click to filter by combination"}):Object(N.jsx)("span",{children:null===(t=Object(j.mb)(e.allHierarchy,{type:j.yc.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===g})))||void 0===t?void 0:t.combination_name}),Object(N.jsx)("div",{className:"-mr-3",children:!0===n?Object(N.jsx)(u.r,{}):Object(N.jsx)(h.a,{})})]}),!0===n&&Object(N.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(N.jsx)("input",{value:C,onChange:function(e){return P(e.target.value)},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{onClick:function(){return l(!1)},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(N.jsx)(u.r,{})})})]}),null!==g&&Object(N.jsxs)("div",{onClick:function(){v(null),l(!1)},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(N.jsx)("div",{children:Object(N.jsx)(b.a,{className:"text-xl"})}),Object(N.jsx)("span",{children:"Click to view all"})]})]}),Object(N.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(m.v)(Object(j.mb)(e.allHierarchy,{type:j.yc.COMBINATIONS,status:!0}).combinations,C).length?Object(N.jsx)("div",{className:"text-center text-lg font-bold p-5 px-10 text-gray-500",children:"No result found!"}):Object(m.v)(Object(j.mb)(e.allHierarchy,{type:j.yc.COMBINATIONS,status:!0}).combinations,C).map((function(e,t){return Object(N.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(g===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){v(e.combination_code),l(!1)},children:[Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(N.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]}),Object(N.jsx)("input",{className:"px-3 py-2 rounded border border-gray-400 w-full",placeholder:"Search keyword...",value:W,onChange:function(e){return Q(e.target.value)}})]})]})}),Object(N.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(N.jsx)("div",{className:"w-full overflow-x-auto",children:Object(N.jsxs)("table",{className:"min-w-full text-left",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(N.jsx)("tbody",{className:"text-sm",children:null===e.school_hierarchy_data?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:7,children:Object(N.jsx)(k,{})})}):0===Object(m.v)(K(),W).length?Object(N.jsx)("td",{colSpan:7,children:Object(N.jsx)("div",{className:"text-lg p-3 text-center",children:"No result found"})}):Object(m.v)(K(),W).map((function(e,t){return Object(N.jsxs)("tr",{className:"".concat(void 0!==I.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))?"text-gray-500":"hover:bg-yellow-50 hover:text-accent-900"," group"),children:[Object(N.jsx)("td",{className:"p-2 border-b text-center",children:t+1}),Object(N.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(N.jsx)("td",{className:"p-2 border-b",children:Object(N.jsx)("div",{className:"flex flex-row items-center justify-end",children:void 0===I.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))?Object(N.jsx)("div",{onClick:function(){return t=e,void T([].concat(Object(x.a)(I.filter((function(e){return e.studyhierarchyid!==t.studyhierarchyid}))),[t]));var t},className:"rounded bg-yellow-100 group-hover:bg-accent-900 group-hover:text-white px-3 py-2 w-max text-center border border-yellow-300 group-hover:border-accent-900 cursor-pointer text-sm font-bold",children:"Add subject"}):Object(N.jsx)("div",{onClick:function(){return t=e,void T(Object(x.a)(I.filter((function(e){return e.studyhierarchyid!==t.studyhierarchyid}))));var t},className:"rounded bg-red-50 group-hover:bg-red-200 text-black border border-red-100 group-hover:border-red-700 group-hover:text-red-800 px-3 py-2 w-max text-center cursor-pointer text-sm font-bold",children:"Remove"})})})]},t+1)}))})]})})})]})})})]})]}),I.length>0&&Object(N.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-50 bg-blue-600 p-2 animate__animated animate__fadeInUp",children:!1===z?Object(N.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[""!==B&&Object(N.jsx)("div",{className:"bg-red-200 text-red-800 px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return V("")},children:B}),""!==E&&Object(N.jsx)("div",{className:"bg-green-600 text-white px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return U("")},children:E}),Object(N.jsxs)("div",{className:"text-white flex flex-col items-end mr-2",children:[Object(N.jsx)("span",{className:"text-sm text-blue-300",children:"Selected subjects"}),Object(N.jsx)("span",{className:"text-2xl font-extrabold -mt-2",children:I.length})]}),Object(N.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"btn bg-gray-200 text-black rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Cancel"}),Object(N.jsx)("div",{onClick:function(){L(!0),w(I,e.school.school_code,(function(t,s){""!==s&&!0===t&&(U("School subjects added successfully!"),T([]),e.setAddNew(!1),e.setLoadSchoolSubjects()),""===s&&!0===t&&V("Something went wrong. Try again!"),L(!1)})),L(!1)},className:"btn bg-green-700 text-white rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Save changes"})]}):Object(N.jsx)("div",{className:"text-white text-lg text-right py-2",children:"Saving, Please wait..."})})]})},C=s(9),k=function(){return Object(N.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(N.jsx)(p.a,{}),Object(N.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]})},P=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var o;return Object(c.a)(this,s),(o=t.call(this,e)).setAddNew=function(e){o.setState({addNew:e,addingNew:!0===e})},o.setAddingNew=function(e){o.setState({addingNew:e})},o.setLoading=function(e){o.setState({loading:e})},o.FilterSchoolHierarchy=function(e){var t,s=[],a=Object(i.a)(e);try{var r=function(){var e=t.value,a=o.props.allHierarchy.find((function(t){return t.studyhierarchyid===e.shool_hierarch_id&&"0"!==e.status}));void 0!==a&&s.push(a)};for(a.s();!(t=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}return s},o.setLoadSchoolSubjects=function(){return Object(j.lb)(o.props.school.school_code,(function(e,t){o.setLoading(!0),!0===e&&null!==t?o.setState({school_hierarchy:t,school_hierarchy_data:o.FilterSchoolHierarchy(t),loading:!1}):o.setState({school_hierarchy:[],school_hierarchy_data:[],loading:!1})}))},o.FilteredData=function(){var e=o.state.school_hierarchy_data;return null!==e?(null!==o.state.selected_level_code&&""!==o.state.selected_level_code&&(e=e.filter((function(e){return e.level_code===o.state.selected_level_code}))),null!==o.state.selected_combination_code&&(e=e.filter((function(e){return e.combination_code===o.state.selected_combination_code}))),e):[]},o.RemoveSchoolHierarchy=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to remove this subject on school?")){e.next=13;break}return o.setLoading(!0),e.prev=2,e.next=5,v.a.post("".concat(y.e,"/schoolhierarch/delete/").concat(t),{});case 5:s=e.sent,console.log("Success: ",s),200===s.status&&(o.setLoadSchoolSubjects(),o.setState({error:"",success:"School subject removed successfully!"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o.setState({error:Object(C.a)(e.t0),success:"",loading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),o.componentDidMount=function(){o.setLoadSchoolSubjects()},o.state={loading:!0,school_hierarchy:null,school_hierarchy_data:null,selected_level_code:null,selected_combination_code:null,filter_by_combination:!1,search_comb:"",addNew:!1,addingNew:!1,success:"",error:"",search:""},o}return Object(o.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.state.school_hierarchy||null===this.state.school_hierarchy||this.state.loading,Object(N.jsxs)(d.Fragment,{children:[Object(N.jsx)("div",{className:"mb-10",style:void 0!==this.props.fixedHeight?{height:"60vh",overflow:"auto"}:{},children:Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"p-2 mb-5",children:[Object(N.jsxs)("div",{className:"flex flex-row items-center gap-3 justify-between",children:[Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("div",{className:"text-2xl font-bold",children:"SCHOOL SUBJECTS ASSIGNMENT"}),Object(N.jsxs)("div",{className:"text-sm text-gray-500",children:[this.props.school.school_name,"(",this.props.school.school_code,")"]})]}),Object(N.jsx)("div",{onClick:function(){t.setAddingNew(!0),t.setAddNew(!0)},className:"border ".concat(!1===this.state.addingNew?"bg-yellow-100 border-yellow-400":"bg-gray-100"," text-black px-3 py-2 rounded text-center hover:text-accent-900 cursor-pointer font-bold"),children:!0===this.state.addingNew?"Loading":"Assign new subjects"})]}),Object(N.jsxs)("div",{className:"mt-4",children:[Object(N.jsx)("div",{children:"Filter by"}),Object(N.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(N.jsxs)("select",{onChange:function(e){return t.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(N.jsx)("option",{value:"",children:"Choose education level"}),Object(N.jsx)("option",{value:"",children:"View by all levels"}),Object(j.mb)(this.props.allHierarchy,{type:j.yc.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(N.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(N.jsxs)("div",{className:"w-full",children:[Object(N.jsxs)("div",{onClick:function(){return t.setState({filter_by_combination:!t.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(N.jsx)("span",{children:"All- Click to filter by combination"}):Object(N.jsx)("span",{children:null===(e=Object(j.mb)(this.props.allHierarchy,{type:j.yc.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===t.state.selected_combination_code})))||void 0===e?void 0:e.combination_name}),Object(N.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(N.jsx)(u.r,{}):Object(N.jsx)(h.a,{})})]}),!0===this.state.filter_by_combination&&Object(N.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(N.jsx)("input",{value:this.state.search_comb,onChange:function(e){return t.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{onClick:function(){return t.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(N.jsx)(u.r,{})})})]}),null!==this.state.selected_combination_code&&Object(N.jsxs)("div",{onClick:function(){return t.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(N.jsx)("div",{children:Object(N.jsx)(b.a,{className:"text-xl"})}),Object(N.jsx)("span",{children:"Click to view all"})]})]}),Object(N.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(m.v)(Object(j.mb)(this.props.allHierarchy,{type:j.yc.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(N.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):Object(m.v)(Object(j.mb)(this.props.allHierarchy,{type:j.yc.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,s){return Object(N.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(t.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){return t.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:s+1})}),Object(N.jsx)("div",{children:e.combination_name})]},s+1)}))})]})]}),Object(N.jsx)("input",{className:"px-3 py-2 rounded border border-gray-400 w-full",placeholder:"Search keyword...",value:this.state.search,onChange:function(e){return t.setState({search:e.target.value})}})]})]})]}),""!==this.state.success&&Object(N.jsx)("div",{onClick:function(){return t.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(N.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(N.jsxs)("div",{children:["Success: ",this.state.success]}),Object(N.jsx)("div",{children:Object(N.jsx)(u.r,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(N.jsx)("div",{onClick:function(){return t.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(N.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(N.jsxs)("div",{children:["Error: ",this.state.error]}),Object(N.jsx)("div",{children:Object(N.jsx)(u.r,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(N.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(N.jsx)("div",{className:"w-full overflow-x-auto",children:Object(N.jsxs)("table",{className:"min-w-full text-left",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(N.jsx)("th",{className:"p-2 border-b-2 border-gray-300"})]})}),Object(N.jsx)("tbody",{className:"text-sm",children:null===this.state.school_hierarchy_data?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:7,children:Object(N.jsx)(k,{})})}):0===Object(m.v)(this.FilteredData(),this.state.search).length?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:7,children:Object(N.jsx)("div",{className:"text-center text-lg text-gray-500 p-3",children:"No result found"})})}):Object(m.v)(this.FilteredData(),this.state.search).map((function(e,s){return Object(N.jsxs)("tr",{className:"hover:bg-yellow-50 group",children:[Object(N.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(N.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(N.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(N.jsx)("td",{className:"border-b",children:Object(N.jsx)("div",{className:"flex justify-end",children:Object(N.jsx)("div",{onClick:function(){if(console.log("Current item: ",e),null!==t.state.school_hierarchy){var s=t.state.school_hierarchy.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}));console.log("Compared: ",s),void 0!==s&&t.RemoveSchoolHierarchy(s.school_study_hierarchy_id)}},className:"bg-red-50 text-red-800 px-3 py-2 mx-1 my-1 rounded font-bold group-hover:bg-red-700 group-hover:text-white cursor-pointer",children:"Remove"})})})]},s+1)}))})]})})})]})}),!0===this.state.addNew&&Object(N.jsx)(S,{school:this.props.school,setAddNew:this.setAddNew,allHierarchy:this.props.allHierarchy,school_hierarchy_data:this.props.allHierarchy,setLoadSchoolSubjects:this.setLoadSchoolSubjects})]})}}]),s}(d.Component);t.b=P},574:function(e,t,s){"use strict";s.r(t),s.d(t,"SchoolsList",(function(){return w}));var a=s(19),r=s(20),i=s(21),c=s(22),o=s(4),n=s.n(o),l=s(16),d=s(36),h=s(13),u=s(47),b=s(23),j=s(53),m=s(92),p=s(39),x=s(25),f=s(393),_=s(447),g=s(451),v=s(5),O=s(15),y=s(1),N=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).submitLogin=function(e){e.preventDefault()},r.componentDidMount=function(){var e;Object(v.a)(null===(e=r.props.auth.role)||void 0===e?void 0:e.access,v.b.VIEW_SCHOOLS_LIST,(function(){r.startApp()})),null===r.props.basic.positions&&r.props.FC_GetAllPositions((function(e,t){console.log(e)})),null===r.props.schoolHierarchyStore.hierarchy&&r.props.FC_AllSchoolHierarchyDetails(!1,(function(e,t){}))},r.startApp=function(){if(null===r.props.basic.academic_calender)r.setState({error:{target:"main",msg:"failed to load data, please reload the page (Refresh)"}});else if(null===r.props.auth.district)r.setState({error:{target:"main",msg:"No district assigned to you"}});else{var e=r.props.auth.district.district_code;Object(h.ob)(e,(function(e,t,s){!0===e&&null!==t?(console.log({status:e,data:t,msg:s}),r.setState({loading_data:!1,data:t})):r.setState({loading_data:!1,error:{msg:s,target:"requests-error"}})}))}},r.selectSchool=function(e){return r.setState({selected_school:e})},r.state={loading:!1,data:[],error:{target:null,msg:""},loading_data:!1,selected_level:"",search:"",schoolPositionsShow:null,selected_school:null,school_tab:"details"},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t=this,s=Object(O.v)(this.state.data,this.state.search,{school_name:!0,school_category:!0,school_code:!0,region_code:!0,school_status:!0});return"main"===this.state.error.target?Object(y.jsx)(j.a,{children:Object(y.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg})}):!0===this.state.loading_data||null===this.props.schoolHierarchyStore.hierarchy?Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"mx-auto p-8",children:Object(y.jsx)(x.a,{})})}):null!==this.state.selected_school?Object(y.jsxs)(j.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(y.jsx)("div",{className:"py-2",children:Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("div",{className:"pr-3",children:Object(y.jsx)(b.a,{onClick:this.selectSchool.bind(this.componentDidCatch,null),children:Object(y.jsx)(l.g,{className:"text-2xl"})})}),Object(y.jsxs)("div",{className:"",children:[Object(y.jsx)("p",{children:"Shool name"}),Object(y.jsx)(m.a,{children:this.state.selected_school.school_name})]})]})}),Object(y.jsxs)("div",{className:"my-2",children:[Object(y.jsx)(b.a,{className:"px-4 mr-1 ".concat("details"===this.state.school_tab?"":"opacity-60"),theme:"primary",onClick:function(){return t.setState({school_tab:"details"})},children:"Details"}),Object(y.jsx)(b.a,{className:"px-4 mr-1 ".concat("staff-list"===this.state.school_tab?"":"opacity-60"),theme:"primary",onClick:function(){return t.setState({school_tab:"staff-list"})},children:"Staff list"}),Object(y.jsx)(b.a,{className:"px-4 mr-1 ".concat("subjects"===this.state.school_tab?"":"opacity-60"),theme:"primary",onClick:function(){return t.setState({school_tab:"subjects"})},children:"School subjects"}),Object(y.jsx)(b.a,{theme:"primary",onClick:function(){t.state.selected_school&&t.props.basic.academic_calender&&t.setState({school_tab:"post-list"})},className:"px-4 mr-1 ".concat("post-list"===this.state.school_tab?"":"opacity-60"),children:"Positions"})]}),Object(y.jsxs)("div",{className:"p-2 mt-2",children:["details"===this.state.school_tab&&Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("div",{className:"pr-4",children:Object(y.jsx)(l.Gb,{className:"text-9xl"})}),Object(y.jsxs)("div",{className:"p-3 text-lg",children:[Object(y.jsxs)("div",{className:"flex p-1",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{children:"School category:"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("b",{children:this.state.selected_school.school_category})})]}),Object(y.jsxs)("div",{className:"flex p-1",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{children:"School code:"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("b",{children:this.state.selected_school.school_code})})]}),Object(y.jsxs)("div",{className:"flex p-1",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{children:"School status:"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("b",{children:this.state.selected_school.school_status})})]})]})]}),Object(y.jsx)("div",{className:"".concat("staff-list"===this.state.school_tab?"":"hidden"),children:Object(y.jsx)(_.a,{school_code:this.state.selected_school.school_code})}),"subjects"===this.state.school_tab&&null!==this.state.selected_school&&null!==this.props.schoolHierarchyStore.hierarchy&&Object(y.jsx)(g.b,{school:{school_code:this.state.selected_school.school_code,school_name:this.state.selected_school.school_name,schoolcategory:this.state.selected_school.school_category,schoolstatus:this.state.selected_school.school_status,regioncode:this.state.selected_school.region_code},allHierarchy:this.props.schoolHierarchyStore.hierarchy,fixedHeight:!0}),"post-list"===this.state.school_tab&&Object(y.jsx)("div",{className:"",children:null!==this.state.schoolPositionsShow&&null!==this.props.basic.positions&&Object(y.jsx)(f.a,{auth:this.props.auth,positions:this.props.basic.positions,schoolPositions:this.state.schoolPositionsShow.school_positions,school:this.state.schoolPositionsShow.school,appendPositionsToSchool:function(e){t.state.schoolPositionsShow&&t.props.basic.academic_calender&&Object(h.nb)(t.state.schoolPositionsShow.school_code,t.props.basic.academic_calender.academic_year_id,(function(e,s,a){null!==s&&(t.setState({loading_data:!0}),!0===e&&(t.state.schoolPositionsShow&&t.setState({schoolPositionsShow:{school_code:t.state.schoolPositionsShow.school_code,school_id:t.state.schoolPositionsShow.school_id,school_positions:s.school_positions,school:t.state.schoolPositionsShow.school}}),t.setState({loading_data:!1})))}))},removePositionsToSchool:function(e){t.state.schoolPositionsShow&&t.props.basic.academic_calender&&Object(h.nb)(t.state.schoolPositionsShow.school_code,t.props.basic.academic_calender.academic_year_id,(function(e,s,a){null!==s&&(t.setState({loading_data:!0}),!0===e&&(t.state.schoolPositionsShow&&t.setState({schoolPositionsShow:{school_code:t.state.schoolPositionsShow.school_code,school_id:t.state.schoolPositionsShow.school_id,school_positions:s.school_positions,school:t.state.schoolPositionsShow.school}}),t.setState({loading_data:!1})))}))}})})]})]}):Object(y.jsx)(o.Fragment,{children:Object(y.jsxs)(y.Fragment,{children:["main-success"===this.state.error.target&&Object(y.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(y.jsxs)(j.a,{children:["loading-update-error"===this.state.error.target&&Object(y.jsx)(u.a,{theme:"danger",children:this.state.error.msg}),Object(y.jsxs)(m.a,{children:[null===(e=this.props.auth.district)||void 0===e?void 0:e.district_name," district's Schools"]}),Object(y.jsxs)("div",{className:"flex mt-2",children:[Object(y.jsx)("div",{className:"flex-1",children:Object(y.jsxs)("p",{className:"opacity-60 -mt-1",children:["Total: ",Object(y.jsx)("b",{children:this.state.data.length})]})}),Object(y.jsx)("div",{className:""})]}),Object(y.jsxs)("div",{className:"mt-3",children:[Object(y.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded",children:[Object(y.jsx)("div",{className:"flex-1 pr-2",children:Object(y.jsx)(p.a,{error:"",label:"Search",name:"",onChange:function(e){return t.setState({search:e.target.value})},placeholder:"Search by district name",value:this.state.search,size:"sm"})}),Object(y.jsx)("div",{className:""})]}),Object(y.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"#"}),Object(y.jsx)("th",{children:"School code"}),Object(y.jsx)("th",{children:"School name"}),Object(y.jsx)("th",{children:"Category"}),Object(y.jsx)("th",{children:"Region Code"}),Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("th",{})]})}),Object(y.jsx)("tbody",{children:s.length<=0?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(y.jsx)(m.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):s.map((function(e,s){return Object(y.jsx)(o.Fragment,{children:Object(y.jsxs)("tr",{className:"border rounded hover:bg-blue-500 hover:bg-opacity-20 group",children:[Object(y.jsx)("td",{className:"p-2 border",children:s+1},s),Object(y.jsx)("td",{className:"p-2 border",children:e.school_code}),Object(y.jsx)("td",{className:"p-2 border",children:e.school_name}),Object(y.jsx)("td",{className:"p-2 border",children:e.school_category}),Object(y.jsx)("td",{className:"p-2 border",children:e.region_code}),Object(y.jsx)("td",{className:"p-2 border",children:e.school_status}),Object(y.jsx)("td",{className:"flex flex-row items-center justify-right p-1",children:Object(y.jsx)(b.a,{size:"sm",className:"w-full",theme:"accent-light",onClick:function(){t.selectSchool(e),t.props.basic.academic_calender&&Object(h.nb)(e.school_code,t.props.basic.academic_calender.academic_year_id,(function(s,a,r){null!==a&&(t.setState({loading_data:!0}),!0===s&&null!==e&&(t.setState({schoolPositionsShow:{school_code:null===e||void 0===e?void 0:e.school_code,school_id:e.school_id,school_positions:a.school_positions,school:e}}),t.setState({loading_data:!1})))}))},children:"Select"})})]})},s)}))})]})]})]})]})})}}]),s}(n.a.Component),w=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_GetAllPositions:h.A,FC_AllSchoolHierarchyDetails:h.f})(N)}}]);
//# sourceMappingURL=16.7f83b588.chunk.js.map