(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[69],{593:function(e,t,s){"use strict";s.r(t),s.d(t,"PermutationsReports",(function(){return f}));var l=s(41),c=s(29),r=s(19),i=s(20),n=s(21),o=s(22),a=s(4),d=s(398),u=s(36),h=s(13),p=s(140),j=s(53),x=s(25),b=s(1),m=function(e){Object(n.a)(s,e);var t=Object(o.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).FilteredData=function(){var e,t=null===(e=i.props.permutations.permutations)||void 0===e?void 0:e.find((function(e){return e.page===i.state.page}));if(void 0!==t){var s,r=Object(c.a)(t.permutations_data);try{for(r.s();!(s=r.n()).done;){var n=s.value;i.setState({schools_selected:[].concat(Object(l.a)(i.state.schools_selected),Object(l.a)(n.schools))})}}catch(o){r.e(o)}finally{r.f()}return t.permutations_data}return null},i.componentDidMount=function(){var e;null===i.state.districts&&(i.setState({loading:!0}),Object(p.b)((function(e,t,s){console.log({data:t}),null!==t&&i.setState({districts:t,loading:!1}),i.setState({loading:!1})}))),null===i.props.permutations.permutations&&null!==i.props.auth.district&&null!==i.props.auth.role&&"3"===i.props.auth.role.role_id&&i.props.FC_GetPermutationsByDistrict(i.props.auth.district.district_code,i.state.page,i.state.limit,i.setLoading),"4"===(null===(e=i.props.auth.role)||void 0===e?void 0:e.role_id)&&null===i.props.permutations.permutations&&i.props.FC_GetNationalPermutations(i.state.page,i.state.limit,(function(e){i.setState({loading:e})}))},i.FindUser=function(e,t){var s=t.find((function(t){return t.user_id===e}));return void 0!==s?s:null},i.FindSchool=function(e,t){var s=t.find((function(t){return t.school_code===e}));return void 0!==s?s:null},i.setLoading=function(e){return i.setState({loading:e})},i.state={loading:!1,districts:null,selected_district_code:null!==i.props.auth.district&&null!==i.props.auth.role&&"3"===i.props.auth.role.role_id?i.props.auth.district.district_code:null,selected_school_code:null,page:1,limit:1e3,schools_selected:[]},i}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return null===this.state.districts||!0===this.state.loading?Object(b.jsx)(j.a,{children:Object(b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(b.jsx)(x.a,{}),Object(b.jsx)("div",{children:"Loading permutations..."})]})}):Object(b.jsxs)(j.a,{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(b.jsxs)("div",{className:"text-3xl font-bold flex flex-col",children:[Object(b.jsx)("span",{children:"Permutations report"}),Object(b.jsx)("span",{className:"text-base font-light text-gray-600",children:"List of permutations"})]}),Object(b.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[null!==this.props.auth.district&&null!==this.props.auth.role&&"3"===this.props.auth.role.role_id?Object(b.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(b.jsx)("span",{className:"text-gray-500",children:"Selected district"}),Object(b.jsx)("span",{className:"font-extrabold",children:this.props.auth.district.district_name})]}):null!==this.props.auth.role&&"4"===this.props.auth.role.role_id&&Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)("span",{children:"Filter district"}),Object(b.jsxs)("select",{value:null===this.state.selected_district_code?"":this.state.selected_district_code,onChange:function(t){return e.setState({selected_district_code:t.target.value})},className:"border border-gray-500 rounded px-3 py-2",children:[Object(b.jsx)("option",{value:"",children:"Choose district"}),this.state.districts.map((function(e,t){return Object(b.jsx)("option",{value:e.district_code,children:e.district_name},t+1)}))]})]}),null!==this.props.auth.school&&null!==this.props.auth.role&&"2"===this.props.auth.role.role_id?Object(b.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(b.jsx)("span",{className:"text-gray-500",children:"Selected school"}),Object(b.jsx)("span",{className:"font-extrabold",children:this.props.auth.school.school_name})]}):Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)("span",{children:"Filter School"}),Object(b.jsxs)("select",{className:"px-3 py-2 rounded border border-gray-500",children:[Object(b.jsx)("option",{value:"",children:"Choose school"}),this.state.schools_selected.map((function(e,t){return Object(b.jsx)("option",{value:e.school_code,children:e.school_name})}))]})]})]})]}),Object(b.jsxs)("div",{className:"flex flex-row items-center w-full mt-2 gap-3",children:[Object(b.jsx)("input",{placeholder:"Search",className:"px-3 py-2 rounded border border-gray-500 w-full"}),Object(b.jsxs)("div",{className:"bg-yellow-100 text-black hover:bg-accent-900 hover:text-white rounded px-3 py-2 flex flex-row items-center gap-2 cursor-pointer",children:[Object(b.jsx)("div",{children:Object(b.jsx)(d.a,{className:"text-xl"})}),Object(b.jsx)("span",{children:"Export"})]})]})]}),Object(b.jsx)("div",{className:"mt-5",children:Object(b.jsxs)("table",{className:"w-full rounded",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{className:"bg-blue-100 rounded-t",children:[Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"#"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"User one"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"School one"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"User two"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"School two"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"Position"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"Qualification"})]})}),Object(b.jsx)("tbody",{children:null===this.FilteredData()?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"Loading..."})}):0===this.FilteredData().length?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"No data found!"})}):this.FilteredData().map((function(t,s){var l,c,r,i;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:s+1}),Object(b.jsx)("td",{children:null===(l=e.FindUser(t.user_one,t.usersInfo))||void 0===l?void 0:l.full_name}),Object(b.jsx)("td",{children:null===(c=e.FindSchool(t.school_one,t.schools))||void 0===c?void 0:c.school_name}),Object(b.jsx)("td",{children:null===(r=e.FindUser(t.user_two,t.usersInfo))||void 0===r?void 0:r.full_name}),Object(b.jsx)("td",{children:null===(i=e.FindSchool(t.school_two,t.schools))||void 0===i?void 0:i.school_name}),Object(b.jsx)("td",{children:t.position_name}),Object(b.jsx)("td",{children:t.qualification_name})]})}))})]})})]})}}]),s}(a.Component),f=Object(u.b)((function(e){return{auth:e.auth,basic:e.basic,permutations:e.permutations}}),{FC_GetPermutationsByDistrict:h.Y,FC_GetNationalPermutations:h.T})(m)}}]);
//# sourceMappingURL=69.4e94b7ff.chunk.js.map