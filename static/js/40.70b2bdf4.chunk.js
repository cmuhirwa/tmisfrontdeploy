(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[40],{109:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var a,c,i,r=s(13),n=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(a||(a={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(c||(c={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(i||(i={}));t.c=function(e){var t,s=e.title,l=e.backDrop,o=e.theme,d=e.close,m=e.backDropClose,u=e.widthSizeClass,h=e.displayClose,b=e.padding,j=void 0===b?{title:!0,body:!0,footer:!0}:b;switch(o){case a.primary:t="blue-primary";break;case a.secondary:t="gray-300";break;case a.danger:t="red-500";break;case a.success:t="green-500";break;case a.warning:t="yellow-500";break;default:t="white"}return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{onClick:function(){return m&&d()},className:"fixed bg-black bg-opacity-".concat(!0===l?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(n.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?c.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(u," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==c.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(u===i.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(n.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===j.title?"py-4 px-4":""," rounded-t text-").concat(o===a.default||o===a.secondary?"black":"white"),children:[s&&""!==s?Object(n.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(n.jsx)("div",{}),!1===h?"":Object(n.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(n.jsx)(r.k,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(n.jsx)("div",{className:"space-x-3 ".concat(!0===j.body?"py-4 px-4":""),children:Object(n.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(n.jsx)("div",{className:"flex float-right ".concat(!0===j.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},194:function(e,t,s){"use strict";s.r(t),s.d(t,"ApproveDocuments",(function(){return S}));var a=s(29),c=s(30),i=s(31),r=s(32),n=s(3),l=s.n(n),o=s(121),d=s(13),m=s(17),u=s(11),h=s(25),b=s(27),j=s(26),x=s(43),g=s(33),_=s(39),f=s(109),p=s(19),O=s(1),v=function(e){var t=Object(n.useState)(!0),s=Object(p.a)(t,2),a=s[0],c=s[1],i=Object(n.useState)(null),r=Object(p.a)(i,2),l=r[0],o=r[1];return Object(n.useEffect)((function(){var t;a&&(null===(t=e.file_url)||null!==t.match(/^ *$/)?o({element:"PDF_FILE",msg:"File url is required"}):null!==l&&o(null),c(!1))}),[l,a,e.file_url]),Object(O.jsx)("div",{className:"w-full",children:l?Object(O.jsx)(h.a,{theme:"danger",children:l.msg}):Object(O.jsx)("object",{data:e.file_url,type:"application/pdf",className:e.class_name,onLoad:function(){return e.setLoadingFile(!1)},children:Object(O.jsx)("iframe",{src:"https://docs.google.com/viewer?url=".concat(e.file_url,"&embedded=true"),className:e.class_name,title:e.frame_title,onLoad:function(){return e.setLoadingFile(!1)},children:Object(O.jsx)("p",{className:"text-2xl opacity-50",children:"This browser does not support PDF!"})})})})},N=s(10),y=s(51),w={target:null,msg:""},k=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).setDocumentDecision=function(e,t){var s;if(window.confirm("Are you sure you want to ".concat(!0===t?"Approve":"Reject"," this document?"))){if(!c.props.auth.user||!c.props.auth.user.user_id)return c.setState({error:{target:"main-error",msg:"Your id is not valid, please refresh your browser"}});if(!e)return c.setState({error:{msg:"No selected document",target:"main-error"}});c.setState({loading_document_decision:!0}),Object(u.d)({disability:t,residence:!1,teacher_transfer_id:e,user_id:null===(s=c.props.auth.user)||void 0===s?void 0:s.user_id},(function(s,a,i){c.setState({loading_document_decision:!1,documents:!0===s?c.state.documents.filter((function(t){return t.teacher_transfer_id!==e})):c.state.documents,error:!0===s?{msg:"The document have been ".concat(!0===t?"Approved":"Rejected"),target:"main-success"}:{msg:"Error: ".concat(i),target:"main-error"}}),c.clearAlert()}))}},c.changeStatus=function(e){c.state.status!==e&&c.state.selected_district&&(c.setState({status:e}),c.loadingData(c.state.selected_district.district_code,1,e))},c.clearAlert=function(){return setTimeout((function(){c.setState({error:w})}),3e3)},c.paginateData=function(e){c.state.selected_district&&c.loadingData(c.state.selected_district.district_code,e)},c.loadingData=function(e,t,s){c.setState({loading:!0,selected_document_id:null,documents:[]}),Object(u.w)({district_code:e,limit:c.state.limit,page:t,status:s||c.state.status},(function(e,s,a){c.setState({loading:!1,documents:null!==s&&void 0!==s&&s.teacher_docs?null===s||void 0===s?void 0:s.teacher_docs:[],total:null!==s&&void 0!==s&&s.total_transfer?s.total_transfer:0,next:null!==s&&void 0!==s&&s.next?+(null===s||void 0===s?void 0:s.next):0,previous:null!==s&&void 0!==s&&s.previous?+(null===s||void 0===s?void 0:s.previous):0,error:e?w:{target:"main-error",msg:"Error: ".concat(a)},page:t})}))},c.getTotalDistrictsNumber=function(){c.setState({loading_disabled_by_district:!0,documents_by_districts:[],total_disabled_by_district:"0",total_validated:"0"}),Object(u.ub)((function(e,t,s){c.setState({loading_disabled_by_district:!1,documents_by_districts:t?t.districts:[],total_disabled_by_district:t?t.total:"0",total_validated:t?t.total_validated:"0",error:e?{msg:"",target:null}:{msg:s,target:"main-error"}})}))},c.openLink=function(e){e&&window.open("".concat(N.e,"/").concat(e))},c.state={loading:!1,loading_districts:!1,districts:[],search_district:"",error:w,documents:[],limit:10,page:1,total:0,selected_user:"",decision_disability:null,decision_residence:null,selected_district:null,status:"remain",selected_document_id:"",next:null,previous:null,loading_document_file:!0,loading_document_decision:!1,loading_disabled_by_district:!0,total_disabled_by_district:"0",documents_by_districts:[],total_validated:"0"},c}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this;Object(u.v)((function(t,s,a){e.setState({districts:s,loading_districts:!1,error:!0===t?w:{target:"main-error",msg:"Districts: ".concat(a)},documents:[]})})),this.getTotalDistrictsNumber()}},{key:"selectDistrict",value:function(e){this.setState({selected_district:e,page:1,total:0,documents:[]}),null!==e&&this.loadingData(e.district_code,this.state.page,this.state.status),null===e&&this.getTotalDistrictsNumber()}},{key:"render",value:function(){var e=this,t=(this.state.total/this.state.limit).toFixed(0),s=this.state.documents.find((function(t){return t.teacher_transfer_id===e.state.selected_document_id})),a=Object(y.h)(this.state.districts,this.state.search_district,{district_code:!0,district_name:!0});return null===this.state.selected_district?Object(O.jsx)(j.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)("h1",{className:"flex-1 text-2xl font-bold",children:"Documents validation"}),Object(O.jsx)("section",{className:"p-1 bg-green-100 rounded mx-2",children:Object(O.jsxs)("span",{className:"text-sm text-green-800",children:["Total:"," ",Object(O.jsx)("b",{className:"text-black",children:this.state.total_disabled_by_district})]})}),Object(O.jsx)("section",{className:"p-1 bg-green-100 rounded",children:Object(O.jsxs)("span",{className:"text-sm text-green-800",children:["Total validated:"," ",Object(O.jsx)("b",{className:"text-black",children:this.state.total_validated})]})})]}),Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(g.a,{error:"",label:"",name:"",onChange:function(t){return e.setState({search_district:t.target.value})},placeholder:"Search district by name",value:this.state.search_district})}),!0===this.state.loading_districts?Object(O.jsx)("div",{className:"py-8 text-center text-8xl text-accent-900",children:Object(O.jsx)(_.a,{className:"mx-auto"})}):this.state.districts.length>=1?Object(O.jsx)(O.Fragment,{children:a.length<=0?Object(O.jsxs)("div",{className:"py-4 text-center",children:[Object(O.jsx)("h2",{className:"text-lg",children:"No results found!"}),Object(O.jsx)("p",{className:"text-gray-500",children:"Please use a correct district name"})]}):Object(O.jsx)("div",{className:"grid lg:grid-cols-2 gap-2 ",children:a.map((function(t){var s=e.state.documents_by_districts.find((function(e){return e.district_code===t.district_code}));return Object(O.jsxs)("div",{onClick:e.selectDistrict.bind(e,t),className:"p-2 flex items-center cursor-pointer rounded border  px-3 hover:text-yellow-600 hover:border-yellow-600 hover:bg-yellow-50 bg-white text-lg",children:[Object(O.jsxs)("h4",{className:"flex-1 text-lg",children:[" ",Object(O.jsx)("b",{children:t.district_name})," district"]}),s&&"0"!==s.total&&Object(O.jsx)("span",{className:"bg-yellow-100 text-yellow-700 font-bold py-0.5 inline-block text-sm px-1.5 rounded-full",children:null===s||void 0===s?void 0:s.total}),s&&"0"!==s.total&&Object(O.jsx)("button",{className:"",children:Object(O.jsx)(d.E,{})})]},t.district_code)}))})}):Object(O.jsxs)("div",{className:"py-4 text-center",children:[Object(O.jsx)("h2",{className:"text-8xl text-gray-400 text-center",children:Object(O.jsx)(o.d,{className:"inline"})}),Object(O.jsx)("h2",{className:"text-center p-4 text-gray-400 font-bold text-2xl",children:Object(O.jsx)("p",{children:"No results found on"})})," "]})]})}):Object(O.jsxs)(O.Fragment,{children:["main-success"===this.state.error.target&&Object(O.jsx)(h.a,{theme:"success",fixed:!0,onClick:function(){return e.setState({error:w})},children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(O.jsx)(h.a,{theme:"danger",fixed:!0,onClick:function(){return e.setState({error:w})},children:this.state.error.msg}),void 0!==s&&this.state.selected_document_id&&Object(O.jsx)(f.c,{backDrop:!0,theme:f.b.default,close:function(){return e.setState({selected_document_id:null})},backDropClose:!1,widthSizeClass:f.a.maxWidth,displayClose:!0,title:"".concat(s.full_name,"'s document"),padding:{title:!0,body:void 0,footer:void 0},children:Object(O.jsxs)("div",{className:" border-t h-full flex",children:[Object(O.jsx)("div",{className:"flex-1 bg-gray-600",children:Object(O.jsx)(v,{file_url:"".concat(N.e,"/").concat(s.disability_surpoting_document),class_name:"w-full h-100vh",frame_title:"User document",setLoadingFile:function(){return e.setState({loading_document_file:!1})},full_height:!0})}),Object(O.jsxs)("div",{className:"w-96",children:[Object(O.jsx)("h2",{className:"text-gray-500 p-1 px-2 bg-gray-100 text-2xl text-center",children:"Teacher's information"}),"main-success"===this.state.error.target&&Object(O.jsx)(h.a,{theme:"success",onClick:function(){return e.setState({error:w})},children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(O.jsx)(h.a,{theme:"danger",onClick:function(){return e.setState({error:w})},children:this.state.error.msg}),Object(O.jsxs)("section",{className:"border-b py-4",children:[Object(O.jsx)("h2",{className:"text-8xl text-gray-500",children:Object(O.jsx)(d.c,{className:"mx-auto"})}),Object(O.jsx)("h3",{className:"text-center font-bold text-xl",children:s.full_name})]}),Object(O.jsx)("div",{className:"p-2",children:[{title:"DOB: ",value:s.dob},{title:"Hire date: ",value:s.hire_date},{title:"Martial Status: ",value:s.martial_status},{title:"Position name: ",value:s.position_name},{title:"Qualification: ",value:s.qualification_name},{title:"Residence: ",value:s.resident_district_name},{title:"Role: ",value:s.role},{title:"School name: ",value:s.school_name}].map((function(e,t){var s=e.title,a=e.value;return Object(O.jsxs)("div",{className:"flex items-center px-1 py-1.5 border-b",children:[Object(O.jsx)("section",{className:"text-gray-600 pr-2",children:s}),Object(O.jsx)("section",{className:"font-bold",children:a})]},t)}))}),Object(O.jsx)("div",{className:"py-2 text-center",children:Object(O.jsx)(b.a,{size:"sm",theme:"default",onClick:this.openLink.bind(this,s.disability_surpoting_document),children:"Open document in a new tab"})}),Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(b.a,{className:"w-full",theme:"success-light",size:"lg",onClick:this.setDocumentDecision.bind(this,s.teacher_transfer_id,!0),loading:this.state.loading_document_decision,children:"Yes, the document is valid"})}),Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(b.a,{className:"w-full",theme:"danger-light",size:"lg",onClick:this.setDocumentDecision.bind(this,s.teacher_transfer_id,!1),loading:this.state.loading_document_decision,children:"No, the document is not valid"})})]})]})}),Object(O.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster pt-2",children:[Object(O.jsxs)("div",{className:"container mx-auto px-2 flex items-center",children:[Object(O.jsx)(b.a,{onClick:this.selectDistrict.bind(this,null),theme:"default",children:"Back"}),Object(O.jsx)(x.a,{className:"flex-1 m-0",children:"Document validation"}),Object(O.jsx)("section",{children:Object(O.jsxs)("div",{className:"flex flex-1 gap-1 mr-2 bg-yellow-100 p-1 rounded border border-yellow-400",children:[Object(O.jsx)(b.a,{size:"sm",theme:"remain"===this.state.status?"accent":"accent-light",onClick:this.changeStatus.bind(this,"remain"),children:"Remain"}),Object(O.jsx)(b.a,{size:"sm",theme:"complete"===this.state.status?"accent":"accent-light",onClick:this.changeStatus.bind(this,"complete"),children:"Completed"})]})}),Object(O.jsxs)("section",{className:"text-center bg-accent-800 bg-opacity-20 text-accent-900 px-4 rounded",children:[Object(O.jsx)("span",{className:"text-sm block text-gray-500 -mb-1",children:"Total:"}),Object(O.jsx)("h3",{className:"font-bold text-xl",children:this.state.total})]})]}),Object(O.jsxs)(j.a,{children:[Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{className:"text-left bg-white",children:Object(O.jsxs)("tr",{className:"bg-accent-900 bg-opacity-10",children:[Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"#"}),Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"Names"}),Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"School Code"}),Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"School name"}),Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position code"}),Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position name"}),Object(O.jsx)("th",{className:"p-2 border-gray-300 border",children:"Qualification"})]})}),Object(O.jsx)("tbody",{children:!0===this.state.loading?Object(O.jsx)("tr",{className:" ",children:Object(O.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(O.jsx)(_.a,{})})}):this.state.documents.length<=0?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(O.jsx)("h1",{className:"text-2xl text-gray-400",children:"No data found"})})}):this.state.documents.map((function(t,s){return Object(O.jsxs)("tr",{className:"bg-white cursor-pointer hover:bg-yellow-400 hover:bg-opacity-30",onClick:function(){return e.setState({selected_document_id:t.teacher_transfer_id})},children:[Object(O.jsx)("td",{className:"border p-2",children:s+1}),Object(O.jsx)("td",{className:"p-2 border",children:t.full_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.school_from_id}),Object(O.jsx)("td",{className:"p-2 border",children:t.school_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.position_id}),Object(O.jsx)("td",{className:"p-2 border text-sm",children:t.position_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.qualification_name})]},s)}))})]}),Object(O.jsx)("div",{className:"flex gap-3 mx-auto pt-3",children:Array(+t).fill("0").map((function(t,s){return Object(O.jsx)("button",{className:"p-2 py-1 ".concat(+e.state.page===s+1?"bg-accent-800 text-black font-bold":"bg-opacity-25"," rounded-full bg-accent-800 "),onClick:e.paginateData.bind(e,s+1),children:s+1})}))})]})]})]})}}]),s}(l.a.Component),S=Object(m.b)((function(e){return{auth:e.auth}}),{})(k)}}]);
//# sourceMappingURL=40.70b2bdf4.chunk.js.map