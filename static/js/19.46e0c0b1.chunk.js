(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[19],{110:function(e,t,s){"use strict";s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return m})),s.d(t,"c",(function(){return p})),s.d(t,"d",(function(){return b}));var r=s(7),i=s(2),a=s.n(i),n=s(6),c=s.n(n),o=s(11),l=s(10),d=s(8),u=s(9),h=function(e){return e(!0,null,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.a)(),t.next=4,c.a.get("".concat(l.d,"/teachertransfers/requesteddde"));case 4:r=t.sent,console.log("===================================="),console.log({getAllTransfers:r}),console.log("===================================="),i=r.data.filter((function(e){return"APPROVED"===e.requested_status})),s({type:o.a.GET_ALL_TRANSFER,payload:i}),e(!1,i,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},m=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(a.a.mark((function e(t,s){var r,i,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,r=0,null,""),e.prev=2,Object(d.a)(),(i=new FormData).append("teacher_supporting_document",t),e.next=8,c.a.post("".concat(l.d,"/teachertransfers/uploadSupportingDocument"),i,{onUploadProgress:function(e){r=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100,s(!0,r,null,"")}});case 8:n=e.sent,console.log("Uploaded document: ",n.data),s(!1,r,n.data,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),s(!1,r,"",Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,s){return e.apply(this,arguments)}}(),b=function(e,t,s){s(!0,"");return function(){var i=Object(r.a)(a.a.mark((function r(i){var n,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),s(!0,""),(n=new FormData).append("teacher_transfer_id",e),n.append("mayor_letter",t),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),r.prev=11,Object(d.a)(),r.next=15,c.a.post("".concat(l.d,"/teachertransfers/outgoing"),n);case 15:h=r.sent,console.log("Uploaded document: ",h.data),i({type:o.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:e,mayor_letter:h.data.mayor_letter}}),s(!1,""),r.next=25;break;case 21:r.prev=21,r.t0=r.catch(11),console.error(r.t0),s(!1,Object(u.a)(r.t0));case 25:case"end":return r.stop()}}),r,null,[[11,21]])})));return function(e){return i.apply(this,arguments)}}()}},114:function(e,t,s){"use strict";s(3);var r=s(52),i=s(1);t.a=function(e){var t=e.onChange,s=e.value,a=e.error,n=e.label,c=e.placeholder,o=e.disabled,l=void 0!==o&&o,d=e.name,u=e.Input_className,h=void 0===u?"":u,m=e.Label_className,p=void 0===m?"":m,b=e.InputContainer_className,j=void 0===b?"":b,x=e.MainContainer_className,_=void 0===x?"":x,g=e.labelColor,f=void 0===g?"text-primary-900 dark:text-primary-100":g,v=e.size,O=void 0===v?"md":v;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"w-full my-2 ".concat(_),children:[""!==n&&Object(i.jsx)("label",{htmlFor:"any-form",className:"".concat(f," ").concat(p),children:n}),Object(i.jsxs)("div",{className:"rounded relative ".concat(j),children:[Object(i.jsx)("textarea",{name:d,placeholder:c,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(r.a)(O),"\n                ").concat(""!==a?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(h),value:s,disabled:l}),""!==a&&Object(i.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:a})]})]})})}},124:function(e,t,s){"use strict";var r,i=s(7),a=s(29),n=s(30),c=s(31),o=s(32),l=s(2),d=s.n(l),u=s(6),h=s.n(u),m=s(3),p=s(121),b=s(13),j=s(110),x=s(10),_=s(9),g=s(26),f=s(39),v=s(118),O=s(27),y=s(1),N=function(e){var t="";return 0===e.size&&(t="Invalid file"),e.size>1038221&&(t="File should not be greater than 1MB"),"application/pdf"!==e.type&&"image/png"!==e.type&&"image/jpeg"!==e.type&&"image/webp"!==e.type&&"image/tiff"!==e.type&&"image/bmp"!==e.type&&"image/gif"!==e.type&&"image/jfif"!==e.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&(t="Invalid file type, accepted files(PDF, IMAGES(png, jpeg, webp, tiff, bmp, gif, jfif))"),""!==t?t:""};!function(e){e.RESIDENCE="RESIDENCE",e.DISABILITY="DISABILITY",e.ALL="ALL"}(r||(r={}));var w=function(e){Object(c.a)(s,e);var t=Object(o.a)(s);function s(e){var n;return Object(a.a)(this,s),(n=t.call(this,e)).setLoadingSaving=function(e){return n.setState({loading_saving:e})},n.UpdateUserDocuments=function(){var e=Object(i.a)(d.a.mark((function e(t){var s,i,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.setState({error:null,success:""}),n.state.addDocType!==r.RESIDENCE){e.next=11;break}if(null!==n.state.resident_district_id&&""!==n.state.resident_district_id){e.next=5;break}return e.abrupt("return",n.setState({error:{element:"main",msg:"Please select residence district!"}}));case 5:if(null!==n.state.resident_surpoting_document){e.next=9;break}return e.abrupt("return",n.setState({error:{element:"resident_surpoting_document",msg:"Please select resident surpoting document!"}}));case 9:if(""===N(n.state.resident_surpoting_document)){e.next=11;break}return e.abrupt("return",n.setState({error:{element:"main",msg:N(n.state.resident_surpoting_document)}}));case 11:if(n.state.addDocType!==r.DISABILITY){e.next=18;break}if(null!==n.state.disability_surpoting_document){e.next=16;break}return e.abrupt("return",n.setState({error:{element:"disability_surpoting_document",msg:"Please select disability surpoting document!"}}));case 16:if(""===N(n.state.disability_surpoting_document)){e.next=18;break}return e.abrupt("return",n.setState({error:{element:"main",msg:N(n.state.disability_surpoting_document)}}));case 18:return(i=new FormData).append("disability",(n.state.addDocType===r.DISABILITY||"").toString()),i.append("resident_district_id",null===n.state.resident_district_id?"":n.state.resident_district_id),i.append("disability_surpoting_document",null===n.state.disability_surpoting_document?"":n.state.disability_surpoting_document),i.append("resident_surpoting_document",null===n.state.resident_surpoting_document?"":n.state.resident_surpoting_document),a=null===(s=n.state.districts)||void 0===s?void 0:s.find((function(e){return e.district_code===n.state.resident_district_id})),i.append("resident_district_name",void 0===a?"":a.district_name),n.setState({loading_saving:!0}),e.prev=26,e.next=29,h.a.post("".concat(x.d,"/user/account/updateprofile"),i);case 29:c=e.sent,n.setState({success:"Document added successfully!"}),setInterval((function(){!0===n.state.loading_saving&&(n.props.FC_UpdateUserDocuments({resident_district_id:n.state.resident_district_id,disability:(n.state.addDocType===r.DISABILITY).toString(),disability_surpoting_document:c.data.disabilityNewFileName,resident_surpoting_document:c.data.residentNewFileName}),n.setState({loading_saving:!1}))}),3e3),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(26),n.setState({error:{element:"main",msg:Object(_.a)(e.t0)},loading_saving:!1});case 37:case"end":return e.stop()}}),e,null,[[26,34]])})));return function(t){return e.apply(this,arguments)}}(),n.SubmitNoDisability=Object(i.a)(d.a.mark((function e(){var t,s,r,i,a,c,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading_saving:!0}),e.prev=1,a=null===(t=n.props.auth.user)||void 0===t?void 0:t.resident_district_id,c=null===(s=n.props.auth.user)||void 0===s?void 0:s.disability_surpoting_document,o=null===(r=n.props.auth.user)||void 0===r?void 0:r.resident_surpoting_document,l=null===(i=n.props.auth.user)||void 0===i?void 0:i.resident_district_name,e.next=8,h.a.post("".concat(x.d,"/user/account/updateprofile"),{disability:(!1).toString(),resident_district_id:null===a||void 0===a?"":a,disability_surpoting_document:null===c||void 0===c?"":c,resident_surpoting_document:null===o||void 0===o?"":o,resident_district_name:null===l||void 0===l?"":l});case 8:u=e.sent,n.setState({success:"Submitted successfully!"}),setInterval((function(){n.props.FC_UpdateUserDocuments({resident_district_id:null===a||void 0===a?"":a,disability:(!1).toString(),disability_surpoting_document:u.data.disabilityNewFileName,resident_surpoting_document:u.data.residentNewFileName}),n.setState({loading_saving:!1})}),3e3),alert("Submitted successfully!"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n.setState({error:{element:"main",msg:Object(_.a)(e.t0)},loading_saving:!1});case 17:case"end":return e.stop()}}),e,null,[[1,14]])}))),n.componentDidMount=function(){null===n.state.districts&&(n.setState({loading:!0}),Object(j.b)((function(e,t,s){null!==t&&n.setState({districts:t,loading:!1}),n.setState({loading:!1})})))},n.state={districts:null,loading:!1,loading_saving:!1,addDocuments:!1,addDocType:r.ALL,resident_district_id:null,disability_surpoting_document:null,resident_surpoting_document:null,error:null,success:"",disabled_none_selected:!1},n}return Object(n.a)(s,[{key:"render",value:function(){var e,t,s,i,a,n,c,o,l,d,u,h,j,_,N,w,S,k,C,D,I,q=this;return null===this.state.districts||!0===this.state.loading?Object(y.jsx)(g.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(y.jsx)(f.a,{}),Object(y.jsx)("div",{children:"Loading..."})]})}):Object(y.jsxs)(m.Fragment,{children:[""!==this.state.success&&Object(y.jsx)("div",{className:"text-green-700 bg-green-100 rounded px-3 py-2",children:this.state.success}),null!==this.state.error&&Object(y.jsx)("div",{className:"text-red-700 bg-red-100 rounded px-3 py-2",children:this.state.error.msg}),!1===this.state.addDocuments?Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"py-2 border-b",children:Object(y.jsx)("span",{className:"text-xl font-bold ",children:"My documents"})}),Object(y.jsxs)("div",{className:"py-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object(y.jsxs)("div",{className:"col-span-1 flex items-center gap-3 ".concat(null===(null===(e=this.props.auth.user)||void 0===e?void 0:e.resident_surpoting_document)||""===(null===(t=this.props.auth.user)||void 0===t?void 0:t.resident_surpoting_document)?"bg-yellow-100":"bg-gray-100"," rounded-lg p-3 py-4 hover:bg-blue-100 hover:text-primary-800 group"),children:[Object(y.jsx)("div",{children:null===(null===(s=this.props.auth.user)||void 0===s?void 0:s.resident_surpoting_document)||""===(null===(i=this.props.auth.user)||void 0===i?void 0:i.resident_surpoting_document)?Object(y.jsx)(b.f,{className:"text-gray-400 group-hover:text-primary-800 text-6xl"}):Object(y.jsx)(p.b,{className:"text-primary-800 group-hover:text-primary-800 text-6xl"})}),Object(y.jsxs)("div",{children:[null===(null===(a=this.props.auth.user)||void 0===a?void 0:a.resident_surpoting_document)||""===(null===(n=this.props.auth.user)||void 0===n?void 0:n.resident_surpoting_document)?Object(y.jsx)("div",{className:"text-accent-900 font-bold group-hover:text-primary-800",children:"Resident district is missing!"}):Object(y.jsx)("div",{className:"text-gray-900 font-bold group-hover:text-primary-800",children:"My resident district"}),Object(y.jsx)("div",{onClick:function(){var e,t,s;(null===(null===(e=q.props.auth.user)||void 0===e?void 0:e.resident_surpoting_document)||void 0===(null===(t=q.props.auth.user)||void 0===t?void 0:t.resident_surpoting_document)||""===(null===(s=q.props.auth.user)||void 0===s?void 0:s.resident_surpoting_document))&&q.setState({addDocuments:!0,addDocType:r.RESIDENCE})},className:"text-xl font-bold cursor-pointer",children:null===(null===(c=this.props.auth.user)||void 0===c?void 0:c.resident_surpoting_document)||""===(null===(o=this.props.auth.user)||void 0===o?void 0:o.resident_surpoting_document)?Object(y.jsx)("span",{className:"underline",children:"Choose your residence"}):Object(y.jsx)("span",{className:"text-primary-800",children:null===(l=this.state.districts.find((function(e){var t;return e.district_code===(null===(t=q.props.auth.user)||void 0===t?void 0:t.resident_district_id)})))||void 0===l?void 0:l.district_name})}),null!==(null===(d=this.props.auth.user)||void 0===d?void 0:d.resident_surpoting_document)&&void 0!==(null===(u=this.props.auth.user)||void 0===u?void 0:u.resident_surpoting_document)&&""!==(null===(h=this.props.auth.user)||void 0===h?void 0:h.resident_surpoting_document)&&Object(y.jsxs)("div",{className:"flex flex-row items-center w-full gap-2 mt-2",children:[Object(y.jsxs)("div",{onClick:function(){q.setState({addDocuments:!0,addDocType:r.RESIDENCE})},className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.p,{className:"text-lg"})}),Object(y.jsx)("span",{children:"Update"})]}),Object(y.jsxs)("a",{href:"".concat(x.e,"/").concat(this.props.auth.user.resident_surpoting_document),target:"__blank",className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(v.b,{className:"text-lg"})}),Object(y.jsx)("span",{children:"View"})]})]})]})]}),Object(y.jsxs)("div",{className:"col-span-1 flex items-center gap-3 bg-gray-50 rounded-lg p-3 py-4 hover:bg-gray-100  group",children:[Object(y.jsx)("div",{children:null===(null===(j=this.props.auth.user)||void 0===j?void 0:j.disability_surpoting_document)||""===(null===(_=this.props.auth.user)||void 0===_?void 0:_.disability_surpoting_document)?Object(y.jsx)(b.T,{className:"text-gray-400  text-6xl"}):Object(y.jsx)(p.b,{className:"text-primary-800 group-hover:text-primary-800 text-6xl"})}),Object(y.jsxs)("div",{children:[!(null!==(N=this.props.auth.user)&&void 0!==N&&N.disability_surpoting_document)&&Object(y.jsx)("div",{className:"text-gray-600 ",children:"Do you have a disability?"}),(null===(w=this.props.auth.user)||void 0===w?void 0:w.disability_surpoting_document)&&Object(y.jsxs)("div",{className:"text-gray-600 ",children:[Object(y.jsx)("h2",{className:"text-lg font-bold cursor-pointer text-black",children:"Disability document is found."}),Object(y.jsx)("span",{className:"text-sm",children:"you can Change disability document"})]}),Object(y.jsx)("div",{className:"text-xl font-bold cursor-pointer",children:null===(null===(S=this.props.auth.user)||void 0===S?void 0:S.disability_surpoting_document)||""===(null===(k=this.props.auth.user)||void 0===k?void 0:k.disability_surpoting_document)?Object(y.jsxs)("div",{className:"flex flex-row items-center gap-3 text-base",children:[Object(y.jsxs)(O.a,{onClick:function(){var e,t,s;(null===(null===(e=q.props.auth.user)||void 0===e?void 0:e.disability_surpoting_document)||void 0===(null===(t=q.props.auth.user)||void 0===t?void 0:t.disability_surpoting_document)||""===(null===(s=q.props.auth.user)||void 0===s?void 0:s.disability_surpoting_document))&&q.setState({addDocuments:!0,addDocType:r.DISABILITY,disabled_none_selected:!1})},type:"button",theme:!0===this.state.disabled_none_selected?"default":"accent-light",children:[Object(y.jsx)("b",{children:"Yes"}),", I have s disability"]}),Object(y.jsxs)(O.a,{type:"button",className:"px-2",theme:!0===this.state.disabled_none_selected?"success":"accent-light",onClick:function(){return q.setState({disabled_none_selected:!0})},children:[!0===this.state.disabled_none_selected?Object(y.jsx)(b.h,{className:"inline-block text-xl mr-1"}):Object(y.jsx)(b.i,{className:"inline-block text-xl mr-1"}),"No"]})]}):""}),null!==(null===(C=this.props.auth.user)||void 0===C?void 0:C.disability_surpoting_document)&&void 0!==(null===(D=this.props.auth.user)||void 0===D?void 0:D.disability_surpoting_document)&&""!==(null===(I=this.props.auth.user)||void 0===I?void 0:I.disability_surpoting_document)&&Object(y.jsxs)("div",{className:"flex flex-row items-center w-full gap-2 mt-2",children:[Object(y.jsxs)("div",{onClick:function(){q.setState({addDocuments:!0,addDocType:r.DISABILITY})},className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.p,{className:"text-lg"})}),Object(y.jsx)("span",{children:"Update"})]}),Object(y.jsxs)("a",{href:"".concat(x.e,"/").concat(this.props.auth.user.disability_surpoting_document),target:"__blank",className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(v.b,{className:"text-lg"})}),Object(y.jsx)("span",{children:"View"})]})]})]})]})]})]}):Object(y.jsx)("div",{className:"p-5 bg-white animate__animated animate__fadeIn animate__faster",children:Object(y.jsxs)("form",{onSubmit:this.UpdateUserDocuments,className:"flex flex-col md:flex-row items-center gap-6",children:[Object(y.jsx)("div",{className:"flex flex-col text-base",children:this.state.addDocType===r.RESIDENCE&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("label",{className:"font-bold",children:"Choose resident district"}),Object(y.jsxs)("select",{value:null===this.state.resident_district_id?"":this.state.resident_district_id,onChange:function(e){return q.setState({resident_district_id:e.target.value})},className:"border border-gray-400 rounded px-3 py-2 mb-5",children:[Object(y.jsx)("option",{value:"",children:"Choose district"}),this.state.districts.map((function(e,t){return Object(y.jsx)("option",{value:e.district_code,children:e.district_name},t+1)}))]}),Object(y.jsxs)("label",{className:"font-bold",children:["Residence supporting document ","(Size < 1MB)"]}),Object(y.jsx)("input",{type:"file",onChange:function(e){return q.setState({resident_surpoting_document:null===e.target.files?null:e.target.files[0]})},className:"border border-gray-400 rounded px-3 py-2"})]})}),Object(y.jsxs)("div",{className:"flex flex-col text-base",children:[this.state.addDocType===r.DISABILITY&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("label",{className:"font-bold",children:["Disability supporting document ","(Size < 1MB)"]}),Object(y.jsx)("input",{type:"file",onChange:function(e){return q.setState({disability_surpoting_document:null===e.target.files?null:e.target.files[0]})},className:"border border-gray-400 rounded px-3 py-2"})]}),Object(y.jsxs)("div",{className:"px-3 py-2 rounded bg-yellow-100 gap-3",children:[Object(y.jsx)("span",{className:"font-extrabold",children:"Warning"})," Make sure you are providing correct information. For any inconvenience, rules will be applied"]}),Object(y.jsxs)("div",{className:"flex items-center gap-3 mt-6",children:[Object(y.jsx)(O.a,{onClick:function(){return q.setState({addDocuments:!1,addDocType:r.ALL,resident_district_id:null,disability_surpoting_document:null,resident_surpoting_document:null,success:"",error:null})},theme:"default",children:"Back"}),Object(y.jsx)(O.a,{type:"submit",theme:"success",children:"Submit"})]})]})]})})]})}}]),s}(m.Component);t.a=w},132:function(e,t,s){"use strict";var r=s(19),i=s(3),a=s(13),n=s(27),c=s(10),o=s(1);t.a=function(e){var t,s,l,d,u,h,m=e.transf,p=e.expand,b=void 0!==p&&p,j=e.remove_loading,x=void 0!==j&&j,_=e.removeTransfer,g=Object(i.useState)(!1),f=Object(r.a)(g,2),v=f[0],O=f[1];return console.log(m),Object(o.jsxs)("div",{className:"p-2 bg-white mb-3 border rounded ",children:[Object(o.jsxs)("div",{className:"flex",children:[Object(o.jsx)("div",{className:"p-3 hidden lg:flex items-center  ".concat("APPROVED"===m.requested_status?"text-green-700 bg-green-100":"text-accent-800 bg-accent-400"," rounded flex items-center"),children:Object(o.jsx)(a.gb,{size:80})}),Object(o.jsxs)("div",{className:"flex-1 pl-3 pt-1",children:[Object(o.jsxs)("section",{className:"hover:underline cursor-pointer",onClick:function(){return O(!v)},children:[Object(o.jsx)("span",{className:"p-1 rounded px-2 py-0.5 text-sm  ".concat("APPROVED"===m.requested_status?"bg-green-600 text-white":"bg-accent-900 text-white"),children:m.requested_status})," ",Object(o.jsxs)("h2",{className:"text-lg font-bold",children:[m.position_code," ",m.position_name]})]}),Object(o.jsxs)("div",{className:"pt-1",children:[Object(o.jsxs)("section",{className:"flex items-center pt-2",children:[Object(o.jsxs)("section",{className:"border pl-2 hover:bg-gray-200 pr-4 rounded rounded-r-full",children:[Object(o.jsx)("h6",{className:" font-light text-sm text-yellow-600",children:"Current school"}),Object(o.jsxs)("h3",{className:" font-bold",children:[null===(t=m.school_from_info)||void 0===t?void 0:t.school_code," - ",null===(s=m.school_from_info)||void 0===s?void 0:s.school_name]}),Object(o.jsxs)("h4",{className:"text-sm -mt-1 text-gray-500",children:[null===(l=m.school_from_info)||void 0===l?void 0:l.district_name," -"," ",null===(d=m.school_from_info)||void 0===d?void 0:d.sector_name]})]}),Object(o.jsx)("section",{className:"text-gray-500",children:Object(o.jsx)(a.o,{size:40})}),null===(u=m.requested_school_info)||void 0===u?void 0:u.map((function(e,t){return Object(o.jsxs)("section",{className:"border flex-1 pl-4 rounded hover:bg-gray-200 ".concat(0===t?"rounded-l-full rounded-r p-1 mr-2 ":" px-1 rounded mr-2 py-2","  ").concat(m.approved_school_id===e.school_code?"bg-green-600 text-white hover:bg-green-500":""),children:[Object(o.jsxs)("h6",{className:" font-light text-sm text-yellow-600",children:["Requested school ",t+1]}),Object(o.jsxs)("h4",{className:" font-bold",children:[null===e||void 0===e?void 0:e.school_code," - ",null===e||void 0===e?void 0:e.school_name]}),Object(o.jsxs)("h4",{className:"text-sm -mt-1 opacity-70",children:[e.district_name," - ",null===e||void 0===e?void 0:e.sector_name]})]},t)}))]}),Object(o.jsxs)("section",{className:"pt-2",children:[Object(o.jsx)("label",{className:"text-gray-500 inline-block pr-1",children:"Date: "})," ",Object(o.jsx)("b",{children:m.teacher_requested_transfer_date})]})]})]})]}),(v||b)&&Object(o.jsx)("div",{className:"animate__animated  animate__fadeIn animate__faster mt-2 border-t pt-2 grid grid-cols-2",children:[{title:"Transfer type",value:m.transfer_type},{title:"transfer_reason",value:m.transfer_reason},{title:"Requested transfer date",value:m.teacher_requested_transfer_date},{title:"Decision provided on",value:m.incoming_decision_date}].map((function(e,t){return e.value?Object(o.jsxs)("div",{className:"border px-2 py-1.5  flex items-center",children:[Object(o.jsxs)("span",{className:"text-gray-500",children:[e.title,": "]})," ",Object(o.jsx)("h6",{className:"font-bold text-black",children:e.value})]},t):null}))}),m.teacher_comment&&(null===(h=m.teacher_comment)||void 0===h?void 0:h.length)>=1&&Object(o.jsxs)("div",{className:"p-2 my-2 rounded border",children:[Object(o.jsx)("span",{className:"text-gray-500",children:"Transfer reason: "})," ",Object(o.jsx)("h6",{className:"font-bold text-black",children:m.teacher_comment})]}),_&&m.teacher_transfer_id&&"APPROVED"!==m.requested_status&&Object(o.jsx)("div",{className:"pt-4 text-right",children:Object(o.jsx)(n.a,{onClick:_.bind(undefined,m.teacher_transfer_id),theme:"danger-light",loading:x,children:"Remove transfer request"})}),null!==m.mayor_letter&&Object(o.jsx)("div",{className:"p-2 text-right",children:Object(o.jsx)("a",{href:"".concat(c.e,"/").concat(m.mayor_letter),target:"_blank",rel:"noreferrer",download:!0,children:Object(o.jsx)(n.a,{theme:"accent-light",children:"Download transfer letter"})})})]})}},142:function(e,t,s){"use strict";s(3);var r=s(13),i=s(26),a=s(1);t.a=function(e){var t=e.title,s=e.name;return Object(a.jsx)(i.a,{className:"max-w-screen-sm mx-auto text-center animate__animated animate__zoomIn animate__faster",children:Object(a.jsxs)("div",{className:"py-4",children:[Object(a.jsx)("div",{className:"text-6xl p-4 rounded-full bg-red-100 text-red-700 inline-block ",children:Object(a.jsx)(r.g,{})}),Object(a.jsx)("h2",{className:"text-2xl font-bold",children:t}),Object(a.jsxs)("p",{className:"pt-4 text-gray-500",children:["To request a ",s," you must have experience of one year in education and one year at the current school."]})]})})}},186:function(e,t,s){"use strict";s.r(t),s.d(t,"TransfersList",(function(){return q}));var r=s(29),i=s(30),a=s(31),n=s(32),c=s(3),o=s.n(c),l=s(13),d=s(17),u=s(11),h=s(25),m=s(27),p=s(26),b=s(142),j=s(43),x=s(39),_=s(24),g=s(121),f=s(114),v=s(33),O=s(124),y=s(51),N=s(1),w=function(e){var t=e.number,s=e.title,r=e.description,i=e.theme,a=e.active,n=e.priority,c=e.onClick;return Object(N.jsxs)("div",{onClick:c,className:"p-2 rounded-t-md cursor-pointer border-b-4 flex flex-col text-center lg:text-left lg:flex-row items-center border-".concat(i,"-500 ").concat(!0===a?"bg-".concat(i,"-100"):""," ").concat(!1===n?"opacity-60":""),children:[Object(N.jsx)("section",{className:"p-2 lg:p-3 rounded-full border-4 ".concat("bg-".concat(i,"-500")," 0 ").concat("border-".concat(i,"yellow"===i?"-600":"-200"),"  ").concat("yellow"===i?"text-black":"text-white"," w-9 h-9 lg:w-14 lg:h-14 flex items-center text-center"),children:Object(N.jsx)("h3",{className:"text-center w-full text-xl lg:text-3xl font-bold ",children:t})}),Object(N.jsxs)("section",{className:"pl-2",children:[Object(N.jsx)("h3",{className:"lg:text-xl text-lg font-bold",children:s}),Object(N.jsx)("p",{className:"text-gray-400 text-sm",children:r})]})]})},S=function(e){e.close;return Object(N.jsxs)(p.a,{className:"max-w-screen-md mx-auto text-center",children:[Object(N.jsx)("h1",{className:"text-2xl",children:"Transfer is closed"}),Object(N.jsx)("p",{className:"text-center pt-2 text-gray-700",children:"The transfer is closed"})]})},k=function(e){Object(a.a)(s,e);var t=Object(n.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).componentDidMount=function(){var e,t;return null!==(e=i.props.auth.position)&&void 0!==e&&e.position_code?null!==(t=i.props.auth.position)&&void 0!==t&&t.qualification_id?void Object(u.Y)(i.props.auth.position.qualification_id,i.props.auth.position.position_code,(function(e,t,s){i.setState({loading_district:!1,districts:null===t?[]:t,error:e?{target:null,msg:""}:{target:"main-error",msg:s}})})):i.setState({error:{msg:"You have no qualification assigned to you.",target:"main-error"}}):i.setState({error:{msg:"You have no position assigned to you.",target:"main-error"}})},i.selectDistrict=function(e){var t,s,r,a;null!==e&&i.props.auth.user&&null!==(t=i.props.auth.position)&&void 0!==t&&t.position_code&&null!==(s=i.props.auth.position)&&void 0!==s&&s.qualification_id?e.total_vacant>=1?(i.setState({selected_district:e,step:2,loading_schools:!0}),Object(u.x)(e.district_code,null===(r=i.props.auth.position)||void 0===r?void 0:r.position_code,null===(a=i.props.auth.position)||void 0===a?void 0:a.qualification_id,(function(e,t,s){i.setState({loading_schools:!1,schools:t,error:!0===e?{target:null,msg:""}:{target:"main-error",msg:s}})}))):window.alert("No vacant found in ".concat(e.district_name," district.")):window.alert("Please verify your profile")},i.selectSchool=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.state.selected_schools.length>=3&&t||(t?i.setState({selected_schools:[].concat(Object(_.a)(i.state.selected_schools),[e])}):i.setState({selected_schools:i.state.selected_schools.filter((function(t){return t.school_code!==e.school_code}))}))},i.loadReasons=function(){i.state.reasons.length<=0&&(i.setState({loading_reasons:!0}),Object(u.V)((function(e,t,s){i.setState({loading_reasons:!1,reasons:t,error:!1===e?{msg:"",target:null}:{target:"error",msg:s}})})))},i.submitTransferRequest=function(){var e;if(!i.props.auth)return i.setState({error:{target:"transfer-error",msg:"Authentication info are not completed"}});if(!i.props.auth.school)return i.setState({error:{target:"transfer-error",msg:"Check your school information."}});if(!i.state.selected_district)return i.setState({error:{target:"transfer-error",msg:"The district assigned to you is not valid"}});if(!i.props.auth.user)return i.setState({error:{target:"transfer-error",msg:"Incomplete profile info"}});if(!i.props.basic.academic_calender||!i.props.auth||!i.props.auth.school||!i.state.selected_district||!i.props.auth.user)return i.setState({error:{target:"transfer-error",msg:"Incomplete profile info"}});var t=i.props.auth.school.school_code.substring(0,2),s={academic_year_id:"1",district_from_id:t,district_to_id:i.state.selected_district.district_code,requested_school_id:i.state.selected_schools.map((function(e){return e.school_code})),school_from_id:i.props.auth.school.school_code,teacher_comment:i.state.candidate_comment,teacher_reason_id:[],teacher_supporting_document:[],transfer_type:t!==i.state.selected_district.district_code?"External":"Internal"};i.setState({loading_submit_transfer:!0,error:{target:null,msg:""}}),Object(u.sb)(s,null===(e=i.props.auth.user)||void 0===e?void 0:e.staff_code,(function(e,t,s){console.log({res:t}),!0===e?i.setState({loading_submit_transfer:!1,transfer_success:!0}):(console.log({msg:s}),i.setState({loading_submit_transfer:!1,error:{target:"transfer-error",msg:s}}),i.props.reloadTransfers())}))},i.state={loading_schools:!1,loading_district:!0,districts:[],schools:[],selected_district:null,error:{target:null,msg:""},selected_qualification:"",search:"",step:1,search_district:"",search_school:"",selected_schools:[],reasons:[],selected_reasons:[],loading_reasons:!1,candidate_comment:"",transfer_success:!1,loading_submit_transfer:!1},i}return Object(i.a)(s,[{key:"render",value:function(){var e,t,s,r,i,a,n,c,o,d,u,b=this;if(!1===this.props.auth.is_transfer_open)return Object(N.jsx)(S,{});if(null===(null===(e=this.props.auth.user)||void 0===e?void 0:e.resident_surpoting_document)||""===(null===(t=this.props.auth.user)||void 0===t?void 0:t.resident_surpoting_document)||null===(s=this.props.auth.user)||void 0===s||!s.resident_district_id)return Object(N.jsxs)(p.a,{children:[Object(N.jsxs)("div",{className:"text-center py-4 bg-red-100 bg-opacity-60 mb-4 text-red-800",children:[Object(N.jsx)("h1",{className:"text-2xl font-bold",children:"Your document of residence is required"}),Object(N.jsxs)("p",{className:"text-gray-600",children:["Please add the document in order to continue, the document can be found on ",Object(N.jsx)("b",{children:"Irembo"})]})]}),Object(N.jsx)(O.a,{auth:this.props.auth,FC_UpdateUserDocuments:this.props.FC_UpdateUserDocuments})]});if("main-error"===this.state.error.target)return Object(N.jsx)(h.a,{theme:"danger",fixed:!0,children:this.state.error.msg});var _=Object(y.h)(this.state.districts,this.state.search_district,{district_code:!0,district_name:!0}),k=Object(y.h)(this.state.schools,this.state.search_school,{school_code:!0,school_name:!0,sector_name:!0});return!0===this.state.transfer_success?Object(N.jsx)(p.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(N.jsxs)("div",{className:"py-4 text-center",children:[Object(N.jsx)(l.j,{size:90,className:"mx-auto text-green-500"}),Object(N.jsx)("h3",{className:"font-bold text-lg",children:null===(r=this.props.auth.user)||void 0===r?void 0:r.full_name}),Object(N.jsxs)("p",{className:"text-gray-500 pb-4",children:["Your transfer request has been submitted successfully."," "]}),Object(N.jsx)(m.a,{theme:"accent-light",size:"md",onClick:function(){return b.props.close()},children:"View transfer request"})]})}):Object(N.jsxs)(N.Fragment,{children:["main-success"===this.state.error.target&&Object(N.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"sticky top-14 z-50 ",children:Object(N.jsxs)(p.a,{children:[Object(N.jsxs)("div",{className:"flex items-center",children:[Object(N.jsxs)("div",{className:"flex-1",children:[Object(N.jsxs)(j.a,{size:"lg",className:" py-2 lg:pb-3 lg:pt-2 font-light text-left text-gray-500",children:["Apply for transfer"," ",this.state.selected_district&&Object(N.jsxs)("span",{children:[" ","in"," ",Object(N.jsxs)("b",{className:"text-primary-800",children:[this.state.selected_district.district_name," district"]})]})]}),Object(N.jsxs)("p",{className:"-mt-3 pb-2 text-gray-400",children:["Position name:"," ",Object(N.jsxs)("b",{className:"text-primary-800",children:[null===(i=this.props.auth.position)||void 0===i?void 0:i.position_code," ",null===(a=this.props.auth.position)||void 0===a?void 0:a.position_name]})]}),Object(N.jsxs)("p",{className:"-mt-3 pb-2 text-gray-400",children:["Qualification:"," ",Object(N.jsx)("b",{className:"text-primary-800",children:null===(n=this.props.auth.position)||void 0===n?void 0:n.qualification_name})]})]}),!1===this.state.loading_submit_transfer&&Object(N.jsx)(m.a,{size:"md",theme:"danger-light",onClick:function(){return window.confirm("Are you sure you want to stop the request process \n All your previous choices will be lost")?b.props.onClick():null},children:"Close"})]}),Object(N.jsx)("div",{className:"pt-2 grid  grid-cols-3 border p-2 rounded-md",children:[{step:1,title:"Choose a district",description:"Select a district where you want to be transferred"},{step:2,title:"Choose school",description:"You can select up to 3 schools"},{step:3,title:"Complete transfer",description:"Complete the information"}].map((function(e){return Object(N.jsx)(w,{onClick:function(){!0!==b.state.loading_submit_transfer&&(1===e.step&&b.setState({step:1,schools:[],loading_schools:!1,selected_schools:[]}),2===e.step&&3===b.state.step&&b.setState({step:2}))},active:e.step===b.state.step,description:e.description,number:e.step,theme:e.step===b.state.step?"yellow":b.state.step>e.step?"green":"gray",title:e.title,priority:e.step<=b.state.step},e.step)}))})]})}),1===this.state.step&&Object(N.jsx)(p.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"p-2",children:Object(N.jsx)(v.a,{error:"",label:"",name:"",onChange:function(e){return b.setState({search_district:e.target.value})},placeholder:"Search district by name",value:this.state.search_district})}),!0===this.state.loading_district?Object(N.jsx)("div",{className:"py-8 text-center text-8xl text-accent-900",children:Object(N.jsx)(x.a,{className:"mx-auto"})}):this.state.districts.length>=1?Object(N.jsx)(N.Fragment,{children:_.length<=0?Object(N.jsxs)("div",{className:"py-4 text-center",children:[Object(N.jsx)("h2",{className:"text-lg",children:"No results found!"}),Object(N.jsx)("p",{className:"text-gray-500",children:"Please use a correct district name"})]}):Object(N.jsx)("div",{className:"grid lg:grid-cols-2 gap-2 ",children:_.map((function(e){return Object(N.jsxs)("div",{onClick:b.selectDistrict.bind(b,e),className:"p-2 flex items-center cursor-pointer rounded border  px-3 hover:text-yellow-600 hover:border-yellow-600 hover:bg-yellow-50 bg-white text-lg",children:[Object(N.jsxs)("h4",{className:"flex-1 text-lg",children:[" ",Object(N.jsx)("b",{children:e.district_name})," district"]}),Object(N.jsx)("span",{className:"bg-yellow-100 text-yellow-700 font-bold py-0.5 inline-block text-sm px-1.5 rounded-full",children:e.total_vacant}),e.total_vacant>=1&&Object(N.jsx)("button",{className:"",children:Object(N.jsx)(l.E,{})})]},e.district_code)}))})}):Object(N.jsxs)("div",{className:"py-4 text-center",children:[Object(N.jsx)("h2",{className:"text-8xl text-gray-400 text-center",children:Object(N.jsx)(g.d,{className:"inline"})}),Object(N.jsx)("h2",{className:"text-center p-4 text-gray-400 font-bold text-2xl",children:Object(N.jsx)("p",{children:"No vacant found on"})})," ",Object(N.jsx)("p",{className:"-mt-3 pb-2 text-gray-400 text-lg",children:Object(N.jsxs)("b",{className:"text-black",children:[null===(c=this.props.auth.position)||void 0===c?void 0:c.position_code," -"," ",null===(o=this.props.auth.position)||void 0===o?void 0:o.position_name," -"," ",null===(d=this.props.auth.position)||void 0===d?void 0:d.qualification_name]})})]})]})}),2===this.state.step&&Object(N.jsxs)(N.Fragment,{children:[!0===this.state.loading_schools?Object(N.jsxs)("div",{className:"py-4 text-center",children:[Object(N.jsx)(l.cb,{size:"160px",className:"text-gray-600 mx-auto animate__animated animate__swing animate__slow animate__infinite"}),Object(N.jsx)("h2",{className:"text-3xl text-gray-600 pb-2 pt-4",children:"Looking for the vacancies"}),Object(N.jsx)("p",{className:"text-gray-500",children:"Please wait"})]}):Object(N.jsx)(p.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"py-0.5 my-2 px-2 flex items-center bg-gray-100 rounded",children:[Object(N.jsx)("section",{children:Object(N.jsxs)(m.a,{theme:"default",className:"flex items-center text-blue-600",onClick:function(){return b.setState({step:1,schools:[],loading_schools:!1,selected_schools:[]})},children:[Object(N.jsx)(l.y,{size:30})," Back"]})}),Object(N.jsx)("section",{className:"flex-1",children:Object(N.jsx)(v.a,{error:"",label:"",name:"",onChange:function(e){return b.setState({search_school:e.target.value})},placeholder:"Search schools by name",value:this.state.search_school})})]}),this.state.schools.length>=1?Object(N.jsx)(N.Fragment,{children:k.length<=0?Object(N.jsxs)("div",{className:"py-4 text-center",children:[Object(N.jsx)("h2",{className:"text-lg",children:"No results found!"}),Object(N.jsx)("p",{className:"tet-gray-500",children:"Please use a correct school name"})]}):Object(N.jsx)("div",{className:"grid lg:grid-cols-2 gap-2 pb-20",children:k.map((function(e){var t,s=b.state.selected_schools.find((function(t){return t.school_code===e.school_code}));return e.school_code===(null===(t=b.props.auth.school)||void 0===t?void 0:t.school_code)?null:Object(N.jsxs)("div",{onClick:b.selectSchool.bind(b,e,void 0===s),className:"pr-2 pl-1 py-1 flex cursor-pointer rounded border  px-3 ".concat(void 0===s?"hover:text-yellow-600 hover:border-yellow-600 hover:bg-yellow-50":"hover:text-green-600 border-green-600 bg-green-100","  bg-white text-lg"),children:[Object(N.jsx)("button",{className:"pr-2 text-3xl",children:void 0===s?Object(N.jsx)(l.i,{className:"".concat(b.state.selected_schools.length>=3?"text-gray-400":"text-gray-800")}):Object(N.jsx)(l.h,{className:"text-green-500"})}),Object(N.jsxs)("section",{className:"flex-1",children:[Object(N.jsxs)("h4",{className:"",children:[Object(N.jsx)("span",{children:e.school_code})," ",Object(N.jsx)("b",{children:e.school_name})]}),Object(N.jsxs)("p",{className:"text-sm text-gray-600",children:["Sector: ",Object(N.jsx)("b",{children:e.sector_name})]})]}),Object(N.jsxs)("section",{children:[Object(N.jsxs)("p",{className:"text-xs text-gray-400",children:["Vacant","(s)"]}),Object(N.jsx)("h4",{className:" font-bold text-right   ",children:e.vacant_posts})]})]},e.school_code)}))})}):Object(N.jsxs)("div",{className:"py-6 text-center",children:[Object(N.jsx)(g.d,{size:"120px",className:"text-gray-600 mx-auto animate__animated animate__zoomIn animate__slow "}),Object(N.jsxs)("h2",{className:"text-3xl text-gray-600 pb-2 pt-4",children:["Sorry, there is no vacancies for you in"," ",Object(N.jsx)("b",{children:null===(u=this.state.selected_district)||void 0===u?void 0:u.district_name})]}),Object(N.jsxs)("p",{className:"text-gray-500",children:["Please look for another district, ",Object(N.jsx)("br",{})," or try again next time"]})]})]})}),this.state.selected_schools.length>=1&&Object(N.jsxs)("div",{className:"p-2 bottom-0 items-center right-0 left-0 lg:pl-72 fixed bg-white border-t flex",children:[Object(N.jsxs)("section",{className:"flex-1",children:[Object(N.jsxs)("label",{className:"block px-0.5 m-0 text-sm",children:["Selected schools:"," ",Object(N.jsx)("b",{children:this.state.selected_schools.length})]}),Object(N.jsx)("section",{className:"pt-0.5",children:this.state.selected_schools.map((function(e){return Object(N.jsx)("section",{className:"inline-block m-0.5 p-0.5 px-1 rounded-md bg-yellow-100 font-bold text-yellow-600 text-sm",children:e.school_name},e.school_code)}))})]}),Object(N.jsx)("div",{className:"",children:Object(N.jsx)(m.a,{size:"lg",onClick:function(){b.setState({step:3})},children:"Continue"})})]})]}),3===this.state.step&&Object(N.jsxs)(p.a,{className:"animate__animated animate__zoomIn animate__faster",children:["transfer-error"===this.state.error.target&&Object(N.jsx)(h.a,{theme:"danger",children:this.state.error.msg}),Object(N.jsxs)("div",{className:"p-1",children:[Object(N.jsx)(O.a,{auth:this.props.auth,FC_UpdateUserDocuments:this.props.FC_UpdateUserDocuments}),Object(N.jsxs)("div",{className:"pt-3",children:[Object(N.jsx)("h4",{children:"Add reason"}),Object(N.jsx)(f.a,{onChange:function(e){return b.setState({candidate_comment:e.target.value})},value:this.state.candidate_comment,error:"",label:"",placeholder:"Explain your reasons",name:"",disabled:this.state.loading_submit_transfer})]}),Object(N.jsx)("div",{className:"text-right",children:Object(N.jsx)(m.a,{size:"lg",onClick:this.submitTransferRequest,loading:this.state.loading_submit_transfer,children:"Submit transfer request"})})]})]})]})]})}}]),s}(o.a.Component),C=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic,placement:e.placement}}),{FC_UpdateUserDocuments:u.Ab})(k),D=s(132),I=function(e){Object(a.a)(s,e);var t=Object(n.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).removeTransfer=function(e){var t,s=null===(t=i.props.basic.academic_calender)||void 0===t?void 0:t.academic_year_id;if(!s)return i.setState({error:{msg:"No academic year found",target:"main-error"}});window.confirm("Are you sure you want to remove your transfer request?")&&(i.setState({deleting_transfer_id:e}),Object(u.jb)(e,s,(function(t,s){!0===t?i.setState({deleting_transfer_id:"",current_transfer:null!==i.state.current_transfer&&i.state.current_transfer.teacher_transfer_id===e?null:i.state.current_transfer,transfers:i.state.transfers.filter((function(t){return t.teacher_transfer_id!==e})),error:{target:"main-success",msg:s}}):i.setState({deleting_transfer_id:"",error:{target:"main-error",msg:s}})})))},i.openForm=function(e){return i.setState({add_transfer:e})},i.state={loading:!1,add_transfer:!1,transfers:[],current_transfer:null,error:{target:null,msg:""},deleting_transfer_id:"",has_permutation_request:!1},i}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.startComponent(!0)}},{key:"startComponent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===t&&this.setState({loading:!0}),Object(u.U)((function(s,r,i){!0===s&&null!==r?e.setState({loading:!1,has_permutation_request:r.has_permutation_request,transfers:r.transferWithNoCurrentAcademic?r.transferWithNoCurrentAcademic:[],current_transfer:r.transferWithCurrentAcademic}):!0===t&&e.setState({transfers:[],loading:!1,error:{target:"main-error",msg:i}})}))}},{key:"render",value:function(){var e,t,s,r,i=this;return!0===this.state.has_permutation_request?Object(N.jsxs)(p.a,{className:"max-w-screen-md mx-auto py-4 text-center animate__animated animate__zoomIn animate__faster",children:[Object(N.jsx)("h2",{className:" text-6xl text-center text-red-400 pb-4",children:Object(N.jsx)(l.w,{className:"inline-block"})}),Object(N.jsxs)("h4",{className:"text-xl font-bold",children:["It looks like you have already requested for a permutation, ",Object(N.jsx)("br",{}),"You can't Request a transfer"]}),Object(N.jsxs)("p",{className:"text-gray-600 pt-2",children:["If you want to request for a transfer, ",Object(N.jsx)("br",{})," you will need to remove your permutation."]})]}):this.props.auth.has_one_year?!0===this.state.add_transfer?!1===this.props.auth.is_transfer_open?Object(N.jsx)(S,{}):Object(N.jsx)(C,{onClick:this.openForm.bind(this,!1),reloadTransfers:this.startComponent,close:function(){i.setState({add_transfer:!1}),i.startComponent()}}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"bg-white",children:Object(N.jsx)(p.a,{transparent:!0,className:"",children:Object(N.jsxs)("div",{className:"flex items-center",children:[Object(N.jsxs)("section",{className:"flex-1 text-gray-600",children:[Object(N.jsx)(j.a,{children:"My Transfers"}),!1===this.state.loading&&Object(N.jsxs)("p",{children:["Total transfers:"," ",null===this.state.current_transfer?this.state.transfers.length:this.state.transfers.length+1]})]}),Object(N.jsx)("section",{children:null!==this.state.current_transfer&&"PENDING"===this.state.current_transfer.requested_status&&Object(N.jsxs)("p",{className:"text-sm text-yellow-700 ",children:["If you want to make changes on your request, ",Object(N.jsx)("br",{})," delete the current request and request a new one."]})})]})})}),Object(N.jsxs)(p.a,{transparent:!0,className:"",children:["main-error"===this.state.error.target&&Object(N.jsx)(h.a,{theme:"danger",fixed:!0,onClick:function(){return i.setState({error:{msg:"",target:null}})},children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(N.jsx)(h.a,{theme:"success",fixed:!0,onClick:function(){return i.setState({error:{msg:"",target:null}})},children:this.state.error.msg}),Object(N.jsx)("div",{className:"py-2",children:!1===this.state.loading&&Object(N.jsx)(N.Fragment,{children:null!==this.state.current_transfer&&this.state.current_transfer.teacher_transfer_id?Object(N.jsx)(D.a,{transf:this.state.current_transfer,expand:!0,remove_loading:this.state.current_transfer.teacher_transfer_id===this.state.deleting_transfer_id,removeTransfer:this.props.auth.is_transfer_open?this.removeTransfer:void 0}):Object(N.jsx)(N.Fragment,{children:!0===this.props.auth.is_transfer_open?Object(N.jsxs)("div",{className:"text-center py-8",children:[Object(N.jsx)("h2",{className:"text-2xl font-bold ",children:"You haven't yet requested for a transfer?"}),Object(N.jsx)("p",{className:"text-gray-500 pb-2",children:"Send your transfer application if you want to be transferred"}),Object(N.jsx)(m.a,{onClick:this.openForm.bind(this,!0),children:"Request new transfer"})]}):Object(N.jsx)(S,{})})})}),Object(N.jsx)("div",{className:"pt-5 ".concat(null!==this.state.current_transfer&&null!==(null===(e=this.state.current_transfer)||void 0===e?void 0:e.teacher_transfer_id)&&void 0!==(null===(t=this.state.current_transfer)||void 0===t?void 0:t.teacher_transfer_id)&&(null===(s=this.state.current_transfer)||void 0===s||null===(r=s.teacher_transfer_id)||void 0===r?void 0:r.length)>=1?"opacity-40":""),children:!0===this.state.loading?Object(N.jsx)("div",{className:"py-8 text-center text-6xl",children:Object(N.jsx)(x.a,{className:"mx-auto"})}):this.state.transfers.length<=0?Object(N.jsx)("div",{className:"text-3xl py-8 text-center text-gray-500"}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h2",{className:"text-2xl text-gray-700 font-bold pb-2",children:"Old transfers"}),this.state.transfers.map((function(e,t){return Object(N.jsx)(D.a,{transf:e},t)}))]})})]})]}):Object(N.jsx)(b.a,{title:"You are not qualified to request a transfer",name:"transfer"})}}]),s}(o.a.Component),q=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(I)}}]);
//# sourceMappingURL=19.46e0c0b1.chunk.js.map