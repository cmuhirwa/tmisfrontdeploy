(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[14,15],{105:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return c}));var a,r,c,n=s(11),i=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(a||(a={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(r||(r={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(c||(c={}));t.c=function(e){var t,s=e.title,o=e.backDrop,l=e.theme,d=e.close,h=e.backDropClose,u=e.widthSizeClass,b=e.displayClose,m=e.padding,j=void 0===m?{title:!0,body:!0,footer:!0}:m;switch(l){case a.primary:t="blue-primary";break;case a.secondary:t="gray-300";break;case a.danger:t="red-500";break;case a.success:t="green-500";break;case a.warning:t="yellow-500";break;default:t="white"}return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{onClick:function(){return h&&d()},className:"fixed bg-black bg-opacity-".concat(!0===o?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(i.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?r.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(u," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==r.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(u===c.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(i.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===j.title?"py-4 px-4":""," rounded-t text-").concat(l===a.default||l===a.secondary?"black":"white"),children:[s&&""!==s?Object(i.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(i.jsx)("div",{}),!1===b?"":Object(i.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(i.jsx)(n.h,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(i.jsx)("div",{className:"space-x-3 ".concat(!0===j.body?"py-4 px-4":""),children:Object(i.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(i.jsx)("div",{className:"flex float-right ".concat(!0===j.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},107:function(e,t,s){"use strict";s(2);var a=s(49),r=s(1);t.a=function(e){var t=e.onChange,s=e.value,c=e.error,n=e.label,i=e.placeholder,o=e.disabled,l=void 0!==o&&o,d=e.name,h=e.Input_className,u=void 0===h?"":h,b=e.Label_className,m=void 0===b?"":b,j=e.InputContainer_className,x=void 0===j?"":j,p=e.MainContainer_className,f=void 0===p?"":p,g=e.labelColor,O=void 0===g?"text-primary-900 dark:text-primary-100":g,_=e.size,y=void 0===_?"md":_;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"w-full my-2 ".concat(f),children:[""!==n&&Object(r.jsx)("label",{htmlFor:"any-form",className:"".concat(O," ").concat(m),children:n}),Object(r.jsxs)("div",{className:"rounded relative ".concat(x),children:[Object(r.jsx)("textarea",{name:d,placeholder:i,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(a.a)(y),"\n                ").concat(""!==c?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(u),value:s,disabled:l}),""!==c&&Object(r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:c})]})]})})}},108:function(e,t,s){"use strict";var a;s.d(t,"a",(function(){return a})),function(e){e.PENDING="PENDING TERMINATION",e.TERMINATED="TERMINATED",e.PENDING_SUSPENSION="PENDING SUSPENTION",e.SUSPENDED="SUSPENDED",e.REJECTED="REJECTED"}(a||(a={}))},109:function(e,t,s){"use strict";s.d(t,"f",(function(){return i})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return u}));var a,r,c,n=s(18),i=100;!function(e){e.GOVERNMENT_AIDED="GOVERNMENT_AIDED",e.PRIVATE="GOVERNMENT_AIDED",e.PUBLIC="PUBLIC"}(a||(a={})),function(e){e.EXIST="Exist",e.NEW="new"}(r||(r={})),function(e){e.role="role",e.district_name="district_name",e.full_name="full_name",e.first_name="first_name",e.last_name="last_name",e.phone_numbers="phone_numbers",e.email="email",e.sex="sex",e.dob="dob",e.marital_status="marital_status",e.nid="nid",e.rssb_number="rssb_number",e.bank_account="bank_account",e.position="position",e.specialization="specialization",e.qualification="qualification",e.staff_category="staff_category",e.staff_code="staff_code",e.status="status",e.school_code="school_code",e.school_name="school_name",e.school_category="school_category",e.school_status="school_status",e.region_code="region_code",e.village_name="village_name",e.cell_name="cell_name",e.cell_code="cell_code",e.sector_name="sector_name",e.sector_code="sector_code",e.district_code="district_code",e.province_name="province_name",e.province_code="province_code",e.subjects="subjects",e.grades="grades",e.periods="periods",e.date_in_school="date_in_school",e.date_of_hire="date_of_hire",e.nationality="nationality",e.middle_name="middle_name",e.bank_name="bank_name"}(c||(c={}));var o=[{key:c.staff_code,title:"Staff code",status:!0,isChangeAllowed:!1},{key:c.nid,title:"National ID",status:!0,isChangeAllowed:!1},{key:c.full_name,title:"Staff Full Names",status:!0,isChangeAllowed:!0},{key:c.first_name,title:"Staff First Name",status:!0,isChangeAllowed:!0},{key:c.middle_name,title:"Staff Middle Name",status:!0,isChangeAllowed:!0},{key:c.last_name,title:"Staff Last Name",status:!0,isChangeAllowed:!0},{key:c.phone_numbers,title:"Staff Phone",status:!0,isChangeAllowed:!0},{key:c.email,title:"Staff Email",status:!0,isChangeAllowed:!0},{key:c.dob,title:"Date of Birth",status:!0,isChangeAllowed:!0},{key:c.sex,title:"Sex",status:!0,isChangeAllowed:!0},{key:c.marital_status,title:"Marital status",status:!0,isChangeAllowed:!0},{key:c.qualification,title:"Qualification",status:!0,isChangeAllowed:!0},{key:c.specialization,title:"Specialization",status:!0,isChangeAllowed:!0},{key:c.rssb_number,title:"RSSB",status:!0,isChangeAllowed:!0},{key:c.bank_name,title:"Bank name",status:!0,isChangeAllowed:!0},{key:c.bank_account,title:"Bank account",status:!0,isChangeAllowed:!0},{key:c.position,title:"Position",status:!0,isChangeAllowed:!0},{key:c.role,title:"Staff role",status:!0,isChangeAllowed:!0},{key:c.district_code,title:"District Code",status:!0,isChangeAllowed:!0},{key:c.district_name,title:"District Name",status:!0,isChangeAllowed:!0},{key:c.school_code,title:"School Code",status:!0,isChangeAllowed:!0},{key:c.school_name,title:"School Name",status:!0,isChangeAllowed:!0},{key:c.school_category,title:"School Category",status:!0,isChangeAllowed:!0},{key:c.school_status,title:"School Status",status:!0,isChangeAllowed:!0},{key:c.nationality,title:"Nationality",status:!0,isChangeAllowed:!0},{key:c.date_of_hire,title:"Date to hire",status:!0,isChangeAllowed:!0},{key:c.date_in_school,title:"Date in school",status:!0,isChangeAllowed:!0},{key:c.subjects,title:"Subjects",status:!0,isChangeAllowed:!0},{key:c.grades,title:"Grade (No of Group)",status:!0,isChangeAllowed:!0},{key:c.periods,title:"Periods",status:!0,isChangeAllowed:!0}],l={country:["REB","RTB","MINECOFIN"],district:["DDE","Human Resource"],school:["Head Teacher","Teacher"]},d=function(e){return null===e?"":u(e)?Object(n.a)(e):e},h=function(e){var t="",s=[],a="",r={grade_names:[],grade_codes:[],courses:[],group:[]},c=0;if(e){var i=function(a){var i=e[a];if(s.includes(i.course_code)||(s.push(i.course_code),t+=Object(n.e)(t)?i.course_name:", "+i.course_name),r.grade_codes.includes(i.grade_code)){if(r.courses.findIndex((function(e){return e===i.course_code}))>=0){var o=r.courses.findIndex((function(e){return e===i.course_code}));r.group[o]+=JSON.parse(i.grade_group).length}}else r.grade_codes.push(i.grade_code),r.grade_names.push(i.grade_name),r.courses.push(i.course_code),r.group.push(JSON.parse(i.grade_group).length);c+=Number(i.teaching_period)*JSON.parse(i.grade_group).length};for(var o in e)i(o);for(var l in r.courses)a+=Object(n.e)(a)?"".concat(r.grade_names[l]," (").concat(r.group[l],")"):", ".concat(r.grade_names[l]," (").concat(r.group[l],")")}return{courses:t,grades:a,periods:c.toString()}},u=function(e){if(null===e)return!1;var t=new Date(e);return!isNaN(t.getDate())}},113:function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var a=s(26),r=s(27),c=s(28),n=s(29),i=s(2),o=s.n(i),l=s(11),d=s(16),h=s(12),u=s(114),b=s(25),m=s(30),j=s(48),x=s(105),p=s(24),f=s(1),g=function(e){Object(c.a)(s,e);var t=Object(n.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){r.props.district_code||r.loadDistricts(),void 0===r.props.school_code&&r.setState({current_school:!1})},r.loadDistricts=function(){r.state.districts.length<=0&&(r.setState({loading_districts:!0}),Object(h.r)((function(e,t,s){e?r.setState({loading_districts:!1,districts:t}):r.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},r.selectDistrict=function(e){r.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),r.reloadDistrictResurces(e.district_code)},r.reloadDistrictResurces=function(e){e&&(r.setState({loading_resource:!0}),r.props.FC_GetAssignAssets(e,(function(e,t){e?r.setState({loading_resource:!1}):r.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,district_code:r.props.district_code?r.props.district_code:"",district_name:r.props.district_name?r.props.district_name:"",current_school:!0,selected_district:r.props.district_code?r.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,a,r,c=this;return"user-updates-success"===this.state.error.target?Object(f.jsx)(m.a,{className:"animate__animated animate__zoomIn ",children:Object(f.jsxs)("div",{className:"text-center py-10",children:[Object(f.jsx)(l.g,{className:"text-8xl text-green-600 mx-auto"}),Object(f.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(f.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(f.jsx)("br",{})," you can close the window and continue with other users"]}),Object(f.jsx)(b.a,{theme:"success-light",onClick:function(){c.props.close(),c.props.refreshApp&&c.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(f.jsxs)(f.Fragment,{children:["main-error"===this.state.error.target&&Object(f.jsx)(p.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(f.jsx)(p.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(f.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return c.setState({open_select_district:!1})}}),Object(f.jsx)(x.c,{backDrop:!0,backDropClose:!0,close:function(){return c.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:x.b.default,widthSizeClass:x.a.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(f.jsx)(j.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(f.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(f.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(f.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(f.jsx)("h6",{children:e.district_code}),Object(f.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(f.jsx)(b.a,{theme:"accent-light",size:"sm",onClick:c.selectDistrict.bind(c,e),children:"Select district"})]},t)}))})})]}),Object(f.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(f.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(f.jsx)(b.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(f.jsx)(m.a,{children:Object(f.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(f.jsx)("div",{className:"",children:Object(f.jsx)(l.a,{className:"text-6xl"})}),Object(f.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(f.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(f.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(f.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(f.jsx)("b",{children:null===(a=this.props.userDetails)||void 0===a?void 0:a.email})]})]})]})}),Object(f.jsx)("div",{className:"my-2",children:Object(f.jsx)(m.a,{children:Object(f.jsxs)("div",{className:"flex gap-3",children:[Object(f.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h2",{className:"text-lg pr-3",children:[Object(f.jsx)("b",{children:this.state.district_name}),"District"]}),Object(f.jsx)(b.a,{onClick:function(){c.setState({open_select_district:!0}),c.loadDistricts()},size:"sm",theme:"accent-light",children:"Choose District"}),this.props.district_code+""!==this.state.selected_district+""&&this.props.district_code&&this.props.district_code&&this.props.district_name&&Object(f.jsxs)(b.a,{onClick:function(){c.props.district_code&&c.props.district_code&&c.selectDistrict({district_code:c.props.district_code,district_name:c.props.district_code})},size:"sm",theme:"accent-light",children:["Choose ",Object(f.jsx)("b",{children:this.props.district_name})]})]})}),Object(f.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(f.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(r=this.props)||void 0===r?void 0:r.school_name)}),Object(f.jsx)(b.a,{onClick:function(){return c.setState({current_school:!c.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(u.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){c.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){c.props.refreshApp&&c.props.refreshApp(),c.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(o.a.Component),O=Object(d.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.m})(g)},116:function(e,t,s){"use strict";s.d(t,"a",(function(){return D})),s.d(t,"b",(function(){return A}));var a=s(6),r=s(4),c=s(41),n=s(26),i=s(27),o=s(28),l=s(29),d=s(3),h=s.n(d),u=s(2),b=s(16),m=s(37),j=s(11),x=s(111),p=s(12),f=s(18),g=s(48),O=s(36),_=s(20),y=s(5),v=s.n(y),N=s(106),w=s(13),S=s(1),k=function(e){var t=Object(u.useState)(void 0===e.addedGroups?[]:e.addedGroups.group),s=Object(_.a)(t,2),a=s[0],r=s[1],c=Object(u.useState)(""),n=Object(_.a)(c,2),i=n[0],o=n[1],l=Object(u.useState)(""),d=Object(_.a)(l,2),h=d[0],b=d[1];return Object(S.jsxs)("div",{className:"absolute bg-primary-800 p-2 rounded-md shadow-xl right-2 md:right-10 animate__animated animate__zoomIn animate__faster mb-10",style:{minWidth:"300px"},children:[Object(S.jsx)("div",{className:"text-lg text-white mb-2 text-left px-2 font-bold",children:"ADD GROUPS"}),Object(S.jsx)("div",{children:0===a.length?Object(S.jsx)("div",{className:"border-2 border-blue-500 text-blue-400 rounded-md px-3 py-4 mb-1 text-center text-base",children:"No groups"}):a.map((function(e,t){return Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 border-2 border-blue-300 rounded-md pl-3 py-1 pr-1 text-white font-bold mb-1",children:[Object(S.jsx)("div",{className:"uppercase",children:e}),Object(S.jsx)("div",{onClick:function(){return r(Object(O.a)(a.filter((function(t){return t!==e}))))},className:"bg-red-100 rounded-full text-lg p-1 text-red-700 cursor-pointer",children:Object(S.jsx)(j.h,{})})]},t+1)}))}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 mt-2",children:[Object(S.jsx)("input",{value:i,onChange:function(e){b(""),o(e.target.value)},placeholder:"Group name",className:"border-0 px-3 py-2 rounded w-full"}),""!==i&&Object(S.jsx)("div",{onClick:function(){""===i?b("Please fill group name!"):(b(""),r([].concat(Object(O.a)(a.filter((function(e){return e!==i}))),[i])),o(""))},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-blue-500 hover:bg-blue-600 text-white w-36 animate__animated animate__fadeIn animate__faster",children:"Add group"})]}),""!==h&&Object(S.jsx)("div",{className:"bg-red-100 text-red-700 px-3 py-2 rounded my-1 animate__animated animate__zoomIn animate__faster",onClick:function(){return b("")},children:h}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 mt-3 animate__animated animate__fadeInUp animate__faster",children:[Object(S.jsx)("div",{onClick:function(){return e.cancel()},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),a.length>0&&Object(S.jsx)("div",{onClick:function(){console.log("sd: ",e.addedGroups),void 0!==e.addedGroups&&e.addSubjectGroup(e.addedGroups.study_hierarchy_id,a)},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-green-500 hover:bg-green-600 text-white animate__animated animate__fadeInRight animate__faster",children:"Save changes"})]})]})},C=function(){var e=Object(a.a)(h.a.mark((function e(t,s,a,c){var n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",alert("Please select atleast one subject"));case 2:return n=t.map((function(e){return{teacher_code:a,study_hierarchy_id:e.studyhierarchyid,grade_group:void 0===s.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid}))?"A":JSON.stringify(s.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid})).group)}})),c(!1,""),console.log("Sent data: ",n),e.prev=5,e.next=8,v.a.post("".concat(w.c,"/teacherhierarch/create"),n);case 8:i=e.sent,c(!0,"Teacher subjects has added successfully!"),console.log("Success: ",i),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),c(!0,""),console.log("Err: ",Object(r.a)({},e.t0));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,s,a,r){return e.apply(this,arguments)}}(),I=function(e){var t,s=Object(u.useState)(null),a=Object(_.a)(s,2),r=a[0],n=a[1],i=Object(u.useState)(!1),o=Object(_.a)(i,2),l=o[0],d=o[1],h=Object(u.useState)(null),b=Object(_.a)(h,2),g=b[0],y=b[1],v=Object(u.useState)(""),w=Object(_.a)(v,2),I=w[0],T=w[1],R=Object(u.useState)(null),A=Object(_.a)(R,2),E=A[0],L=A[1],F=Object(u.useState)([]),P=Object(_.a)(F,2),U=P[0],G=P[1],q=Object(u.useState)(!1),H=Object(_.a)(q,2),M=H[0],z=H[1],B=Object(u.useState)(""),J=Object(_.a)(B,2),V=J[0],X=J[1],W=Object(u.useState)(""),Y=Object(_.a)(W,2),Q=Y[0],K=Y[1],Z=Object(u.useState)([]),$=Object(_.a)(Z,2),ee=$[0],te=$[1],se=function(e,t){console.log(t),te([].concat(Object(O.a)(ee.filter((function(t){return t.study_hierarchy_id!==e}))),[{study_hierarchy_id:e,group:t}]))},ae=function(){var t=e.teacher_hierarchy_data;return null!==t?(null!==r&&""!==r&&(t=t.filter((function(e){return e.level_code===r}))),null!==g&&(t=t.filter((function(e){return e.combination_code===g}))),t):[]},re=function(t){var s,a=null===e.teacher_hierarchy_data||null===(s=ee.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})))||void 0===s?void 0:s.group;if(void 0!==a)return a;var r,c=null===e.teacher_data||void 0===e.teacher_data||null===(r=e.teacher_data.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})))||void 0===r?void 0:r.grade_group;return void 0!==c?JSON.parse(c):[]},ce=function(){var t,s=0,a=Object(c.a)(U);try{var r=function(){var e=t.value,a=ee.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid}));void 0!==a&&(s+=parseInt(e.teaching_period)*a.group.length)};for(a.s();!(t=a.n()).done;)r()}catch(l){a.e(l)}finally{a.f()}if(null!==e.teacher_hierarchy_data&&e.teacher_hierarchy_data.length>0){var n,i=Object(c.a)(e.teacher_hierarchy_data.filter((function(e){return void 0===U.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))})));try{for(i.s();!(n=i.n()).done;){var o=n.value;s+=parseInt(o.teaching_period)*re(o).length}}catch(l){i.e(l)}finally{i.f()}}return s};return Object(S.jsxs)("div",{className:"fixed bg-black bg-opacity-50 top-0 left-0 w-full h-full z-50 flex items-center justify-center animate__animated animate__fadeIn animate__faster",children:[Object(S.jsxs)("div",{className:"bg-white rounded-md animate__animated animate__zoomIn animate__faster z-50 w-full h-full overflow-auto",children:[Object(S.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 px-2 py-2 border-b border-gray-400",children:[Object(S.jsx)("div",{className:"text-xl font-bold ml-2 uppercase mt-2 text-primary-800",children:"TEACHER SUBJECTS ASSIGNMENT"}),Object(S.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"flex items-center justify-center p-1 rounded-full bg-accent-900 text-3xl hover:bg-yellow-900 text-white cursor-pointer border border-accent-900 hover:border-yellow-900",title:"Close window",children:Object(S.jsx)(j.h,{})})]}),Object(S.jsxs)("div",{className:"p-2 md:p-6",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(S.jsx)("div",{className:"text-5xl text-gray-400",children:Object(S.jsx)(N.c,{})}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsxs)("span",{className:"font-bold -mt-1",children:["Teacher: ",e.full_name]}),Object(S.jsxs)("span",{className:"font-bold -mt-1",children:["School name: ",e.school.school_name," (",e.school.school_code,")"]})]})]}),Object(S.jsxs)("div",{className:"flex flex-col justify-center items-end ".concat(ce()>45?"bg-red-100 text-red-800 rounded p-3":""),children:[Object(S.jsxs)("span",{className:"text-gray-500",children:["Total periods ",ce()>45?"(overloaded)":""]}),Object(S.jsx)("span",{className:"font-extrabold text-3xl",children:ce()})]})]}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)("div",{className:"mb-10",children:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"p-2 mb-5",children:Object(S.jsxs)("div",{className:"mt-4",children:[Object(S.jsx)("div",{children:"Filter by"}),Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(S.jsxs)("select",{onChange:function(e){return n(e.target.value)},value:null===r?"":r,className:"border border-gray-400 rounded px-3 py-2",children:[Object(S.jsx)("option",{value:"",children:"Choose education level"}),Object(S.jsx)("option",{value:"",children:"Show all levels"}),Object(p.A)(e.allHierarchy,{type:p.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(S.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{onClick:function(){return d(!l)},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===g?Object(S.jsx)("span",{children:"All- Click to filter by combination"}):Object(S.jsx)("span",{children:null===(t=Object(p.A)(e.allHierarchy,{type:p.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===g})))||void 0===t?void 0:t.combination_name}),Object(S.jsx)("div",{className:"-mr-3",children:!0===l?Object(S.jsx)(j.h,{}):Object(S.jsx)(m.a,{})})]}),!0===l&&Object(S.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(S.jsx)("input",{value:I,onChange:function(e){return T(e.target.value)},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:function(){return d(!1)},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(S.jsx)(j.h,{})})})]}),null!==g&&Object(S.jsxs)("div",{onClick:function(){y(null),d(!1)},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(S.jsx)("div",{children:Object(S.jsx)(x.a,{className:"text-xl"})}),Object(S.jsx)("span",{children:"Click to view all"})]})]}),Object(S.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(f.f)(Object(p.A)(e.allHierarchy,{type:p.X.COMBINATIONS,status:!0}).combinations,I).length?Object(S.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):Object(f.f)(Object(p.A)(e.allHierarchy,{type:p.X.COMBINATIONS,status:!0}).combinations,I).map((function(e,t){return Object(S.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(g===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){y(e.combination_code),d(!1)},children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(S.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]})]})]})}),Object(S.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(S.jsx)("div",{className:"w-full overflow-x-auto",children:Object(S.jsxs)("table",{className:"min-w-full text-left",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"Periods"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(S.jsx)("tbody",{className:"text-sm",children:null===e.teacher_hierarchy_data?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:7,children:Object(S.jsx)(D,{})})}):0===ae().length?Object(S.jsx)("td",{colSpan:7,className:"text-center p-3 text-xl text-gray-400",children:Object(S.jsx)("div",{children:"No result found"})}):ae().map((function(t,s){return Object(S.jsxs)("tr",{className:"".concat(void 0!==U.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"text-gray-500":null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"hover:bg-yellow-50 hover:text-accent-900":"hover:bg-blue-50 hover:text-primary-800"," group"),children:[Object(S.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(S.jsxs)("td",{className:"p-2 border-b",children:[t.course_code,"-",t.course_name]}),Object(S.jsx)("td",{className:"p-2 border-b",children:t.level_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:t.combination_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:t.grade_name}),Object(S.jsx)("td",{className:"p-2 border-b text-center",children:t.teaching_period}),Object(S.jsx)("td",{className:"p-2 border-b",children:Object(S.jsx)("div",{className:"flex flex-row items-center justify-end gap-2",children:Object(S.jsxs)("div",{className:"mx-3",children:[void 0===U.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-1",children:[Object(S.jsx)("div",{className:"flex flex-row items-center gap-1 justify-end",children:re(t).map((function(e,t){return Object(S.jsx)("div",{className:"bg-blue-100 rounded-md px-2 uppercase text-primary-800",children:e},t+1)}))}),Object(S.jsx)("div",{onClick:function(){var s=null===e.teacher_data?void 0:e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}));(null===E||E===t.studyhierarchyid)&&L(t.studyhierarchyid),se(t.studyhierarchyid,null===e.teacher_hierarchy_data||void 0===s?[]:JSON.parse(s.grade_group))},className:"rounded ".concat(null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"bg-yellow-100 group-hover:bg-accent-900 border-yellow-300 group-hover:border-accent-900":"bg-blue-100 group-hover:bg-primary-800 border-blue-300 group-hover:border-primary-800","   group-hover:text-white px-3 py-2 w-max text-center border cursor-pointer text-sm font-bold -mr-3"),children:null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"Add subject":"Update subj"})]}):Object(S.jsxs)("div",{className:"flex flex-row items-center gap-1 justify-end -mr-3",children:[Object(S.jsx)("div",{className:"flex flex-row items-center gap-1 justify-end",children:re(t).map((function(e,t){return Object(S.jsx)("div",{className:"bg-blue-100 rounded-md px-2 uppercase text-primary-800",children:e},t+1)}))}),Object(S.jsx)("div",{onClick:function(){return e=t,void G(Object(O.a)(U.filter((function(t){return t.studyhierarchyid!==e.studyhierarchyid}))));var e},className:"rounded bg-red-50 group-hover:bg-red-200 text-black border border-red-100 group-hover:border-red-700 group-hover:text-red-800 px-3 py-2 w-max text-center cursor-pointer text-sm font-bold",children:"Remove"})]}),null!==E&&E===t.studyhierarchyid&&Object(S.jsx)(k,{addSubjectGroup:function(e,s){var a;se(e,s),console.log("Test grp: ",ee),a=t,G([].concat(Object(O.a)(U.filter((function(e){return e.studyhierarchyid!==a.studyhierarchyid}))),[a])),L(null)},addedGroups:ee.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})),cancel:function(){return L(null)}})]})})})]},s+1)}))})]})})})]})})})]})]}),U.length>0&&Object(S.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-50 bg-blue-600 p-2 animate__animated animate__fadeInUp",children:!1===M?Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[""!==Q&&Object(S.jsx)("div",{className:"bg-red-200 text-red-800 px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return K("")},children:Q}),""!==V&&Object(S.jsx)("div",{className:"bg-green-600 text-white px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return X("")},children:V}),Object(S.jsxs)("div",{className:"text-white flex flex-col items-end mr-2",children:[Object(S.jsx)("span",{className:"text-sm text-blue-300",children:"Selected subjects"}),Object(S.jsx)("span",{className:"text-2xl font-extrabold -mt-2",children:U.length})]}),Object(S.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"btn bg-gray-200 text-black rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Cancel"}),Object(S.jsx)("div",{onClick:function(){z(!0),null!==e.auth.user&&C(U,ee,e.staff_code,(function(t,s){""!==s&&!0===t&&(X("School subjects added successfully!"),G([]),e.setAddNew(!1),e.setLoadTeacherSubjects()),""===s&&!0===t&&K("Something went wrong. Try again!"),z(!1)})),z(!1)},className:"btn bg-green-700 text-white rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Save changes"})]}):Object(S.jsx)("div",{className:"text-white text-lg text-right py-2",children:"Saving, Please wait..."})})]})},T=s(9),D=function(){return Object(S.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(S.jsx)(g.a,{}),Object(S.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]})},R=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var i;return Object(n.a)(this,s),(i=t.call(this,e)).setAddNew=function(e){i.setState({addNew:e,addingNew:!0===e})},i.setAddingNew=function(e){i.setState({addingNew:e})},i.setLoading=function(e){i.setState({loading:e})},i.FilterSchoolHierarchy=function(e){var t,s=[],a=Object(c.a)(e);try{var r=function(){var e=t.value,a=null===i.props.schoolHierarchyStore.hierarchy?void 0:i.props.schoolHierarchyStore.hierarchy.find((function(t){return t.studyhierarchyid===e.shool_hierarch_id}));void 0!==a&&s.push(a)};for(a.s();!(t=a.n()).done;)r()}catch(n){a.e(n)}finally{a.f()}return s},i.FilterTeacherHierarchy=function(e){var t,s=[],a=Object(c.a)(e);try{var r=function(){var e=t.value,a=null===i.props.schoolHierarchyStore.hierarchy?void 0:i.props.schoolHierarchyStore.hierarchy.find((function(t){return t.studyhierarchyid===e.study_hierarchy_id&&"0"!==e.status}));void 0!==a&&s.push(a)};for(a.s();!(t=a.n()).done;)r()}catch(n){a.e(n)}finally{a.f()}return s},i.setLoadSchoolSubjects=function(){if(null!==i.props.auth.school)return Object(p.z)(i.props.auth.school.school_code,(function(e,t){i.setLoading(!0),!0===e&&null!==t?i.setState({school_hierarchy:t,school_hierarchy_data:i.FilterSchoolHierarchy(t),loading:!1}):i.setState({school_hierarchy:[],school_hierarchy_data:[],loading:!1})}))},i.setLoadTeacherSubjects=function(){return Object(p.E)(i.props.staff_code,(function(e,t){i.setLoading(!0),!0===e&&null!==t?(console.log("Teacher hie: ",t),i.setState({teacher_hierarchy_data:i.FilterTeacherHierarchy(t),teacherSchoolHierarchy:t,loading:!1}),i.FilteredData(i.FilterTeacherHierarchy(t))):(i.setState({teacher_hierarchy_data:[],teacherSchoolHierarchy:[],loading:!1}),i.FilteredData([]))}))},i.componentDidMount=function(){null===i.props.schoolHierarchyStore.hierarchy&&(i.setLoading(!0),i.props.FC_AllSchoolHierarchyDetails((function(e,t){!0===e&&i.setLoading(!1)}))),i.setLoadSchoolSubjects(),i.setLoadTeacherSubjects()},i.ReturnGradeGroups=function(e){var t,s=null===(t=i.state.teacherSchoolHierarchy.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid})))||void 0===t?void 0:t.grade_group;return void 0!==s?JSON.parse(s):[]},i.FilteredData=function(e){try{console.log("Testing user hierarchy: ",e),null!==i.state.selected_level_code&&""!==i.state.selected_level_code&&(e=e.filter((function(e){return e.level_code===i.state.selected_level_code}))),null!==i.state.selected_combination_code&&(e=e.filter((function(e){return e.combination_code===i.state.selected_combination_code}))),i.setState({FilteredData:e})}catch(t){console.log("Error of loading: ",Object(r.a)({},t))}},i.TotalPeriods=function(){var e=0;if(null!==i.state.teacher_hierarchy_data&&i.state.teacher_hierarchy_data.length>0){var t,s=Object(c.a)(i.state.teacher_hierarchy_data);try{for(s.s();!(t=s.n()).done;){var a=t.value;e+=parseInt(a.teaching_period)*i.ReturnGradeGroups(a).length}}catch(r){s.e(r)}finally{s.f()}}return e},i.RemoveTeacherSchoolHierarchy=function(){var e=Object(a.a)(h.a.mark((function e(t){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to remove this subject on school?")){e.next=13;break}return i.setLoading(!0),e.prev=2,e.next=5,v.a.post("".concat(w.c,"/teacherhierarch/delete/").concat(t),{});case 5:s=e.sent,console.log("Success: ",s),200===s.status&&(i.setLoadTeacherSubjects(),i.setState({error:"",success:"School subject removed successfully!"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),i.setState({error:Object(T.a)(e.t0),success:"",loading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),i.state={loading:!0,school_hierarchy:null,teacher_hierarchy_data:null,selected_level_code:null,selected_combination_code:null,filter_by_combination:!1,search_comb:"",addNew:!1,addingNew:!1,teacherSchoolHierarchy:[],school_hierarchy_data:null,FilteredData:null,success:"",error:""},i}return Object(i.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.state.school_hierarchy||null===this.props.schoolHierarchyStore.hierarchy||!0===this.state.loading||null===this.state.teacher_hierarchy_data||this.state.school_hierarchy_data,Object(S.jsxs)(u.Fragment,{children:[console.log("Teacher subjects: ",this.state.teacher_hierarchy_data),Object(S.jsx)("div",{className:"mb-10 bg-white rounded m-2",children:Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"p-2 mb-5",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3 justify-between",children:[Object(S.jsx)("div",{className:"flex flex-col",children:Object(S.jsx)("div",{className:"text-2xl font-bold",children:"TEACHER SUBJECTS ASSIGNMENT"})}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-col ".concat(this.TotalPeriods()>45?"bg-red-100 text-red-800":"bg-blue-100 text-primary-800","  rounded-t-md p-1 px-2 text-center"),children:[Object(S.jsxs)("span",{className:"text-sm",children:["Total periods"," ",this.TotalPeriods()>45?"(overloaded)":""]}),Object(S.jsx)("span",{className:"text-xl font-bold -mt-1",children:this.TotalPeriods()})]}),this.props.allowEdit&&Object(S.jsx)("div",{onClick:function(){t.setAddingNew(!0),t.setAddNew(!0)},className:"border font-bold ".concat(!1===this.state.addingNew?"bg-yellow-100 border-yellow-500 hover:border-yellow-600":"bg-gray-100"," text-black px-3 py-2 rounded text-center hover:bg-accent-900 hover:text-white cursor-pointer text-base"),children:!0===this.state.addingNew?"Loading":null!==this.state.teacher_hierarchy_data&&this.state.teacher_hierarchy_data.length>0?"Add & Update Subjects":"Assign teacher subjects"})]})]}),""!==this.state.success&&Object(S.jsx)("div",{onClick:function(){return t.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(S.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(S.jsxs)("div",{children:["Success: ",this.state.success]}),Object(S.jsx)("div",{children:Object(S.jsx)(j.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(S.jsx)("div",{onClick:function(){return t.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(S.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(S.jsxs)("div",{children:["Error: ",this.state.error]}),Object(S.jsx)("div",{children:Object(S.jsx)(j.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(S.jsxs)("div",{className:"mt-4",children:[Object(S.jsx)("div",{children:"Filter by"}),Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(S.jsxs)("select",{onChange:function(e){return t.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(S.jsx)("option",{value:"",children:"Choose education level"}),Object(S.jsx)("option",{value:"",children:"Filter by all levels"}),null!==this.props.schoolHierarchyStore.hierarchy&&Object(p.A)(this.props.schoolHierarchyStore.hierarchy,{type:p.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(S.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{onClick:function(){return t.setState({filter_by_combination:!t.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(S.jsx)("span",{children:"All- Click to filter by combination"}):Object(S.jsx)("span",{children:null!==this.props.schoolHierarchyStore.hierarchy&&(null===(e=Object(p.A)(this.props.schoolHierarchyStore.hierarchy,{type:p.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===t.state.selected_combination_code})))||void 0===e?void 0:e.combination_name)}),Object(S.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(S.jsx)(j.h,{className:"text-xl"}):Object(S.jsx)(m.a,{})})]}),!0===this.state.filter_by_combination&&Object(S.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(S.jsx)("input",{value:this.state.search_comb,onChange:function(e){return t.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:function(){return t.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(S.jsx)(j.h,{})})})]}),null!==this.state.selected_combination_code&&Object(S.jsxs)("div",{onClick:function(){return t.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(S.jsx)("div",{children:Object(S.jsx)(x.a,{className:"text-xl"})}),Object(S.jsx)("span",{children:"Click to view all"})]})]}),Object(S.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:null!==this.props.schoolHierarchyStore.hierarchy&&0===Object(f.f)(Object(p.A)(this.props.schoolHierarchyStore.hierarchy,{type:p.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(S.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):null!==this.props.schoolHierarchyStore.hierarchy&&Object(f.f)(Object(p.A)(this.props.schoolHierarchyStore.hierarchy,{type:p.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,s){return Object(S.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(t.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){return t.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:s+1})}),Object(S.jsx)("div",{children:e.combination_name})]},s+1)}))})]})]})]})]})]}),Object(S.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(S.jsx)("div",{className:"w-full overflow-x-auto",children:Object(S.jsxs)("table",{className:"min-w-full text-left",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Group"}),this.props.allowEdit&&Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300"})]})}),Object(S.jsx)("tbody",{className:"text-sm",children:null===this.state.FilteredData?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:7,children:Object(S.jsx)(D,{})})}):0===this.state.FilteredData.length?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:7,className:"text-center p-3 text-xl text-gray-400",children:Object(S.jsx)("div",{children:"No result found"})})}):this.state.FilteredData.map((function(e,s){return Object(S.jsxs)("tr",{className:"hover:bg-yellow-50 group",children:[Object(S.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(S.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(S.jsx)("td",{className:"p-2 border-b uppercase",children:Object(S.jsx)("div",{className:"flex flex-row gap-1 items-center",children:t.ReturnGradeGroups(e).map((function(e,t){return Object(S.jsx)("div",{className:"bg-blue-100 rounded-md px-3 py-1 text-blue-800 w-max",children:e},t+1)}))})}),t.props.allowEdit&&Object(S.jsx)("td",{className:"border-b",children:Object(S.jsx)("div",{className:"flex justify-end",children:Object(S.jsx)("div",{onClick:function(){if(null!==t.state.teacher_hierarchy_data){var s=t.state.teacherSchoolHierarchy.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}));void 0!==s?t.RemoveTeacherSchoolHierarchy(s.teacher_study_hierarchy_id):alert("Plase try again!")}else alert("Plase try again!")},className:"bg-red-50 text-red-800 px-3 py-2 mx-1 my-1 rounded font-bold group-hover:bg-red-700 group-hover:text-white cursor-pointer",children:"Remove"})})})]},s+1)}))})]})})})]})}),!0===this.state.addNew&&null!==this.props.auth.school&&null!==this.props.schoolHierarchyStore.hierarchy&&null!==this.state.school_hierarchy&&Object(S.jsx)(I,{auth:this.props.auth,staff_code:this.props.staff_code,full_name:this.props.full_name,school:this.props.auth.school,setAddNew:this.setAddNew,allHierarchy:this.props.schoolHierarchyStore.hierarchy,teacher_hierarchy_data:this.FilterSchoolHierarchy(this.state.school_hierarchy),teacher_data:this.state.teacherSchoolHierarchy,setLoadTeacherSubjects:this.setLoadTeacherSubjects})]})}}]),s}(u.Component),A=Object(b.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_AllSchoolHierarchyDetails:p.c})(R)},120:function(e,t,s){"use strict";s.r(t),s.d(t,"UserProfile",(function(){return $}));var a,r=s(26),c=s(27),n=s(28),i=s(29),o=s(2),l=s.n(o),d=s(16),h=s(12),u=s(24),b=s(11),m=s(1),j=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(b.A,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"About"})]}),Object(m.jsx)("div",{className:"text-gray-700",children:Object(m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 text-sm",children:[Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Staff code"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.staff_code})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"National ID"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.nid})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Full Name"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.full_name})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Gender"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.gender})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Contact No."}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.phone_numbers})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Address"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.address})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Email"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:Object(m.jsx)("a",{className:"text-blue-800",href:"mailto:".concat(e.info.email),children:e.info.email})})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2",children:"Birthday"}),Object(m.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.dob})]})]})})]})})},x=s(6),p=s(3),f=s.n(p),g=s(5),O=s.n(g),_=s(13),y=s(8),v=s(9),N=function(){var e=Object(x.a)(f.a.mark((function e(t,s){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,null,""),e.prev=1,Object(y.a)(),e.next=5,O.a.get("".concat(_.c,"/profile/teacher/").concat(t));case 5:a=e.sent,console.log("=================FC_GetProfilesssss==================="),console.log({FC_GetProfile:a}),console.log("=================FC_GetProfilesssss==================="),s(!1,a.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),s(!1,null,Object(v.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,s){return e.apply(this,arguments)}}(),w=s(18);!function(e){e.NEW="New",e.ACTIVE="Active",e.DISABLED="Disabled",e.TRANSFERD="TRANSFERD",e.TERMINATED="TERMINATED",e.SUSPENDED="SUSPENDED"}(a||(a={}));var S=function(e){return console.log("=================workInfo==================="),console.log({workInfo:e.workInfo}),console.log("=================workInfo==================="),Object(m.jsx)("div",{className:"w-full md:w-3/12 md:mx-2",children:Object(m.jsxs)("div",{className:"bg-white p-3",children:[Object(m.jsx)("div",{className:"image overflow-hidden",children:Object(m.jsx)("img",{src:"https://stackdiary.com/140x100.png",className:"h-auto w-full mx-auto",alt:"Profile"})}),Object(m.jsx)("h1",{className:"text-gray-900 font-bold text-xl leading-8 my-1",children:e.basicInfo.full_name}),Object(m.jsxs)("ul",{className:"bg-gray-100 text-gray-600 hover:text-gray-700 hover:shadow py-2 px-3 mt-3 divide-y rounded shadow-sm",children:[Object(m.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(m.jsx)("span",{children:"Current School:"}),Object(m.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.school_name?e.workInfo.school_name:"-"})]}),Object(m.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(m.jsx)("span",{children:"Position:"}),Object(m.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.position?e.workInfo.position:"-"})]}),Object(m.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(m.jsx)("span",{children:"Combination:"}),Object(m.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.combination?e.workInfo.combination:"-"})]}),Object(m.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(m.jsx)("span",{children:"Qualification of payment:"}),Object(m.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.paid_qualification?e.workInfo.paid_qualification:"-"})]}),Object(m.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(m.jsx)("span",{children:"Status:"}),Object(m.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&(e.workInfo.status===a.ACTIVE||e.workInfo.status===a.NEW||e.workInfo.status===a.TRANSFERD?Object(m.jsx)("span",{className:"bg-primary-800 py-1 px-2 rounded text-white text-sm",children:Object(w.d)(e.workInfo.status.toLocaleLowerCase())}):e.workInfo.status?Object(m.jsx)("span",{className:"bg-yellow-800 py-1 px-2 rounded text-white text-sm",children:Object(w.d)(e.workInfo.status.toLocaleLowerCase())}):Object(m.jsx)("span",{className:"bg-gray-800 py-1 px-2 rounded text-white text-sm",children:"Undefined"}))})]}),Object(m.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(m.jsx)("span",{children:"Hired on:"}),Object(m.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.hired_date?Object(w.a)(e.workInfo.hired_date):"-"})]})]})]})})},k=l.a.memo(S),C=function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(b.j,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"Experience"})]}),Object(m.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userExperiences.length&&Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No experience available"})}),e.userExperiences.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"text-teal-600",children:[e.position," at ",e.institution]}),Object(m.jsxs)("div",{className:"text-gray-500 text-xs",children:[e.starting_date?Object(w.a)(e.starting_date)+" - "+(e.ending_date?Object(w.a)(e.ending_date):"Now"):"-"," ","- ",e.ending_date]})]},t+Math.random())}))]})]})},I=function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(b.d,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"Education"})]}),Object(m.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userEducations.length&&Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No education available"})}),e.userEducations.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"text-teal-600 flex items-center gap-2",children:[Object(m.jsxs)("a",{href:e.qualification_document?e.qualification_document:"",target:"_blank",rel:"noopener noreferrer",children:[e.qualification_name,e.given_institution&&" in "+e.given_institution]}),Object(m.jsx)("a",{href:e.qualification_document?e.qualification_document:"",target:"_blank",rel:"noopener noreferrer",children:Object(m.jsx)(b.j,{className:"text-gray-700 text-xl"})})]}),Object(m.jsx)("div",{className:"text-gray-500 text-xs",children:e.qualification_issued_date?Object(w.a)(e.qualification_issued_date):"-"})]},t+Math.random())}))]})]})},T=s(122),D=function(e){return console.log("===================================="),console.log({termination:e.userTerminations}),console.log("===================================="),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(T.b,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"Terminations"})]}),Object(m.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userTerminations.length&&Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No termination available"})}),e.userTerminations.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"text-teal-600",children:["Terminated on:"," ",Object(m.jsx)("span",{className:"font-semibold",children:e.termination_school_name})]}),Object(m.jsx)("div",{className:"text-gray-500 text-sm",children:e.termination_reason}),Object(m.jsx)("div",{className:"text-gray-500 text-xs",children:e.termination_status})]},t+Math.random())}))]})]})},R=s(106),A=function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(R.e,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"Suspensions"})]}),Object(m.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userSuspensions.length&&Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No Suspension available"})}),e.userSuspensions.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"text-teal-600",children:["Suspended on:"," ",Object(m.jsx)("span",{className:"font-semibold",children:e.suspended_from_school})]}),Object(m.jsxs)("div",{className:"text-teal-600",children:["Start date:"," ",Object(m.jsx)("span",{className:"font-semibold",children:Object(w.a)(e.suspended_from)})]}),Object(m.jsxs)("div",{className:"text-teal-600",children:["End date:"," ",Object(m.jsx)("span",{className:"font-semibold",children:Object(w.a)(e.suspended_to)})]}),Object(m.jsx)("div",{className:"text-gray-500 text-sm",children:e.suspended_reason}),Object(m.jsx)("div",{className:"text-gray-500 text-xs",children:e.suspended_status})]},t+Math.random())}))]})]})},E=function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(R.d,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"Transfer"})]}),Object(m.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userTransfers.length&&Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No transfer available"})}),e.userTransfers.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"text-teal-600",children:["Transferred from:"," ",Object(m.jsx)("span",{className:"font-semibold",children:e.from_school_name})]}),Object(m.jsxs)("div",{className:"text-teal-600",children:["Transferred to:"," ",Object(m.jsx)("span",{className:"font-semibold",children:e.to_school_name?e.to_school_name:""})]}),Object(m.jsxs)("div",{className:"text-gray-500 text-sm",children:["Transferred on:"," ",Object(m.jsx)("span",{className:"font-semibold",children:e.transfer_date?Object(w.a)(e.transfer_date):"-"})]}),Object(m.jsx)("div",{className:"text-gray-500 text-xs",children:e.transfer_id})]},t+Math.random())}))]})]})},L=s(30),F=s(40),P=s(25),U=s(108),G=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(L.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(m.jsxs)("div",{className:"py-2 flex items-center",children:[Object(m.jsx)("div",{className:"flex-1",children:Object(m.jsxs)(F.a,{children:["View"," ",e.thiTermination.requested_to_suspend_from?"suspension":"termination"," ","progress"]})}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(P.a,{onClick:function(){return e.close(null)},theme:"default",children:"Close"})})]}),Object(m.jsxs)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:[Object(m.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8",children:[Object(m.jsx)("span",{className:"text-primary-800",children:Object(m.jsx)(b.A,{size:25})}),Object(m.jsx)("span",{className:"tracking-wide",children:"Staff info"})]}),Object(m.jsx)("div",{className:"text-gray-700",children:Object(m.jsxs)("div",{className:"grid md:grid-cols-2 text-sm",children:[Object(m.jsxs)("div",{className:"grid grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Full Name"}),Object(m.jsx)("div",{className:"px-4 py-2",children:e.selectedStaff.full_name})]}),Object(m.jsxs)("div",{className:"grid grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Contact No."}),Object(m.jsx)("div",{className:"px-4 py-2",children:e.selectedStaff.phone_numbers})]}),Object(m.jsxs)("div",{className:"grid grid-cols-2",children:[Object(m.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Email."}),Object(m.jsx)("div",{className:"px-4 py-2",children:Object(m.jsx)("a",{className:"text-blue-800",href:"mailto:jane@example.com",children:e.selectedStaff.email})})]})]})})]}),Object(m.jsxs)("div",{className:"bg-white p-3 border rounded",children:[Object(m.jsxs)("div",{className:"flex items-center px-2 py-1 bg-gray-200 rounded",children:[Object(m.jsx)(b.v,{className:"w-8"}),Object(m.jsx)("p",{children:e.thiTermination.reason_name})]}),Object(m.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Comment:"}),Object(m.jsx)("p",{className:"text-base",children:e.thiTermination.requested_by_comment})]}),Object(m.jsxs)("div",{className:"flex flex-col",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Date:"}),Object(m.jsx)("p",{className:"text-base",children:Object(w.a)(e.thiTermination.requested_by_date)})]})]}),e.thiTermination.status!==U.a.PENDING&&e.thiTermination.status!==U.a.PENDING_SUSPENSION&&Object(m.jsxs)("section",{children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Feedback:"}),Object(m.jsxs)("div",{className:"bg-white p-3 border rounded",children:[Object(m.jsxs)("div",{className:"flex items-center gap-2",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Decision:"}),Object(m.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.status})]}),Object(m.jsxs)("div",{className:"flex items-center gap-2",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Start date:"}),Object(m.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.decided_to_suspend_from&&!Object(w.e)(e.thiTermination.decided_to_suspend_from)?Object(w.a)(e.thiTermination.decided_to_suspend_from):"-"})]}),Object(m.jsxs)("div",{className:"flex items-center gap-2",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"End date:"}),Object(m.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.decided_to_suspend_to&&!Object(w.e)(e.thiTermination.decided_to_suspend_to)?Object(w.a)(e.thiTermination.decided_to_suspend_to):"-"})]}),Object(m.jsxs)("div",{className:"flex flex-col",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Comment:"}),Object(m.jsx)("p",{className:"text-base",children:e.thiTermination.decided_by_comment})]}),Object(m.jsxs)("div",{className:"flex items-center gap-2",children:[Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"Done on:"}),Object(m.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.decided_by_date?Object(w.a)(e.thiTermination.decided_by_date):"-"})]})]})]})]})})},q=s(107),H=s(31),M=s(110),z=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setSelectReason=function(e){a.setState({selectReason:e})},a.setLoadingRequest=function(e){a.setState({loadingRequest:e})},a.setAllReasons=function(e){a.setState({allReasons:e})},a.setThisReason=function(e){a.setState({thisReason:e})},a.setComment=function(e){a.setState({comment:e})},a.setStaffCode=function(e){a.setState({staffCode:e})},a.setStaffRegId=function(e){a.setState({staffRegId:e})},a.cleanToCLose=function(){a.props.close(null),a.setThisReason(null),a.setComment(""),a.setStaffCode(""),a.setStaffRegId(""),a.setState({error:{target:null,msg:""}})},a.getTerminationReasons=function(){var e=Object(x.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(!0,null,""),Object(y.a)(),e.next=5,O.a.get("".concat(_.c,"/changeStatusReasons/termination"));case 5:s=e.sent,console.log("===================================="),console.log({getTerminationReasons:s}),console.log("===================================="),t(!1,s.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(v.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){null===a.props.auth.school?a.setState({error:{target:"main-error",msg:"No school assigned to you"}}):null===a.state.allReasons&&a.getTerminationReasons((function(e,t,s){a.setLoading(e),!e&&Object(w.e)(s)&&t?a.setAllReasons(t):e||Object(w.e)(s)||a.setState({error:{target:"main-error",msg:s}})}))},a.submitTermination=function(){var e=Object(x.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.props.auth.school){e.next=3;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"No school assigned to you!"}}));case 3:if(a.props.auth.user){e.next=5;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify who you are!"}}));case 5:if(!Object(w.e)(a.props.auth.user.user_id)&&void 0!==a.props.auth.user.user_id){e.next=7;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify your code!"}}));case 7:if(null!==a.state.thisReason){e.next=9;break}return e.abrupt("return",a.setState({error:{target:"reason_id",msg:"Required!"}}));case 9:if(!Object(w.e)(a.state.comment)){e.next=11;break}return e.abrupt("return",a.setState({error:{target:"comment",msg:"Required!"}}));case 11:return e.prev=11,a.setLoadingRequest(!0),Object(y.a)(),e.next=16,O.a.post("".concat(_.c,"/changeteacherstatus/requestchangeteacherstatus"),{changeStatusType:"PENDING TERMINATION",staff_to_changestatus_id:a.props.selectedStaff.staff_code,school_code:a.props.auth.school.school_code,district_code:a.props.auth.school.school_code.substring(0,2),requested_by_reason_id:a.state.thisReason.termination_reason_id,requested_by_comment:a.state.comment});case 16:s=e.sent,console.log("===================================="),console.log({submitTermination:s}),console.log("===================================="),a.props.FC_GetAllTermination("hd",(function(e,t,s){a.setLoading(e),e||Object(w.e)(s)?(a.setState({loading:!1,thisReason:null,comment:"",error:{target:"main-success",msg:"Staff  termination requested successfully"}}),a.setLoadingRequest(!1),setTimeout((function(){a.cleanToCLose()}),2e3)):(console.log("===================================="),console.error({msg:s}),console.log("===================================="))})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(11),console.error(e.t0),a.setState({loading:!1,error:{target:"main-error",msg:Object(v.a)(e.t0)}});case 27:case"end":return e.stop()}}),e,null,[[11,23]])})));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!0,allReasons:null,loadingRequest:!1,thisReason:null,comment:"",error:{target:null,msg:""},staffRegId:"",staffCode:"",selectReason:!1},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsxs)(m.Fragment,{children:["main-success"===this.state.error.target&&Object(m.jsx)(u.a,{theme:"success",children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(m.jsx)(u.a,{theme:"danger",children:this.state.error.msg}),Object(m.jsxs)(L.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(m.jsxs)("div",{className:"py-2 flex items-center",children:[Object(m.jsx)("div",{className:"flex-1",children:Object(m.jsx)(F.a,{children:"Staff termination form"})}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(P.a,{onClick:function(){return e.cleanToCLose()},theme:"default",disabled:this.state.loadingRequest,children:"Close"})})]}),Object(m.jsxs)("form",{onSubmit:this.submitTermination,children:[Object(m.jsxs)("div",{className:"p-2 flex flex-wrap",children:[Object(m.jsx)("div",{className:"w-full py-1 px-3",children:Object(m.jsx)(H.a,{disabled:!0,label:"Full name",name:"full_name",type:"text",value:this.props.selectedStaff.full_name,placeholder:"Full name",className:"p-2",onChange:function(){return null},error:""})}),Object(m.jsx)("div",{className:"w-full py-1 px-3",children:Object(m.jsxs)("div",{className:"w-full my-2",children:[Object(m.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100",children:"Termination reasons"}),this.state.selectReason?Object(m.jsx)(M.a,{title:"reason_name",id:"termination_reason_id",data:this.state.allReasons,loading:this.state.loading||this.state.loadingRequest,click:function(t){e.setThisReason(t),e.setSelectReason(!1)},close:function(){return e.setSelectReason(!1)}}):Object(m.jsxs)("div",{className:"rounded relative",children:[Object(m.jsx)("div",{className:"w-full text-lg rounded border-2 p-2 px-4 text-md ".concat(!this.state.thisReason&&"text-gray-500"," ").concat(this.state.allReasons?"cursor-pointer":"cursor-wait"," ").concat(this.state.error.target&&"reason_id"===this.state.error.target?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900"," px-3"),onClick:function(){return!e.state.loading&&!e.state.loadingRequest&&e.setSelectReason(!0)},children:this.state.thisReason?this.state.thisReason.reason_name:"Select termination reasons"}),this.state.error.target&&"reason_id"===this.state.error.target&&Object(m.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:this.state.error.msg})]})]})}),Object(m.jsx)("div",{className:"w-full py-1 px-3",children:Object(m.jsx)(q.a,{disabled:this.state.loading||this.state.loadingRequest,label:"Comment",name:"other_reason",value:this.state.comment,placeholder:"Other termination reason",className:"p-2",onChange:function(t){return e.setComment(t.target.value)},error:this.state.error.target&&"comment"===this.state.error.target?this.state.error.msg:""})})]}),Object(m.jsxs)("div",{className:"px-6 text-right flex",children:[Object(m.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(m.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(P.a,{type:"submit",size:"lg",loading:this.state.loading,children:"Send"})})]})]})]})]})}}]),s}(o.Component),B=Object(d.b)(null,{FC_GetAllTermination:h.l})(z),J=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setSelectReason=function(e){a.setState({selectReason:e})},a.setLoadingRequest=function(e){a.setState({loadingRequest:e})},a.setAllReasons=function(e){a.setState({allReasons:e})},a.setThisReason=function(e){a.setState({thisReason:e})},a.setComment=function(e){a.setState({comment:e})},a.setStartDate=function(e){a.setState({startDate:e})},a.setEndDate=function(e){a.setState({endDate:e})},a.setStaffCode=function(e){a.setState({staffCode:e})},a.setStaffRegId=function(e){a.setState({staffRegId:e})},a.cleanToCLose=function(){a.props.close(null),a.setThisReason(null),a.setComment(""),a.setStaffCode(""),a.setStaffRegId(""),a.setStartDate(""),a.setEndDate(""),a.setState({error:{target:null,msg:""}})},a.getSuspensionReasons=function(){var e=Object(x.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(!0,null,""),Object(y.a)(),e.next=5,O.a.get("".concat(_.c,"/changeStatusReasons/suspension"));case 5:s=e.sent,console.log("===================================="),console.log({getSuspensionReasons:s}),console.log("===================================="),t(!1,s.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(v.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){null===a.props.auth.school?a.setState({error:{target:"main-error",msg:"No school assigned to you"}}):null===a.state.allReasons&&a.getSuspensionReasons((function(e,t,s){a.setLoading(e),!e&&Object(w.e)(s)&&t?a.setAllReasons(t):e||Object(w.e)(s)||a.setState({error:{target:"main-error",msg:s}})}))},a.submitSuspension=function(){var e=Object(x.a)(f.a.mark((function e(t){var s,r,c,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.props.auth.school){e.next=3;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"No school assigned to you!"}}));case 3:if(a.props.auth.user){e.next=5;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify who you are!"}}));case 5:if(!Object(w.e)(a.props.auth.user.user_id)&&void 0!==a.props.auth.user.user_id){e.next=7;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify your code!"}}));case 7:if(!Object(w.e)(a.state.startDate)){e.next=9;break}return e.abrupt("return",a.setState({error:{target:"start_date",msg:"Required!"}}));case 9:if(s=new Date(a.state.startDate),r=new Date,!(s.getTime()<r.getTime())||s.getDate()===r.getDate()&&s.getMonth()===r.getMonth()&&s.getFullYear()===r.getFullYear()){e.next=13;break}return e.abrupt("return",a.setState({error:{target:"start_date",msg:"You can't chose past date!"}}));case 13:if(!Object(w.e)(a.state.endDate)){e.next=15;break}return e.abrupt("return",a.setState({error:{target:"end_date",msg:"Required!"}}));case 15:if(c=new Date(a.state.endDate),!(s.getTime()<r.getTime())){e.next=18;break}return e.abrupt("return",a.setState({error:{target:"start_date",msg:"You can't chose past date!"}}));case 18:if(!(s.getTime()>=c.getTime())){e.next=20;break}return e.abrupt("return",a.setState({error:{target:"end_date",msg:"Must be great than the starting date!"}}));case 20:if(null!==a.state.thisReason){e.next=22;break}return e.abrupt("return",a.setState({error:{target:"reason_id",msg:"Required!"}}));case 22:if(!Object(w.e)(a.state.comment)){e.next=24;break}return e.abrupt("return",a.setState({error:{target:"comment",msg:"Required!"}}));case 24:return e.prev=24,a.setLoadingRequest(!0),Object(y.a)(),e.next=29,O.a.post("".concat(_.c,"/changeteacherstatus/requestchangeteacherstatus"),{changeStatusType:"PENDING SUSPENTION",staff_to_changestatus_id:a.props.selectedStaff.staff_code,school_code:a.props.auth.school.school_code,district_code:a.props.auth.school.school_code.substring(0,2),requested_by_reason_id:a.state.thisReason.suspension_reason_id,requested_by_comment:a.state.comment,requested_to_suspend_from:a.state.startDate,requested_to_suspend_to:a.state.endDate});case 29:n=e.sent,console.log("===================================="),console.log({submitSuspension:n}),console.log("===================================="),a.props.FC_GetAllTermination("hd",(function(e,t,s){a.setLoading(e),e||Object(w.e)(s)?(a.setState({loading:!1,thisReason:null,comment:"",error:{target:"main-success",msg:"Staff suspension requested successfully"}}),a.setLoadingRequest(!1),setTimeout((function(){a.cleanToCLose()}),2e3)):(console.log("===================================="),console.error({msg:s}),console.log("===================================="))})),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(24),console.error(e.t0),a.setState({loading:!1,error:{target:"main-error",msg:Object(v.a)(e.t0)}});case 40:case"end":return e.stop()}}),e,null,[[24,36]])})));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!0,allReasons:null,loadingRequest:!1,thisReason:null,comment:"",error:{target:null,msg:""},staffRegId:"",staffCode:"",startDate:"",endDate:"",selectReason:!1},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsxs)(m.Fragment,{children:["main-success"===this.state.error.target&&Object(m.jsx)(u.a,{theme:"success",children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(m.jsx)(u.a,{theme:"danger",children:this.state.error.msg}),Object(m.jsxs)(L.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(m.jsxs)("div",{className:"py-2 flex items-center",children:[Object(m.jsx)("div",{className:"flex-1",children:Object(m.jsx)(F.a,{children:"Staff suspension form"})}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(P.a,{onClick:function(){return e.cleanToCLose()},theme:"default",disabled:this.state.loadingRequest,children:"Close"})})]}),Object(m.jsxs)("form",{onSubmit:this.submitSuspension,children:[Object(m.jsxs)("div",{className:"p-2 flex flex-wrap",children:[Object(m.jsx)("div",{className:"w-full py-1 px-3",children:Object(m.jsx)(H.a,{disabled:!0,label:"FUll name",name:"full_name",type:"text",value:this.props.selectedStaff.full_name,placeholder:"Full name",className:"p-2",onChange:function(){return null},error:""})}),Object(m.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(m.jsx)(H.a,{disabled:this.state.loading||this.state.loadingRequest,label:"Start date",name:"start_date",type:"date",value:this.state.startDate,placeholder:"Suspension starting date",className:"p-2",onChange:function(t){e.setStartDate(t.target.value),e.setState({error:{target:null,msg:""}})},error:this.state.error.target&&"start_date"===this.state.error.target?this.state.error.msg:""})}),Object(m.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(m.jsx)(H.a,{disabled:this.state.loading||this.state.loadingRequest,label:"End date",name:"end_date",type:"date",value:this.state.endDate,placeholder:"Suspension ending date",className:"p-2",onChange:function(t){e.setEndDate(t.target.value),e.setState({error:{target:null,msg:""}})},error:this.state.error.target&&"end_date"===this.state.error.target?this.state.error.msg:""})}),Object(m.jsx)("div",{className:"w-full py-1 px-3",children:Object(m.jsxs)("div",{className:"w-full my-2",children:[Object(m.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100",children:"Suspension reasons"}),this.state.selectReason?Object(m.jsx)(M.a,{title:"reason_name",id:"suspension_reason_id",data:this.state.allReasons,loading:this.state.loading||this.state.loadingRequest,click:function(t){e.setThisReason(t),e.setState({error:{target:null,msg:""}}),e.setSelectReason(!1)},close:function(){return e.setSelectReason(!1)}}):Object(m.jsxs)("div",{className:"rounded relative",children:[Object(m.jsx)("div",{className:"w-full text-lg rounded border-2 p-2 px-4 text-md ".concat(!this.state.thisReason&&"text-gray-500"," ").concat(this.state.allReasons?"cursor-pointer":"cursor-wait"," ").concat(this.state.error.target&&"reason_id"===this.state.error.target?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900"," px-3"),onClick:function(){return!e.state.loading&&!e.state.loadingRequest&&e.setSelectReason(!0)},children:this.state.thisReason?this.state.thisReason.reason_name:"Select termination reasons"}),this.state.error.target&&"reason_id"===this.state.error.target&&Object(m.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:this.state.error.msg})]})]})}),Object(m.jsx)("div",{className:"w-full py-1 px-3",children:Object(m.jsx)(q.a,{disabled:this.state.loading||this.state.loadingRequest,label:"Comment",name:"other_reason",value:this.state.comment,placeholder:"Other suspension reason",className:"p-2",onChange:function(t){e.setComment(t.target.value),e.setState({error:{target:null,msg:""}})},error:this.state.error.target&&"comment"===this.state.error.target?this.state.error.msg:""})})]}),Object(m.jsxs)("div",{className:"px-6 text-right flex",children:[Object(m.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(m.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(P.a,{type:"submit",size:"lg",loading:this.state.loading,children:"Send"})})]})]})]})]})}}]),s}(o.Component),V=Object(d.b)(null,{FC_GetAllTermination:h.l})(J),X=s(48),W=s(116),Y=s(113),Q=s(109),K=function(e,t){return console.log("T: ",e),e.find((function(e){return e.teacher_id===t}))},Z=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setThisTermination=function(e){a.setState({thisTermination:e})},a.setUserInfo=function(e){a.setState({userInfo:e})},a.setLoading=function(e){a.setState({loading:e})},a.setError=function(e){a.setState({error:e})},a.setAction=function(e){a.setState({action:e})},a.componentDidMount=function(){var e=a.props.isExternal?a.props.user_id?a.props.user_id:"":a.props.auth.user?a.props.auth.user.user_id:"";N(e,(function(e,t,s){a.setLoading(e),e||Object(w.e)(s)?!e&&t&&a.setUserInfo(t):a.setError({target:"main-error",msg:s}),console.log("=================FC_GetProfile==================="),console.log({FC_GetProfile:t}),console.log("=================FC_GetProfile===================")})),a.props.FC_GetAllTermination("hd",(function(e,t,s){console.log("================FC_GetAllTermination===================="),console.log({FC_GetAllTermination:t}),console.log("================FC_GetAllTermination===================="),a.setLoading(e),e||Object(w.e)(s)||a.setError({target:"main-error",msg:s})}))},a.state={openSuspensionModal:!1,operationActionType:"suspend",suspendStartDate:"",suspendEndDate:"",title:"",userInfo:null,comment:"",error:{target:null,msg:""},loading:!0,thisTermination:null,action:null,assign_to_school:!1},a}return Object(c.a)(s,[{key:"render",value:function(){var e,t,s,a,r,c,n,i,o,l,d=this;return console.log("==================buttonssssss=================="),console.log({user_data:this.props.user_data}),console.log("==================buttonssssss=================="),this.props.user_id&&!Object(w.e)(this.props.user_id)||!0!==this.props.isExternal||(b.n,this.props.isExternal&&(P.a,this.props.close)),!0===this.state.assign_to_school&&void 0!==this.props.user_id?Object(m.jsx)(Y.a,{user_id:this.props.user_id,userDetails:{email:null===(e=this.state.userInfo)||void 0===e?void 0:e.staffDetails.basicInfo.email,full_name:null===(t=this.state.userInfo)||void 0===t?void 0:t.staffDetails.basicInfo.full_name,nid:null===(s=this.state.userInfo)||void 0===s?void 0:s.staffDetails.basicInfo.nid,staff_code:null===(a=this.state.userInfo)||void 0===a?void 0:a.staffDetails.basicInfo.staff_code},close:function(){return d.setState({assign_to_school:!1})},district_code:null===(r=this.state.userInfo)||void 0===r||null===(c=r.staffDetails.workInfo)||void 0===c?void 0:c.school_district,school_code:null===(n=this.state.userInfo)||void 0===n||null===(i=n.staffDetails.workInfo)||void 0===i?void 0:i.school_code,school_name:null===(o=this.state.userInfo)||void 0===o||null===(l=o.staffDetails.workInfo)||void 0===l?void 0:l.school_name}):this.state.loading?Object(m.jsx)("div",{className:"p-8 text-center",children:Object(m.jsx)("div",{className:"mx-auto",children:Object(m.jsx)(X.a,{})})}):null===this.state.userInfo||this.state.userInfo.staffDetails&&this.state.userInfo.staffDetails.basicInfo?this.state.thisTermination&&!this.state.action&&this.state.userInfo?Object(m.jsx)(G,{selectedStaff:this.state.userInfo.staffDetails.basicInfo,close:function(e){return d.setThisTermination(e)},thiTermination:this.state.thisTermination}):this.state.userInfo&&this.state.action&&"TERMINATION"===this.state.action?Object(m.jsx)(B,{selectedStaff:this.state.userInfo.staffDetails.basicInfo,auth:this.props.auth,close:function(){d.setAction(null)}}):this.state.userInfo&&this.state.action&&"SUSPENSION"===this.state.action?Object(m.jsx)(V,{selectedStaff:this.state.userInfo.staffDetails.basicInfo,auth:this.props.auth,close:function(){d.setAction(null)}}):(console.log({user_id:this.props.user_id}),Object(m.jsx)(m.Fragment,{children:this.state.userInfo&&Object(m.jsxs)(L.a,{children:[Object(m.jsxs)("div",{className:"flex items-center gap-3 justify-between",children:[Object(m.jsx)("div",{className:"flex-1",children:Object(m.jsx)(F.a,{children:this.props.isExternal?"Staff Information":"Profile Information"})}),Object(m.jsxs)("div",{className:"flex items-center gap-2",children:[Object(m.jsx)(P.a,{onClick:function(){d.setState({assign_to_school:!0})},children:"Change School/ Position"}),this.props.auth.role&&this.props.isExternal&&Object(m.jsxs)("div",{className:"dropdown inline-block relative",children:[Object(m.jsxs)("button",{className:"opacity-80 group-hover:opacity-100 bg-accent-800 bg-opacity-0 hover:bg-opacity-10 text-accent-900 font-semibold py-2 px-4 rounded inline-flex items-center",children:[Object(m.jsx)("span",{className:"mr-1",children:"Manage"}),Object(m.jsxs)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[Object(m.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})," "]})]}),Object(m.jsxs)("ul",{className:"dropdown-menu absolute hidden bg-white shadow text-gray-700 z-50 p-2 rounded",children:[Q.e.school.includes(this.props.auth.role.role)&&this.props.user_id&&!Object(w.e)(this.props.user_id)&&this.props.setEditStaff&&this.props.setAddUserPositions&&this.props.DisableUser&&this.props.user_data&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"p-0.5",children:Object(m.jsx)("button",{onClick:function(){return d.props.user_id&&d.props.setEditStaff(d.props.user_id)},className:"rounded block bg-gray-500 hover:bg-gray-800 text-white py-2 px-4 w-full whitespace-no-wrap",children:"Edit"})}),Object(m.jsx)("li",{className:"p-0.5",children:Object(m.jsx)("button",{onClick:function(){return d.props.setAddUserPositions(d.props.user_data)},className:"rounded block bg-blue-200 hover:bg-gray-800 text-blue-900 hover:text-white py-2 px-4 w-full whitespace-no-wrap",children:"Position"})}),Object(m.jsx)("li",{className:"p-0.5",children:Object(m.jsx)("button",{className:"rounded block bg-red-500 hover:bg-red-800 text-white py-2 px-4 w-full whitespace-no-wrap",onClick:function(){return d.props.DisableUser(d.props.user_id)},children:"Remove"})})]}),this.props.auth.role&&this.props.isExternal&&Q.e.school.includes(this.props.auth.role.role)&&this.props.terminations.allTermination&&!K(this.props.terminations.allTermination,this.state.userInfo.staffDetails.basicInfo.staff_code)&&Object(m.jsx)("li",{className:"p-0.5",children:Object(m.jsx)(P.a,{className:"p-2",onClick:function(){return d.setAction("SUSPENSION")},children:"Suspend"})}),this.props.auth.role&&this.props.isExternal&&Q.e.school.includes(this.props.auth.role.role)&&this.props.terminations.allTermination&&!K(this.props.terminations.allTermination,this.state.userInfo.staffDetails.basicInfo.staff_code)&&Object(m.jsx)("li",{className:"p-0.5",children:Object(m.jsx)(P.a,{theme:"danger",className:"bg-red-800 p-2 hover:bg-red-900",onClick:function(){return d.setAction("TERMINATION")},children:"Terminate"})}),this.props.auth.role&&this.props.isExternal&&Q.e.school.includes(this.props.auth.role.role)&&this.props.terminations.allTermination&&K(this.props.terminations.allTermination,this.state.userInfo.staffDetails.basicInfo.staff_code)&&Object(m.jsx)("li",{className:"p-0.5",children:Object(m.jsx)(P.a,{onClick:function(){d.setThisTermination(K(d.props.terminations.allTermination,d.state.userInfo.staffDetails.basicInfo.staff_code))},children:"View request"})})]})]}),this.props.close&&Object(m.jsx)("div",{className:"",children:Object(m.jsx)(P.a,{onClick:this.props.close,theme:"default",children:"Close"})})]})]}),"main-success"===this.state.error.target&&Object(m.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(m.jsx)(u.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),Object(m.jsx)("div",{className:"bg-gray-100",children:Object(m.jsx)("div",{className:"container mx-auto my-5 p-5",children:Object(m.jsxs)("div",{className:"md:flex no-wrap md:-mx-2 ",children:[Object(m.jsx)(k,{basicInfo:this.state.userInfo.staffDetails.basicInfo,workInfo:this.state.userInfo.staffDetails.workInfo}),Object(m.jsxs)("div",{className:"w-full md:w-9/12 mx-2",children:[Object(m.jsx)(j,{info:this.state.userInfo.staffDetails.basicInfo}),Object(m.jsx)("div",{className:"my-4"}),Object(m.jsx)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:Object(m.jsxs)("div",{className:"grid grid-cols-2",children:[Object(m.jsx)(I,{userEducations:this.state.userInfo.staffDetails.education?this.state.userInfo.staffDetails.education:[]}),Object(m.jsx)(C,{userExperiences:this.state.userInfo.staffDetails.experience?this.state.userInfo.staffDetails.experience:[]})]})}),Object(m.jsx)("div",{className:"my-4"}),Object(m.jsx)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:Object(m.jsxs)("div",{className:"grid grid-cols-2",children:[Object(m.jsx)(D,{userTerminations:this.state.userInfo.staffDetails.terminationInfo?this.state.userInfo.staffDetails.terminationInfo:[]}),Object(m.jsx)(A,{userSuspensions:this.state.userInfo.staffDetails.suspensionInfo?this.state.userInfo.staffDetails.suspensionInfo:[]})]})}),Object(m.jsx)("div",{className:"my-4"}),Object(m.jsx)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:Object(m.jsx)("div",{className:"grid grid-cols-2",children:Object(m.jsx)(E,{userTransfers:this.state.userInfo.staffDetails.transferInfo?this.state.userInfo.staffDetails.transferInfo:[]})})})]})]})})}),Object(m.jsx)(W.b,{allowEdit:this.props.isExternal,staff_code:this.state.userInfo.staffDetails.basicInfo.staff_code,full_name:this.state.userInfo.staffDetails.basicInfo.full_name})]})})):Object(m.jsx)("div",{className:"py-10 px-10",children:Object(m.jsxs)("div",{className:"bg-yellow-50 text-yellow-900 border border-yellow-900 rounded flex flex-col items-center justify-center p-6 my-8",children:[Object(m.jsx)(b.n,{className:"text-6xl md:text-9xl"}),Object(m.jsxs)("div",{className:"text-center flex flex-col",children:[Object(m.jsx)("span",{className:"text-2xl md:text-4xl font-extrabold",children:"Profile not found!"}),Object(m.jsx)("span",{className:"text-lg",children:"Please try again there must be an error, or invalid staff code!"}),this.props.isExternal&&Object(m.jsx)(P.a,{theme:"primary-light",className:"mt-4",onClick:this.props.close,children:"Back"})]})]})})}}]),s}(o.Component),$=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic,terminations:e.terminations}}),{FC_GetAllTermination:h.l})(Z)},153:function(e,t,s){"use strict";s.r(t),s.d(t,"_SystemUsersList",(function(){return p})),s.d(t,"SystemUsersList",(function(){return f}));var a=s(26),r=s(27),c=s(28),n=s(29),i=s(2),o=s(16),l=s(12),d=s(30),h=s(37),u=s(48),b=s(18),m=s(120),j=s(10),x=s(1),p=function(e){Object(c.a)(s,e);var t=Object(n.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.nextPage=function(){var e=r.state.selected_page+1;r.pageNumbersList().length>r.state.selected_page&&(r.setState({selected_page:e}),r.LoadByPage(e,r.state.page_limit,r.state.selected_role_id,!1))},r.previousPage=function(){var e=1===r.state.selected_page?1:r.state.selected_page-1;r.setState({selected_page:e}),r.LoadByPage(e,r.state.page_limit,r.state.selected_role_id,!1)},r.pageNumbersList=function(){for(var e=null!==r.props.systemUsers.users?parseInt(r.props.systemUsers.users[0].total_users)/r.state.page_limit+(parseInt(r.props.systemUsers.users[0].total_users)%r.state.page_limit>0?1:0):0,t=[],s=1;s<=e;s++)t.push(s);return 0===t.length?[1]:t},r.LoadByPage=function(e,t,s,a){r.setState({selected_page:e}),null!==r.props.systemUsers.users&&void 0!==r.props.systemUsers.users.find((function(t){return t.page_number===e}))&&!0!==a||r.props.FC_LoadSystemUsers(s,t,e,a,r.setLoading)},r.FilteredData=function(){if(null!==r.props.systemUsers.users){var e=r.props.systemUsers.users.find((function(e){return e.page_number===r.state.selected_page}));if(void 0!==e){var t=e.users;return null!==r.state.selected_gender&&""!==r.state.selected_gender&&(t=t.filter((function(e){return e.sex===r.state.selected_gender}))),Object(b.f)(t,r.state.search_value)}}return[]},r.componentDidMount=function(){null===r.props.basic.roles&&r.props.FC_GetAllSystemRoles((function(e,t){})),r.LoadByPage(r.state.selected_page,r.state.page_limit,r.state.selected_role_id,!0)},r.changeRole=function(e){r.setState({selected_role_id:e,selected_page:1}),r.LoadByPage(1,r.state.page_limit,e,!0)},r.changePageLimit=function(e){r.setState({page_limit:parseInt(e),selected_page:1}),r.LoadByPage(1,parseInt(e),r.state.selected_role_id,!0)},r.state={loading:!1,selected_role_id:"3",selected_page:1,page_limit:100,selected_gender:null,search_value:"",selectedUser:null},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.props.basic.roles||null===this.props.systemUsers.users||!0===this.state.loading?Object(x.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(x.jsx)(u.a,{}),Object(x.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]}):Object(x.jsx)(i.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsx)(d.a,{children:null===this.state.selectedUser?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"text-3xl font-bold",children:"System users"}),Object(x.jsxs)("div",{className:"flex flex-row items-center gap-2 -mt-1",children:[Object(x.jsx)("span",{className:"text-base text-gray-500",children:"System users"}),""!==this.state.selected_role_id&&Object(x.jsx)(h.b,{className:"text-2xl -mx-2 text-gray-500"}),Object(x.jsx)("span",{className:"text-base font-bold text-primary-800 underline",children:null===(e=this.props.basic.roles.find((function(e){return e.role_id===t.state.selected_role_id})))||void 0===e?void 0:e.role}),null!==this.state.selected_gender&&""!==this.state.selected_gender&&Object(x.jsx)(h.b,{className:"text-2xl -mx-2 text-gray-500"}),null!==this.state.selected_gender&&""!==this.state.selected_gender&&Object(x.jsx)("span",{className:"text-base font-bold text-primary-800 underline",children:this.state.selected_gender})]})]}),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"flex flex-row items-center justify-end gap-3",children:[Object(x.jsxs)("div",{className:"text-right",children:[Object(x.jsx)("div",{className:"text-sm text-gray-500",children:"Total users"}),Object(x.jsx)("div",{className:"text-2xl -mt-1 font-bold",children:null!==this.props.systemUsers.users&&this.props.systemUsers.users.length>0?parseInt(this.props.systemUsers.users[0].total_users).toLocaleString():0})]}),Object(x.jsx)("div",{children:Object(x.jsx)(j.b,{to:"/register-administration-staff",className:"btn bg-accent-900 hover:bg-yellow-900 text-white cursor-pointer px-3 py-2 rounded font-bold",children:"Add new staff"})})]})})]}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("div",{className:"text-sm",children:"Filter by:"}),Object(x.jsxs)("div",{className:"flex flex-row items-center gap-3 w-full",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"font-bold text-sm",children:"Rows"}),Object(x.jsx)("div",{children:Object(x.jsx)("select",{onChange:function(e){return t.changePageLimit(e.target.value)},value:this.state.page_limit,className:"border border-gray-400 px-3 py-2 rounded",children:[10,20,50,100,500,1e3,5e3,1e4,5e4,1e6,1e8].map((function(e,t){return Object(x.jsx)("option",{value:e,children:e},t+1)}))})})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"font-bold text-sm",children:"User role"}),Object(x.jsx)("div",{children:Object(x.jsxs)("select",{onChange:function(e){return t.changeRole(e.target.value)},value:this.state.selected_role_id,className:"border border-gray-400 px-3 py-2 rounded",children:[Object(x.jsx)("option",{value:"",children:"Choose user role"}),this.props.basic.roles.map((function(e,t){return Object(x.jsx)("option",{value:e.role_id,children:e.role},t+1)}))]})})]}),Object(x.jsxs)("div",{children:[console.log("Gender: ",this.state.selected_gender),Object(x.jsx)("div",{className:"font-bold text-sm",children:"Gender"}),Object(x.jsx)("div",{children:Object(x.jsxs)("select",{value:null===this.state.selected_gender?"":this.state.selected_gender,onChange:function(e){return t.setState({selected_gender:""!==e.target.value?e.target.value:null})},className:"border border-gray-400 px-3 py-2 rounded",children:[Object(x.jsx)("option",{value:"",children:"Choose gender"}),Object(x.jsx)("option",{value:"",children:"View by all"}),Object(x.jsx)("option",{value:"MALE",children:"MALE"}),Object(x.jsx)("option",{value:"FEMALE",children:"FEMALE"})]})})]}),Object(x.jsxs)("div",{className:"w-full",children:[Object(x.jsx)("div",{className:"font-bold text-sm",children:"Search on a page"}),Object(x.jsx)("div",{className:"w-full",children:Object(x.jsx)("input",{type:"text",onChange:function(e){return t.setState({search_value:e.target.value})},placeholder:"Search keyword...",value:this.state.search_value,className:"border border-gray-400 px-3 py-2 rounded w-full"})})]})]})]}),Object(x.jsx)("div",{className:"w-full overflow-x-auto my-5",children:Object(x.jsxs)("table",{className:"min-w-full",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"border-b-2 border-gray-300 text-sm",children:[Object(x.jsx)("th",{className:"p-1 py-2 text-center",children:"#"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"Full name"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"Gender"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"National ID"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"Phone"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"Username"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"District"}),Object(x.jsx)("th",{className:"p-1 py-2 text-left",children:"School"}),Object(x.jsx)("th",{className:"p-1 py-2"})]})}),Object(x.jsx)("tbody",{children:null===this.props.systemUsers.users?Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:10,children:"Loading..."})}):0===this.FilteredData().length?Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:10,children:Object(x.jsx)("div",{className:"text-center text-2xl py-5 text-gray-600 bg-gray-200 rounded-xl my-4",children:"No result found!"})})}):this.FilteredData().map((function(e,s){return Object(x.jsxs)("tr",{className:"border-b text-sm ".concat((s+1)%2===0?"bg-gray-100":""," hover:bg-yellow-50 group"),children:[Object(x.jsx)("td",{className:"p-1 py-2 text-center",children:t.state.page_limit*t.state.selected_page-t.state.page_limit+(s+1)}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.full_name}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.sex}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.nid}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.phone_numbers}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.username}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.district_name}),Object(x.jsx)("td",{className:"p-1 py-2 text-left",children:e.school_name}),Object(x.jsx)("td",{className:"p-1 py-2 text-right",children:Object(x.jsx)("div",{onClick:function(){return t.setState({selectedUser:e})},title:"View user profile",className:"bg-blue-100 rounded px-3 py-2 text-center font-bold cursor-pointer group-hover:bg-primary-800 group-hover:text-white",children:"View"})})]},s+1)}))}),Object(x.jsx)("tfoot",{children:Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:10,className:"pt-5",children:Object(x.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(x.jsxs)("div",{className:"text-gray-500",children:["Showing"," ",Object(x.jsx)("span",{className:"text-black",children:this.state.page_limit*this.state.selected_page-this.state.page_limit+1})," ","to"," ",Object(x.jsx)("span",{className:"text-black",children:this.state.page_limit*this.state.selected_page})," ","of"," ",Object(x.jsx)("span",{className:"text-black font-bold",children:null!==this.props.systemUsers.users&&this.props.systemUsers.users.length>0?parseInt(this.props.systemUsers.users[0].total_users).toLocaleString():0})," ","results"]}),Object(x.jsxs)("div",{className:"flex flex-row items-center",children:[Object(x.jsx)("div",{onClick:function(){return t.previousPage()},className:"bg-gray-100 rounded-l-md border border-gray-300 hover:border-primary-800 py-2 px-3 font-bold text-gray-800 hover:text-white hover:bg-primary-800 cursor-pointer",children:"Previous"}),Object(x.jsx)("div",{children:Object(x.jsx)("select",{value:this.state.selected_page,onChange:function(e){return t.LoadByPage(parseInt(e.target.value),t.state.page_limit,t.state.selected_role_id,!1)},className:"border border-gray-400 px-3 py-2 overflow-x-auto flex flex-row items-center text-center justify-center font-extrabold",children:this.pageNumbersList().map((function(e,t){return Object(x.jsx)("option",{value:e,children:e},t+1)}))})}),Object(x.jsx)("div",{onClick:function(){return t.nextPage()},className:"bg-gray-100 rounded-r-md border border-gray-300 hover:border-primary-800 py-2 px-3 font-bold text-gray-800 hover:text-white hover:bg-primary-800 cursor-pointer",children:"Next"})]})]})})})})]})})]}):Object(x.jsx)(m.UserProfile,{user_id:null===this.state.selectedUser.staff_code?void 0:this.state.selectedUser.staff_code,isExternal:!0,close:function(){return t.setState({selectedUser:null})}})})})})}}]),s}(i.Component),f=Object(o.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore,systemUsers:e.systemUsers}}),{FC_GetAllPositions:l.j,FC_AllSchoolHierarchyDetails:l.c,FC_GetAllSystemRoles:l.k,FC_LoadSystemUsers:l.J,FC_Clean_users:l.g})(p)}}]);
//# sourceMappingURL=14.c4b56dcd.chunk.js.map