(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[29],{106:function(e,t,c){"use strict";c(2);var a=c(52),s=c(1);t.a=function(e){var t=e.onChange,c=e.value,r=e.error,n=e.label,i=e.placeholder,l=e.disabled,o=void 0!==l&&l,d=e.name,u=e.Input_className,h=void 0===u?"":u,j=e.Label_className,b=void 0===j?"":j,p=e.InputContainer_className,x=void 0===p?"":p,m=e.MainContainer_className,O=void 0===m?"":m,f=e.size,v=void 0===f?"md":f,g=e.data;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"w-full my-2 ".concat(O),children:[n&&Object(s.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(b),children:n}),Object(s.jsxs)("div",{className:"rounded relative ".concat(x),children:[Object(s.jsx)("select",{name:d,placeholder:i,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(a.a)(v),"\n                     ").concat(""!==r?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(h),value:c,disabled:o,children:g.map((function(e,t){return Object(s.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==r&&Object(s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:r})]})]})})}},107:function(e,t,c){"use strict";c.d(t,"a",(function(){return h})),c.d(t,"b",(function(){return j})),c.d(t,"c",(function(){return b})),c.d(t,"d",(function(){return p}));var a=c(6),s=c(3),r=c.n(s),n=c(5),i=c.n(n),l=c(10),o=c(12),d=c(8),u=c(9),h=function(e){return e(!0,null,""),function(){var t=Object(a.a)(r.a.mark((function t(c){var a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.a)(),t.next=4,i.a.get("".concat(o.c,"/teachertransfers/requesteddde"));case 4:a=t.sent,console.log("===================================="),console.log({getAllTransfers:a}),console.log("===================================="),s=a.data.filter((function(e){return"APPROVED"===e.requested_status})),c({type:l.a.GET_ALL_TRANSFER,payload:s}),e(!1,s,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},j=function(){var e=Object(a.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,null,""),e.prev=1,Object(d.a)(),e.next=5,i.a.get("".concat(o.c,"/district"));case 5:c=e.sent,console.log("=================FC_GetDistricts==================="),console.log({FC_GetDistricts:c}),console.log("=================FC_GetDistricts==================="),t(!1,c.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),t(!1,null,Object(u.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(a.a)(r.a.mark((function e(t,c){var a,s,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0,a=0,null,""),e.prev=2,Object(d.a)(),(s=new FormData).append("teacher_supporting_document",t),e.next=8,i.a.post("".concat(o.c,"/teachertransfers/uploadSupportingDocument"),s,{onUploadProgress:function(e){a=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100,c(!0,a,null,"")}});case 8:n=e.sent,console.log("Uploaded document: ",n.data),c(!1,a,n.data,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),c(!1,a,"",Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,c){return e.apply(this,arguments)}}(),p=function(e,t,c){c(!0,"");return function(){var s=Object(a.a)(r.a.mark((function a(s){var n,h;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),c(!0,""),(n=new FormData).append("teacher_transfer_id",e),n.append("mayor_letter",t),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),a.prev=11,Object(d.a)(),a.next=15,i.a.post("".concat(o.c,"/teachertransfers/outgoing"),n);case 15:h=a.sent,console.log("Uploaded document: ",h.data),s({type:l.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:e,mayor_letter:h.data.mayor_letter}}),c(!1,""),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(11),console.error(a.t0),c(!1,Object(u.a)(a.t0));case 25:case"end":return a.stop()}}),a,null,[[11,21]])})));return function(e){return s.apply(this,arguments)}}()}},173:function(e,t,c){"use strict";c.r(t),c.d(t,"FreeVacancies",(function(){return y}));var a=c(25),s=c(4),r=c(29),n=c(30),i=c(31),l=c(32),o=c(2),d=c.n(o),u=c(13),h=c(17),j=c(10),b=c(107),p=c(27),x=c(33),m=c(44),O=c(106),f=c(34),v=c(43),g=c(19),_=c(1),N=function(e){Object(i.a)(c,e);var t=Object(l.a)(c);function c(e){var a;return Object(r.a)(this,c),(a=t.call(this,e)).componentDidMount=function(){Object(b.b)((function(e,t,c){a.setState({loading_district:!1,districts:null===t?[]:t,error:null===t?{target:"main-error",msg:"msg"}:{target:null,msg:""}})}))},a.selectDistrict=function(e){null!==e?(a.setState({selected_district:e,loading_vacancies:!0,vacancies:null}),Object(j.s)(e.district_code,(function(e,t,c){!0===e?a.setState({loading_vacancies:!1,vacancies:null===t?t:Object(s.a)(Object(s.a)({},t),{},{district_schools_position_occupation:null===t||void 0===t?void 0:t.district_schools_position_occupation.filter((function(e){return+e.vacant>=1}))})}):a.setState({loading_vacancies:!1,vacancies:null,error:{target:"main-error",msg:c}})}))):a.setState({selected_district:e})},a.state={loading_vacancies:!1,loading_district:!0,districts:[],vacancies:null,selected_district:null,error:{target:null,msg:""},selected_qualification:"",search:""},a}return Object(n.a)(c,[{key:"render",value:function(){var e,t=this;if(!0===this.state.loading_district)return Object(_.jsx)("div",{className:"p-8 text-center",children:Object(_.jsx)("div",{className:"mx-auto",children:Object(_.jsx)(v.a,{})})});if("main-error"===this.state.error.target)return Object(_.jsx)(p.a,{theme:"danger",fixed:!0,children:this.state.error.msg});var c=[];return null!==this.state.vacancies&&(c=""===this.state.selected_qualification?this.state.vacancies.district_schools_position_occupation:this.state.vacancies.district_schools_position_occupation.filter((function(e){return e.qualification_id===t.state.selected_qualification})),c=Object(g.h)(c,this.state.search,{position_code:!0,position_name:!0,qualification_name:!0,school_code:!0,school_name:!0})),Object(_.jsxs)(_.Fragment,{children:["main-success"===this.state.error.target&&Object(_.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"sticky top-14",children:Object(_.jsxs)(x.a,{children:[Object(_.jsx)(m.a,{className:"text-center pb-2",children:"Available vacancies"}),null!==this.state.selected_district&&Object(_.jsxs)("div",{className:"border-t p-1 flex pt-2",children:[Object(_.jsx)("div",{className:"pt-1 flex items-center",children:Object(_.jsxs)("div",{className:"border rounded flex pl-2",children:[Object(_.jsxs)("h2",{className:"p-2 font-bold text-xl",children:[this.state.selected_district.district_name," district"]}),Object(_.jsx)("button",{className:"p-2 py-3 hover:bg-red-200 text-red-500 rounded",onClick:this.selectDistrict.bind(this,null),children:Object(_.jsx)(u.f,{className:"text-2xl"})})]})}),Object(_.jsxs)("div",{className:"flex items-center mx-2 px-2 border rounded",children:[Object(_.jsxs)("label",{htmlFor:"",className:"text-lg pr-2 ",children:["Qualification:"," "]}),Object(_.jsx)(O.a,{size:"sm",onChange:function(e){return t.setState({selected_qualification:e.target.value})},value:this.state.selected_qualification,error:"",label:"",placeholder:"Select Qualification",name:"",data:[{title:"Select Qualification",value:""}].concat(Object(a.a)(this.state.vacancies?null===(e=this.state.vacancies)||void 0===e?void 0:e.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})):[]))})]}),Object(_.jsxs)("div",{className:"mx-2 flex items-center border px-2 rounded",children:[Object(_.jsx)("label",{className:"text-lg pr-2",children:"Search"}),Object(_.jsx)(f.a,{error:"",label:"",name:"",size:"sm",onChange:function(e){return t.setState({search:e.target.value})},placeholder:"Search",value:this.state.search})]})]})]})}),null===this.state.selected_district?Object(_.jsx)(x.a,{children:Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{className:"text-center p-2 text-gray-400 pb-4 text-2xl",children:"Please select a district"}),this.state.districts.length>=1?Object(_.jsx)("div",{className:"grid grid-cols-2 gap-2 ",children:this.state.districts.map((function(e){return Object(_.jsxs)("div",{onClick:t.selectDistrict.bind(t,e),className:"p-2 flex cursor-pointer rounded border  px-3 hover:text-blue-600 hover:border-blue-600 hover:bg-blue-100 bg-white text-lg",children:[Object(_.jsxs)("h4",{className:"flex-1 text-lg",children:[" ",Object(_.jsx)("b",{children:e.district_name})," district"]}),Object(_.jsx)("button",{className:"",children:Object(_.jsx)(u.D,{})})]},e.district_code)}))}):Object(_.jsx)("div",{children:Object(_.jsxs)("h2",{className:"text-center p-4 text-gray-400  text-2xl",children:["Something went wrong, ",Object(_.jsx)("br",{})," please try again later"]})})]})}):Object(_.jsx)(x.a,{children:!0===this.state.loading_vacancies?Object(_.jsx)("div",{className:"text-center py-10",children:Object(_.jsx)(v.a,{})}):Object(_.jsx)("div",{children:null===this.state.vacancies?Object(_.jsx)(p.a,{theme:"danger",children:"Failed to load the data"}):Object(_.jsxs)("table",{className:"w-full border",children:[Object(_.jsx)("thead",{className:"text-left",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:"p-2 border",children:"#"}),Object(_.jsx)("th",{className:"p-2 border",children:"School code"}),Object(_.jsx)("th",{className:"p-2 border",children:"School name"}),Object(_.jsx)("th",{className:"p-2 border",children:"Position code"}),Object(_.jsx)("th",{className:"p-2 border",children:"Position name"}),Object(_.jsx)("th",{className:"p-2 border",children:"Qualification"}),Object(_.jsx)("th",{className:"p-2 border",children:"Vacant"})]})}),Object(_.jsx)("tbody",{children:c.length<=0?Object(_.jsx)("tr",{children:Object(_.jsxs)("td",{colSpan:8,className:"text-center py-8",children:[Object(_.jsx)(m.a,{children:"No results found"}),Object(_.jsxs)("p",{className:"pt-1 text-gray-600",children:["Please search using:"," ",Object(_.jsx)("b",{children:"school code, school name, position code, position name"})]})]})}):c.map((function(e,t){return Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"p-2 border",children:t+1}),Object(_.jsx)("td",{className:"p-2 border",children:e.school_code}),Object(_.jsx)("td",{className:"p-2 border",children:e.school_name}),Object(_.jsx)("td",{className:"p-2 border",children:e.position_code}),Object(_.jsx)("td",{className:"p-2 border",children:e.position_name}),Object(_.jsx)("td",{className:"p-2 border",children:e.qualification_name}),Object(_.jsx)("td",{className:"p-2 border",children:+e.vacant<0?0:e.vacant})]},t)}))})]})})})]})]})}}]),c}(d.a.Component),y=Object(h.b)((function(e){return{auth:e.auth,basic:e.basic,placement:e.placement}}),{})(N)}}]);
//# sourceMappingURL=29.cd65c97a.chunk.js.map