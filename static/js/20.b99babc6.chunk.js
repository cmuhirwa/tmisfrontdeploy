(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[20],{361:function(e,t,r){"use strict";r(4);var s=r(1);t.a=function(e){var t=function(){for(var t=[],r=0;r<e.cols;r++)t.push(r);return t.map((function(e){return Object(s.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(s.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(s.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(s.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},384:function(e,t,r){"use strict";r(4);var s=r(45),a=r(12),c=r(23),n=r(1);t.a=function(e){var t="uploaded"===e.linkFor?"".concat(a.f,"/").concat(e.first_id):"".concat(a.e,"/generateletter/").concat(e.linkFor,"/").concat(e.first_id,"/").concat(e.last_id);return Object(n.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:Object(n.jsxs)(c.a,{theme:"primary-light",size:"sm",className:"flex items-center gap-1",children:[Object(n.jsx)(s.a,{}),Object(n.jsx)("span",{children:e.title})]})})}},452:function(e,t,r){"use strict";var s=r(19),a=r(20),c=r(21),n=r(22),o=r(4),l=r.n(o),i=r(36),d=r(140),h=r(47),m=r(23),u=r(384),b=r(93),j=r(39),p=r(361),_=r(15),f=r(28),x=r(65),O=r(1),g=Object(i.b)(null,{FC_UploadSignedDocument:d.d})((function(e){var t=l.a.useState(null),r=Object(f.a)(t,2),s=r[0],a=r[1],c=l.a.useState(null),n=Object(f.a)(c,2),o=n[0],i=n[1],d=l.a.useState(!1),u=Object(f.a)(d,2),b=u[0],j=u[1];return Object(O.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster absolute p-1 bg-primary-800 rounded -mt-2 z-40 w-auto mx-2 sm:mx-0 sm:w-80 right-0 pb-2",children:[s&&"main-success"===s.target&&Object(O.jsx)(h.a,{theme:"success",fixed:!0,children:s&&s.msg}),s&&"main-error"===s.target&&Object(O.jsx)(h.a,{theme:"danger",fixed:!0,children:s&&s.msg}),Object(O.jsx)("div",{className:"px-2",children:Object(O.jsx)(x.b,{disabled:b,labelColor:"text-gray-300",label:"Signed document",name:"approved_doc",className:"p-2",onChange:function(e){return function(e){if(a(null),null===e.target.files)return i(null),a({msg:"Please select a valid file",target:"approved_doc"});var t=e.target.files[0];return"application/pdf"!==t.type?(i(null),a({msg:"The system accept pdf only",target:"approved_doc"})):t.size<=0?(i(null),a({msg:"Invalid file, Please choose a real file",target:"approved_doc"})):(i(t),void a(null))}(e)},error:s&&"approved_doc"===s.target?s.msg:"",type:"file",accept:x.a.PDF})}),Object(O.jsxs)("div",{className:"flex justify-between gap-2 px-2",children:[Object(O.jsx)(m.a,{theme:"default",onClick:function(){e.setSelectedUserId(""),i(null)},disabled:b,children:"Cancel"}),Object(O.jsx)("div",{className:"flex gap-2",children:Object(O.jsx)(m.a,{theme:"success",disabled:b,onClick:function(t){null!==o?e.FC_UploadSignedDocument(e.selectedUserId,o,(function(t,r){j(t),t||Object(_.r)(r)?Object(_.r)(r)&&(a({target:"main-success",msg:"Document uploaded successfully!"}),i(null),setTimeout((function(){e.setSelectedUserId("")}),1e3)):a({target:"main-error",msg:r})})):a({target:"approved_doc",msg:"Required!"})},children:"Upload"})})]})]})})),v=function(e){Object(c.a)(r,e);var t=Object(n.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).componentDidMount=function(){var e,t,r="";if(a.props.district_code)r=a.props.district_code;else{if(null===(e=a.props.auth.district)||void 0===e||!e.district_code)return a.setState({error:{target:"main-error",msg:"No district assigned to you"}});r=null===(t=a.props.auth.district)||void 0===t?void 0:t.district_code}a.setState({selected_district_id:r}),a.props.FC_GetAllTransfers(r,(function(e,t,r){a.setState({loading:e}),!e&&t?a.setState({loading:e}):e||Object(_.r)(r)||a.setState({error:{target:"main-error",msg:r}})}))},a.getTransferById=function(e){if(a.props.transfer.allTransfers)return a.props.transfer.allTransfers.find((function(t){return t.teacher_transfer_id.toString()===e}))},a.FC_DisplaySchools=function(e){return e.map((function(e,t){return Object(O.jsxs)("p",{children:[t+1," ",e.school_name]})}))},a.state={loading:!0,error:null,search:"",selectedUserId:"",selected_district_id:""},a}return Object(a.a)(r,[{key:"render",value:function(){var e=this;return Object(O.jsxs)(O.Fragment,{children:[null!==this.state.error&&"main-error"===this.state.error.target&&Object(O.jsx)(h.a,{fixed:!0,theme:"danger",children:this.state.error.msg}),Object(O.jsxs)("div",{className:"mt-3",children:[Object(O.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded",children:[Object(O.jsx)("div",{className:"flex-1 pr-2",children:Object(O.jsx)(j.a,{error:"",label:"Search",type:"search",name:"",onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search",value:this.state.search,size:"sm"})}),Object(O.jsx)("div",{className:"p-2",children:this.props.transfer.allTransfers&&this.props.transfer.allTransfers.length>=1&&Object(O.jsx)(b.a,{fileData:this.props.transfer.allTransfers.map((function(e){var t,r,s,a,c,n;return{approved_school_id:e.approved_school_id,Approved_school_name:null===(t=e.approved_school_info)||void 0===t?void 0:t.school_name,Approved_school_code:null===(r=e.approved_school_info)||void 0===r?void 0:r.school_code,Approved_school_district:null===(s=e.approved_school_info)||void 0===s?void 0:s.district_name,position_code:e.position_code,position_name:e.position_name,qualification_name:e.qualification_name,requested_comment:e.requested_comment,school_from_name:null===(a=e.school_from_info)||void 0===a?void 0:a.school_name,school_from_code:null===(c=e.school_from_info)||void 0===c?void 0:c.school_code,school_from_district:null===(n=e.school_from_info)||void 0===n?void 0:n.district_name,teacher_id:e.teacher_id,teacher_comment:e.teacher_comment,teacher_last_name:e.teacher_last_name,teacher_full_name:e.teacher_full_name,teacher_phone_number:e.teacher_phone_number,transfer_reason:e.transfer_reason,transfer_type:e.transfer_type}})),fileName:"INCOMING TRANSFERS",btnName:"Download EXCEL"})})]}),Object(O.jsx)("div",{className:"w-full overflow-x-auto mt-4",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{className:"bg-blue-50 text-blue-800 font-bold text-base text-left",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"p-2 border",children:"#"}),Object(O.jsx)("th",{className:"p-2 border",children:"Full Name"}),Object(O.jsx)("th",{className:"p-2 border",children:"Phone"}),Object(O.jsx)("th",{className:"p-2 border",children:"Current School"}),Object(O.jsx)("th",{className:"p-2 border",children:"Approved School"}),Object(O.jsx)("th",{className:"p-2 border",children:"Position"}),Object(O.jsx)("th",{className:"p-2 border",children:"Qualification"}),this.props.hideActions?null:Object(O.jsx)("th",{className:"p-2 border"})]})}),Object(O.jsx)("tbody",{children:this.state.loading?Object(O.jsx)(p.a,{cols:8}):null===this.props.transfer.allTransfers?Object(O.jsx)("tr",{className:"border-t border-b",children:Object(O.jsx)("td",{colSpan:8,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:"Something went wrong! Please try again."})}):this.props.transfer.allTransfers.length<=0?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:8,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:"No results found"})}):Object(_.v)(this.props.transfer.allTransfers,this.state.search).map((function(t,r){return Object(O.jsxs)("tr",{className:"border-t border-b hover:bg-gray-50",children:[Object(O.jsx)("td",{className:"p-2 border",children:r+1}),Object(O.jsx)("td",{className:"p-2 border",children:t.teacher_full_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.teacher_phone_number}),Object(O.jsx)("td",{className:"p-2 border",children:t.school_from_info?t.school_from_info.school_name:""}),Object(O.jsx)("td",{className:"p-2 border",children:t.requested_school_info?e.FC_DisplaySchools(t.requested_school_info):""}),Object(O.jsxs)("td",{className:"p-2 border",children:[t.position_code," ",t.position_name]}),Object(O.jsx)("td",{className:"p-2 border",children:t.qualification_name}),e.props.hideActions?null:Object(O.jsx)(O.Fragment,{children:e.state.selectedUserId===t.teacher_transfer_id.toString()?Object(O.jsx)("td",{className:"p-2 border",children:Object(O.jsx)(g,{selectedUserId:e.state.selectedUserId,setSelectedUserId:function(t){return e.setState({selectedUserId:t})}})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("td",{className:"p-2 border-1 flex gap-2",children:[null===t.mayor_letter||Object(_.r)(t.mayor_letter)?Object(O.jsx)(m.a,{size:"sm",theme:"success-light",onClick:function(r){return e.setState({selectedUserId:t.teacher_transfer_id.toString()})},children:"Upload signed letter"}):t.requested_status,null===t.mayor_letter||Object(_.r)(t.mayor_letter)?Object(O.jsx)(u.a,{linkFor:"transfer",first_id:t.teacher_transfer_id,last_id:t.teacher_id,title:"Transfer letter"}):t.mayor_letter&&!Object(_.r)(t.mayor_letter)&&Object(O.jsx)(u.a,{linkFor:"uploaded",first_id:t.mayor_letter,last_id:"",title:"Transfer letter"})]})})})]},t.teacher_transfer_id)}))})]})})]})]})}}]),r}(o.Component);t.a=Object(i.b)((function(e){return{auth:e.auth,basic:e.basic,transfer:e.transfer}}),{FC_GetAllTransfers:d.a})(v)},588:function(e,t,r){"use strict";r.r(t),r.d(t,"RequestApprovalDde",(function(){return o}));r(4);var s=r(53),a=r(92),c=r(452),n=r(1),o=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"px-3 container mx-auto mt-3",children:Object(n.jsx)(a.a,{className:"",children:"Incoming Transfers"})}),Object(n.jsx)(s.a,{children:Object(n.jsx)(c.a,{})})]})}}}]);
//# sourceMappingURL=20.b99babc6.chunk.js.map