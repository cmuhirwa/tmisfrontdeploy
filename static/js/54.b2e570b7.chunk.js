(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[54],{547:function(e,t,r){"use strict";r.r(t),r.d(t,"_ChangePassword",(function(){return O})),r.d(t,"ChangePassword",(function(){return S}));var s,a=r(3),n=r(7),o=r(27),c=r(28),d=r(29),i=r(30),l=r(8),u=r.n(l),m=r(4),p=r(32),f=r(13),h=r(38),b=r(53),_=r(36),x=r(15),w=r(10),j=r(11),g=r(2);!function(e){e.MAIN="MAIN",e.CURRENT_PASSWORD="CURRENT_PASSWORD",e.NEW_PASSWORD="NEW_PASSWORD",e.CONFIRM_PASSWORD="CONFIRM_PASSWORD"}(s||(s={}));var O=function(e){Object(d.a)(r,e);var t=Object(i.a)(r);function r(e){var c;return Object(o.a)(this,r),(c=t.call(this,e)).setLoading=function(e){c.setState({loading:e})},c.Fn_ChangePassword=function(){var e=Object(n.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==c.state.current_password){e.next=3;break}return e.abrupt("return",c.setState({formError:{target:s.CURRENT_PASSWORD,msg:"Please fill current or existing password"}}));case 3:if(""!==c.state.new_password){e.next=5;break}return e.abrupt("return",c.setState({formError:{target:s.NEW_PASSWORD,msg:"Please fill new password"}}));case 5:if(!(c.state.new_password.length<5)){e.next=7;break}return e.abrupt("return",c.setState({formError:{target:s.NEW_PASSWORD,msg:"Please password characters should not be less than 5"}}));case 7:if("12345"!==c.state.new_password&&"123456"!==c.state.new_password){e.next=9;break}return e.abrupt("return",c.setState({formError:{target:s.NEW_PASSWORD,msg:"Please choose a strong password"}}));case 9:if(""!==c.state.confirm_password){e.next=11;break}return e.abrupt("return",c.setState({formError:{target:s.CONFIRM_PASSWORD,msg:"Please confirm your new password"}}));case 11:if(c.state.confirm_password===c.state.new_password){e.next=13;break}return e.abrupt("return",c.setState({formError:{target:s.CONFIRM_PASSWORD,msg:"Password does not match with new password"}}));case 13:if(null===c.props.auth.user){e.next=28;break}return n={user_id:null===(r=c.props.auth.user)||void 0===r?void 0:r.user_id,current_password:c.state.current_password,new_password:c.state.new_password},c.setLoading(!0),Object(w.a)(),e.prev=17,e.next=20,u.a.post("".concat(x.d,"/changepassword/new"),n);case 20:e.sent&&(c.setState({current_password:"",new_password:"",confirm_password:"",formError:null,success:"Password changed successfully!"}),setTimeout((function(){c.props.FC_PassCodeChanged(!1)}),1400)),c.setLoading(!1),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(17),c.setState({formError:{target:s.MAIN,msg:Object(j.a)(e.t0)},success:"",loading:!1});case 28:case"end":return e.stop()}}),e,null,[[17,25]])})));return function(t){return e.apply(this,arguments)}}(),c.state={loading:!1,current_password:"",new_password:"",confirm_password:"",formError:null,success:""},c}return Object(c.a)(r,[{key:"render",value:function(){var e,t,r,a,n,o,c,d=this;return!0===this.state.loading?Object(g.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(g.jsx)(_.a,{}),Object(g.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]}):""!==this.state.success?Object(g.jsx)(b.a,{children:Object(g.jsx)("div",{onClick:function(){return d.setState({success:""})},className:"bg-green-100 text-center py-4 text-green-800 rounded px-3 cursor-pointer animate__animated animate__zomIn ",children:Object(g.jsxs)("b",{className:"text-lg",children:[this.state.success," Password changed successfully"]})})}):Object(g.jsx)("div",{children:Object(g.jsxs)(b.a,{children:[Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("span",{className:"text-2xl font-bold",children:"Change password"}),Object(g.jsx)("span",{className:"text-primary-800 text-sm font-bold",children:null===(e=this.props.auth.user)||void 0===e?void 0:e.full_name})]}),null!==this.state.formError&&this.state.formError.target===s.MAIN&&Object(g.jsx)("div",{onClick:function(){return d.setState({formError:null})},className:"bg-red-100 text-red-800 rounded px-3 py-2 cursor-pointer",children:this.state.formError.msg}),Object(g.jsx)("div",{className:"mt-5",children:Object(g.jsxs)("form",{onSubmit:this.Fn_ChangePassword,children:[Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("label",{className:"text-base",htmlFor:"",children:"Current password or Received code"}),Object(g.jsx)("input",{type:"password",value:this.state.current_password,onChange:function(e){return d.setState({formError:null,current_password:e.target.value})},className:"border ".concat((null===(t=this.state.formError)||void 0===t?void 0:t.target)===s.CURRENT_PASSWORD?"border-red-600 animate__animated animate__shakeX animate__faster":"border-gray-400","  rounded px-3 py-2")}),(null===(r=this.state.formError)||void 0===r?void 0:r.target)===s.CURRENT_PASSWORD&&Object(g.jsx)("span",{className:"text-red-600 font-bold",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(g.jsx)("label",{className:"text-base",htmlFor:"",children:"New password"}),Object(g.jsx)("input",{type:"password",value:this.state.new_password,onChange:function(e){return d.setState({formError:null,new_password:e.target.value})},className:"border ".concat((null===(a=this.state.formError)||void 0===a?void 0:a.target)===s.NEW_PASSWORD?"border-red-600 animate__animated animate__shakeX animate__faster":"border-gray-400","  rounded px-3 py-2")}),(null===(n=this.state.formError)||void 0===n?void 0:n.target)===s.NEW_PASSWORD&&Object(g.jsx)("span",{className:"text-red-600 font-bold",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(g.jsx)("label",{className:"text-base",htmlFor:"",children:"Confirm password"}),Object(g.jsx)("input",{type:"password",value:this.state.confirm_password,onChange:function(e){return d.setState({formError:null,confirm_password:e.target.value})},className:"border ".concat((null===(o=this.state.formError)||void 0===o?void 0:o.target)===s.CONFIRM_PASSWORD?"border-red-600 animate__animated animate__shakeX animate__faster":"border-gray-400","  rounded px-3 py-2")}),(null===(c=this.state.formError)||void 0===c?void 0:c.target)===s.CONFIRM_PASSWORD&&Object(g.jsx)("span",{className:"text-red-600 font-bold",children:this.state.formError.msg})]}),Object(g.jsx)("div",{className:"my-4",children:Object(g.jsx)(h.a,{type:"submit",children:"Change password"})})]})})]})})}}]),r}(m.Component),S=Object(p.b)((function(e){return{auth:e.auth}}),{FC_PassCodeChanged:f.sb})(O)}}]);
//# sourceMappingURL=54.b2e570b7.chunk.js.map