(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[33],{109:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var s,r,c,n=a(13),i=a(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(s||(s={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(r||(r={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(c||(c={}));t.c=function(e){var t,a=e.title,o=e.backDrop,l=e.theme,d=e.close,h=e.backDropClose,b=e.widthSizeClass,m=e.displayClose,j=e.padding,x=void 0===j?{title:!0,body:!0,footer:!0}:j;switch(l){case s.primary:t="blue-primary";break;case s.secondary:t="gray-300";break;case s.danger:t="red-500";break;case s.success:t="green-500";break;case s.warning:t="yellow-500";break;default:t="white"}return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{onClick:function(){return h&&d()},className:"fixed bg-black bg-opacity-".concat(!0===o?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(i.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?r.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(b," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==r.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(b===c.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(i.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===x.title?"py-4 px-4":""," rounded-t text-").concat(l===s.default||l===s.secondary?"black":"white"),children:[a&&""!==a?Object(i.jsx)("h4",{className:"text-lg font-bold ",children:a}):Object(i.jsx)("div",{}),!1===m?"":Object(i.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(i.jsx)(n.k,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(i.jsx)("div",{className:"space-x-3 ".concat(!0===x.body?"py-4 px-4":""),children:Object(i.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(i.jsx)("div",{className:"flex float-right ".concat(!0===x.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},137:function(e,t,a){"use strict";var s=a(20),r=a(2),c=a(13),n=a(29),i=a(10),o=a(1);t.a=function(e){var t,a,l,d,h,b,m=e.transf,j=e.expand,x=void 0!==j&&j,u=e.remove_loading,f=void 0!==u&&u,p=e.removeTransfer,g=Object(r.useState)(!1),_=Object(s.a)(g,2),O=_[0],v=_[1];return console.log(m),Object(o.jsxs)("div",{className:"p-2 bg-white mb-3 border rounded ",children:[Object(o.jsxs)("div",{className:"flex",children:[Object(o.jsx)("div",{className:"p-3 hidden lg:flex items-center  ".concat("APPROVED"===m.requested_status?"text-green-700 bg-green-100":"text-accent-800 bg-accent-400"," rounded flex items-center"),children:Object(o.jsx)(c.ib,{size:80})}),Object(o.jsxs)("div",{className:"flex-1 pl-3 pt-1",children:[Object(o.jsxs)("section",{className:"hover:underline cursor-pointer",onClick:function(){return v(!O)},children:[Object(o.jsx)("span",{className:"p-1 rounded px-2 py-0.5 text-sm  ".concat("APPROVED"===m.requested_status?"bg-green-600 text-white":"bg-accent-900 text-white"),children:m.requested_status})," ",Object(o.jsxs)("h2",{className:"text-lg font-bold",children:[m.position_code," ",m.position_name]})]}),Object(o.jsxs)("div",{className:"pt-1",children:[Object(o.jsxs)("section",{className:"flex items-center pt-2",children:[Object(o.jsxs)("section",{className:"border pl-2 hover:bg-gray-200 pr-4 rounded rounded-r-full",children:[Object(o.jsx)("h6",{className:" font-light text-sm text-yellow-600",children:"Current school"}),Object(o.jsxs)("h3",{className:" font-bold",children:[null===(t=m.school_from_info)||void 0===t?void 0:t.school_code," - ",null===(a=m.school_from_info)||void 0===a?void 0:a.school_name]}),Object(o.jsxs)("h4",{className:"text-sm -mt-1 text-gray-500",children:[null===(l=m.school_from_info)||void 0===l?void 0:l.district_name," -"," ",null===(d=m.school_from_info)||void 0===d?void 0:d.sector_name]})]}),Object(o.jsx)("section",{className:"text-gray-500",children:Object(o.jsx)(c.o,{size:40})}),null===(h=m.requested_school_info)||void 0===h?void 0:h.map((function(e,t){return Object(o.jsxs)("section",{className:"border flex-1 pl-4 rounded hover:bg-gray-200 ".concat(0===t?"rounded-l-full rounded-r p-1 mr-2 ":" px-1 rounded mr-2 py-2","  ").concat(m.approved_school_id===e.school_code?"bg-green-600 text-white hover:bg-green-500":""),children:[Object(o.jsxs)("h6",{className:" font-light text-sm text-yellow-600",children:["Requested school ",t+1]}),Object(o.jsxs)("h4",{className:" font-bold",children:[null===e||void 0===e?void 0:e.school_code," - ",null===e||void 0===e?void 0:e.school_name]}),Object(o.jsxs)("h4",{className:"text-sm -mt-1 opacity-70",children:[e.district_name," - ",null===e||void 0===e?void 0:e.sector_name]})]},t)}))]}),Object(o.jsxs)("section",{className:"pt-2",children:[Object(o.jsx)("label",{className:"text-gray-500 inline-block pr-1",children:"Date: "})," ",Object(o.jsx)("b",{children:m.teacher_requested_transfer_date})]})]})]})]}),(O||x)&&Object(o.jsx)("div",{className:"animate__animated  animate__fadeIn animate__faster mt-2 border-t pt-2 grid grid-cols-2",children:[{title:"Transfer type",value:m.transfer_type},{title:"transfer_reason",value:m.transfer_reason},{title:"Requested transfer date",value:m.teacher_requested_transfer_date},{title:"Decision provided on",value:m.incoming_decision_date}].map((function(e,t){return e.value?Object(o.jsxs)("div",{className:"border px-2 py-1.5  flex items-center",children:[Object(o.jsxs)("span",{className:"text-gray-500",children:[e.title,": "]})," ",Object(o.jsx)("h6",{className:"font-bold text-black",children:e.value})]},t):null}))}),m.teacher_comment&&(null===(b=m.teacher_comment)||void 0===b?void 0:b.length)>=1&&Object(o.jsxs)("div",{className:"p-2 my-2 rounded border",children:[Object(o.jsx)("span",{className:"text-gray-500",children:"Transfer reason: "})," ",Object(o.jsx)("h6",{className:"font-bold text-black",children:m.teacher_comment})]}),p&&m.teacher_transfer_id&&"APPROVED"!==m.requested_status&&Object(o.jsx)("div",{className:"pt-4 text-right",children:Object(o.jsx)(n.a,{onClick:p.bind(undefined,m.teacher_transfer_id),theme:"danger-light",loading:f,children:"Remove transfer request"})}),null!==m.mayor_letter&&Object(o.jsx)("div",{className:"p-2 text-right",children:Object(o.jsx)("a",{href:"".concat(i.e,"/").concat(m.mayor_letter),target:"_blank",rel:"noreferrer",download:!0,children:Object(o.jsx)(n.a,{theme:"accent-light",children:"Download transfer letter"})})})]})}},176:function(e,t,a){"use strict";a.r(t),a.d(t,"OutgoingTransfers",(function(){return g}));var s=a(31),r=a(32),c=a(33),n=a(34),i=a(2),o=a.n(i),l=a(17),d=a(11),h=a(27),b=a(44),m=a(40),j=a(109),x=a(137),u=a(1),f={target:null,msg:""},p=function(e){Object(c.a)(a,e);var t=Object(n.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).loadingData=function(e,t){r.setState({loading:!0,selected_transfer_id:null,data:[]}),Object(d.w)({district_code:e,limit:r.state.limit,page:t},(function(e,a,s){r.setState({loading:!1,data:null!==a&&void 0!==a&&a.district_transfer_request?null===a||void 0===a?void 0:a.district_transfer_request:[],total:null!==a&&void 0!==a&&a.total_transfer?a.total_transfer:0,next:null!==a&&void 0!==a&&a.next?+(null===a||void 0===a?void 0:a.next):0,previous:null!==a&&void 0!==a&&a.previous?+(null===a||void 0===a?void 0:a.previous):0,error:e?{target:"main-error",msg:s}:f,page:t}),console.log({status:e,data:a,msg:s})}))},r.paginateData=function(e){var t;null!==(t=r.props.auth.district)&&void 0!==t&&t.district_code&&r.loadingData(r.props.auth.district.district_code,e)},r.state={loading:!1,error:f,data:[],limit:14,page:1,total:0,next:0,previous:0,selected_transfer_id:null},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.auth.district||!this.props.auth.district.district_code)return this.setState({error:{target:"main-error",msg:"There is no district assigned to you!"}});this.loadingData(this.props.auth.district.district_code,this.state.page)}},{key:"render",value:function(){var e=this,t=(this.state.total/this.state.limit).toFixed(0),a=this.state.data.find((function(t){return t.teacher_transfer_id===e.state.selected_transfer_id}));return Object(u.jsxs)(u.Fragment,{children:[null!==this.state.selected_transfer_id&&void 0!==a&&Object(u.jsx)(j.c,{backDrop:!0,theme:j.b.default,close:function(){return e.setState({selected_transfer_id:null})},backDropClose:!1,widthSizeClass:j.a.extraLarge,displayClose:!0,title:"Transfer details",padding:{title:!0,body:!1,footer:void 0},children:Object(u.jsxs)("div",{className:"border-t",children:[Object(u.jsxs)("div",{className:"p-4 text-gray-500",children:[Object(u.jsxs)("section",{children:["Transfer id:"," ",Object(u.jsx)("b",{className:"text-black",children:a.teacher_transfer_id})]}),Object(u.jsxs)("section",{children:["Teacher names:"," ",Object(u.jsx)("b",{className:"text-black",children:a.teacher_full_name})]}),Object(u.jsxs)("section",{children:["Teacher's Phone number:"," ",Object(u.jsx)("b",{className:"text-black",children:a.teacher_phone_number})]})]}),Object(u.jsx)(x.a,{expand:!0,transf:a})]})}),Object(u.jsxs)("div",{className:"container mx-auto p-2 flex items-center",children:[Object(u.jsx)(b.a,{className:"flex-1",children:"Outgoing transfers"}),Object(u.jsxs)("section",{className:"text-center p-1 bg-accent-800 bg-opacity-20 text-accent-900 px-4 rounded",children:[Object(u.jsx)("span",{className:"text-sm block text-gray-500 -mb-1",children:"Total:"}),Object(u.jsx)("h3",{className:"font-bold text-xl",children:this.state.total})]})]}),Object(u.jsxs)(h.a,{transparent:!0,children:[Object(u.jsxs)("table",{className:"w-full",children:[Object(u.jsx)("thead",{className:"text-left bg-white",children:Object(u.jsxs)("tr",{className:"bg-accent-900 bg-opacity-10",children:[Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"#"}),Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"Names"}),Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"School Code"}),Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"School name"}),Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position code"}),Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position name"}),Object(u.jsx)("th",{className:"p-2 border-gray-300 border",children:"Qualification"})]})}),Object(u.jsx)("tbody",{children:!0===this.state.loading?Object(u.jsx)("tr",{className:" ",children:Object(u.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(u.jsx)(m.a,{})})}):this.state.data.length<=0?Object(u.jsx)("tr",{children:Object(u.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(u.jsx)("h1",{className:"text-2xl text-gray-400",children:"No data found"})})}):this.state.data.map((function(t,a){var s,r;return Object(u.jsxs)("tr",{className:"bg-white cursor-pointer hover:bg-yellow-400 hover:bg-opacity-30",onClick:function(){return e.setState({selected_transfer_id:t.teacher_transfer_id})},children:[Object(u.jsx)("td",{className:"border p-2",children:a+1}),Object(u.jsx)("td",{className:"p-2 border",children:t.teacher_full_name}),Object(u.jsx)("td",{className:"p-2 border",children:null===(s=t.school_from_info)||void 0===s?void 0:s.school_code}),Object(u.jsx)("td",{className:"p-2 border",children:null===(r=t.school_from_info)||void 0===r?void 0:r.school_name}),Object(u.jsx)("td",{className:"p-2 border",children:t.position_code}),Object(u.jsx)("td",{className:"p-2 border",children:t.position_name}),Object(u.jsx)("td",{className:"p-2 border",children:t.qualification_name})]},a)}))})]}),Object(u.jsx)("div",{className:"flex gap-3 mx-auto",children:Array(+t).fill("0").map((function(t,a){return Object(u.jsx)("button",{className:"p-2 ".concat(e.state.page===a+1?"bg-accent-800 text-black font-bold":""," rounded-full bg-accent-800 bg-opacity-25"),onClick:e.paginateData.bind(e,a+1),children:a+1})}))})]})]})}}]),a}(o.a.Component),g=Object(l.b)((function(e){return{auth:e.auth}}),{})(p)}}]);
//# sourceMappingURL=33.fc966b3e.chunk.js.map