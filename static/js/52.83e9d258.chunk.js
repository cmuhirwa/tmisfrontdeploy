(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[52],{381:function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var r=s(19),i=s(20),c=s(21),a=s(22),n=s(4),l=s.n(n),o=s(16),d=s(36),h=s(13),u=s(382),j=s(23),_=s(53),p=s(25),m=s(27),b=s(47),x=s(1),f=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).componentDidMount=function(){i.props.district_code||i.loadDistricts(),void 0===i.props.school_code&&i.setState({current_school:!1})},i.loadDistricts=function(){i.state.districts.length<=0&&(i.setState({loading_districts:!0}),Object(h.L)((function(e,t,s){e?i.setState({loading_districts:!1,districts:t}):i.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},i.selectDistrict=function(e){i.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),i.reloadDistrictResurces(e.district_code)},i.reloadDistrictResurces=function(e){e&&(i.setState({loading_resource:!0}),i.props.FC_GetAssignAssets(e,(function(e,t){e?i.setState({loading_resource:!1}):i.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},i.clearError=function(){return i.setState({error:{msg:"",target:null}})},i.state={loading:!1,district_code:i.props.district_code?i.props.district_code:"",district_name:i.props.district_name?i.props.district_name:"",current_school:!0,selected_district:i.props.district_code?i.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},i}return Object(i.a)(s,[{key:"render",value:function(){var e,t,s,r,i,c=this;return"user-updates-success"===this.state.error.target?Object(x.jsx)(_.a,{className:"animate__animated animate__zoomIn ",children:Object(x.jsxs)("div",{className:"text-center py-10",children:[Object(x.jsx)(o.o,{className:"text-8xl text-green-600 mx-auto"}),Object(x.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(x.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(x.jsx)("br",{})," you can close the window and continue with other users"]}),Object(x.jsx)(j.a,{theme:"success-light",onClick:function(){c.props.close(),c.props.refreshApp&&c.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(x.jsxs)(x.Fragment,{children:["main-error"===this.state.error.target&&Object(x.jsx)(b.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(x.jsx)(b.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(x.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return c.setState({open_select_district:!1})}}),Object(x.jsx)(m.d,{backDrop:!0,backDropClose:!0,close:function(){return c.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:m.c.default,widthSizeClass:m.b.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(x.jsx)(p.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(x.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(x.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(x.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(x.jsx)("h6",{children:e.district_code}),Object(x.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(x.jsx)(j.a,{theme:"accent-light",size:"sm",onClick:c.selectDistrict.bind(c,e),children:"Select district"})]},t)}))})})]}),Object(x.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(x.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(x.jsx)(j.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(x.jsx)(_.a,{children:Object(x.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(x.jsx)("div",{className:"",children:Object(x.jsx)(o.c,{className:"text-6xl"})}),Object(x.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(x.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(x.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(x.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(x.jsx)("b",{children:null===(r=this.props.userDetails)||void 0===r?void 0:r.email})]})]})]})}),Object(x.jsx)("div",{className:"my-2 hidden",children:Object(x.jsx)(_.a,{children:Object(x.jsxs)("div",{className:"flex gap-3",children:[Object(x.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(x.jsx)(x.Fragment,{})}),Object(x.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(x.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(i=this.props)||void 0===i?void 0:i.school_name)}),Object(x.jsx)(j.a,{onClick:function(){return c.setState({current_school:!c.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(u.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{passport:!0,first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!0,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{passport:!0,first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!1,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){c.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){c.props.refreshApp&&c.props.refreshApp(),c.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(l.a.Component),O=Object(d.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.D})(f)},611:function(e,t,s){"use strict";s.r(t),s.d(t,"InternalTransferDDE",(function(){return x}));var r=s(19),i=s(20),c=s(21),a=s(22),n=s(4),l=s.n(n),o=s(36),d=s(13),h=s(23),u=s(53),j=s(47),_=s(39),p=s(381),m=s(1),b=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).CheckNidHandler=function(e){var t;if(e.preventDefault(),i.state.nid.length<=4)return i.setState({error:{target:"nid",msg:"NID or passport is required!"}});i.setState({loading:!0,user_found:null}),Object(d.Db)(i.state.nid,(function(e,t,s){e?i.setState({user_details:t,loading:!1,user_found:null!==t&&null!==t.user_id?"FOUND":"NOT-FOUND"}):i.setState({loading:!1,user_found:"NOT-FOUND"})}),(null===(t=i.props.auth.district)||void 0===t?void 0:t.district_code)||null)},i.clearError=function(){return i.setState({error:{msg:"",target:null}})},i.state={loading:!1,error:{msg:"",target:null},nid:"",user_details:null,user_found:null},i}return Object(i.a)(s,[{key:"render",value:function(){var e,t,s,r,i,c,a,n=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:" bg-white p-2 flex items-center",children:[null!==this.state.user_found&&Object(m.jsx)(h.a,{onClick:function(){return n.setState({user_found:null})},theme:"default",children:"Back"}),Object(m.jsxs)("h1",{className:"text-2xl font-bold pl-3",children:["Internal Transfer ","(".concat(null===(e=this.props.auth.district)||void 0===e?void 0:e.district_name,")")]})]}),"main-error"===this.state.error.target&&Object(m.jsx)(j.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(m.jsx)(j.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(m.jsxs)(u.a,{children:[Object(m.jsx)("form",{onSubmit:this.CheckNidHandler,children:Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("div",{className:"flex-1",children:Object(m.jsx)(_.a,{error:"nid"===this.state.error.target?this.state.error.msg:"",label:"Nid/Passport",name:"",onChange:function(e){return n.setState({nid:e.target.value})},placeholder:"Enter NID/Phone number",value:this.state.nid,disabled:this.state.loading})}),Object(m.jsx)("div",{className:"pt-8 pl-2",children:Object(m.jsx)(h.a,{loading:this.state.loading,type:"submit",children:"Check Id"})})]})}),null!==this.state.user_found&&Object(m.jsx)(m.Fragment,{children:"FOUND"===this.state.user_found&&null!==this.state.user_details&&null!==this.state.user_details.user_id?Object(m.jsx)("div",{children:null!==this.props.auth.school?Object(m.jsxs)("div",{className:"text-center py-4",children:[Object(m.jsx)("h1",{className:"text-2xl font-bold",children:"Teacher Already in the system and allocated to another school"}),Object(m.jsx)("p",{children:"For more info, call the DDE"})]}):Object(m.jsx)(p.a,{user_id:this.state.user_details.user_id,userDetails:{email:this.state.user_details.email?this.state.user_details.email:"",full_name:null!==(t=this.state.user_details)&&void 0!==t&&t.full_name?null===(s=this.state.user_details)||void 0===s?void 0:s.full_name:"",nid:null!==(r=this.state.user_details)&&void 0!==r&&r.nid?null===(i=this.state.user_details)||void 0===i?void 0:i.nid:"",staff_code:null!==(c=this.state.user_details)&&void 0!==c&&c.staff_code?null===(a=this.state.user_details)||void 0===a?void 0:a.staff_code:""},close:function(){return n.setState({user_found:null})}})}):Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"text-center p-4 rounded-lg bg-red-50 text-red-900",children:[Object(m.jsx)("h3",{className:"text-2xl font-bold",children:"No teacher found!"}),Object(m.jsx)("p",{children:"The NID you added does not exist in the system"})]})})})]})]})}}]),s}(l.a.Component),x=Object(o.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:d.D})(b)}}]);
//# sourceMappingURL=52.83e9d258.chunk.js.map