(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[41],{405:function(e,t,s){"use strict";var a=s(32),n=s(3),c=s(57),l=s(17),i=s(47),o=s(2),r=void 0;t.a=function(e){var t=e.permutation,s=e.more,d=void 0!==s&&s,b=e.approveUser,j=e.approveReb,u=e.userRejectPermutation,m=e.loading,x=void 0!==m&&m,h=e.loading_reject_permutation,p=e.close,g=Object(n.useState)(!1),O=Object(a.a)(g,2),f=O[0],v=O[1],N=!0===d||f,_=t.usersInfo.find((function(e){return e.user_id===t.user_one})),y=t.usersInfo.find((function(e){return e.user_id===t.user_two})),w=t.schools.find((function(e){return e.school_code===t.school_one})),S=t.schools.find((function(e){return e.school_code===t.school_two})),k=function(e,t){return void 0===e||void 0===t?Object(o.jsx)("div",{className:"p-2 text-center text-lg",children:"No users found"}):Object(o.jsxs)("div",{className:"flex-1 w-full rounded bg-white border",children:[Object(o.jsxs)("div",{className:"rounded m-1 border flex ".concat(!0===N?"":"items-center"),children:[Object(o.jsx)("section",{children:Object(o.jsx)(l.b,{className:"text-gray-400",size:N?80:30})}),Object(o.jsx)("div",{className:"flex-1 pl-2",children:[{label:"Names: ",value:e.full_name,more:!0,inline:!1},{label:"Staff code: ",value:e.staff_code,more:!1,inline:!0},{label:"NID: ",value:e.nid,more:!1,inline:!0},{label:"Sex: ",value:e.sex,more:!1,inline:!0},{label:"Phone number: ",value:e.phone_numbers,inline:!0,more:!1},{label:"Martial status: ",value:e.marital_status,inline:!0,more:!1}].map((function(e,t){return!1===e.more&&!1===N?null:e.value?Object(o.jsxs)("section",{className:"border-b ".concat(!0===e.inline?"flex py-1 items-center":""),children:[Object(o.jsx)("span",{className:"text-sm text-gray-500 block",children:null===e||void 0===e?void 0:e.label}),Object(o.jsx)("h2",{className:" ".concat(!1===e.inline?"-mt-1":"pl-2"," font-bold block "),children:null===e||void 0===e?void 0:e.value})]},t):null}))})]}),Object(o.jsxs)("div",{className:"rounded m-1 border flex items-center mt-3",children:[Object(o.jsx)("section",{className:"px-4",children:Object(o.jsx)(c.f,{className:"text-gray-400",size:N?50:20})}),Object(o.jsx)("div",{className:"flex-1",children:[{label:"School code: ",value:t.school_code,inline:!0,more:!0},{label:"School name: ",value:t.school_name,inline:!0,more:!1}].map((function(e,t){return!0===e.more&&!1===N?null:e.value?Object(o.jsxs)("section",{className:"border-b ".concat(!0===e.inline?"flex py-1 items-center":""),children:[Object(o.jsx)("span",{className:"text-sm text-gray-500 block",children:null===e||void 0===e?void 0:e.label}),Object(o.jsx)("h2",{className:" ".concat(!1===e.inline?"-mt-1":"pl-2"," font-bold block "),children:null===e||void 0===e?void 0:e.value})]},t):null}))})]})]})};return Object(o.jsxs)("div",{className:"bg-white p-2 mb-3 rounded animate__animated animate__zoomIn animate__faster",children:[p&&!x&&Object(o.jsx)("div",{className:"text-right pb-2 border-b mb-2",children:Object(o.jsx)(i.a,{className:"",onClick:p,theme:"danger-light",children:"Close"})}),Object(o.jsxs)("div",{className:"items-center flex flex-col md:flex-row cursor-pointer",onClick:v.bind(r,!N),children:[k(_,w),Object(o.jsx)("div",{className:"-mx-2 z-40 ",children:Object(o.jsx)(l.jb,{className:"rounded ".concat("Approved"===t.reb_status?"text-green-500":"text-accent-900"," "),size:50})}),k(y,S)]}),N&&Object(o.jsxs)("div",{className:"pt-3",children:[Object(o.jsx)("div",{className:"p-1 px-2 rounded mt-2 border grid lg:grid-cols-3 gap-1 ",children:[{label:"Permutation Code: ",value:t.permutation_code,inline:!0},{label:"Position: ",value:"".concat(t.position_code," - ").concat(t.position_name),inline:!0},{label:"Qualification name: ",value:t.qualification_name,inline:!0},{label:"Qualification name: ",value:t.role,inline:!0},{label:"Initiated date: ",value:t.user_one_date,inline:!0},{label:"Accepted date: ",value:t.user_two_date,inline:!0}].map((function(e,t){return Object(o.jsxs)("section",{className:"border-b border-l pl-2 ".concat(!0===e.inline?"flex py-1 items-center":""),children:[Object(o.jsx)("span",{className:"text-sm text-gray-500 block",children:null===e||void 0===e?void 0:e.label}),Object(o.jsx)("h2",{className:" ".concat(!1===e.inline?"-mt-1":"pl-2"," font-bold block "),children:null===e||void 0===e?void 0:e.value})]},t)}))}),Object(o.jsxs)("div",{className:"grid grid-cols-2 pt-3 items-center",children:[Object(o.jsxs)("div",{className:"flex gap-1",children:[t.reb_status&&Object(o.jsxs)("section",{className:"flex items-center gap-1 px-2 py-0.5 rounded-lg  ".concat("Accepted"===t.permutation_status?"bg-green-100 text-green-900":"bg-accent-400 text-accent-900"),children:[Object(o.jsx)("span",{className:"text-xs opacity-70",children:"User status"}),Object(o.jsx)("h5",{className:"text  block  font-bold ",children:t.permutation_status})]}),t.reb_status&&Object(o.jsxs)("section",{className:"flex items-center gap-1 px-2 py-0.5 rounded-lg  ".concat("Approved"===t.reb_status?"bg-green-100 text-green-900":"bg-accent-400 text-accent-900"),children:[Object(o.jsx)("span",{className:"text-xs opacity-70",children:"REB status"}),Object(o.jsx)("h5",{className:"text  block  font-bold ",children:t.reb_status})]})]}),Object(o.jsxs)("div",{className:"text-right grid gap-2",children:[b&&Object(o.jsx)(i.a,{onClick:b.bind(r,t.permutation_id),loading:x,size:"lg",children:"Accept permutation"}),u&&Object(o.jsx)(i.a,{onClick:u.bind(r,t.permutation_id),loading:h,size:"lg",theme:"danger-light",children:"Reject permutation"}),j&&Object(o.jsx)(o.Fragment,{children:"Approved"!==t.reb_status&&Object(o.jsx)(i.a,{onClick:j.bind(r,t.permutation_id),loading:x,size:"lg",children:"Approve permutation"})})]})]})]})]})}},551:function(e,t,s){"use strict";s.r(t),s.d(t,"ActiveTabPermutation",(function(){return a})),s.d(t,"RebAprovePermutation",(function(){return f}));var a,n=s(7),c=s(28),l=s(29),i=s(30),o=s(31),r=s(3),d=s.n(r),b=s(27),j=s(16),u=s(47),m=s(52),x=s(79),h=s(48),p=s(405),g=s(2);!function(e){e.Approved="Approved",e.Pending="Pending",e.Rejected="Rejected"}(a||(a={}));var O=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(e){var l;return Object(c.a)(this,s),(l=t.call(this,e)).componentDidMount=function(){l.loadData(1,8,l.state.tab)},l.loadData=function(e,t,s){l.setState({loading:!0,page:e}),Object(j.kb)(e+"",t+"",s,(function(e,t,s){if(!0===e&&null!==t){var a=Math.ceil((t.total_users?+t.total_users:0)/8);console.log({total_pages:a}),l.setState({error:{target:null,msg:""},loading:!1,permutations:null===t||void 0===t?void 0:t.permutations,total_pagination:a}),console.log(t)}else l.setState({error:{target:"main-error",msg:s},loading:!1,permutations:[]})}))},l.approveRebPermutation=function(e){l.setState({loading_approve:e+""}),Object(j.jb)(e+"",(function(t,s){!0===t?l.setState({loading_approve:"",error:{target:"main-success",msg:""},permutations:l.state.permutations.map((function(t){return t.permutation_id===e+""?Object(n.a)(Object(n.a)({},t),{},{reb_status:"Approved"}):t}))}):l.setState({loading_approve:"",error:{msg:s,target:"main-error"},permutations:[]})}))},l.setTab=function(e){console.log(e),e!==l.state.tab&&(l.setState({tab:e,page:1}),l.loadData(1,l.state.limit,e))},l.state={loading:!0,permutations:[],selected_permutation:"",error:{target:null,msg:""},page:1,limit:8,total_pagination:0,loading_approve:"",tab:a.Pending},l}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return!0===this.state.loading?Object(g.jsxs)("div",{className:"py-8 text-center",children:[Object(g.jsx)(h.a,{}),Object(g.jsx)("h4",{className:"text-lg pt-2 text-gray-600",children:"Loading permutations..."})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(m.a,{className:"p-3 flex items-center",children:[Object(g.jsx)("section",{className:"",children:Object(g.jsx)(x.a,{children:"Permutations"})}),Object(g.jsx)("section",{className:"flex-1",children:Object(g.jsxs)("section",{className:"p-1 bg-yellow-600 bg-opacity-20 rounded-lg text-sm w-80 mx-auto flex",children:[Object(g.jsx)("button",{className:"px-2 flex-1 ".concat(this.state.tab===a.Pending?"bg-yellow-600 text-white":""," py-1 rounded-lg"),onClick:this.setTab.bind(this,a.Pending),children:"Pending"}),Object(g.jsx)("button",{className:"px-2 flex-1 ".concat(this.state.tab===a.Approved?"bg-yellow-600 text-white":""," py-1 rounded-lg"),onClick:this.setTab.bind(this,a.Approved),children:"Approved"}),Object(g.jsx)("button",{className:"px-2 flex-1 ".concat(this.state.tab===a.Rejected?"bg-yellow-600 text-white":""," py-1 rounded-lg"),onClick:this.setTab.bind(this,a.Rejected),children:"Rejected"})]})}),Object(g.jsx)("section",{children:Object(g.jsx)(u.a,{theme:"accent-light",children:"Approve all permutation"})})]}),Object(g.jsx)("div",{className:"px-2 container mx-auto",children:Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"p-1 rounded",children:Object(g.jsxs)("table",{className:" w-full rounded",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"bg-white",children:[Object(g.jsx)("th",{className:"border p-2 text-left",children:"#"}),Object(g.jsxs)("th",{className:"border p-2 text-left bg-blue-50",children:["Candidate 1"," ",Object(g.jsx)("span",{className:"text-xs bg-yellow-500 px-2 py-0.5 rounded-full",children:"Initiator"})]}),Object(g.jsx)("th",{className:"border p-2 text-left bg-blue-50",children:"School 1"}),Object(g.jsx)("th",{className:"border p-2 text-left bg-blue-50",children:"Candidate 2"}),Object(g.jsx)("th",{className:"border p-2 text-left bg-blue-50",children:"School 2"}),Object(g.jsx)("th",{className:"border p-2 text-left",children:"Users status"}),Object(g.jsx)("th",{className:"border p-2 text-left",children:"Dates"})]})}),Object(g.jsxs)("tbody",{children:[this.state.permutations.length<=0?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:8,className:"py-10 text-center",children:Object(g.jsx)("h3",{className:"text-5xl text-gray-400 font-bold",children:"No permutation found!"})})}):this.state.permutations.map((function(t,s){var a=t.usersInfo.find((function(e){return e.user_id===t.user_one})),n=t.usersInfo.find((function(e){return e.user_id===t.user_two})),c=t.schools.find((function(e){return e.school_code===t.school_one})),l=t.schools.find((function(e){return e.school_code===t.school_two}));return e.state.selected_permutation===t.permutation_id?Object(g.jsx)("tr",{className:"",children:Object(g.jsx)("td",{colSpan:30,className:"pt-1",children:Object(g.jsx)(p.a,{more:!0,permutation:t,approveReb:e.approveRebPermutation,loading:e.state.loading_approve===t.permutation_id,close:function(){return e.setState({selected_permutation:""})}})})},s):Object(g.jsxs)(r.Fragment,{children:[Object(g.jsx)("tr",{children:Object(g.jsx)("td",{className:"p-1"})}),Object(g.jsxs)("tr",{className:"hover:bg-yellow-500 hover:bg-opacity-20 cursor-pointer bg-white my-2",onClick:function(){return e.setState({selected_permutation:t.permutation_id+""})},children:[Object(g.jsx)("td",{className:"border p-2 bg-white",children:s+1}),Object(g.jsxs)("td",{className:"border p-2 bg-blue-100 bg-opacity-5",title:"Candidate 1 (Initiator)",children:[Object(g.jsx)("h6",{className:"font-bold",children:null===a||void 0===a?void 0:a.full_name}),Object(g.jsx)("span",{title:"Staff code",className:"text-sm text-gray-400",children:null===a||void 0===a?void 0:a.staff_code})]}),Object(g.jsxs)("td",{className:"border p-2 bg-blue-200 bg-opacity-5",title:"School for Candidate 1 (Initiator)",children:[Object(g.jsx)("h6",{className:"font-bold",children:null===c||void 0===c?void 0:c.school_name}),Object(g.jsx)("span",{title:"School code",className:"text-sm text-gray-400",children:t.school_one})]}),Object(g.jsxs)("td",{className:"border p-2 bg-indigo-100 bg-opacity-5 border-l-4 border-l-",title:"Candidate 2",children:[Object(g.jsx)("h6",{className:"font-bold",children:null===n||void 0===n?void 0:n.full_name}),Object(g.jsx)("span",{title:"Staff code",className:"text-sm text-gray-400",children:null===n||void 0===n?void 0:n.staff_code})]}),Object(g.jsxs)("td",{className:"border p-2 bg-indigo-200 bg-opacity-5",title:"School for Candidate 2",children:[Object(g.jsx)("h6",{className:"font-bold",children:null===l||void 0===l?void 0:l.school_name}),Object(g.jsx)("span",{title:"School code",className:"text-sm text-gray-400",children:t.school_two})]}),Object(g.jsxs)("td",{className:"border p-2 bg-white",children:[Object(g.jsxs)("h6",{className:"text-sm",children:["User: ",Object(g.jsx)("b",{children:t.permutation_status})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("h6",{className:"text-sm",children:["REB:"," ",Object(g.jsx)("b",{className:"".concat("Approved"===t.reb_status?"text-green-500":""),children:t.reb_status})]})]}),Object(g.jsxs)("td",{className:"border p-2 bg-white",children:[Object(g.jsxs)("h6",{className:"text-sm",children:["Created: ",Object(g.jsx)("b",{children:t.user_one_date})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("h6",{className:"text-sm",children:["User 2: ",Object(g.jsx)("b",{children:t.user_two_date})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("h6",{className:"text-sm",children:["REB: ",Object(g.jsx)("b",{children:t.user_two_date})]})]})]})]},s)})),this.state.permutations.length>=1&&Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:9,className:"pt-4",children:Object(g.jsx)("div",{className:"flex gap-3 mx-auto text-center justify-center place-items-center",children:this.state.total_pagination>=2&&new Array(this.state.total_pagination+1).fill(0).map((function(t,s){return 0===s?null:Object(g.jsx)("button",{className:"".concat(s===e.state.page?"bg-yellow-600 text-white":"bg-yellow-600 bg-opacity-10 hover:bg-opacity-40","  font-bold rounded-full w-12 h-10"),onClick:function(){return e.loadData(s,e.state.limit,e.state.tab)},disabled:s===e.state.page,children:s},s)}))})})})]})]})})})})]})}}]),s}(d.a.Component),f=Object(b.b)((function(e){return{auth:e.auth}}),{})(O)}}]);
//# sourceMappingURL=41.3d03f27f.chunk.js.map