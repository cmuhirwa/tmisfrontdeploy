{"version":3,"sources":["containers/DisabledUsers/DisabledUsers.tsx"],"names":["_DisabledUsers","props","componentDidMount","startApp","setState","loading","error","target","msg","FC_GetDisabledUsers","status","data","state","search","selected_user","RequestsList","this","school_code","district_code","position_code","school_name","district_name","full_name","first_name","last_name","email","middle_name","nid","phone_numbers","staff_code","className","user_id","userDetails","close","theme","fixed","label","name","type","onChange","e","value","placeholder","size","length","colSpan","map","req","i","onClick","React","Component","DisabledUsers","connect","auth","basic","FC_DisableUser"],"mappings":"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","file":"static/js/62.50d7c704.chunk.js","sourcesContent":["import React, { Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Auth,\n  Basic,\n  FC_DisableUser,\n  FC_GetDisabledUsers,\n  DisabledUser,\n} from \"../../actions\";\nimport Alert from \"../../components/Alert/Alert\";\nimport Button from \"../../components/Buttons/Button\";\nimport DashboardContainer from \"../../components/DashboardContainer/DashboardContainer\";\nimport Heading from \"../../components/Heading/Heading\";\nimport TextInput from \"../../components/Inputs/TextInput\";\nimport Loading from \"../../components/Loading/Loading\";\nimport { StoreState } from \"../../reducers\";\nimport { search } from \"../../utils/functions\";\nimport { AssignStaffToSchool } from \"../UserProfile/AssignStaffToSchool\";\n\n// props for the component\ninterface AppProps {\n  auth: Auth;\n}\n\ninterface AppState {\n  loading: boolean;\n  error: {\n    target: \"main-success\" | \"main-error\" | null;\n    msg: string;\n  };\n  data: DisabledUser[];\n  search: string;\n  selected_user: DisabledUser | null;\n}\n\nclass _DisabledUsers extends React.Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n\n    this.state = {\n      data: [],\n      error: {\n        target: null,\n        msg: \"\",\n      },\n      search: \"\",\n      loading: true,\n      selected_user: null,\n    };\n  }\n\n  componentDidMount = () => {\n    this.startApp();\n  };\n\n  startApp = () => {\n    this.setState({\n      loading: true,\n      error: {\n        target: null,\n        msg: \"\",\n      },\n    });\n\n    FC_GetDisabledUsers((status, data, msg) => {\n      if (status === true && data !== null) {\n        // console.log({ status, data, msg });\n        this.setState({\n          loading: false,\n          data: data,\n        });\n      } else {\n        this.setState({\n          loading: false,\n          error: {\n            msg: msg,\n            target: \"main-error\",\n          },\n        });\n      }\n    });\n  };\n\n  render() {\n    let RequestsList: DisabledUser[] = search(\n      this.state.data,\n      this.state.search,\n      {\n        school_code: true,\n        district_code: true,\n        position_code: true,\n        school_name: true,\n        district_name: true,\n        full_name: true,\n        first_name: true,\n        last_name: true,\n        email: true,\n        middle_name: true,\n        nid: true,\n        phone_numbers: true,\n        staff_code: true,\n      }\n    );\n\n    if (this.state.loading === true)\n      return (\n        <div className=\"p-8 text-center\">\n          <div className=\"mx-auto\">\n            <Loading />\n          </div>\n        </div>\n      );\n\n    if (\n      this.state.selected_user !== null &&\n      this.state.selected_user.user_id !== null\n    )\n      return (\n        <AssignStaffToSchool\n          user_id={this.state.selected_user.user_id}\n          // userInfo={this.state.userInfo}\n          userDetails={{\n            email: this.state.selected_user.email + \"\",\n            full_name: this.state.selected_user.full_name + \"\",\n            nid: this.state.selected_user.nid + \"\",\n            staff_code: this.state.selected_user.staff_code + \"\",\n          }}\n          close={() =>\n            this.setState({\n              selected_user: null,\n            })\n          }\n        />\n      );\n\n    return (\n      <Fragment>\n        <>\n          {this.state.error.target === \"main-success\" && (\n            <Alert theme=\"success\" fixed>\n              {this.state.error.msg}\n            </Alert>\n          )}\n\n          {this.state.error.target === \"main-success\" && (\n            <Alert theme=\"success\" fixed>\n              {this.state.error.msg}\n            </Alert>\n          )}\n\n          <DashboardContainer>\n            <div className=\"flex items-center\">\n              <div className=\"flex-1\">\n                <Heading>Disabled users</Heading>\n              </div>\n            </div>\n\n            <div className=\"mt-3\">\n              <div className=\"border border-t mt-2 mb-1 flex items-center pl-3 pr-2 rounded\">\n                <div className=\"flex-1 pr-2\">\n                  <TextInput\n                    error=\"\"\n                    label=\"Search\"\n                    name=\"\"\n                    type=\"search\"\n                    onChange={(e) => this.setState({ search: e.target.value })}\n                    placeholder=\"Search by district name, staff code\"\n                    value={this.state.search}\n                    size=\"sm\"\n                  />\n                </div>\n\n                <div className=\"p-2 px-3 ml-3 bg-accent-800 bg-opacity-30 rounded\">\n                  <label className=\"\">Results:</label>\n                  <h4 className=\"text-2xl -mt-1 font-bold\">\n                    {RequestsList.length}\n                  </h4>\n                </div>\n              </div>\n              <table className=\"w-full text-left table-auto\">\n                <thead>\n                  <tr>\n                    <th className=\"p-2 border\">#</th>\n                    <th className=\"p-2 border\">NID</th>\n                    <th className=\"p-2 border\">First name</th>\n                    <th className=\"p-2 border\">Last name</th>\n                    <th className=\"p-2 border\">Middle name</th>\n                    <th className=\"p-2 border\">Full name</th>\n                    <th className=\"p-2 border\">Phone number</th>\n                    <th className=\"p-2 border\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {RequestsList.length <= 0 ? (\n                    <tr>\n                      <td\n                        colSpan={8}\n                        className=\"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center\"\n                      >\n                        <Heading size=\"md\" className=\"opacity-60 font-light\">\n                          No results found\n                        </Heading>\n                      </td>\n                    </tr>\n                  ) : (\n                    RequestsList.map((req, i) => {\n                      return (\n                        <Fragment key={i}>\n                          <tr className=\"group border rounded hover:bg-blue-500 hover:bg-opacity-20 text-sm\">\n                            <td className=\"p-2 border\" key={i}>\n                              {i + 1}\n                            </td>\n                            <td className=\"p-2 border\">{req.nid}</td>\n                            <td className=\"p-2 border\">{req.first_name}</td>\n                            <td className=\"p-2 border\">{req.middle_name}</td>\n                            <td className=\"p-2 border\">{req.last_name}</td>\n                            <td className=\"p-2 border\">{req.full_name}</td>\n                            <td className=\"p-2 border\">{req.phone_numbers}</td>\n                            <td className=\" text-center border\">\n                              <Button\n                                size=\"sm\"\n                                theme=\"accent-light\"\n                                className=\"w-full\"\n                                onClick={() =>\n                                  this.setState({ selected_user: req })\n                                }\n                              >\n                                Open profile\n                              </Button>\n                            </td>\n                          </tr>\n                        </Fragment>\n                      );\n                    })\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </DashboardContainer>\n        </>\n      </Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = ({\n  auth,\n  basic,\n}: StoreState): { auth: Auth; basic: Basic } => {\n  return { auth: auth, basic: basic };\n};\n\nexport const DisabledUsers = connect(mapStateToProps, { FC_DisableUser })(\n  _DisabledUsers\n);\n"],"sourceRoot":""}