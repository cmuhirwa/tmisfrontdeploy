(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[1],{385:function(e,t,s){"use strict";s.d(t,"a",(function(){return x}));var o=s(19),i=s(20),a=s(21),r=s(22),c=s(4),l=s.n(c),n=s(15),d=s(36),h=s(13),_=s(386),p=s(23),u=s(53),m=s(26),g=s(27),j=s(47),b=s(1),f=function(e){Object(a.a)(s,e);var t=Object(r.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).componentDidMount=function(){i.props.district_code||i.loadDistricts(),void 0===i.props.school_code&&i.setState({current_school:!1})},i.loadDistricts=function(){i.state.districts.length<=0&&(i.setState({loading_districts:!0}),Object(h.L)((function(e,t,s){e?i.setState({loading_districts:!1,districts:t}):i.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},i.selectDistrict=function(e){i.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),i.reloadDistrictResurces(e.district_code)},i.reloadDistrictResurces=function(e){e&&(i.setState({loading_resource:!0}),i.props.FC_GetAssignAssets(e,(function(e,t){e?i.setState({loading_resource:!1}):i.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},i.clearError=function(){return i.setState({error:{msg:"",target:null}})},i.state={loading:!1,district_code:i.props.district_code?i.props.district_code:"",district_name:i.props.district_name?i.props.district_name:"",current_school:!0,selected_district:i.props.district_code?i.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},i}return Object(i.a)(s,[{key:"render",value:function(){var e,t,s,o,i,a=this;return"user-updates-success"===this.state.error.target?Object(b.jsx)(u.a,{className:"animate__animated animate__zoomIn ",children:Object(b.jsxs)("div",{className:"text-center py-10",children:[Object(b.jsx)(n.o,{className:"text-8xl text-green-600 mx-auto"}),Object(b.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(b.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(b.jsx)("br",{})," you can close the window and continue with other users"]}),Object(b.jsx)(p.a,{theme:"success-light",onClick:function(){a.props.close(),a.props.refreshApp&&a.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(b.jsxs)(b.Fragment,{children:["main-error"===this.state.error.target&&Object(b.jsx)(j.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(b.jsx)(j.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(b.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return a.setState({open_select_district:!1})}}),Object(b.jsx)(g.d,{backDrop:!0,backDropClose:!0,close:function(){return a.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:g.c.default,widthSizeClass:g.b.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(b.jsx)(m.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(b.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(b.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(b.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(b.jsx)("h6",{children:e.district_code}),Object(b.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(b.jsx)(p.a,{theme:"accent-light",size:"sm",onClick:a.selectDistrict.bind(a,e),children:"Select district"})]},t)}))})})]}),Object(b.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(b.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(b.jsx)(p.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(b.jsx)(u.a,{children:Object(b.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)(n.c,{className:"text-6xl"})}),Object(b.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(b.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(b.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(b.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(b.jsx)("b",{children:null===(o=this.props.userDetails)||void 0===o?void 0:o.email})]})]})]})}),Object(b.jsx)("div",{className:"my-2 hidden",children:Object(b.jsx)(u.a,{children:Object(b.jsxs)("div",{className:"flex gap-3",children:[Object(b.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(b.jsx)(b.Fragment,{})}),Object(b.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(b.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(i=this.props)||void 0===i?void 0:i.school_name)}),Object(b.jsx)(p.a,{onClick:function(){return a.setState({current_school:!a.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(_.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{passport:!0,first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{passport:!0,first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!1,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){a.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){a.props.refreshApp&&a.props.refreshApp(),a.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(l.a.Component),x=Object(d.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.D})(f)},386:function(e,t,s){"use strict";s.d(t,"a",(function(){return N}));var o=s(41),i=s(9),a=s(19),r=s(20),c=s(21),l=s(22),n=s(4),d=s.n(n),h=s(15),_=s(36),p=s(13),u=s(47),m=s(53),g=s(139),j=s(39),b=s(23),f=s(92),x=s(26),v=s(68),O=s(16),S=s(1),y=function(e){Object(c.a)(s,e);var t=Object(l.a)(s);function s(e){var o,i;return Object(a.a)(this,s),(i=t.call(this,e)).submitLogin=function(e){var t;if(e.preventDefault(),i.props.current_position&&i.props.school&&i.props.current_position===i.state.position_id&&i.state.school_code===(null===(t=i.props.school)||void 0===t?void 0:t.school_id))return i.setState({error:{target:"position_id",msg:"The selected position is the same as the current position of this user on this school"}});if("REGISTER"===i.props.assignType){if(""!==i.state.nid){if(16!==i.state.nid.length)return i.setState({error:{target:"nid",msg:"NID must be 16 digits."}});if(!Object(O.j)(i.state.nid))return i.setState({error:{target:"nid",msg:"NID must be digits only."}})}if((""===i.state.nid||null===i.state.nid)&&(""===i.state.passport||null===i.state.passport)&&16!==i.state.nid.length)return i.setState({error:{target:"nid",msg:"Please provide an nid or passport"}});if(!0===i.props.required.phone_numbers&&i.state.phone_numbers.length<=3)return i.setState({error:{target:"phone_numbers",msg:"Required"}});if(!0===i.props.required.first_name&&i.state.first_name.length<=3)return i.setState({error:{target:"first_name",msg:"Required"}});if(!0===i.props.required.middle_name&&i.state.middle_name.length<=3)return i.setState({error:{target:"middle_name",msg:"Required"}});if(!0===i.props.required.last_name&&i.state.last_name.length<=3)return i.setState({error:{target:"last_name",msg:"Required"}});if(!0===i.props.required.full_name&&i.state.full_name.length<=3)return i.setState({error:{target:"full_name",msg:"Required"}})}if(!0===i.props.required.school_code&&""===i.state.school_code)return i.setState({error:{target:"school_code",msg:"Required"}});if(!0===i.props.required.role_id&&""===i.state.role_id)return i.setState({error:{target:"role_id",msg:"Required"}});if(null===i.props.basic.academic_calender)return i.setState({error:{target:"main-error",msg:"You have no academic selected, Please refresh the page."}});if(!0===i.props.required.position_id&&""===i.state.position_id)return i.setState({error:{target:"position_id",msg:"Required"}});if(!0===i.props.required.start_date_in_the_school&&""===i.state.start_date_in_the_school)return i.setState({error:{target:"start_date_in_the_school",msg:"Required"}});if(i.props.select_district_active&&!0===i.props.select_district_active&&i.state.district_code.length<=0&&null===i.props.auth.school)return i.setState({error:{target:"district_list_select",msg:"Required"}});var s,o,a=i.props.assignType;"REGISTER"!==i.props.assignType&&(null!==(s=i.props.school)&&void 0!==s&&s.school_id&&(null===(o=i.props.school)||void 0===o?void 0:o.school_id)===i.state.school_code&&(a="UPDATE_POSITION"));var r={role_id:i.state.role_id,country_id:i.state.country_id,district_code:i.state.district_code,sector_code:i.state.sector_code,school_code:i.state.school_code,qualification_id:i.state.qualification_id,academic_year_id:i.props.basic.academic_calender.academic_year_id,stakeholder_id:i.state.stakeholder_id,start_date_in_the_school:"",hired_date:i.state.start_date_in_the_school,position_code:i.state.position_id,user_id:i.props.user_id,first_name:i.state.first_name,last_name:i.state.last_name,full_name:i.state.full_name,middle_name:i.state.middle_name,nid:i.state.nid,phone_numbers:i.state.phone_numbers,key:a};i.setState({loading:!0}),Object(p.j)(r,(function(e,t){!0===e?(i.setState({loading:!1,error:{target:"main-success-register",msg:"Staff was added successfully"}}),i.props.success(r)):i.setState({loading:!1,error:{target:"main-error",msg:t}}),setTimeout((function(){i.setState({error:{target:null,msg:""}})}),3e3)}))},i.state={loading_assets:!0,loading:!1,select_school_open:!1,select_sector_open:!1,select_role_open:!1,select_district_open:!1,select_position_open:!1,error:{target:null,msg:""},district_code:i.props.district_id,sector_code:"",school_code:i.props.school?i.props.school.school_id:"",academic_year_id:"",stakeholder_id:"",role_id:"",country_id:"",start_date_in_the_school:"",position_id:i.props.position_code?i.props.position_code:"",qualification_id:void 0===i.props.qualification_id?"":i.props.qualification_id,first_name:"",last_name:"",full_name:"",middle_name:"",nid:i.props.nid_value?i.props.nid_value:"",passport:i.props.passport_value?i.props.passport_value:"",phone_numbers:"",loading_positions_schools:!1,school_posts:null,assignType:i.props.assignType,loading_districts:!1,district_list:[],district_name:null!==(o=i.props.auth.school)&&void 0!==o&&o.school_code?i.props.auth.school.school_code.slice(0,2):"",loading_assigning_data:!1},i}return Object(r.a)(s,[{key:"getDistrictAssets",value:function(e){var t=this;this.setState({loading_assigning_data:!0}),this.props.FC_GetAssignAssets(e,(function(e,s){!0===e?t.setState({error:{target:null,msg:""},loading_assigning_data:!1,school_code:"",select_school_open:!0}):t.setState({error:{target:"main-error",msg:s},loading_assigning_data:!1,school_code:"",select_school_open:!0})}))}},{key:"componentDidMount",value:function(){var e=this;console.log(this.props.auth.school?this.props.auth.school.school_code.slice(0,2):"");var t,s="";(this.props.auth.district&&(s=this.props.auth.district.district_code),null===this.props.auth.district&&this.props.auth.school&&(s=this.props.auth.school.school_code.slice(0,2)),this.setState({district_code:s}),this.getDistrictAssets(s),void 0!==this.props.school&&void 0!==this.props.only_post_for_school)&&this.loadSchoolPosts(null===(t=this.props.school)||void 0===t?void 0:t.school_id);this.props.select_district_active&&!0===this.props.select_district_active&&(this.setState({loading_districts:!0}),Object(p.L)((function(t,s,o){!0===t?e.setState({loading_districts:!1,district_list:s}):e.setState({error:{target:"district_list_select",msg:o},loading_districts:!1})})))}},{key:"loadSchoolPosts",value:function(e){var t,s,o=this;void 0!==this.props.only_post_for_school&&(null!==(t=this.props.basic.academic_calender)&&void 0!==t&&t.academic_year_id&&(this.setState({loading_positions_schools:!0}),Object(p.nb)(e,null===(s=this.props.basic.academic_calender)||void 0===s?void 0:s.academic_year_id,(function(e,t,s){console.log({status:e,data:t,msg:s}),!0===e?o.setState({loading_positions_schools:!1,school_posts:t}):o.setState({loading_positions_schools:!1,school_posts:null,error:{target:"main-error",msg:"Failed to load positions for this schools"}})}))))}},{key:"componentDidUpdate",value:function(e){var t,s;(null===(t=e.school)||void 0===t?void 0:t.school_id)===(null===(s=this.props.school)||void 0===s?void 0:s.school_id)&&e.district_id===this.props.district_id||(void 0!==this.props.school?(this.setState({school_code:this.props.school.school_id,position_id:"",select_school_open:!1}),this.loadSchoolPosts(this.props.school.school_id)):this.setState({school_code:"",position_id:"",select_position_open:!1,select_school_open:!0}))}},{key:"render",value:function(){var e,t,s,a=this;if(!0===this.props.basic.assign_teacher_assets.loading||null===this.props.basic.assign_teacher_assets.data)return Object(S.jsx)(m.a,{children:Object(S.jsx)("div",{className:"py-6 mx-auto text-center",children:Object(S.jsx)(x.a,{})})});var r=this.props.basic.assign_teacher_assets.data,c=this.props.basic.assign_teacher_assets.data.schools.find((function(e){return e.school_code===a.state.school_code})),l=null!==this.props.auth.school?"".concat(this.props.auth.school.school_code," - ").concat(this.props.auth.school.school_name,"  "):void 0!==c?"".concat(c.school_code," - ").concat(c.school_name," "):"Select a school",n=r.sectors.find((function(e){return e.sector_code===a.state.sector_code})),d=void 0!==n?n.sector_name:"",_=r.roles.find((function(e){return e.role_id===a.state.role_id})),p=void 0!==_?_.role:"",O=r.positions.find((function(e){return e.position_code===a.state.position_id})),y=void 0!==O?"".concat(O.position_code," - ").concat(O.position_name," - ").concat(O.qualification_name):"",N=null===this.props.auth.school?this.props.basic.assign_teacher_assets.data.schools.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{school_name:"".concat(e.school_code," - ").concat(e.school_name,"  ").concat(e.school_category)})})):[Object(i.a)(Object(i.a)({},this.props.auth.school),{},{school_name:"".concat(this.props.auth.school.school_code," - ").concat(this.props.auth.school.school_name,"  ")})];return"main-success-register"===this.state.error.target?Object(S.jsx)(m.a,{className:"bg-green-100 py-10 ",children:Object(S.jsxs)("div",{className:"text-center",children:[Object(S.jsx)("h1",{className:"text-8xl text-green-600 inline-block",children:Object(S.jsx)(h.o,{})}),Object(S.jsx)("h2",{className:"text-2xl font-bold text-green-900",children:"Candidate has been added to the system"}),Object(S.jsx)("p",{className:"pb-3 text-lg",children:this.state.error.msg}),Object(S.jsxs)("p",{className:"pb-4 opacity-50",children:["The user ",Object(S.jsx)("b",{children:this.state.nid})," is now registered"]}),Object(S.jsx)(b.a,{theme:"success",onClick:function(){return a.setState({error:{target:null,msg:""}})},children:"Add another teacher"})]})}):Object(S.jsxs)(S.Fragment,{children:["main-error"===this.state.error.target&&Object(S.jsx)(u.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(S.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(S.jsx)(m.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(S.jsxs)("form",{onSubmit:this.submitLogin,children:[Object(S.jsxs)("div",{className:"p-2 flex flex-wrap",children:["REGISTER"===this.props.assignType&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"border-b-2 w-full my-2",children:Object(S.jsx)(f.a,{size:"sm",children:"User information"})}),this.props.formAccess.nid&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"NID/Passport",name:"nid",type:"text",max:16,onChange:function(e){a.setState({nid:e.target.value,error:{target:null,msg:""}})},value:this.state.nid,error:"nid"===this.state.error.target?this.state.error.msg:"",placeholder:"National ID",className:"p-2"})}),this.props.formAccess.passport&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"Passport",name:"passport",type:"text",max:16,onChange:function(e){a.setState({passport:e.target.value,error:{target:null,msg:""}})},value:this.state.passport,error:"passport"===this.state.error.target?this.state.error.msg:"",placeholder:"Passport",className:"p-2"})}),this.props.formAccess.phone_numbers&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"Phone number",name:"phone_numbers",type:"number",onChange:function(e){e.target.value.length<=10&&a.setState({phone_numbers:e.target.value,error:{target:null,msg:""}})},value:this.state.phone_numbers,error:"phone_numbers"===this.state.error.target?this.state.error.msg:"",placeholder:"0700000000",className:"p-2"})}),this.props.formAccess.first_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/3 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"First name (Irinyarwanda)",name:"first_name",onChange:function(e){return a.setState({first_name:e.target.value,full_name:"".concat(null!==e.target.value?e.target.value:""," ").concat(null!==a.state.middle_name?a.state.middle_name:""," ").concat(null!==a.state.last_name?a.state.last_name:""),error:{target:null,msg:""}})},value:this.state.first_name,error:"first_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Ex: KAMANA",className:"p-2"})}),this.props.formAccess.middle_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/3 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"Middle name",name:"middle_name",onChange:function(e){return a.setState({middle_name:e.target.value,full_name:"".concat(null!==a.state.first_name?a.state.first_name:""," ").concat(null!==e.target.value?e.target.value:""," ").concat(null!==a.state.last_name?a.state.last_name:""),error:{target:null,msg:""}})},value:this.state.middle_name,error:"middle_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Middle name",className:"p-2"})}),this.props.formAccess.last_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/3 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"Last name",name:"last_name",onChange:function(e){return a.setState({last_name:e.target.value,full_name:"".concat(null!==a.state.first_name?a.state.first_name:""," ").concat(null!==a.state.middle_name?a.state.middle_name:""," ").concat(null!==e.target.value?e.target.value:""),error:{target:null,msg:""}})},value:this.state.last_name,error:"last_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Ex: Emmanuel",className:"p-2"})}),this.props.formAccess.full_name&&Object(S.jsx)("div",{className:"w-full  py-1 px-3",children:Object(S.jsx)(j.a,{disabled:!0,label:"Full name",name:"full_name",onChange:function(e){return a.setState({full_name:e.target.value,error:{target:null,msg:""}})},value:this.state.full_name,error:"full_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Full name",className:"p-2"})})]}),Object(S.jsx)("div",{className:"border-b-2 w-full my-2",children:Object(S.jsx)(f.a,{size:"sm",children:"Academic info"})}),Object(S.jsxs)("div",{className:"w-full lg:flex py-1 px-3 bg-gray-100 rounded",children:[null!==this.props.auth.school?null:this.props.select_district_active&&!0===this.props.select_district_active&&Object(S.jsx)(S.Fragment,{children:!0===this.state.select_district_open?Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(v.a,{click:function(e){a.setState({district_code:e.district_code,district_name:e.district_name,select_district_open:!1,error:{target:null,msg:""}}),a.setState({loading_assigning_data:!0}),a.props.FC_GetSchoolsByDistrictRedux(e.district_code,(function(e,t){a.setState({loading_assigning_data:!1})}))},close:function(){return a.setState({select_district_open:!1})},data:this.state.district_list,id:"district_code",title:"district_name",loading:this.state.loading_districts})}):Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return a.setState({select_district_open:!0})},children:Object(S.jsx)(j.a,{disabled:!0,label:"District",name:"district",onChange:function(e){},value:this.state.district_name,error:"district_list_select"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a district",className:"p-2"})})}),this.props.formAccess.school_code&&Object(S.jsx)(S.Fragment,{children:void 0!==this.props.school?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return a.setState({select_school_open:!0,select_position_open:!1})},children:Object(S.jsx)(j.a,{disabled:!0,label:"School name",name:"school_name",onChange:function(e){},value:this.props.school.school_name,error:"school_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Select school",className:"p-2"})})}):Object(S.jsx)(S.Fragment,{children:this.props.formAccess.school_code&&null!==this.props.basic.qualifications&&Object(S.jsx)(S.Fragment,{children:!0===this.state.select_school_open?Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(v.a,{click:function(e){a.setState({school_code:e.school_code,select_school_open:!1,error:{target:null,msg:""},position_id:""}),a.loadSchoolPosts(e.school_code)},close:function(){return a.setState({select_school_open:!1})},data:N,id:"school_code",title:"school_name",loading:this.state.loading_assigning_data||this.state.loading})}):Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return a.setState({select_school_open:!0})},children:Object(S.jsx)(j.a,{disabled:!0,label:"School name",name:"school_name",onChange:function(e){},value:l,error:"school_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Select school",className:"p-2"})})})})})]}),this.props.formAccess.stakeholder_id&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{data:[{title:"",value:""}].concat(Object(o.a)(r.stakeholders.map((function(e){return{title:e.stakeholder_name,value:e.stakeholder_id}})))),error:"stakeholder_id"===this.state.error.target?this.state.error.msg:"",value:this.state.stakeholder_id,onChange:function(e){return a.setState({stakeholder_id:e.target.value,error:{target:null,msg:""}})},label:"Select a stakeholder",name:"select_a_stakeholder",placeholder:"Select a value"})}),this.props.formAccess.academic_year_id&&null!==this.props.basic.academic_calender&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{data:[{title:null===(e=this.props.basic.academic_calender)||void 0===e?void 0:e.academic_year_name,value:null===(t=this.props.basic.academic_calender)||void 0===t?void 0:t.academic_year_id}],error:"academic_year_id"===this.state.error.target?this.state.error.msg:"",value:this.state.academic_year_id,onChange:function(e){return a.setState({academic_year_id:e.target.value,error:{target:null,msg:""}})},label:"Academic year",name:"accademic_year",placeholder:"Select a value"})}),this.props.formAccess.role_id&&Object(S.jsx)(S.Fragment,{children:!0===this.state.select_role_open?Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(v.a,{click:function(e){a.setState({role_id:e.role_id,select_role_open:!1,error:{target:null,msg:""}})},close:function(){return a.setState({select_role_open:!1})},data:void 0!==this.props.exclude_roles&&this.props.exclude_roles.length>=1?r.roles.filter((function(e){var t;return!(null!==(t=a.props.exclude_roles)&&void 0!==t&&t.includes(e.role_id))})):r.roles,id:"role_id",title:"role",loading:this.state.loading})}):Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return a.setState({select_role_open:!0})},children:Object(S.jsx)(j.a,{disabled:!0,label:"Role",name:"role",onChange:function(e){},value:p,error:"role_id"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a role",className:"p-2"})})}),this.props.formAccess.position_id&&void 0===this.props.position_code&&Object(S.jsx)(S.Fragment,{children:!0===this.state.select_position_open?Object(S.jsxs)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:[Object(S.jsx)("p",{children:"Position"}),Object(S.jsx)(v.a,{click:function(e){a.setState({position_id:e.position_code,select_position_open:!1,qualification_id:e.qualification_id,error:{target:null,msg:""}})},close:function(){return a.setState({select_position_open:!1})},data:void 0!==this.props.only_post_for_school?null!==this.state.school_posts?null===(s=this.state.school_posts)||void 0===s?void 0:s.school_positions.map((function(e){return{position_code:e.position_code,position_name:"".concat(e.position_code," - ").concat(e.position_name," - ").concat(e.qualification_name),qualification_id:e.qualification_id,qualification_name:e.qualification_name}})):[]:r.positions.map((function(e){return{position_code:e.position_code,position_name:"".concat(e.position_code," - ").concat(e.position_name," - ").concat(e.qualification_name),qualification_id:e.qualification_id,qualification_name:e.qualification_name}})),id:"position_code",title:"position_name",loading:this.state.loading})]}):Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){""===a.state.school_code?a.setState({select_position_open:!1,select_school_open:!0,error:{target:"school_code",msg:"Please select the school"}}):a.setState({select_position_open:!0})},children:Object(S.jsx)(j.a,{disabled:!0,label:"Position",name:"role",onChange:function(e){},value:y,error:"position_id"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a position",className:"p-2"})})}),void 0===this.props.qualification_id&&this.props.formAccess.qualification_id&&null!==this.props.basic.qualifications&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{data:[{title:"",value:""}].concat(Object(o.a)(this.props.basic.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})))),error:"qualification_id"===this.state.error.target?this.state.error.msg:"",value:this.state.qualification_id,onChange:function(e){},disabled:!0,label:"Qualification",name:"accademic_year",placeholder:"Select a value"})}),this.props.formAccess.sector_code&&Object(S.jsx)(S.Fragment,{children:!0===this.state.select_sector_open?Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(v.a,{click:function(e){a.setState({sector_code:e.sector_code,select_sector_open:!1})},close:function(){return a.setState({select_sector_open:!1})},data:r.sectors.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{sector_name:"".concat(e.sector_code," - ").concat(e.sector_name)})})),id:"sector_code",title:"sector_name",loading:this.state.loading})}):Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return a.setState({select_sector_open:!0})},children:Object(S.jsx)(j.a,{disabled:!0,label:"Sector name",name:"sector_name",onChange:function(e){},value:d,error:"sector_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a sector",className:"p-2"})})}),this.props.formAccess.start_date_in_the_school&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(j.a,{disabled:this.state.loading,label:"Date of hire (Date in education)",name:"start_date_in_the_school",type:"date",onChange:function(e){return a.setState({start_date_in_the_school:e.target.value,error:{target:null,msg:""}})},value:this.state.start_date_in_the_school,error:"start_date_in_the_school"===this.state.error.target?this.state.error.msg:"",placeholder:"Select date",className:"p-2"})}),this.props.formAccess.country_id&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{data:[{title:"No",value:""},{title:"Yes",value:"1"}],error:"country_id"===this.state.error.target?this.state.error.msg:"",value:this.state.country_id,onChange:function(e){return a.setState({country_id:e.target.value,error:{target:null,msg:""}})},label:"User on country level",name:"country_level",placeholder:"Select a value"})})]}),Object(S.jsxs)("div",{className:"px-6 text-right flex",children:[Object(S.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(S.jsxs)("div",{className:"text-sm text-red-400 pr-4",children:["Some fields are required! ","(",this.state.error.target,")"]})}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)(b.a,{type:"submit",size:"lg",loading:this.state.loading,children:void 0===this.props.button_title?"Add new staff":this.props.button_title})})]})]})})]})}}]),s}(d.a.Component),N=Object(_.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_GetAssignAssets:p.D,FC_GetSchoolsByDistrictRedux:p.pb})(y)}}]);
//# sourceMappingURL=1.2dadf59b.chunk.js.map