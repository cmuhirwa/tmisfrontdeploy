(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[4],{356:function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return j})),s.d(t,"d",(function(){return h}));var a=s(3),n=s(6),i=s(7),r=s.n(i),c=s(13),l=s(12),o=s(8),d=s(11),m=function(e,t){return t(!0,null,""),function(){var s=Object(n.a)(Object(a.a)().mark((function s(n){var i,m;return Object(a.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n({type:c.a.GET_ALL_TRANSFER,payload:[]}),Object(o.a)(),s.next=5,r.a.get("".concat(l.e,"/teachertransfers/requesteddde/").concat(e));case 5:i=s.sent,m=i.data.filter((function(e){return"APPROVED"===e.requested_status})),n({type:c.a.GET_ALL_TRANSFER,payload:m}),t(!1,m,""),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),t(!1,null,Object(d.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(e){return s.apply(this,arguments)}}()},u=function(){var e=Object(n.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(n.a)(Object(a.a)().mark((function e(t,s){var n,i,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,n=0,null,""),e.prev=2,Object(o.a)(),(i=new FormData).append("teacher_supporting_document",t),e.next=8,r.a.post("".concat(l.e,"/teachertransfers/uploadSupportingDocument"),i,{onUploadProgress:function(e){n=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100,s(!0,n,null,"")}});case 8:c=e.sent,console.log("Uploaded document: ",c.data),s(!1,n,c.data,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),s(!1,n,"",Object(d.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,s){return e.apply(this,arguments)}}(),h=function(e,t,s){s(!0,"");return function(){var i=Object(n.a)(Object(a.a)().mark((function n(i){var m,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),s(!0,""),(m=new FormData).append("teacher_transfer_id",e),m.append("mayor_letter",t),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),a.prev=11,Object(o.a)(),a.next=15,r.a.post("".concat(l.e,"/teachertransfers/outgoing"),m);case 15:u=a.sent,console.log("Uploaded document: ",u.data),i({type:c.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:e,mayor_letter:u.data.mayor_letter}}),s(!1,""),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(11),console.error(a.t0),s(!1,Object(d.a)(a.t0));case 25:case"end":return a.stop()}}),n,null,[[11,21]])})));return function(e){return i.apply(this,arguments)}}()}},360:function(e,t,s){"use strict";var a;s.d(t,"a",(function(){return a})),function(e){e.PENDING="PENDING TERMINATION",e.TERMINATED="TERMINATED",e.PENDING_SUSPENSION="PENDING SUSPENTION",e.SUSPENDED="SUSPENDED",e.REJECTED="REJECTED"}(a||(a={}))},363:function(e,t,s){"use strict";s(4);var a=s(1);t.a=function(e){var t=function(){for(var t=[],s=0;s<e.cols;s++)t.push(s);return t.map((function(e){return Object(a.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(a.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},392:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var a,n=s(20),i=s(21),r=s(22),c=s(23),l=s(4),o=s(36),d=s(13),m=s(47),u=s(53),j=s(92),h=s(24),b=s(17),p=s(3),x=s(6),O=s(27),f=s(15),_=s(356),N=s(19),g=s(395),v=s(65),T=s(140),S=s(39),y=s(360),E=s(1),w=Object(o.b)(null,{FC_UpdateThisTermination:d.qc,FC_GetAllTermination:d.C})((function(e){var t=Object(l.useState)(!1),s=Object(O.a)(t,2),a=s[0],n=s[1],i=Object(l.useState)(null),r=Object(O.a)(i,2),c=r[0],o=r[1],d=Object(l.useState)(null),h=Object(O.a)(d,2),w=h[0],D=h[1],I=Object(l.useState)(""),P=Object(O.a)(I,2),C=P[0],R=P[1],k=Object(l.useState)("suspension"===e.thisViewIsFor&&e.thiTermination.requested_to_suspend_from?e.thiTermination.requested_to_suspend_from:""),F=Object(O.a)(k,2),U=F[0],G=F[1],q=Object(l.useState)("suspension"===e.thisViewIsFor&&e.thiTermination.requested_to_suspend_to?e.thiTermination.requested_to_suspend_to:""),A=Object(O.a)(q,2),V=A[0],M=A[1],z=Object(l.useState)(null),J=Object(O.a)(z,2),L=J[0],B=J[1],K=Object(l.useState)(0),H=Object(O.a)(K,2),Q=H[0],W=H[1],X=function(){var t=Object(x.a)(Object(p.a)().mark((function t(){var s,a;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=3;break}return D({element:"action",msg:"Action is required!"}),t.abrupt("return",n(!1));case 3:if("suspension"!==e.thisViewIsFor||c!==y.a.SUSPENDED||!Object(b.j)(U)){t.next=6;break}return D({element:"start_date",msg:"Required!"}),t.abrupt("return",n(!1));case 6:if("suspension"!==e.thisViewIsFor||c!==y.a.SUSPENDED||!Object(b.j)(V)){t.next=9;break}return D({element:"end_date",msg:"Required!"}),t.abrupt("return",n(!1));case 9:if(null!==L){t.next=12;break}return D({element:"approved_doc",msg:"Required!"}),t.abrupt("return",n(!1));case 12:if(!Object(b.j)(C)){t.next=15;break}return D({element:"comment",msg:"Required!"}),t.abrupt("return",n(!1));case 15:return s="",t.next=18,Object(_.c)(L,(function(e,t,a,i){n(e),e&&W(t),!e&&Object(b.j)(i)&&null!==a?s=a:e||Object(b.j)(i)||D({element:"main-error",msg:i})}));case 18:Object(b.j)(s)||(a={change_staff_status_id:e.thiTermination.change_staff_status_id,decision:c,decided_to_suspend_from:"suspension"===e.thisViewIsFor&&c===y.a.SUSPENDED?U:"",decided_to_suspend_to:"suspension"===e.thisViewIsFor&&c===y.a.SUSPENDED?V:"",decided_by_comment:C,mayor_letter:s},n(!0),e.FC_UpdateThisTermination(a,(function(e,t){D(e?{element:"main-success",msg:"Response has been successful sent!"}:{element:"main-error",msg:t})})),o(null),setTimeout((function(){D(null),R("")}),2e3),n(!1));case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return console.log("==================props.thiTermination=================="),console.log({fff:e.thiTermination}),console.log("==================props.thiTermination=================="),Object(E.jsxs)(E.Fragment,{children:[w&&"main-success"===w.element&&Object(E.jsx)(m.a,{theme:"success",children:w.msg}),w&&"main-error"===w.element&&Object(E.jsx)(m.a,{theme:"danger",children:w.msg}),Object(E.jsxs)(u.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(E.jsxs)("div",{className:"py-2 flex items-center",children:[Object(E.jsx)("div",{className:"flex-1",children:Object(E.jsxs)(j.a,{children:["View ",e.thisViewIsFor," progress"]})}),Object(E.jsx)("div",{className:"",children:Object(E.jsx)(N.a,{onClick:function(){return e.setThiTermination(null)},theme:"default",children:"Close"})})]}),Object(E.jsxs)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:[Object(E.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8",children:[Object(E.jsx)("span",{className:"text-primary-800",children:Object(E.jsx)(f.wb,{size:25})}),Object(E.jsx)("span",{className:"tracking-wide",children:"Staff info"})]}),Object(E.jsx)("div",{className:"text-gray-700",children:Object(E.jsxs)("div",{className:"grid md:grid-cols-2 text-sm",children:[Object(E.jsxs)("div",{className:"grid grid-cols-2",children:[Object(E.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Full Name"}),Object(E.jsx)("div",{className:"px-4 py-2",children:e.thiTermination.techer_name})]}),Object(E.jsxs)("div",{className:"grid grid-cols-2",children:[Object(E.jsx)("div",{className:"px-4 py-2 font-semibold",children:"School"}),Object(E.jsx)("div",{className:"px-4 py-2",children:e.thiTermination.school_name})]}),Object(E.jsxs)("div",{className:"grid grid-cols-2",children:[Object(E.jsx)("div",{className:"px-4 py-2 font-semibold",children:"School code"}),Object(E.jsx)("div",{className:"px-4 py-2",children:e.thiTermination.school_code})]})]})})]}),Object(E.jsxs)("div",{className:"bg-white p-3 border rounded",children:[Object(E.jsxs)("div",{className:"flex items-center px-2 py-1 bg-gray-200 rounded",children:[Object(E.jsx)(f.db,{className:"w-8"}),Object(E.jsx)("p",{children:e.thiTermination.reason_name})]}),Object(E.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Comment:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.requested_by_comment})]}),"suspension"===e.thisViewIsFor&&Object(E.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Start date:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.requested_to_suspend_from&&!Object(b.j)(e.thiTermination.requested_to_suspend_from)?Object(b.a)(e.thiTermination.requested_to_suspend_from):"-"})]}),"suspension"===e.thisViewIsFor&&Object(E.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"End date:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.requested_to_suspend_to&&!Object(b.j)(e.thiTermination.requested_to_suspend_to)?Object(b.a)(e.thiTermination.requested_to_suspend_to):"-"})]}),Object(E.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Request date:"}),Object(E.jsx)("p",{className:"text-base",children:Object(b.a)(e.thiTermination.requested_by_date)})]})]}),e.thiTermination.status!==y.a.PENDING&&e.thiTermination.status!==y.a.PENDING_SUSPENSION&&Object(E.jsxs)("section",{children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Feedback:"}),Object(E.jsxs)("div",{className:"bg-white p-3 border rounded",children:[Object(E.jsxs)("div",{className:"flex items-center gap-2",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Decision:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.status})]}),"suspension"===e.thisViewIsFor&&Object(E.jsxs)("div",{className:"flex flex-col",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Start date:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.decided_to_suspend_from&&!Object(b.j)(e.thiTermination.decided_to_suspend_from)?Object(b.a)(e.thiTermination.decided_to_suspend_from):"-"})]}),"suspension"===e.thisViewIsFor&&Object(E.jsxs)("div",{className:"flex flex-col",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"End date:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.decided_to_suspend_to&&!Object(b.j)(e.thiTermination.decided_to_suspend_to)?Object(b.a)(e.thiTermination.decided_to_suspend_to):"-"})]}),e.thiTermination.status!==y.a.REJECTED&&e.thiTermination.mayor_letter&&Object(E.jsx)(g.a,{linkFor:"uploaded",first_id:e.thiTermination.mayor_letter,last_id:"",title:"Confirmation letter"}),Object(E.jsxs)("div",{className:"flex flex-col",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Comment:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.decided_by_comment})]}),Object(E.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(E.jsx)("span",{className:"text-sm text-gray-500",children:"Done on:"}),Object(E.jsx)("p",{className:"text-base",children:e.thiTermination.decided_by_date?Object(b.a)(e.thiTermination.decided_by_date):"-"})]})]})]}),!c&&Object(E.jsxs)("section",{className:"flex items-center justify-between bg-gray-50 rounded mt-3",children:[Object(E.jsx)("div",{className:"mx-4 my-4",children:Object(E.jsx)("span",{className:"".concat(e.thiTermination.status===y.a.PENDING||e.thiTermination.status===y.a.PENDING_SUSPENSION?"text-yellow-700":e.thiTermination.status===y.a.REJECTED?"text-red-700":"text-green-700"," italic font-semibold"),children:e.thiTermination.status===y.a.PENDING||e.thiTermination.status===y.a.PENDING_SUSPENSION?"Pending":e.thiTermination.status===y.a.REJECTED?"Canceled":"Confirmed"})}),(e.thiTermination.status===y.a.PENDING||e.thiTermination.status===y.a.PENDING_SUSPENSION)&&Object(E.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[Object(E.jsx)(g.a,{first_id:e.thiTermination.change_staff_status_id,last_id:e.thiTermination.teacher_id,title:"suspension"===e.thisViewIsFor?"Suspension letter":"Termination letter",linkFor:e.thisViewIsFor}),Object(E.jsx)(N.a,{theme:"danger",type:"button",onClick:function(){o(y.a.REJECTED)},children:"Reject"}),Object(E.jsx)(N.a,{type:"button",theme:"success",onClick:function(){o("termination"===e.thisViewIsFor?y.a.TERMINATED:y.a.SUSPENDED)},children:"Accept"})]})]}),c&&Object(E.jsxs)("section",{className:"my-3 overflow-x-auto",children:[0!==Q&&Object(E.jsx)("div",{className:"p-2",children:Object(E.jsx)("div",{className:"bg-accent-400 appearance-none rounded w-full border-bg-accent-800 border-2 transition-all duration-500 ease-in-out",children:Object(E.jsx)("div",{className:"bg-accent-800 rounded-sm text-white text-center py-2 transition-all duration-500 ease-in-out",style:{width:Q+"%"},children:Object(E.jsx)("span",{className:"text-gray-700 mx-1",children:"Uploading..."})})})}),Object(E.jsxs)("div",{className:"italic text-gray-700 text-base mx-5",children:["Selected decision:"," ",Object(E.jsx)("span",{className:"font-semibold text-lg ".concat(c===y.a.TERMINATED||c===y.a.SUSPENDED?"text-blue-700":"text-yellow-800"),children:c===y.a.TERMINATED||c===y.a.SUSPENDED?"Approved":"Rejected"})]}),Object(E.jsx)("div",{className:"flex flex-col md:flex-row items-end md:items-start gap-1 w-full",children:Object(E.jsxs)("div",{className:"w-full px-2",children:["suspension"===e.thisViewIsFor&&c===y.a.SUSPENDED&&Object(E.jsxs)("div",{className:"flex flex-wrap",children:[Object(E.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(E.jsx)(S.a,{disabled:a,label:"Start date",name:"start_date",type:"date",value:U,placeholder:"Suspension starting date",className:"p-2",onChange:function(e){G(e.target.value),D(null)},error:w&&"start_date"===w.element?w.msg:""})}),Object(E.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(E.jsx)(S.a,{disabled:a,label:"End date",name:"end_date",type:"date",value:V,placeholder:"Suspension ending date",className:"p-2",onChange:function(e){M(e.target.value),D(null)},error:w&&"end_date"===w.element?w.msg:""})})]}),Object(E.jsx)("div",{className:"w-full py-1 px-2",children:Object(E.jsx)(v.b,{disabled:a,label:"Suspension document",name:"approved_doc",className:"p-2",onChange:function(e){return function(e){if(D(null),null===e.target.files)return B(null),D({msg:"Please select a valid file",element:"approved_doc"});var t=e.target.files[0];return"application/pdf"!==t.type?(B(null),D({msg:"The system accept pdf only",element:"approved_doc"})):t.size<=0?(B(null),D({msg:"Invalid file, Please choose a real file",element:"approved_doc"})):(B(t),void D(null))}(e)},error:w&&"approved_doc"===w.element?w.msg:"",type:"file",accept:v.a.PDF})}),Object(E.jsx)("div",{className:"w-full py-1 px-2",children:Object(E.jsx)(T.a,{disabled:a,label:"Comment",name:"comment",value:C,placeholder:"Reason of your decision...",className:"p-2",onChange:function(e){R(e.target.value),D(null)},error:w&&"comment"===w.element?w.msg:""})}),Object(E.jsxs)("div",{className:"flex items-center gap-1 max-w-full px-2 float-right",children:[Object(E.jsx)(N.a,{theme:"default",onClick:function(){R(""),o(null),D(null)},disabled:a,children:Object(E.jsx)("span",{children:"Back"})}),Object(E.jsx)(N.a,{disabled:a,theme:"primary",onClick:function(){return window.confirm("Are you sure you want to ".concat(c===y.a.TERMINATED?"terminate this staff?":c===y.a.SUSPENDED?"suspend this staff?":"rejected this request?"))&&X()},children:a?Object(E.jsx)("div",{className:"",children:"Loading..."}):Object(E.jsx)("span",{children:"Confirm"})})]})]})})]})]})]})})),D=s(138),I=s(363),P=function(e){Object(r.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).setThisStatus=function(e){a.setState({thisStatus:e})},a.filterTerminations=function(e,t){var s=e;return s=e.filter((function(e){return e.status!==y.a.PENDING&&e.status!==y.a.TERMINATED&&null!==e.requested_to_suspend_from})),"all"!==t&&(s=s.filter((function(e){return e.status===t}))),s},a.state={search:"",thisStatus:"all"},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(E.jsxs)("div",{className:"mt-3",children:[Object(E.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center flex-col-reverse sm:flex-row pl-3 pr-2 rounded",children:[Object(E.jsx)("div",{className:"w-full sm:flex-1 pr-2",children:Object(E.jsx)(S.a,{error:"",label:"Search",name:"",type:"search",onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search by name, reason, date, status",value:this.state.search,size:"sm",disabled:null===this.props.suspensionItems||0===this.filterTerminations(this.props.suspensionItems,this.state.thisStatus).length})}),Object(E.jsx)("div",{className:"w-full sm:w-auto",children:Object(E.jsx)(D.a,{data:[{title:"All",value:"all"},{title:"Pending",value:y.a.PENDING_SUSPENSION},{title:"Suspended",value:y.a.SUSPENDED},{title:"Rejected",value:y.a.REJECTED}],error:"",name:"select_status",onChange:function(t){return e.setState({thisStatus:t.target.value})},label:"Status",placeholder:"Select status",value:this.state.thisStatus,size:"sm"})})]}),Object(E.jsx)("div",{className:"my-3 w-full overflow-x-auto",children:Object(E.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{className:"p-2",children:"#"}),Object(E.jsx)("th",{className:"p-2",children:"Names"}),Object(E.jsx)("th",{className:"p-2",children:"School"}),Object(E.jsx)("th",{className:"p-2",children:"Reason"}),Object(E.jsx)("th",{className:"p-2",children:"Date"}),Object(E.jsx)("th",{className:"p-2",children:"Status"}),Object(E.jsx)("th",{className:"p-2"})]})}),Object(E.jsx)("tbody",{children:this.props.loading?Object(E.jsx)(I.a,{cols:6}):null===this.props.suspensionItems||this.filterTerminations(this.props.suspensionItems,this.state.thisStatus).length<=0?Object(E.jsx)("tr",{children:Object(E.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(E.jsx)(j.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):Object(b.n)(this.filterTerminations(this.props.suspensionItems,this.state.thisStatus),this.state.search).map((function(t,s){return Object(E.jsxs)("tr",{className:"group border-b border-t rounded hover:bg-accent-800 hover:bg-opacity-20 cursor-pointer",onClick:function(){return e.props.setThisTermination(t)},children:[Object(E.jsx)("td",{className:"p-2",children:s+1}),Object(E.jsx)("td",{className:"p-2",children:t.techer_name}),Object(E.jsx)("td",{className:"p-2",children:t.school_name}),Object(E.jsx)("td",{className:"p-2",children:t.reason_name}),Object(E.jsx)("td",{className:"p-2",children:t.status===y.a.PENDING_SUSPENSION?Object(b.a)(t.requested_by_date):t.decided_by_date&&Object(b.a)(t.decided_by_date)}),Object(E.jsx)("td",{className:"p-2",children:t.status}),Object(E.jsx)("td",{className:"p-1 text-center",children:Object(E.jsx)(N.a,{onClick:function(){return e.props.setThisTermination(t)},children:"View"})})]},s+t.change_staff_status_id)}))})]})})]})}}]),s}(l.Component),C=function(e){Object(r.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).setThisStatus=function(e){a.setState({thisStatus:e})},a.filterTerminations=function(e,t){console.log("===================================="),console.log({allData:e}),console.log("====================================");var s=e;return s=e.filter((function(e){return e.status!==y.a.PENDING_SUSPENSION&&e.status!==y.a.SUSPENDED&&(null===e.requested_to_suspend_from||Object(b.j)(e.requested_to_suspend_from))})),"all"!==t&&(s=s.filter((function(e){return e.status===t}))),s},a.state={search:"",thisStatus:"all"},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(E.jsxs)("div",{className:"mt-3",children:[Object(E.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center flex-col-reverse sm:flex-row pl-3 pr-2 rounded",children:[Object(E.jsx)("div",{className:"w-full sm:flex-1 pr-2",children:Object(E.jsx)(S.a,{error:"",label:"Search",name:"",type:"search",onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search by name, reason, date, status",value:this.state.search,size:"sm",disabled:null===this.props.terminations||0===this.filterTerminations(this.props.terminations,this.state.thisStatus).length})}),Object(E.jsx)("div",{className:"w-full sm:w-auto",children:Object(E.jsx)(D.a,{data:[{title:"All",value:"all"},{title:"Pending",value:y.a.PENDING},{title:"Terminated",value:y.a.TERMINATED},{title:"Rejected",value:y.a.REJECTED}],error:"",name:"select_status",onChange:function(t){return e.setState({thisStatus:t.target.value})},label:"Status",placeholder:"Select status",value:this.state.thisStatus,size:"sm"})})]}),Object(E.jsx)("div",{className:"my-3 w-full overflow-x-auto",children:Object(E.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{className:"p-2",children:"#"}),Object(E.jsx)("th",{className:"p-2",children:"Names"}),Object(E.jsx)("th",{className:"p-2",children:"School"}),Object(E.jsx)("th",{className:"p-2",children:"Reason"}),Object(E.jsx)("th",{className:"p-2",children:"Date"}),Object(E.jsx)("th",{className:"p-2",children:"Status"}),Object(E.jsx)("th",{className:"p-2"})]})}),Object(E.jsx)("tbody",{children:this.props.loading?Object(E.jsx)(I.a,{cols:6}):null===this.props.terminations||this.filterTerminations(this.props.terminations,this.state.thisStatus).length<=0?Object(E.jsx)("tr",{children:Object(E.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(E.jsx)(j.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):Object(b.n)(this.filterTerminations(this.props.terminations,this.state.thisStatus),this.state.search).map((function(t,s){return Object(E.jsxs)("tr",{className:"group border-b border-t rounded hover:bg-accent-800 hover:bg-opacity-20 cursor-pointer",onClick:function(){return e.props.setThisTermination(t)},children:[Object(E.jsx)("td",{className:"p-2",children:s+1}),Object(E.jsx)("td",{className:"p-2",children:t.techer_name}),Object(E.jsx)("td",{className:"p-2",children:t.school_name}),Object(E.jsx)("td",{className:"p-2",children:t.reason_name}),Object(E.jsx)("td",{className:"p-2",children:t.status===y.a.PENDING?Object(b.a)(t.requested_by_date):t.decided_by_date&&Object(b.a)(t.decided_by_date)}),Object(E.jsx)("td",{className:"p-2",children:t.status}),Object(E.jsx)("td",{className:"p-1 text-center",children:Object(E.jsx)(N.a,{onClick:function(){return e.props.setThisTermination(t)},children:"View"})})]},s+t.change_staff_status_id)}))})]})})]})}}]),s}(l.Component);!function(e){e.terminationTab="Staff Termination",e.suspensionTab="Staff Suspension"}(a||(a={}));var R=function(e){Object(r.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setError=function(e){a.setState({error:e})},a.setThisTermination=function(e){a.setState({thisTermination:e})},a.getTerminationById=function(e,t){return e.find((function(e){return e.change_staff_status_id===t}))},a.componentDidMount=function(){a.props.FC_GetAllTermination("hr",(function(e,t,s){a.setLoading(e),e||Object(b.j)(s)||a.setError({target:"main-error",msg:s})}))},a.state={loading:!0,error:{target:null,msg:""},thisTermination:null},a}return Object(i.a)(s,[{key:"render",value:function(){return this.state.loading?Object(E.jsx)("div",{className:"p-8 text-center",children:Object(E.jsx)("div",{className:"mx-auto",children:Object(E.jsx)(h.a,{})})}):Object(E.jsxs)(E.Fragment,{children:["main-success"===this.state.error.target&&Object(E.jsx)(m.a,{theme:"success",children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(E.jsx)(m.a,{theme:"danger",children:this.state.error.msg}),null===this.state.thisTermination?Object(E.jsxs)(u.a,{children:[Object(E.jsx)(j.a,{children:this.props.thisPage}),this.props.thisPage===a.terminationTab?Object(E.jsx)(C,{terminations:this.props.terminations.allTermination,loading:this.state.loading,setThisTermination:this.setThisTermination}):Object(E.jsx)(P,{suspensionItems:this.props.terminations.allTermination,loading:this.state.loading,setThisTermination:this.setThisTermination})]}):Object(E.jsx)(w,{setThiTermination:this.setThisTermination,thiTermination:this.getTerminationById(this.props.terminations.allTermination,this.state.thisTermination.change_staff_status_id),thisViewIsFor:this.props.thisPage===a.terminationTab?"termination":"suspension"})]})}}]),s}(l.Component);t.b=Object(o.b)((function(e){return{auth:e.auth,basic:e.basic,terminations:e.terminations}}),{FC_GetAllTermination:d.C})(R)},395:function(e,t,s){"use strict";s(4);var a=s(46),n=s(12),i=s(19),r=s(1);t.a=function(e){var t="uploaded"===e.linkFor?"".concat(n.f,"/").concat(e.first_id):"".concat(n.e,"/generateletter/").concat(e.linkFor,"/").concat(e.first_id,"/").concat(e.last_id);return Object(r.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:Object(r.jsxs)(i.a,{theme:"primary-light",size:"sm",className:"flex items-center gap-1",children:[Object(r.jsx)(a.a,{}),Object(r.jsx)("span",{children:e.title})]})})}}}]);
//# sourceMappingURL=4.75fe65ff.chunk.js.map