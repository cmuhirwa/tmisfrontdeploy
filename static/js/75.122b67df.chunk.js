(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[75],{485:function(e,t,r){"use strict";r.r(t),r.d(t,"FilteredData",(function(){return H})),r.d(t,"SubjectsList",(function(){return A}));var c=r(19),s=r(20),a=r(21),l=r(22),n=r(4),o=r(366),i=r(54),d=r(15),b=r(13),h=r(16),j=r(24),u=r(36),m=r(53),x=r(26),p=r(27),f=r(3),O=r(9),y=r(6),v=r(28),g=r(7),_=r.n(g),N=r(12),S=r(8),w=r(11),C=r(1);function k(e){var t=Object(n.useState)(e.data.course_code),r=Object(v.a)(t,2),c=r[0],s=r[1],a=Object(n.useState)(e.data.course_name),l=Object(v.a)(a,2),o=l[0],i=l[1],d=Object(n.useState)(e.data.teaching_period),b=Object(v.a)(d,2),h=b[0],j=b[1],u=Object(n.useState)(""),m=Object(v.a)(u,2),x=m[0],p=m[1],g=Object(n.useState)(!1),k=Object(v.a)(g,2),H=k[0],I=k[1],A=Object(n.useState)(null),F=Object(v.a)(A,2),D=F[0],L=F[1],M=function(){var t=Object(y.a)(Object(f.a)().mark((function t(r){return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),L(null),""!==c){t.next=4;break}return t.abrupt("return",L({element:"course_code",msg:"Please fill course code"}));case 4:if(""!==o){t.next=6;break}return t.abrupt("return",L({element:"course_name",msg:"Please fill course name"}));case 6:if(""!==h){t.next=8;break}return t.abrupt("return",L({element:"periods",msg:"Please fill teaching periods"}));case 8:return I(!0),Object(S.a)(),t.prev=10,t.next=13,_.a.post("".concat(N.e,"/hierarch/upperiod"),{studyhierarchyid:e.data.studyhierarchyid,course_code:c,course_name:o,teaching_period:parseInt(h)});case 13:200===t.sent.status&&(e.reload(),I(!1),p("Subject updated successfully!")),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(10),console.log("Erro: ",Object(O.a)({},t.t0)),L({element:"main",msg:Object(w.a)(t.t0)}),I(!1);case 22:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"py-3",children:[Object(C.jsxs)("div",{className:"bg-blue-100 rounded p-3 flex flex-col gap-2 mb-3",children:[Object(C.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(C.jsx)("span",{className:"text-gray-800",children:"School level:"}),Object(C.jsxs)("span",{className:"text-primary-800 font-bold",children:["(",e.data.level_code,") ",e.data.level_name]})]}),Object(C.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(C.jsx)("span",{className:"text-gray-800",children:"Combination:"}),Object(C.jsxs)("span",{className:"text-primary-800 font-bold",children:["(",e.data.combination_code,") ",e.data.combination_name]})]}),Object(C.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(C.jsx)("span",{className:"text-gray-800",children:"Grade:"}),Object(C.jsxs)("span",{className:"text-primary-800 font-bold",children:["(",e.data.grade_code,") ",e.data.grade_name]})]})]}),Object(C.jsxs)("form",{onSubmit:M,children:[Object(C.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(C.jsx)("span",{children:"Course code"}),Object(C.jsx)("input",{type:"text",value:c,onChange:function(e){s(e.target.value)},className:"border ".concat(null!==D&&"course_code"===D.element?"border-red-600":"border-gray-300"," px-3 py-2 w-full rounded"),placeholder:"Fill course code",disabled:H}),null!==D&&"course_code"===D.element&&Object(C.jsx)("div",{className:"text-red-600 font-bold text-base",children:D.msg})]}),Object(C.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(C.jsx)("span",{children:"Course name"}),Object(C.jsx)("input",{type:"text",value:o,onChange:function(e){i(e.target.value)},className:"border ".concat(null!==D&&"course_name"===D.element?"border-red-600":"border-gray-300"," px-3 py-2 w-full rounded"),placeholder:"Fill course name",disabled:H}),null!==D&&"course_name"===D.element&&Object(C.jsx)("div",{className:"text-red-600 font-bold text-base",children:D.msg})]}),Object(C.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(C.jsx)("span",{children:"Periods"}),Object(C.jsx)("input",{type:"number",value:h,onChange:function(e){j(e.target.value)},className:"border ".concat(null!==D&&"periods"===D.element?"border-red-600":"border-gray-300"," px-3 py-2 w-full rounded"),placeholder:"Fill number of periods",disabled:H}),null!==D&&"periods"===D.element&&Object(C.jsx)("div",{className:"text-red-600 font-bold text-base",children:D.msg})]}),null!==D&&"main"===D.element&&Object(C.jsx)("div",{onClick:function(){return L(null)},className:"cursor-pointer text-red-600 font-bold text-base bg-red-100 rounded px-3 py-2",children:D.msg}),""!==x&&Object(C.jsx)("div",{onClick:function(){return p("")},className:"cursor-pointer text-green-600 font-bold text-base bg-green-100 rounded px-3 py-2",children:x}),Object(C.jsxs)("div",{className:"flex flex-row justify-between items-center gap-3 mb-3 mt-3",children:[Object(C.jsx)("div",{}),Object(C.jsx)("button",{type:"submit",className:"flex items-center justify-center px-3 py-2 rounded cursor-pointer bg-primary-800 text-white font-bold hover:bg-blue-500",disabled:H,children:"Update subject"})]})]})]})}var H=function(e,t,r){var c=e;return null!==c?(null!==t&&""!==t&&(c=c.filter((function(e){return e.level_code===t}))),null!==r&&(c=c.filter((function(e){return e.combination_code===r}))),c):[]},I=function(e){Object(a.a)(r,e);var t=Object(l.a)(r);function r(e){var s;return Object(c.a)(this,r),(s=t.call(this,e)).componentDidMount=function(){null===s.props.schoolHierarchyStore.hierarchy&&(s.setState({loading:!0}),s.props.FC_AllSchoolHierarchyDetails(!0,(function(e,t){!0===e&&s.setState({loading:!1})})))},s.state={selected_level_code:null,filter_by_combination:!1,selected_combination_code:null,search_comb:"",addedSubjects:[],loading:!1,success:"",error:"",ediSubject:null,search:""},s}return Object(s.a)(r,[{key:"render",value:function(){var e,t,r=this;return Object(C.jsxs)(n.Fragment,{children:[Object(C.jsx)(m.a,{children:Object(C.jsxs)("div",{className:"bg-white rounded-md z-50 w-full h-full overflow-auto",children:[Object(C.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 py-2 border-b border-gray-400",children:[Object(C.jsxs)("div",{className:"text-xl font-bold ml-2 uppercase mt-2",children:["List of subjects (",null===(e=this.props.schoolHierarchyStore.hierarchy)||void 0===e?void 0:e.length,")"]}),Object(C.jsxs)(x.b,{to:"/hierarchy-add-subject",className:"flex items-center justify-center py-2 px-3 rounded bg-gray-100 text-2xl hover:bg-blue-100 hover:text-primary-800 cursor-pointer",title:"Close window",children:[Object(C.jsx)(d.d,{}),Object(C.jsx)("span",{className:"text-base",children:"Add subject"})]})]}),Object(C.jsx)("div",{className:"",children:Object(C.jsx)("div",{className:"",children:Object(C.jsx)("div",{className:"mb-10",children:Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"mb-5",children:Object(C.jsxs)("div",{className:"mt-4",children:[Object(C.jsx)("div",{children:"Filter by"}),Object(C.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(C.jsxs)("select",{onChange:function(e){return r.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(C.jsx)("option",{value:"",children:"Choose education level"}),Object(C.jsx)("option",{value:"",children:"Show all levels"}),this.props.schoolHierarchyStore.hierarchy&&Object(b.lb)(this.props.schoolHierarchyStore.hierarchy,{type:b.vc.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(C.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(C.jsxs)("div",{className:"w-full",children:[Object(C.jsxs)("div",{onClick:function(){return r.setState({filter_by_combination:!r.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(C.jsx)("span",{children:"All- Click to filter by combination"}):Object(C.jsx)("span",{children:this.props.schoolHierarchyStore.hierarchy&&(null===(t=Object(b.lb)(this.props.schoolHierarchyStore.hierarchy,{type:b.vc.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===r.state.selected_combination_code})))||void 0===t?void 0:t.combination_name)}),Object(C.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(C.jsx)(d.r,{}):Object(C.jsx)(i.a,{})})]}),!0===this.state.filter_by_combination&&Object(C.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(C.jsx)("input",{value:this.state.search_comb,onChange:function(e){return r.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(C.jsx)("div",{children:Object(C.jsx)("div",{onClick:function(){return r.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(C.jsx)(d.r,{})})})]}),null!==this.state.selected_combination_code&&Object(C.jsxs)("div",{onClick:function(){r.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(C.jsx)("div",{children:Object(C.jsx)(o.a,{className:"text-xl"})}),Object(C.jsx)("span",{children:"Click to view all"})]})]}),Object(C.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(h.n)(this.props.schoolHierarchyStore.hierarchy&&Object(b.lb)(this.props.schoolHierarchyStore.hierarchy,{type:b.vc.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(C.jsx)("div",{className:"text-center text-lg font-bold p-5 px-10 text-gray-500",children:"No result found!"}):this.props.schoolHierarchyStore.hierarchy&&Object(h.n)(Object(b.lb)(this.props.schoolHierarchyStore.hierarchy,{type:b.vc.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,t){return Object(C.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(r.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){r.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(C.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]}),Object(C.jsx)("input",{className:"px-3 py-2 rounded border border-gray-400 w-full",placeholder:"Search keyword...",value:this.state.search,onChange:function(e){return r.setState({search:e.target.value})}})]})]})}),Object(C.jsx)("div",{className:"bg-white rounded border border-gray-200",children:Object(C.jsx)("div",{className:"w-full overflow-x-auto",children:Object(C.jsxs)("table",{className:"min-w-full text-left",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(C.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(C.jsx)("tbody",{className:"text-sm",children:null===this.props.schoolHierarchyStore.hierarchy?Object(C.jsx)("tr",{children:Object(C.jsx)("td",{colSpan:7,children:Object(C.jsx)("div",{className:"flex w-full items-center justify-center py-3",children:Object(C.jsx)(j.a,{})})})}):0===Object(h.n)(H(this.props.schoolHierarchyStore.hierarchy,this.state.selected_level_code,this.state.selected_combination_code),this.state.search).length?Object(C.jsx)("td",{colSpan:7,children:Object(C.jsx)("div",{className:"text-lg p-3 text-center",children:"No result found"})}):Object(h.n)(H(this.props.schoolHierarchyStore.hierarchy,this.state.selected_level_code,this.state.selected_combination_code),this.state.search).map((function(e,t){return Object(C.jsxs)("tr",{className:"text-gray-500 group",children:[Object(C.jsx)("td",{className:"p-2 border-b text-center",children:t+1}),Object(C.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(C.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(C.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(C.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(C.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(C.jsx)("td",{className:"p-2 border-b",children:Object(C.jsx)("div",{className:"flex flex-row items-center justify-end",children:Object(C.jsx)("div",{onClick:function(){return r.setState({ediSubject:e})},className:"px-3 py-1 rounded bg-blue-100 group-hover:bg-primary-800 cursor-pointer text-black font-bold group-hover:text-white",children:"Edit"})})})]},t+1)}))})]})})})]})})})})]})}),null!==this.state.ediSubject&&Object(C.jsx)(p.d,{title:"Update subject",backDrop:!0,theme:p.c.default,close:function(){return r.setState({ediSubject:null})},backDropClose:!0,widthSizeClass:p.b.medium,displayClose:!0,padding:{title:!0,body:!1},children:Object(C.jsx)("div",{className:"border-t border-gray-400 px-3",children:Object(C.jsx)(k,{data:this.state.ediSubject,reload:function(){r.setState({loading:!0}),r.props.FC_AllSchoolHierarchyDetails(!0,(function(e,t){!0===e&&r.setState({loading:!1})}))}})})})]})}}]),r}(n.Component),A=Object(u.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_AllSchoolHierarchyDetails:b.f})(I)}}]);
//# sourceMappingURL=75.122b67df.chunk.js.map