(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[34],{108:function(t,e,s){"use strict";s.d(e,"a",(function(){return p})),s.d(e,"b",(function(){return h})),s.d(e,"c",(function(){return j})),s.d(e,"d",(function(){return x}));var n=s(6),r=s(3),c=s.n(r),o=s(5),a=s.n(o),l=s(10),i=s(12),d=s(8),u=s(9),p=function(t){return t(!0,null,""),function(){var e=Object(n.a)(c.a.mark((function e(s){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(d.a)(),e.next=4,a.a.get("".concat(i.c,"/teachertransfers/requesteddde"));case 4:n=e.sent,console.log("===================================="),console.log({getAllTransfers:n}),console.log("===================================="),r=n.data.filter((function(t){return"APPROVED"===t.requested_status})),s({type:l.a.GET_ALL_TRANSFER,payload:r}),t(!1,r,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},h=function(){var t=Object(n.a)(c.a.mark((function t(e){var s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,null,""),t.prev=1,Object(d.a)(),t.next=5,a.a.get("".concat(i.c,"/district"));case 5:s=t.sent,console.log("=================FC_GetDistricts==================="),console.log({FC_GetDistricts:s}),console.log("=================FC_GetDistricts==================="),e(!1,s.data,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(n.a)(c.a.mark((function t(e,s){var n,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0,n=0,null,""),t.prev=2,Object(d.a)(),(r=new FormData).append("teacher_supporting_document",e),t.next=8,a.a.post("".concat(i.c,"/teachertransfers/uploadSupportingDocument"),r,{onUploadProgress:function(t){n=+(null===t||void 0===t?void 0:t.loaded)/+t.total*100,s(!0,n,null,"")}});case 8:o=t.sent,console.log("Uploaded document: ",o.data),s(!1,n,o.data,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0),s(!1,n,"",Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,s){return t.apply(this,arguments)}}(),x=function(t,e,s){s(!0,"");return function(){var r=Object(n.a)(c.a.mark((function n(r){var o,p;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),s(!0,""),(o=new FormData).append("teacher_transfer_id",t),o.append("mayor_letter",e),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),n.prev=11,Object(d.a)(),n.next=15,a.a.post("".concat(i.c,"/teachertransfers/outgoing"),o);case 15:p=n.sent,console.log("Uploaded document: ",p.data),r({type:l.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:t,mayor_letter:p.data.mayor_letter}}),s(!1,""),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(11),console.error(n.t0),s(!1,Object(u.a)(n.t0));case 25:case"end":return n.stop()}}),n,null,[[11,21]])})));return function(t){return r.apply(this,arguments)}}()}},174:function(t,e,s){"use strict";s.r(e),s.d(e,"PermutationsReports",(function(){return m}));var n=s(26),r=s(35),c=s(29),o=s(30),a=s(31),l=s(32),i=s(2),d=s(143),u=s(17),p=s(10),h=s(108),j=s(33),x=s(43),b=s(1),f=function(t){Object(a.a)(s,t);var e=Object(l.a)(s);function s(t){var o;return Object(c.a)(this,s),(o=e.call(this,t)).FilteredData=function(){var t,e=null===(t=o.props.permutations.permutations)||void 0===t?void 0:t.find((function(t){return t.page===o.state.page}));if(void 0!==e){var s,c=Object(r.a)(e.permutations_data);try{for(c.s();!(s=c.n()).done;){var a=s.value;o.setState({schools_selected:[].concat(Object(n.a)(o.state.schools_selected),Object(n.a)(a.schools))})}}catch(l){c.e(l)}finally{c.f()}return e.permutations_data}return null},o.componentDidMount=function(){var t;null===o.state.districts&&(o.setState({loading:!0}),Object(h.b)((function(t,e,s){null!==e&&o.setState({districts:e,loading:!1}),o.setState({loading:!1})}))),null===o.props.permutations.permutations&&null!==o.props.auth.district&&null!==o.props.auth.role&&"3"===o.props.auth.role.role_id&&o.props.FC_GetPermutationsByDistrict(o.props.auth.district.district_code,o.state.page,o.state.limit,o.setLoading),"4"===(null===(t=o.props.auth.role)||void 0===t?void 0:t.role_id)&&null===o.props.permutations.permutations&&(o.setState({loading:!0}),o.props.FC_GetNationalPermutations(o.state.page,o.state.limit,(function(t){o.setState({loading:t})})))},o.FindUser=function(t,e){var s=e.find((function(e){return e.user_id===t}));return void 0!==s?s:null},o.FindSchool=function(t,e){var s=e.find((function(e){return e.school_code===t}));return void 0!==s?s:null},o.setLoading=function(t){return o.setState({loading:t})},o.state={loading:!1,districts:null,selected_district_code:null!==o.props.auth.district&&null!==o.props.auth.role&&"3"===o.props.auth.role.role_id?o.props.auth.district.district_code:null,selected_school_code:null,page:1,limit:1e3,schools_selected:[]},o}return Object(o.a)(s,[{key:"render",value:function(){var t=this;return null===this.state.districts||!0===this.state.loading?Object(b.jsx)(j.a,{children:Object(b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(b.jsx)(x.a,{}),Object(b.jsx)("div",{children:"Loading permutations..."})]})}):Object(b.jsxs)(j.a,{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(b.jsxs)("div",{className:"text-3xl font-bold flex flex-col",children:[Object(b.jsx)("span",{children:"Permutations report"}),Object(b.jsx)("span",{className:"text-base font-light text-gray-600",children:"List of permutations"})]}),Object(b.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[null!==this.props.auth.district&&null!==this.props.auth.role&&"3"===this.props.auth.role.role_id?Object(b.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(b.jsx)("span",{className:"text-gray-500",children:"Selected district"}),Object(b.jsx)("span",{className:"font-extrabold",children:this.props.auth.district.district_name})]}):null!==this.props.auth.role&&"4"===this.props.auth.role.role_id&&Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)("span",{children:"Filter district"}),Object(b.jsxs)("select",{value:null===this.state.selected_district_code?"":this.state.selected_district_code,onChange:function(e){return t.setState({selected_district_code:e.target.value})},className:"border border-gray-500 rounded px-3 py-2",children:[Object(b.jsx)("option",{value:"",children:"Choose district"}),this.state.districts.map((function(t,e){return Object(b.jsx)("option",{value:t.district_code,children:t.district_name},e+1)}))]})]}),null!==this.props.auth.school&&null!==this.props.auth.role&&"2"===this.props.auth.role.role_id?Object(b.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(b.jsx)("span",{className:"text-gray-500",children:"Selected school"}),Object(b.jsx)("span",{className:"font-extrabold",children:this.props.auth.school.school_name})]}):Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)("span",{children:"Filter School"}),Object(b.jsxs)("select",{className:"px-3 py-2 rounded border border-gray-500",children:[Object(b.jsx)("option",{value:"",children:"Choose school"}),this.state.schools_selected.map((function(t,e){return Object(b.jsx)("option",{value:t.school_code,children:t.school_name})}))]})]})]})]}),Object(b.jsxs)("div",{className:"flex flex-row items-center w-full mt-2 gap-3",children:[Object(b.jsx)("input",{placeholder:"Search",className:"px-3 py-2 rounded border border-gray-500 w-full"}),Object(b.jsxs)("div",{className:"bg-yellow-100 text-black hover:bg-accent-900 hover:text-white rounded px-3 py-2 flex flex-row items-center gap-2 cursor-pointer",children:[Object(b.jsx)("div",{children:Object(b.jsx)(d.a,{className:"text-xl"})}),Object(b.jsx)("span",{children:"Export"})]})]})]}),Object(b.jsx)("div",{className:"mt-5",children:Object(b.jsxs)("table",{className:"w-full rounded",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{className:"bg-blue-100 rounded-t",children:[Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"#"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"User one"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"School one"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"User two"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"School two"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"Position"}),Object(b.jsx)("td",{className:"px-3 py-2 text-left",children:"Qualification"})]})}),Object(b.jsx)("tbody",{children:null===this.FilteredData()?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"Loading..."})}):0===this.FilteredData().length?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"No data found!"})}):this.FilteredData().map((function(e,s){var n,r,c,o;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:s+1}),Object(b.jsx)("td",{children:null===(n=t.FindUser(e.user_one,e.usersInfo))||void 0===n?void 0:n.full_name}),Object(b.jsx)("td",{children:null===(r=t.FindSchool(e.school_one,e.schools))||void 0===r?void 0:r.school_name}),Object(b.jsx)("td",{children:null===(c=t.FindUser(e.user_two,e.usersInfo))||void 0===c?void 0:c.full_name}),Object(b.jsx)("td",{children:null===(o=t.FindSchool(e.school_two,e.schools))||void 0===o?void 0:o.school_name}),Object(b.jsx)("td",{children:e.position_name}),Object(b.jsx)("td",{children:e.qualification_name})]})}))})]})})]})}}]),s}(i.Component),m=Object(u.b)((function(t){return{auth:t.auth,basic:t.basic,permutations:t.permutations}}),{FC_GetPermutationsByDistrict:p.v,FC_GetNationalPermutations:p.u})(f)}}]);
//# sourceMappingURL=34.41005958.chunk.js.map