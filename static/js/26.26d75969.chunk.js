(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[26],{104:function(e,t,c){"use strict";c(2);var a=c(50),n=c(1);t.a=function(e){var t=e.onChange,c=e.value,r=e.error,s=e.label,o=e.placeholder,i=e.disabled,l=void 0!==i&&i,d=e.name,u=e.Input_className,h=void 0===u?"":u,b=e.Label_className,j=void 0===b?"":b,p=e.InputContainer_className,x=void 0===p?"":p,f=e.MainContainer_className,m=void 0===f?"":f,v=e.size,O=void 0===v?"md":v,g=e.data;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"w-full my-2 ".concat(m),children:[s&&Object(n.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(j),children:s}),Object(n.jsxs)("div",{className:"rounded relative ".concat(x),children:[Object(n.jsx)("select",{name:d,placeholder:o,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(a.a)(O),"\n                     ").concat(""!==r?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(h),value:c,disabled:l,children:g.map((function(e,t){return Object(n.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==r&&Object(n.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:r})]})]})})}},105:function(e,t,c){"use strict";c.d(t,"b",(function(){return b})),c.d(t,"d",(function(){return j})),c.d(t,"f",(function(){return p})),c.d(t,"c",(function(){return x})),c.d(t,"i",(function(){return f})),c.d(t,"e",(function(){return m})),c.d(t,"g",(function(){return v})),c.d(t,"h",(function(){return O})),c.d(t,"a",(function(){return g}));var a=c(6),n=c(3),r=c.n(n),s=c(5),o=c.n(s),i=c(10),l=c(13),d=c(8),u=c(9),h=c(18),b=function(e){return e(!0,null,""),function(){var t=Object(a.a)(r.a.mark((function t(c){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.a)(),t.next=4,o.a.get("".concat(l.c,"/teachertransfers/requesteddde"));case 4:a=t.sent,console.log("===================================="),console.log({getAllTransfers:a}),console.log("===================================="),c({type:i.a.GET_ALL_TRANSFER,payload:a.data}),e(!1,a.data,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return e(!0,null,""),function(){var t=Object(a.a)(r.a.mark((function t(c){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.a)(),t.next=4,o.a.get("".concat(l.c,"/teachertransfers/teacher"));case 4:a=t.sent,console.log("===================================="),console.log({getAllTransfers:a}),console.log("===================================="),c({type:i.a.GET_MY_TRANSFER,payload:a.data}),e(!1,a.data,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return e(!0,""),function(){var t=Object(a.a)(r.a.mark((function t(c){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.a)(),t.next=4,o.a.get("".concat(l.c,"/teachertransfers/transferreasons"));case 4:a=t.sent,console.log("=================FC_GetTransferReasons==================="),console.log({FC_GetTransferReasons:a}),console.log("=================FC_GetTransferReasons==================="),c({type:i.a.GET_TRANSFER_REASON,payload:a.data}),e(!1,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},x=function(){var e=Object(a.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,null,""),e.prev=1,Object(d.a)(),e.next=5,o.a.get("".concat(l.c,"/district"));case 5:c=e.sent,console.log("=================FC_GetDistricts==================="),console.log({FC_GetDistricts:c}),console.log("=================FC_GetDistricts==================="),t(!1,c.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),t(!1,null,Object(u.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(r.a.mark((function e(t,c){var a,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0,a=0,null,""),e.prev=2,Object(d.a)(),(n=new FormData).append("teacher_supporting_document",t),e.next=8,o.a.post("".concat(l.c,"/teachertransfers/uploadSupportingDocument"),n,{onUploadProgress:function(e){a=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100,c(!0,a,null,"")}});case 8:s=e.sent,console.log("Uploaded document: ",s.data),c(!1,a,s.data,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),c(!1,a,"",Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,c){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.a)(r.a.mark((function e(t,c,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0,null,""),e.prev=1,Object(d.a)(),e.next=5,o.a.post("".concat(l.c,"/teachertransfer/getschoolsperdistrict/").concat(t),{user_id:c});case 5:n=e.sent,console.log("=================FC_GetSchoolByDistrict_2==================="),console.log({FC_GetSchoolByDistrict_2:n}),console.log("=================FC_GetSchoolByDistrict_2==================="),a(!1,n.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),a(!1,null,Object(u.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,c,a){return e.apply(this,arguments)}}(),v=function(e,t,c,n,s){s(!0,"");var b="";return function(){var j=Object(a.a)(r.a.mark((function a(j){var p,x;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s(!0,""),a.next=3,f(c,(function(e,t,c,a){s(e,""),console.log("==================&&&&&&&&&&&&&=================="),console.log({data:c}),console.log("==================&&&&&&&&&&&&&=================="),!e&&Object(h.f)(a)&&null!==c?b=c:e||Object(h.f)(a)||s(!1,a)}));case 3:if(Object(h.f)(b)){a.next=23;break}return s(!0,""),p={teacher_transfer_id:e,outgoing_status:n,outgoing_dde_comment:t,mayor_letter:b},console.log("==================*********************=================="),console.log({doc_title:b}),console.log("==================*********************=================="),a.prev=9,Object(d.a)(),a.next=13,o.a.post("".concat(l.c,"/teachertransfers/outgoing"),p);case 13:x=a.sent,console.log("Uploaded document: ",x.data),j({type:i.a.RESPOND_TO_LEAVE,payload:p}),s(!1,""),a.next=23;break;case 19:a.prev=19,a.t0=a.catch(9),console.error(a.t0),s(!1,Object(u.a)(a.t0));case 23:case"end":return a.stop()}}),a,null,[[9,19]])})));return function(e){return j.apply(this,arguments)}}()},O=function(e,t,c,n,s){return s(!1,""),function(){var h=Object(a.a)(r.a.mark((function a(h){var b,j;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s(!0,""),b={teacher_transfer_id:e,requested_status:c,approved_school_id:t.school_code,requested_comment:n},a.prev=2,Object(d.a)(),a.next=6,o.a.post("".concat(l.c,"/teachertransfers/incoming"),b);case 6:j=a.sent,console.log("FC_RespondTransfer document: ",j.data),h({type:i.a.RESPOND_TO_TRANSFER,payload:{teacher_transfer_id:e,requested_status:c,approved_school:t,requested_comment:n}}),s(!1,""),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(2),console.error(a.t0),s(!1,Object(u.a)(a.t0));case 16:case"end":return a.stop()}}),a,null,[[2,12]])})));return function(e){return h.apply(this,arguments)}}()},g=function(e){return e(!0,null,""),function(){var t=Object(a.a)(r.a.mark((function t(c){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.a)(),t.next=4,o.a.get("".concat(l.c,"/teachertransfers/leavingdde"));case 4:a=t.sent,console.log("=================FC_GetAllLeaves==================="),console.log({FC_GetAllLeaves:a}),console.log("=================FC_GetAllLeaves==================="),c({type:i.a.GET_ALL_LEAVES,payload:a.data}),e(!1,a.data,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}},167:function(e,t,c){"use strict";c.r(t),c.d(t,"FreeVacancies",(function(){return N}));var a=c(26),n=c(28),r=c(29),s=c(30),o=c(31),i=c(2),l=c.n(i),d=c(12),u=c(16),h=c(10),b=c(105),j=c(25),p=c(32),x=c(43),f=c(104),m=c(33),v=c(42),O=c(18),g=c(1),_=function(e){Object(s.a)(c,e);var t=Object(o.a)(c);function c(e){var a;return Object(n.a)(this,c),(a=t.call(this,e)).componentDidMount=function(){Object(b.c)((function(e,t,c){a.setState({loading_district:!1,districts:null===t?[]:t,error:null===t?{target:"main-error",msg:"msg"}:{target:null,msg:""}})}))},a.selectDistrict=function(e){null!==e?(a.setState({selected_district:e,loading_vacancies:!0,vacancies:null}),Object(h.s)(e.district_code,(function(e,t,c){!0===e?a.setState({loading_vacancies:!1,vacancies:t}):a.setState({loading_vacancies:!1,vacancies:null,error:{target:"main-error",msg:c}})}))):a.setState({selected_district:e})},a.state={loading_vacancies:!1,loading_district:!0,districts:[],vacancies:null,selected_district:null,error:{target:null,msg:""},selected_qualification:"",search:""},a}return Object(r.a)(c,[{key:"render",value:function(){var e,t=this;if(!0===this.state.loading_district)return Object(g.jsx)("div",{className:"p-8 text-center",children:Object(g.jsx)("div",{className:"mx-auto",children:Object(g.jsx)(v.a,{})})});if("main-error"===this.state.error.target)return Object(g.jsx)(j.a,{theme:"danger",fixed:!0,children:this.state.error.msg});var c=[];return null!==this.state.vacancies&&(c=""===this.state.selected_qualification?this.state.vacancies.district_schools_position_occupation:this.state.vacancies.district_schools_position_occupation.filter((function(e){return e.qualification_id===t.state.selected_qualification})),c=Object(O.g)(c,this.state.search,{position_code:!0,position_name:!0,qualification_name:!0,school_code:!0,school_name:!0})),Object(g.jsxs)(g.Fragment,{children:["main-success"===this.state.error.target&&Object(g.jsx)(j.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"sticky top-14",children:Object(g.jsxs)(p.a,{children:[Object(g.jsx)(x.a,{className:"text-center pb-2",children:"Available vacancies"}),null!==this.state.selected_district&&Object(g.jsxs)("div",{className:"border-t p-1 flex pt-2",children:[Object(g.jsx)("div",{className:"pt-1 flex items-center",children:Object(g.jsxs)("div",{className:"border rounded flex pl-2",children:[Object(g.jsxs)("h2",{className:"p-2 font-bold text-xl",children:[this.state.selected_district.district_name," district"]}),Object(g.jsx)("button",{className:"p-2 py-3 hover:bg-red-200 text-red-500 rounded",onClick:this.selectDistrict.bind(this,null),children:Object(g.jsx)(d.e,{className:"text-2xl"})})]})}),Object(g.jsxs)("div",{className:"flex items-center mx-2 px-2 border rounded",children:[Object(g.jsxs)("label",{htmlFor:"",className:"text-lg pr-2 ",children:["Qualification:"," "]}),Object(g.jsx)(f.a,{size:"sm",onChange:function(e){return t.setState({selected_qualification:e.target.value})},value:this.state.selected_qualification,error:"",label:"",placeholder:"Select Qualification",name:"",data:[{title:"Select Qualification",value:""}].concat(Object(a.a)(this.state.vacancies?null===(e=this.state.vacancies)||void 0===e?void 0:e.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})):[]))})]}),Object(g.jsxs)("div",{className:"mx-2 flex items-center border px-2 rounded",children:[Object(g.jsx)("label",{className:"text-lg pr-2",children:"Search"}),Object(g.jsx)(m.a,{error:"",label:"",name:"",size:"sm",onChange:function(e){return t.setState({search:e.target.value})},placeholder:"Search",value:this.state.search})]})]})]})}),null===this.state.selected_district?Object(g.jsx)(p.a,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{className:"text-center p-2 text-gray-400 pb-4 text-2xl",children:"Please select a district"}),this.state.districts.length>=1?Object(g.jsx)("div",{className:"grid grid-cols-2 gap-2 ",children:this.state.districts.map((function(e){return Object(g.jsxs)("div",{onClick:t.selectDistrict.bind(t,e),className:"p-2 flex cursor-pointer rounded border  px-3 hover:text-blue-600 hover:border-blue-600 hover:bg-blue-100 bg-white text-lg",children:[Object(g.jsxs)("h4",{className:"flex-1 text-lg",children:[" ",Object(g.jsx)("b",{children:e.district_name})," district"]}),Object(g.jsx)("button",{className:"",children:Object(g.jsx)(d.z,{})})]},e.district_code)}))}):Object(g.jsx)("div",{children:Object(g.jsxs)("h2",{className:"text-center p-4 text-gray-400  text-2xl",children:["Something went wrong, ",Object(g.jsx)("br",{})," please try again later"]})})]})}):Object(g.jsx)(p.a,{children:!0===this.state.loading_vacancies?Object(g.jsx)("div",{className:"text-center py-10",children:Object(g.jsx)(v.a,{})}):Object(g.jsx)("div",{children:null===this.state.vacancies?Object(g.jsx)(j.a,{theme:"danger",children:"Failed to load the data"}):Object(g.jsxs)("table",{className:"w-full border",children:[Object(g.jsx)("thead",{className:"text-left",children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"p-2 border",children:"#"}),Object(g.jsx)("th",{className:"p-2 border",children:"School code"}),Object(g.jsx)("th",{className:"p-2 border",children:"School name"}),Object(g.jsx)("th",{className:"p-2 border",children:"Position code"}),Object(g.jsx)("th",{className:"p-2 border",children:"Position name"}),Object(g.jsx)("th",{className:"p-2 border",children:"Qualification"}),Object(g.jsx)("th",{className:"p-2 border",children:"Vacant"})]})}),Object(g.jsx)("tbody",{children:c.length<=0?Object(g.jsx)("tr",{children:Object(g.jsxs)("td",{colSpan:8,className:"text-center py-8",children:[Object(g.jsx)(x.a,{children:"No results found"}),Object(g.jsxs)("p",{className:"pt-1 text-gray-600",children:["Please search using:"," ",Object(g.jsx)("b",{children:"school code, school name, position code, position name"})]})]})}):c.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"p-2 border",children:t+1}),Object(g.jsx)("td",{className:"p-2 border",children:e.school_code}),Object(g.jsx)("td",{className:"p-2 border",children:e.school_name}),Object(g.jsx)("td",{className:"p-2 border",children:e.position_code}),Object(g.jsx)("td",{className:"p-2 border",children:e.position_name}),Object(g.jsx)("td",{className:"p-2 border",children:e.qualification_name}),Object(g.jsx)("td",{className:"p-2 border",children:e.vacant})]},t)}))})]})})})]})]})}}]),c}(l.a.Component),N=Object(u.b)((function(e){return{auth:e.auth,basic:e.basic,placement:e.placement}}),{})(_)}}]);
//# sourceMappingURL=26.26d75969.chunk.js.map