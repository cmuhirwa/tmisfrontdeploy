(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[53],{577:function(e,t,s){"use strict";s.r(t),s.d(t,"ApproveNewVacantTobeFilled",(function(){return S}));var c=s(27),r=s(28),a=s(29),l=s(30),n=s(4),o=s.n(n),d=s(32),i=s(13),h=s(54),j=s(38),b=s(53),x=s(79),m=s(61),O=s(36),u=s(18),p=s(43),g=s(2),f=function(e){Object(a.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).cleanError=function(){return r.setState({error:{target:null,msg:""}})},r.addNewItem=function(e){return r.setState({data:[].concat(Object(p.a)(r.state.data),[e])})},r.removeItem=function(e){window.confirm("Are you sure you want to remove this record?")&&(r.setState({delete_loading:!0,deleting_item:""}),Object(i.k)(e,(function(t,s){!0===t?r.setState({delete_loading:!1,deleting_item:"",error:{target:"main-success",msg:"Record removed successfully"},data:r.state.data.filter((function(t){return t.school_need_post_id!==e}))}):(r.setState({delete_loading:!1,deleting_item:"",error:{target:"main-error",msg:"Error: ".concat(s)}}),setTimeout((function(){r.setState({error:{msg:"",target:null}})}),2e3))})))},r.state={error:{target:null,msg:""},loading_assets:!1,create_request:!1,assets:null,data:[],loading_data:!1,loading_hierarchy:!1,delete_loading:!1,deleting_item:"",selected_posts:[]},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({loading_data:!0,loading_hierarchy:!0}),Object(i.kb)((null===(e=this.props.school)||void 0===e?void 0:e.school_code)+"",(function(e,s,c){!0===e?t.setState({data:s,loading_data:!1}):t.setState({data:[],loading_data:!1,error:{target:"main-error",msg:"Error: ".concat(c)}})}))}},{key:"render",value:function(){var e,t,s=this.state.data.filter((function(e){return"A0"===e.qualification_name})).length,c=this.state.data.filter((function(e){return"A1"===e.qualification_name})).length,r=this.state.data.filter((function(e){return"A2"===e.qualification_name})).length;return Object(g.jsxs)(g.Fragment,{children:["main-error"===this.state.error.target&&Object(g.jsx)(h.a,{theme:"danger",fixed:!0,onClick:this.cleanError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(g.jsx)(h.a,{theme:"success",fixed:!0,onClick:this.cleanError,children:this.state.error.msg}),Object(g.jsxs)(b.a,{className:"flex items-center",children:[Object(g.jsx)("section",{className:"pr-3",children:Object(g.jsx)(j.a,{theme:"primary-light",onClick:this.props.close,children:"Back"})}),Object(g.jsx)("div",{className:"w-full flex items-center",children:Object(g.jsxs)("section",{className:"flex-1",children:[Object(g.jsx)(x.a,{size:"md",children:"Vacant posts to be filled "}),Object(g.jsx)("p",{className:"m-0 text-gray-400 text-lg",children:Object(g.jsxs)("b",{className:"text-blue-500",children:[null===(e=this.props.school)||void 0===e?void 0:e.school_code," - ",null===(t=this.props.school)||void 0===t?void 0:t.school_name]})})]})})]}),Object(g.jsxs)(b.a,{children:[Object(g.jsxs)("div",{className:"flex gap-2 mb-2 text-center",children:[Object(g.jsxs)("section",{className:"border p-1 px-6 rounded bg-gray-100",children:[Object(g.jsx)("span",{children:"A0"}),Object(g.jsx)("h2",{className:"font-bold text-2xl -mt-1",children:s})]}),Object(g.jsxs)("section",{className:"border p-1 px-6 rounded bg-gray-100",children:[Object(g.jsx)("span",{children:"A1"}),Object(g.jsx)("h2",{className:"font-bold text-2xl -mt-1",children:c})]}),Object(g.jsxs)("section",{className:"border p-1 px-6 rounded bg-gray-100",children:[Object(g.jsx)("span",{children:"A2"}),Object(g.jsx)("h2",{className:"font-bold text-2xl -mt-1",children:r})]}),Object(g.jsx)("div",{className:"flex-1"}),Object(g.jsxs)("section",{className:"border p-1 px-6 rounded bg-gray-100",children:[Object(g.jsx)("span",{children:"Total"}),Object(g.jsx)("h2",{className:"font-bold text-2xl -mt-1",children:r+c+s})]})]}),Object(g.jsxs)("table",{className:"w-full",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"text-left",children:[Object(g.jsx)("th",{className:"p-2 border",children:"#"}),Object(g.jsx)("th",{className:"p-2 border",children:"Code"}),Object(g.jsx)("th",{className:"p-2 border",children:"Position name"}),Object(g.jsx)("th",{className:"p-2 border",children:"Qualification "}),Object(g.jsx)("th",{className:"p-2 border",children:"Specialization"}),Object(g.jsx)("th",{className:"p-2 border",children:"Total Period"}),Object(g.jsx)("th",{className:"p-2 border",children:"Teaching level"}),Object(g.jsx)("th",{className:"p-2 border",children:"Status"}),Object(g.jsx)("th",{className:"p-2 border"})]})}),Object(g.jsx)("tbody",{children:!0===this.state.loading_data?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{className:"py-8 text-center",colSpan:10,children:Object(g.jsx)(O.a,{})})}):0===this.state.data.length?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{className:"py-8 text-center",colSpan:10,children:Object(g.jsx)("h2",{className:"text-2xl font-bold text-gray-600",children:"No results found"})})}):Object(g.jsx)(g.Fragment,{children:this.state.data.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-2",children:t+1}),Object(g.jsx)("td",{className:"border p-2",children:e.school_code}),Object(g.jsx)("td",{className:"border p-2",children:e.position_name}),Object(g.jsx)("td",{className:"border p-2",children:e.qualification_name}),Object(g.jsx)("td",{className:"border p-2",children:e.specialization_name}),Object(g.jsx)("td",{className:"border p-2",children:e.total_period}),Object(g.jsx)("td",{className:"border p-2",children:e.teaching_level}),Object(g.jsx)("td",{className:"border p-2 text-center",children:Object(g.jsx)("span",{className:"p-1 rounded-lg text-xs ".concat("APPROVED"===e.status?"bg-green-100 text-green-700":"bg-gray-200"),children:e.status})})]},t)}))})})]})]})]})}}]),s}(o.a.Component),N=Object(d.b)((function(e){return{auth:e.auth}}),{})(f),_={msg:"",target:null},v=function(e){Object(a.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).loadApp=function(){if(null===r.props.auth.district)return r.setState({error:{target:"main-error",msg:"No district assigned to you!"}});r.setState({loading_schools:!0}),Object(i.t)("11",(function(e,t,s){e?r.setState({data:t,loading_schools:!1}):r.setState({loading_schools:!1,data:[],error:{target:"main-error",msg:"Error: ".concat(s)}}),r.clearError()}))},r.clearError=function(){return setTimeout((function(){r.setState({error:_})}),3e3)},r.state={loading_schools:!1,selected_school:null,data:[],error:_,search:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.loadApp()}},{key:"render",value:function(){var e=this,t=Object(u.k)(this.state.data,this.state.search,{school_code:!0,school_name:!0}),s=0,c=0,r=0;return null!==this.state.selected_school&&this.state.selected_school?Object(g.jsx)(N,{school:this.state.selected_school,close:function(){e.setState({selected_school:null}),window.scroll(0,0),e.loadApp()}}):Object(g.jsxs)(g.Fragment,{children:["main-error"===this.state.error.target&&Object(g.jsx)(h.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(g.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b.a,{children:Object(g.jsx)("div",{className:"flex w-full items-center",children:Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(x.a,{size:"md",children:"All the vacant"}),Object(g.jsx)("p",{className:"m-0 text-gray-500",children:"this is the list of the vacant"})]})})}),Object(g.jsxs)(b.a,{children:[Object(g.jsx)("div",{className:"flex w-full gap-2  pb-2",children:Object(g.jsx)("div",{className:"flex-1",children:Object(g.jsx)(m.a,{onChange:function(t){return e.setState({search:t.target.value})},value:this.state.search,error:"",label:"",placeholder:"Search by School code or school name",name:"",size:"sm"})})}),Object(g.jsxs)("table",{className:"w-full",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"text-left",children:[Object(g.jsx)("th",{className:"p-2 border",children:"#"}),Object(g.jsx)("th",{className:"p-2 border",children:"School code"}),Object(g.jsx)("th",{className:"p-2 border",children:"School name"}),Object(g.jsx)("th",{className:"p-2 border",children:"Rejected"}),Object(g.jsx)("th",{className:"p-2 border",children:"Approved"}),Object(g.jsx)("th",{className:"p-2 border",children:"Total"}),Object(g.jsx)("th",{className:"p-2 border"})]})}),Object(g.jsxs)("tbody",{children:[!0===this.state.loading_schools?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{className:"py-8 text-center",colSpan:10,children:Object(g.jsx)(O.a,{})})}):0===t.length?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{className:"py-8 text-center",colSpan:10,children:Object(g.jsx)("h1",{className:"text-2xl",children:"No results found!"})})}):t.map((function(t,a){return c+=+t.APPROVED,r+=+t.TOTAL,s+=+t.REJECTED,Object(g.jsxs)("tr",{className:"hover:bg-yellow-50",children:[Object(g.jsx)("td",{className:"p-2 border",children:a+1}),Object(g.jsx)("td",{className:"p-2 border",children:t.school_code}),Object(g.jsx)("td",{className:"p-2 border",children:t.school_name}),Object(g.jsx)("td",{className:"p-2 border font-bold text-red-700",children:t.REJECTED}),Object(g.jsx)("td",{className:"p-2 border font-bold text-green-700",children:t.APPROVED}),Object(g.jsx)("td",{className:"p-2 border font-bold",children:t.TOTAL}),Object(g.jsx)("td",{className:"p-2 border",children:Object(g.jsx)(j.a,{size:"sm",theme:"accent-light",className:"w-full",onClick:function(){e.setState({selected_school:t}),window.scrollTo(0,0)},children:"Select"})})]},a)})),t.length>=2&&""===this.state.search&&Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"p-2",colSpan:3}),Object(g.jsx)("td",{className:"p-2 bg-red-100 border text-red-600 text-xl font-bold",children:s}),Object(g.jsx)("td",{className:"p-2 border bg-green-100 text-green-700 text-xl font-bold",children:c}),Object(g.jsx)("td",{className:"p-2 border bg-blue-100 text-blue-600 text-xl font-bold",children:r})]})]})]})]})]})]})}}]),s}(o.a.Component),S=Object(d.b)((function(e){return{auth:e.auth}}),{})(v)}}]);
//# sourceMappingURL=53.9105d2fe.chunk.js.map