(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[17],{104:function(e,t,i){"use strict";i(2);var a=i(49),s=i(1);t.a=function(e){var t=e.onChange,i=e.value,r=e.error,c=e.label,n=e.placeholder,d=e.disabled,l=void 0!==d&&d,o=e.name,m=e.Input_className,u=void 0===m?"":m,b=e.Label_className,j=void 0===b?"":b,_=e.InputContainer_className,h=void 0===_?"":_,x=e.MainContainer_className,p=void 0===x?"":x,v=e.size,f=void 0===v?"md":v,g=e.data;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"w-full my-2 ".concat(p),children:[Object(s.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(j),children:c}),Object(s.jsxs)("div",{className:"rounded relative ".concat(h),children:[Object(s.jsx)("select",{name:o,placeholder:n,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(a.a)(f),"\n                     ").concat(""!==r?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(u),value:i,disabled:l,children:g.map((function(e,t){return Object(s.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==r&&Object(s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:r})]})]})})}},126:function(e,t,i){"use strict";i(2);var a=i(1);t.a=function(e){var t=e.title,i=e.remain,s=e.total;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:" bg-primary-800 rounded text-center mr-4 overflow-hidden w-40",children:[Object(a.jsxs)("div",{className:"p-2 pb-1",children:[Object(a.jsx)("h4",{className:"text-white font-bold m-0",children:t}),Object(a.jsxs)("div",{className:"-mt-0.5",children:[Object(a.jsx)("label",{className:"text-sm text-gray-400",children:"Remaining:"}),Object(a.jsx)("h1",{className:"text-2xl -mt-2 font-bold text-white",children:i})]})]}),Object(a.jsx)("div",{className:"bg-blue-300  text-black px-2 py-1",children:Object(a.jsxs)("label",{className:"text-sm",children:["Total: ",Object(a.jsx)("b",{children:s})]})})]})})}},127:function(e,t,i){"use strict";var a=i(20),s=i(2),r=i(25),c=i(1);t.a=function(e){var t=e.onChange,i=e.onChangeComment,n=e.value,d=e.comment,l=e.error,o=e.placeholderComment,m=e.max,u=e.onSave,b=e.onCancel,j=e.loading,_=e.minValue,h=Object(s.useState)(""),x=Object(a.a)(h,2),p=x[0],v=x[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("td",{className:" border  w-20 relative",children:[Object(c.jsx)("input",{type:"number",className:"w-full p-1 border-4 rounded-t border-primary-800 font-bold bg-transparent",value:n,onChange:t,max:m,autoFocus:!0,min:_}),Object(c.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster absolute p-1 bg-primary-800 rounded-b -mt-0.5 rounded-tl  z-40 w-80 right-0 ",children:[""!==p&&Object(c.jsx)("div",{className:"bg-red-200 text-red-800 px-2 animate__animated animate__bounceIn  py-1 rounded text-sm",children:p}),""!==l&&Object(c.jsx)("div",{className:"bg-red-200 text-red-800 px-2 animate__animated animate__bounceIn  py-1 rounded text-sm",children:l}),Object(c.jsx)("label",{className:"px-1 text-sm text-gray-300",htmlFor:"selected_comment",children:"Comment"}),Object(c.jsx)("div",{className:"px-1",children:Object(c.jsx)("textarea",{disabled:j,id:"selected_comment",className:"w-full p-1 rounded bg-white dark:bg-primary-900 dark:text-white",value:d,onChange:i,placeholder:o})}),Object(c.jsxs)("div",{className:"flex gap-2 px-1 pb-1",children:[Object(c.jsx)(r.a,{loading:j,onClick:function(){isNaN(+n)||""===n?(v("Valid number is required"),setTimeout((function(){v("")}),2e3)):void 0!==_&&+n<+_?(v("The minimum value is ".concat(_)),setTimeout((function(){v("")}),2e3)):(u(),v(""))},theme:"success",disabled:j,children:"Save change"}),!1===j&&Object(c.jsx)(r.a,{loading:j,onClick:b,theme:"danger",children:"Cancel"})]})]})]})})}},136:function(e,t,i){"use strict";i.r(t),i.d(t,"CountryPostDistribution",(function(){return q}));var a=i(35),s=i(4),r=i(26),c=i(27),n=i(28),d=i(29),l=i(2),o=i.n(l),m=i(16),u=i(12),b=i(24),j=i(126),_=i(30),h=i(39),x=i(104),p=i(31),v=i(127),f=i(18),g=i(1),O=function(e){Object(n.a)(i,e);var t=Object(d.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).submitLogin=function(e){e.preventDefault()},a.selectRequest=function(e,t){console.log({req:e,request:t,selected_id:a.state.selected_request_id}),""===a.state.selected_request_id&&a.setState({selected_comment:void 0===t?"":t.distribution_comment,selected_request_id:e.post_request_id,selected_value:void 0===t?"0":t.limits+""})},a.cancelRequest=function(){a.setState({selected_comment:"",selected_request_id:"",selected_value:"0",error:{target:null,msg:""}})},a.saveRequest=function(e,t){if(null!==a.props.basic.academic_calender){var i=a.props.basic.academic_calender.academic_year_id;a.setState({loading:!0,error:{target:null,msg:""}}),Object(u.O)({academic_year_id:i,distribution_comment:a.state.selected_comment,district_code:t.district_code,limits:+a.state.selected_value,minecofin_limit_id:void 0===e?"2":e.minecofin_limit_id,qualification_id:t.qualification_id},(function(e,t,i){!0===e&&null!==t?null!==t.academic_distributed?(a.cleanAlert(),a.setState({loading:!1,error:{target:"main-success",msg:"Post updated successful"},remain_post_by_levels:a.state.remain_post_by_levels.map((function(e){var i=t.total_distributed.find((function(t){return t.qualification_id===e.qualification_id}));return Object(s.a)(Object(s.a)({},e),{},{remain:void 0===i?0:+i.remaining_limits})})),requests:null===t.academic_distributed?a.state.requests:a.state.requests.map((function(e){var i;return e.qualification_id===(null===(i=t.academic_distributed)||void 0===i?void 0:i.qualification_id)&&e.district_code===t.academic_distributed.district_code&&e.academic_year_id===t.academic_distributed.academic_year_id?Object(s.a)(Object(s.a)({},e),{},{limits:+t.academic_distributed.limits,distribution_comment:t.academic_distributed.distribution_comment}):e})),selected_comment:"",selected_value:"",selected_request_id:""})):a.setState({loading:!1,error:{target:"update-error",msg:t.message}}):a.setState({loading:!1,error:{target:"update-error",msg:i}})}))}},a.componentDidMount=function(){if(null!==a.props.basic.academic_calender){var e=a.props.basic.academic_calender.academic_year_id;Object(u.o)(e,(function(e,t,i){!0===e&&null!==t?a.setState({loading_requests:!1,requests:t.academic_distributed.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{limits:+e.limits})})),remain_post_by_levels:a.props.basic.qualifications.map((function(e){var i=t.total_distributed.find((function(t){return t.qualification_id===e.qualification_id}));return{qualification_id:e.qualification_id,qualification_title:e.qualification_name,remain:void 0===i?0:+i.remaining_limits,total:void 0===i?0:+i.limits}})),districts_request:t.districts_request,districts:t.districts}):a.setState({loading_requests:!1,error:{msg:i,target:"requests-error"}})}))}},a.state={loading:!1,requests:[],remain_post_by_levels:[],error:{target:null,msg:""},loading_requests:!1,selected_level:"",selected_request_id:"",selected_value:"0",selected_comment:"",selected_auto_level:"",search:"",districts_request:[],districts:[]},a}return Object(c.a)(i,[{key:"cleanAlert",value:function(){var e=this;setTimeout((function(){e.setState({error:{target:null,msg:""}})}),2e3)}},{key:"render",value:function(){var e=this,t=""===this.state.selected_level?this.state.districts_request:this.state.districts_request.filter((function(t){return t.qualification_id===e.state.selected_level}));return Object(g.jsxs)(g.Fragment,{children:["main-success"===this.state.error.target&&Object(g.jsx)(b.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(g.jsxs)(_.a,{children:["main"===this.state.error.target&&Object(g.jsx)(b.a,{theme:"danger",children:this.state.error.msg}),"loading-update-error"===this.state.error.target&&Object(g.jsx)(b.a,{theme:"danger",children:this.state.error.msg}),Object(g.jsx)(h.a,{children:"REB Distribution"}),Object(g.jsxs)("div",{className:"flex mt-2",children:[Object(g.jsxs)("div",{className:"flex-1",children:[Object(g.jsx)("p",{className:"opacity-60",children:"Distribution"}),Object(g.jsx)("div",{className:"flex",children:this.state.remain_post_by_levels.map((function(e,t){return t>=5?null:Object(g.jsx)(j.a,{remain:e.remain,title:e.qualification_title,total:e.total},t)}))})]}),Object(g.jsx)("div",{className:""})]}),Object(g.jsxs)("div",{className:"mt-3",children:[Object(g.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded",children:[Object(g.jsx)("div",{className:"flex-1 pr-2",children:Object(g.jsx)(p.a,{error:"",label:"Search",name:"",onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search by district name",value:this.state.search,size:"sm"})}),Object(g.jsx)("div",{className:"",children:Object(g.jsx)(x.a,{data:[{title:"All qualifications",value:""}].concat(Object(a.a)(this.props.basic.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})))),error:"",name:"select_level",onChange:function(t){return e.setState({selected_level:t.target.value})},label:"Qualification",placeholder:"Select",value:this.state.selected_level,size:"sm"})})]}),Object(g.jsxs)("table",{className:"w-full text-left",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{className:"bg-blue-500 bg-opacity-20",children:[Object(g.jsx)("th",{className:"p-1 border",children:"#"}),Object(g.jsx)("th",{className:"p-1 border",children:"District"}),Object(g.jsx)("th",{className:"p-1 border",children:"Qualification"}),Object(g.jsx)("th",{className:"p-1 border",children:"Existing"}),Object(g.jsx)("th",{className:"p-1 border",children:"HT Request"}),Object(g.jsx)("th",{className:"p-1 border",children:"DDE Request"}),Object(g.jsx)("th",{className:"p-1 border",children:"Total distributed "}),Object(g.jsx)("th",{className:"p-1 border",children:"Total posts "}),Object(g.jsx)("th",{className:"p-1 border",children:"Comment"})]})}),Object(g.jsx)("tbody",{children:t.length<=0?Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:6,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(g.jsx)(h.a,{size:"md",children:"No results found"})})}):t.map((function(t,i){var a=e.props.basic.qualifications.find((function(e){return e.qualification_id===t.qualification_id})),s=e.state.districts.find((function(e){return e.district_code===t.district_code})),r=e.state.requests.find((function(e){return e.qualification_id===t.qualification_id&&e.district_code===t.district_code}));return Object(g.jsx)(l.Fragment,{children:Object(g.jsxs)("tr",{className:"border rounded hover:bg-blue-500 hover:bg-opacity-20",children:[Object(g.jsx)("td",{className:"p-2 border",children:i+1},i),Object(g.jsx)("td",{className:"p-2 border",children:null===s||void 0===s?void 0:s.district_name}),Object(g.jsx)("td",{className:"p-2 border",children:null===a||void 0===a?void 0:a.qualification_name}),Object(g.jsx)("td",{className:"p-2 border",children:t.existing_post}),Object(g.jsx)("td",{className:"p-2 border",children:t.ht_post_request}),Object(g.jsx)("td",{className:"p-2 border",children:t.dde_post_request}),e.state.selected_request_id===t.post_request_id?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(v.a,{error:"update-error"===e.state.error.target?e.state.error.msg:"",comment:e.state.selected_comment,onChangeComment:function(t){return e.setState({selected_comment:t.target.value})},loading:e.state.loading,max:12,onCancel:e.cancelRequest.bind(e),onChange:function(t){return e.setState({selected_value:t.target.value})},onSave:e.saveRequest.bind(e,r,t),placeholderComment:"Add comment",value:e.state.selected_value})}):Object(g.jsx)("td",{className:"p-2 border w-20 font-bold bg-green-50 text-green-900 cursor-pointer",onClick:e.selectRequest.bind(e,t,r),children:void 0===r?0:r.limits}),Object(g.jsx)("td",{className:"p-2 border w-20 font-bold  cursor-pointer",children:void 0===r?0:r.limits+ +t.existing_post}),Object(g.jsx)("td",{className:"p-2 border",title:void 0===r?"":r.distribution_comment,children:Object(f.g)(void 0===r?"":r.distribution_comment,20)})]})},i)}))})]})]})]})]})}}]),i}(o.a.Component),q=Object(m.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(O)}}]);
//# sourceMappingURL=17.d2f66654.chunk.js.map