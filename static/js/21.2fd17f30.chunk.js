(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[21],{110:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return j}));var a=r(7),c=r(2),n=r.n(c),s=r(6),i=r.n(s),o=r(11),d=r(10),l=r(8),u=r(9),m=function(e){return e(!0,null,""),function(){var t=Object(a.a)(n.a.mark((function t(r){var a,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(l.a)(),t.next=4,i.a.get("".concat(d.d,"/teachertransfers/requesteddde"));case 4:a=t.sent,console.log("===================================="),console.log({getAllTransfers:a}),console.log("===================================="),c=a.data.filter((function(e){return"APPROVED"===e.requested_status})),r({type:o.a.GET_ALL_TRANSFER,payload:c}),e(!1,c,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},p=function(){var e=Object(a.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(a.a)(n.a.mark((function e(t,r){var a,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0,a=0,null,""),e.prev=2,Object(l.a)(),(c=new FormData).append("teacher_supporting_document",t),e.next=8,i.a.post("".concat(d.d,"/teachertransfers/uploadSupportingDocument"),c,{onUploadProgress:function(e){a=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100,r(!0,a,null,"")}});case 8:s=e.sent,console.log("Uploaded document: ",s.data),r(!1,a,s.data,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),r(!1,a,"",Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(e,t,r){r(!0,"");return function(){var c=Object(a.a)(n.a.mark((function a(c){var s,m;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),r(!0,""),(s=new FormData).append("teacher_transfer_id",e),s.append("mayor_letter",t),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),a.prev=11,Object(l.a)(),a.next=15,i.a.post("".concat(d.d,"/teachertransfers/outgoing"),s);case 15:m=a.sent,console.log("Uploaded document: ",m.data),c({type:o.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:e,mayor_letter:m.data.mayor_letter}}),r(!1,""),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(11),console.error(a.t0),r(!1,Object(u.a)(a.t0));case 25:case"end":return a.stop()}}),a,null,[[11,21]])})));return function(e){return c.apply(this,arguments)}}()}},116:function(e,t,r){"use strict";r(3);var a=r(1);t.a=function(e){var t=function(){for(var t=[],r=0;r<e.cols;r++)t.push(r);return t.map((function(e){return Object(a.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(a.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},131:function(e,t,r){"use strict";r(3);var a=r(124),c=r(10),n=r(1);t.a=function(e){var t="uploaded"===e.linkFor?"".concat(c.e,"/").concat(e.first_id):"".concat(c.d,"/generateletter/").concat(e.linkFor,"/").concat(e.first_id,"/").concat(e.last_id);return Object(n.jsxs)("a",{href:t,className:"py-2 px-4 text-md w-max font-bold rounded bg-primary-800 hover:bg-opacity-90 text-white flex items-center gap-2",target:"_blank",rel:"noreferrer",children:[Object(n.jsx)(a.a,{}),Object(n.jsx)("span",{children:e.title})]})}},136:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r(3);var a,c,n=r(52),s=r(1);!function(e){e.PDF="PDF",e.IMAGES="IMAGES",e.ANY="ANY"}(a||(a={})),function(e){e.ALL="",e.IMAGES="image/*",e.EXCEL=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",e.PDF="application/pdf"}(c||(c={}));t.b=function(e){var t=e.onChange,r=e.error,a=e.label,i=e.multiple,o=e.disabled,d=void 0!==o&&o,l=e.accept,u=void 0===l?c.ALL:l,m=e.name,p=e.type,b=e.Input_className,j=void 0===b?"":b,_=e.Label_className,h=void 0===_?"":_,f=e.InputContainer_className,g=void 0===f?"":f,x=e.MainContainer_className,O=void 0===x?"":x,v=e.size,y=void 0===v?"md":v,N=e.labelColor,S=void 0===N?"text-primary-900 dark:text-primary-100":N;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"w-full my-2 ".concat(O),children:[""!==a&&Object(s.jsx)("label",{htmlFor:"any-form",className:"".concat(S," ").concat(h),children:a}),Object(s.jsxs)("div",{className:"rounded relative ".concat(g),children:[Object(s.jsx)("input",{name:m,multiple:i,accept:u,type:p,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(n.a)(y),"\n                ").concat(""!==r?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(j),disabled:d}),""!==r&&Object(s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:r})]})]})})}},188:function(e,t,r){"use strict";r.r(t),r.d(t,"RequestApprovalDde",(function(){return S}));var a=r(3),c=r.n(a),n=r(26),s=r(43),i=r(30),o=r(31),d=r(32),l=r(33),u=r(17),m=r(110),p=r(28),b=r(131),j=r(34),_=r(116),h=r(51),f=r(19),g=r(25),x=r(136),O=r(1),v=Object(u.b)(null,{FC_UploadSignedDocument:m.d})((function(e){var t=c.a.useState(null),r=Object(f.a)(t,2),a=r[0],n=r[1],s=c.a.useState(null),i=Object(f.a)(s,2),o=i[0],d=i[1],l=c.a.useState(!1),u=Object(f.a)(l,2),m=u[0],b=u[1];return Object(O.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster absolute p-1 bg-primary-800 rounded -mt-2 z-40 w-auto mx-2 sm:mx-0 sm:w-80 right-0 pb-2",children:[a&&"main-success"===a.target&&Object(O.jsx)(g.a,{theme:"success",fixed:!0,children:a&&a.msg}),a&&"main-error"===a.target&&Object(O.jsx)(g.a,{theme:"danger",fixed:!0,children:a&&a.msg}),Object(O.jsx)("div",{className:"px-2",children:Object(O.jsx)(x.b,{disabled:m,labelColor:"text-gray-300",label:"Signed document",name:"approved_doc",className:"p-2",onChange:function(e){return function(e){if(n(null),null===e.target.files)return d(null),n({msg:"Please select a valid file",target:"approved_doc"});var t=e.target.files[0];return"application/pdf"!==t.type?(d(null),n({msg:"The system accept pdf only",target:"approved_doc"})):t.size<=0?(d(null),n({msg:"Invalid file, Please choose a real file",target:"approved_doc"})):(d(t),void n(null))}(e)},error:a&&"approved_doc"===a.target?a.msg:"",type:"file",accept:x.a.PDF})}),Object(O.jsxs)("div",{className:"flex justify-between gap-2 px-2",children:[Object(O.jsx)(p.a,{theme:"default",onClick:function(){e.setSelectedUserId(""),d(null)},disabled:m,children:"Cancel"}),Object(O.jsx)("div",{className:"flex gap-2",children:Object(O.jsx)(p.a,{theme:"success",disabled:m,onClick:function(t){null!==o?e.FC_UploadSignedDocument(e.selectedUserId,o,(function(t,r){b(t),t||Object(h.g)(r)?Object(h.g)(r)&&(n({target:"main-success",msg:"Document uploaded successfully!"}),d(null),setTimeout((function(){e.setSelectedUserId("")}),1e3)):n({target:"main-error",msg:r})})):n({target:"approved_doc",msg:"Required!"})},children:"Upload"})})]})]})})),y=function(e){Object(d.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).componentDidMount=function(){null===a.props.transfer.allTransfers||0===a.props.transfer.allTransfers.length?a.props.FC_GetAllTransfers((function(e,t,r){a.setState({loading:e}),!e&&t?a.setState({loading:e}):e||Object(h.g)(r)||a.setState({error:{target:"main-error",msg:r}})})):!0===a.state.loading&&a.setState({loading:!1})},a.getTransferById=function(e){if(a.props.transfer.allTransfers)return a.props.transfer.allTransfers.find((function(t){return t.teacher_transfer_id.toString()===e}))},a.FC_DisplaySchools=function(e){return e.map((function(e,t){return Object(O.jsxs)("p",{children:[t+1," ",e.school_name]})}))},a.state={loading:!0,error:null,search:"",selectedUserId:""},a}return Object(o.a)(r,[{key:"render",value:function(){var e=this;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"mt-3",children:[Object(O.jsx)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded",children:Object(O.jsx)("div",{className:"flex-1 pr-2",children:Object(O.jsx)(j.a,{error:"",label:"Search",type:"search",name:"",onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search",value:this.state.search,size:"sm"})})}),Object(O.jsx)("div",{className:"w-full overflow-x-auto mt-4",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{className:"bg-blue-50 text-blue-800 font-bold text-base text-left",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"p-2",children:"#"}),Object(O.jsx)("th",{className:"p-2",children:"Full Name"}),Object(O.jsx)("th",{className:"p-2",children:"Phone"}),Object(O.jsx)("th",{className:"p-2",children:"Current School"}),Object(O.jsx)("th",{className:"p-2",children:"Approved School"}),Object(O.jsx)("th",{className:"p-2",colSpan:2,children:"Status"})]})}),Object(O.jsx)("tbody",{children:this.state.loading?Object(O.jsx)(_.a,{cols:8}):null===this.props.transfer.allTransfers?Object(O.jsx)("tr",{className:"border-t border-b",children:Object(O.jsx)("td",{colSpan:8,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:"Something went wrong! Please try again."})}):this.props.transfer.allTransfers.length<=0?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:8,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:"No results found"})}):Object(h.h)(this.props.transfer.allTransfers,this.state.search).map((function(t,r){return Object(O.jsxs)("tr",{className:"border-t border-b hover:bg-gray-50",children:[Object(O.jsx)("td",{className:"p-2",children:r+1}),Object(O.jsx)("td",{className:"p-2",children:t.teacher_full_name}),Object(O.jsx)("td",{className:"p-2",children:t.teacher_phone_number}),Object(O.jsx)("td",{className:"p-2",children:t.school_from_info?t.school_from_info.school_name:""}),Object(O.jsx)("td",{className:"p-2",children:t.requested_school_info?e.FC_DisplaySchools(t.requested_school_info):""}),e.state.selectedUserId===t.teacher_transfer_id.toString()?Object(O.jsx)("td",{className:"",children:Object(O.jsx)(v,{selectedUserId:e.state.selectedUserId,setSelectedUserId:function(t){return e.setState({selectedUserId:t})}})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("td",{className:"p-2",children:null===t.mayor_letter||Object(h.g)(t.mayor_letter)?Object(O.jsx)(p.a,{theme:"accent-light",onClick:function(r){return e.setState({selectedUserId:t.teacher_transfer_id.toString()})},children:"Upload signed letter"}):t.requested_status}),Object(O.jsx)("td",{className:"p-2",children:null===t.mayor_letter||Object(h.g)(t.mayor_letter)?Object(O.jsx)(b.a,{linkFor:"transfer",first_id:t.teacher_transfer_id,last_id:t.teacher_id,title:"Transfer letter"}):t.mayor_letter&&!Object(h.g)(t.mayor_letter)&&Object(O.jsx)(b.a,{linkFor:"uploaded",first_id:t.mayor_letter,last_id:"",title:"Transfer letter"})})]})]},t.teacher_transfer_id)}))})]})})]})})}}]),r}(a.Component),N=Object(u.b)((function(e){return{auth:e.auth,basic:e.basic,transfer:e.transfer}}),{FC_GetAllTransfers:m.a})(y),S=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"px-3 mt-3",children:Object(O.jsx)(s.a,{className:"text-blue-800",children:"Approved Transfers"})}),Object(O.jsx)(n.a,{children:Object(O.jsx)(N,{})})]})}}}]);
//# sourceMappingURL=21.2fd17f30.chunk.js.map