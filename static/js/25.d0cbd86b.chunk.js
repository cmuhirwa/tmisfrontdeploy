(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[25],{343:function(e,t,s){"use strict";s(3);var a=s(120),r=s(2);t.a=function(e){var t=e.onChange,s=e.value,c=e.error,n=e.label,o=e.placeholder,i=e.disabled,l=void 0!==i&&i,d=e.name,h=e.Input_className,b=void 0===h?"":h,m=e.Label_className,u=void 0===m?"":m,j=e.InputContainer_className,x=void 0===j?"":j,_=e.MainContainer_className,p=void 0===_?"":_,f=e.labelColor,g=void 0===f?"text-primary-900 dark:text-primary-100":f,O=e.size,v=void 0===O?"md":O;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"w-full my-2 ".concat(p),children:[""!==n&&Object(r.jsx)("label",{htmlFor:"any-form",className:"".concat(g," ").concat(u),children:n}),Object(r.jsxs)("div",{className:"rounded relative ".concat(x),children:[Object(r.jsx)("textarea",{name:d,placeholder:o,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(a.a)(v),"\n                ").concat(""!==c?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(b),value:s,disabled:l}),""!==c&&Object(r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:c})]})]})})}},350:function(e,t,s){"use strict";var a=s(3),r=s.n(a),c=s(121),n=s(367),o=s(339),i=s(2),l=function(e){var t=e.fileData,s=e.fileName,a=e.btnName,r=void 0===a?"Excel":a,l=e.className,d=void 0===l?"flex items-center gap-1 px-4 py-1 rounded text-green-700 bg-white border hover:text-white hover:bg-green-700 border-green-700 font-bold":l,h=e.showIcon,b=void 0===h||h;return Object(i.jsxs)("button",{onClick:function(e){return function(e,t){var s={Sheets:{data:n.a.json_to_sheet(e)},SheetNames:["data"]},a=n.b(s,{bookType:"xlsx",type:"array"}),r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});c.saveAs(r,t+".xlsx")}(t,s)},className:d,children:[b&&Object(i.jsx)(o.c,{}),r]})};t.a=r.a.memo(l)},377:function(e,t,s){"use strict";var a=s(32),r=s(3),c=s(17),n=s(47),o=s(15),i=s(2);t.a=function(e){var t,s,l,d,h,b,m=e.transf,u=e.expand,j=void 0!==u&&u,x=e.remove_loading,_=void 0!==x&&x,p=e.removeTransfer,f=Object(r.useState)(!1),g=Object(a.a)(f,2),O=g[0],v=g[1];return console.log(m),Object(i.jsxs)("div",{className:"p-2 bg-white mb-3 border rounded ",children:[Object(i.jsxs)("div",{className:"flex",children:[Object(i.jsx)("div",{className:"p-3 hidden lg:flex items-center  ".concat("APPROVED"===m.requested_status?"text-green-700 bg-green-100":"text-accent-800 bg-accent-400"," rounded flex items-center"),children:Object(i.jsx)(c.lb,{size:80})}),Object(i.jsxs)("div",{className:"flex-1 pl-3 pt-1",children:[Object(i.jsxs)("section",{className:"hover:underline cursor-pointer",onClick:function(){return v(!O)},children:[Object(i.jsx)("span",{className:"p-1 rounded px-2 py-0.5 text-sm  ".concat("APPROVED"===m.requested_status?"bg-green-600 text-white":"bg-accent-900 text-white"),children:m.requested_status})," ",Object(i.jsxs)("h2",{className:"text-lg font-bold",children:[m.position_code," ",m.position_name]})]}),Object(i.jsxs)("div",{className:"pt-1",children:[Object(i.jsxs)("section",{className:"flex flex-col lg:flex-row gap-1 lg:gap-0 lg:items-center pt-2",children:[Object(i.jsxs)("section",{className:"border pl-2 hover:bg-gray-200 pr-4 rounded  lg:--rounded-r-full",children:[Object(i.jsx)("h6",{className:" font-light text-sm text-yellow-600",children:"Current school"}),Object(i.jsxs)("h3",{className:" font-bold",children:[null===(t=m.school_from_info)||void 0===t?void 0:t.school_code," - ",null===(s=m.school_from_info)||void 0===s?void 0:s.school_name]}),Object(i.jsxs)("h4",{className:"text-sm -mt-1 text-gray-500",children:[null===(l=m.school_from_info)||void 0===l?void 0:l.district_name," -"," ",null===(d=m.school_from_info)||void 0===d?void 0:d.sector_name]})]}),Object(i.jsx)("section",{className:"text-gray-500",children:Object(i.jsx)(c.p,{size:40})}),null===(h=m.requested_school_info)||void 0===h?void 0:h.map((function(e,t){return Object(i.jsxs)("section",{className:" flex-1 pl-4 bg-gray-100 rounded hover:bg-gray-200 ".concat(0===t?"lg:--rounded-l-full rounded-r p-1 mr-2 ":" px-1 rounded mr-2 py-2","  ").concat(m.approved_school_id===e.school_code?"text-green-800 bg-green-100 hover:bg-green-200 border-green-400 border-2":"border"),children:[Object(i.jsxs)("h6",{className:" font-light text-sm text-yellow-600",children:["Requested school ",t+1]}),Object(i.jsxs)("h4",{className:" font-bold",children:[null===e||void 0===e?void 0:e.school_code," - ",null===e||void 0===e?void 0:e.school_name]}),Object(i.jsxs)("h4",{className:"text-sm -mt-1 opacity-70",children:[e.district_name," - ",null===e||void 0===e?void 0:e.sector_name]})]},t)}))]}),Object(i.jsxs)("section",{className:"pt-2",children:[Object(i.jsx)("label",{className:"text-gray-500 inline-block pr-1",children:"Date: "})," ",Object(i.jsx)("b",{children:m.teacher_requested_transfer_date})]})]})]})]}),(O||j)&&Object(i.jsx)("div",{className:"animate__animated  animate__fadeIn animate__faster mt-2 border-t pt-2 grid grid-cols-2",children:[{title:"Transfer type",value:m.transfer_type},{title:"transfer_reason",value:m.transfer_reason},{title:"Requested transfer date",value:m.teacher_requested_transfer_date},{title:"Decision provided on",value:m.incoming_decision_date}].map((function(e,t){return e.value?Object(i.jsxs)("div",{className:"border px-2 py-1.5  flex items-center",children:[Object(i.jsxs)("span",{className:"text-gray-500",children:[e.title,": "]})," ",Object(i.jsx)("h6",{className:"font-bold text-black",children:e.value})]},t):null}))}),m.teacher_comment&&(null===(b=m.teacher_comment)||void 0===b?void 0:b.length)>=1&&Object(i.jsxs)("div",{className:"p-2 my-2 rounded border",children:[Object(i.jsx)("span",{className:"text-gray-500",children:"Transfer reason: "})," ",Object(i.jsx)("h6",{className:"font-bold text-black",children:m.teacher_comment})]}),p&&m.teacher_transfer_id&&"APPROVED"!==m.requested_status&&Object(i.jsx)("div",{className:"pt-4 text-right",children:Object(i.jsx)(n.a,{onClick:p.bind(undefined,m.teacher_transfer_id),theme:"danger-light",loading:_,children:"Remove transfer request"})}),null!==m.mayor_letter&&Object(i.jsx)("div",{className:"p-2 text-right",children:Object(i.jsx)("a",{href:"".concat(o.e,"/").concat(m.mayor_letter),target:"_blank",rel:"noreferrer",download:!0,children:Object(i.jsx)(n.a,{theme:"accent-light",children:"Download transfer letter"})})})]})}},567:function(e,t,s){"use strict";s.r(t),s.d(t,"OutgoingTransfers",(function(){return k}));var a=s(7),r=s(28),c=s(29),n=s(30),o=s(31),i=s(3),l=s.n(i),d=s(27),h=s(16),b=s(52),m=s(47),u=s(51),j=s(78),x=s(343),_=s(48),p=s(53),f=s(377),g=s(32),O=s(350),v=s(2),N=function(e){var t=e.close,s=e.district_id,a=Object(i.useState)(!0),r=Object(g.a)(a,2),c=r[0],n=r[1],o=Object(i.useState)([]),l=Object(g.a)(o,2),d=l[0],m=l[1],u=Object(i.useState)(""),j=Object(g.a)(u,2),x=j[0],f=j[1];return Object(i.useEffect)((function(){!0===c&&Object(h.A)(s,(function(e,t,s){n(!1),m(t),f(s),console.log({data:t})}))}),[c,s]),Object(v.jsx)(p.c,{backDrop:!0,theme:p.b.default,close:t,backDropClose:!1,widthSizeClass:p.a.large,displayClose:!0,padding:{title:!0,body:!1,footer:!1},title:"Export report",children:Object(v.jsxs)("div",{className:"border-t p-4 py-8",children:[""!==x&&Object(v.jsx)(b.a,{theme:"danger",children:x}),!0===c?Object(v.jsxs)("div",{className:"text-xl text-center",children:[Object(v.jsx)(_.a,{}),Object(v.jsx)("h2",{className:"text-2xl font-bold pt-2",children:"Preparing report"}),Object(v.jsx)("h4",{className:"text-gray-500 text-sm",children:"Please wait..."})]}):Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)("h1",{className:"text-3xl",children:"Your report is ready"}),Object(v.jsx)("h1",{children:"You can download it now"}),Object(v.jsx)("div",{className:"inline-block pt-5",children:Object(v.jsx)(O.a,{fileData:d.map((function(e){var t,s,a,r,c,n;return{teacher_id:e.teacher_id,teacher_first_name:e.teacher_first_name,teacher_last_name:e.teacher_last_name,teacher_full_name:e.teacher_full_name,teacher_phone_number:e.teacher_phone_number,position_code:e.position_code,position_name:e.position_name,qualification:e.qualification_name,school_from_code:null===(t=e.school_from_info)||void 0===t?void 0:t.school_code,school_form_name:null===(s=e.school_from_info)||void 0===s?void 0:s.school_name,district_from_name:null===(a=e.school_from_info)||void 0===a?void 0:a.district_name,approved_school_code:null===(r=e.approved_school_info)||void 0===r?void 0:r.school_code,approved_school_name:null===(c=e.approved_school_info)||void 0===c?void 0:c.school_name,approved_district_name:null===(n=e.approved_school_info)||void 0===n?void 0:n.district_name,transfer_reason:e.transfer_reason,transfer_type:e.transfer_type,teacher_requested_transfer_date:e.teacher_requested_transfer_date}})),fileName:"OUTGOING TRANSFERS - ".concat(s),btnName:"Download EXCEL"})})]})]})})},y={target:null,msg:""},w=function(e){Object(n.a)(s,e);var t=Object(o.a)(s);function s(e){var c;return Object(r.a)(this,s),(c=t.call(this,e)).setOpenDownload=function(){return c.setState({open_download_excel:!c.state.open_download_excel})},c.loadingData=function(e,t,s){c.setState({loading:!0,selected_transfer_id:null,data:[],transfer_issue:""}),Object(h.z)({district_code:e,limit:c.state.limit,page:t,status:s||c.state.status},(function(e,s,a){c.setState({loading:!1,data:null!==s&&void 0!==s&&s.district_transfer_request?null===s||void 0===s?void 0:s.district_transfer_request:[],total:null!==s&&void 0!==s&&s.total_transfer?s.total_transfer:0,next:null!==s&&void 0!==s&&s.next?+(null===s||void 0===s?void 0:s.next):0,previous:null!==s&&void 0!==s&&s.previous?+(null===s||void 0===s?void 0:s.previous):0,error:e?y:{target:"main-error",msg:"Error: ".concat(a)},page:t})}))},c.paginateData=function(e){var t;null!==(t=c.props.auth.district)&&void 0!==t&&t.district_code&&c.loadingData(c.props.auth.district.district_code,e)},c.submitIssue=function(){return c.state.transfer_issue.length<=20||""===c.state.selected_transfer_id||null===c.state.selected_transfer_id?c.setState({error:{target:"request-input",msg:"Your message is too short, minimum characters are 20"}}):(c.setState({loading_request:!0}),void Object(h.sb)({teacher_transfer_id:c.state.selected_transfer_id,transfer_issue_comment:c.state.transfer_issue},(function(e,t,s){c.setState({loading_request:!1,error:!0===e?{target:"main-success",msg:"The request has been submitted successfully."}:{target:"main-error",msg:s},data:c.state.data.map((function(e){return e.teacher_transfer_id===c.state.selected_transfer_id?Object(a.a)(Object(a.a)({},e),{},{transfer_issue_comment:c.state.transfer_issue}):e}))})})))},c.changeStatus=function(e){c.state.status!==e&&c.props.auth.district&&(c.setState({status:e}),c.loadingData(c.props.auth.district.district_code,1,e))},c.state={loading:!1,error:y,data:[],limit:14,page:1,total:0,next:0,previous:0,selected_transfer_id:null,transfer_issue:"",loading_request:!1,status:"NO-ISSUE",open_download_excel:!1},c}return Object(c.a)(s,[{key:"componentDidMount",value:function(){if(!this.props.auth.district||!this.props.auth.district.district_code)return this.setState({error:{target:"main-error",msg:"There is no district assigned to you!"}});this.loadingData(this.props.auth.district.district_code,this.state.page,this.state.status)}},{key:"render",value:function(){var e=this,t=(this.state.total/this.state.limit).toFixed(0),s=this.state.data.find((function(t){return t.teacher_transfer_id===e.state.selected_transfer_id}));return Object(v.jsxs)(v.Fragment,{children:[!0===this.state.open_download_excel&&this.props.auth.district&&Object(v.jsx)(N,{district_id:this.props.auth.district.district_code,close:this.setOpenDownload}),"main-success"===this.state.error.target&&Object(v.jsx)(b.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(v.jsx)(b.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),null!==this.state.selected_transfer_id&&void 0!==s&&Object(v.jsx)(p.c,{backDrop:!0,theme:p.b.default,close:function(){return e.setState({selected_transfer_id:null,transfer_issue:""})},backDropClose:!1,widthSizeClass:p.a.extraLarge,displayClose:!0,title:"Transfer details",padding:{title:!0,body:!1,footer:void 0},children:Object(v.jsxs)("div",{className:"border-t",children:[Object(v.jsxs)("div",{className:"p-4 text-gray-500",children:[Object(v.jsxs)("section",{children:["Transfer id:"," ",Object(v.jsx)("b",{className:"text-black",children:s.teacher_transfer_id})]}),Object(v.jsxs)("section",{children:["Teacher names:"," ",Object(v.jsx)("b",{className:"text-black",children:s.teacher_full_name})]}),Object(v.jsxs)("section",{children:["Teacher's Phone number:"," ",Object(v.jsx)("b",{className:"text-black",children:s.teacher_phone_number})]})]}),Object(v.jsx)(f.a,{expand:!0,transf:s}),Object(v.jsxs)("div",{className:"pt-3 px-2 bg-gray-100 m-2",children:[Object(v.jsx)(x.a,{onChange:function(t){return e.setState({transfer_issue:t.target.value})},disabled:this.state.loading_request,value:this.state.transfer_issue,error:"request-input"===this.state.error.target?this.state.error.msg:"",label:"Why do you want this transfer to be Canceled?",placeholder:"Type the reason here",name:""}),Object(v.jsx)("div",{className:"pt-1 pb-3 text-right",children:Object(v.jsx)(m.a,{onClick:this.submitIssue,loading:this.state.loading_request,children:"Submit request"})})]})]})}),Object(v.jsxs)("div",{className:"container mx-auto px-4 flex items-center",children:[Object(v.jsx)("div",{className:"flex-1",children:Object(v.jsx)(j.a,{className:"",children:"Outgoing transfers"})}),Object(v.jsx)("section",{className:"pr-3",children:Object(v.jsx)(m.a,{onClick:this.setOpenDownload,theme:"success",children:"Generate Excel"})}),Object(v.jsxs)("section",{className:"text-center p-1 bg-accent-800 bg-opacity-20 text-accent-900 px-4 rounded",children:[Object(v.jsx)("span",{className:"text-sm block text-gray-500 -mb-1",children:"Total:"}),Object(v.jsx)("h3",{className:"font-bold text-xl",children:this.state.total})]})]}),Object(v.jsxs)(u.a,{transparent:!0,children:[Object(v.jsxs)("table",{className:"w-full",children:[Object(v.jsx)("thead",{className:"text-left bg-white",children:Object(v.jsxs)("tr",{className:"bg-accent-900 bg-opacity-10",children:[Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"#"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"Names"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"School Code"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"School name"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position code"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position name"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"Qualification"}),Object(v.jsx)("th",{className:"p-2 border-gray-300 border",children:"Error"})]})}),Object(v.jsx)("tbody",{children:!0===this.state.loading?Object(v.jsx)("tr",{className:" ",children:Object(v.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(v.jsx)(_.a,{})})}):this.state.data.length<=0?Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(v.jsx)("h1",{className:"text-2xl text-gray-400",children:"No data found"})})}):this.state.data.map((function(t,s){var a,r;return Object(v.jsxs)("tr",{className:"bg-white cursor-pointer hover:bg-yellow-400 hover:bg-opacity-30",onClick:function(){return e.setState({selected_transfer_id:t.teacher_transfer_id,transfer_issue:t.transfer_issue_comment?t.transfer_issue_comment:""})},children:[Object(v.jsx)("td",{className:"border p-2",children:s+1}),Object(v.jsx)("td",{className:"p-2 border",children:t.teacher_full_name}),Object(v.jsx)("td",{className:"p-2 border",children:null===(a=t.school_from_info)||void 0===a?void 0:a.school_code}),Object(v.jsx)("td",{className:"p-2 border",children:null===(r=t.school_from_info)||void 0===r?void 0:r.school_name}),Object(v.jsx)("td",{className:"p-2 border",children:t.position_code}),Object(v.jsx)("td",{className:"p-2 border text-sm",children:t.position_name}),Object(v.jsx)("td",{className:"p-2 border",children:t.qualification_name}),Object(v.jsx)("td",{className:"p-2 border",children:t.transfer_issue_comment&&null!==t.transfer_issue_comment?Object(v.jsx)("span",{className:"text-sm p-0.5 bg-red-400 px-2 rounded-full font-bold text-white",children:"Issue"}):Object(v.jsx)("span",{})})]},s)}))})]}),Object(v.jsx)("div",{className:"flex gap-3 mx-auto pt-3",children:Array(+t).fill("0").map((function(t,s){return Object(v.jsx)("button",{className:"p-2 py-1 ".concat(+e.state.page===s+1?"bg-accent-800 text-black font-bold":"bg-opacity-25"," rounded-full bg-accent-800 "),onClick:e.paginateData.bind(e,s+1),children:s+1})}))})]})]})}}]),s}(l.a.Component),k=Object(d.b)((function(e){return{auth:e.auth}}),{})(w)}}]);
//# sourceMappingURL=25.d0cbd86b.chunk.js.map