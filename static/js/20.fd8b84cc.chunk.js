(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[20],{104:function(e,t,a){"use strict";a(2);var s=a(49),i=a(1);t.a=function(e){var t=e.onChange,a=e.value,r=e.error,c=e.label,n=e.placeholder,d=e.disabled,l=void 0!==d&&d,o=e.name,u=e.Input_className,m=void 0===u?"":u,b=e.Label_className,j=void 0===b?"":b,_=e.InputContainer_className,h=void 0===_?"":_,p=e.MainContainer_className,x=void 0===p?"":p,g=e.size,v=void 0===g?"md":g,f=e.data;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"w-full my-2 ".concat(x),children:[Object(i.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(j),children:c}),Object(i.jsxs)("div",{className:"rounded relative ".concat(h),children:[Object(i.jsx)("select",{name:o,placeholder:n,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(s.a)(v),"\n                     ").concat(""!==r?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(m),value:a,disabled:l,children:f.map((function(e,t){return Object(i.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==r&&Object(i.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:r})]})]})})}},127:function(e,t,a){"use strict";a(2);var s=a(1);t.a=function(e){var t=e.title,a=e.remain,i=e.total;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:" bg-primary-800 rounded text-center mr-4 overflow-hidden w-40",children:[Object(s.jsxs)("div",{className:"p-2 pb-1",children:[Object(s.jsx)("h4",{className:"text-white font-bold m-0",children:t}),Object(s.jsxs)("div",{className:"-mt-0.5",children:[Object(s.jsx)("label",{className:"text-sm text-gray-400",children:"Remaining:"}),Object(s.jsx)("h1",{className:"text-2xl -mt-2 font-bold text-white",children:a})]})]}),Object(s.jsx)("div",{className:"bg-blue-300  text-black px-2 py-1",children:Object(s.jsxs)("label",{className:"text-sm",children:["Total: ",Object(s.jsx)("b",{children:i})]})})]})})}},128:function(e,t,a){"use strict";var s=a(20),i=a(2),r=a(25),c=a(1);t.a=function(e){var t=e.onChange,a=e.onChangeComment,n=e.value,d=e.comment,l=e.error,o=e.placeholderComment,u=e.max,m=e.onSave,b=e.onCancel,j=e.loading,_=e.minValue,h=Object(i.useState)(""),p=Object(s.a)(h,2),x=p[0],g=p[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("td",{className:" border  w-20 relative",children:[Object(c.jsx)("input",{type:"number",className:"w-full p-1 border-4 rounded-t border-primary-800 font-bold bg-transparent",value:n,onChange:t,max:u,autoFocus:!0,min:_}),Object(c.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster absolute p-1 bg-primary-800 rounded-b -mt-0.5 rounded-tl  z-40 w-80 right-0 ",children:[""!==x&&Object(c.jsx)("div",{className:"bg-red-200 text-red-800 px-2 animate__animated animate__bounceIn  py-1 rounded text-sm",children:x}),""!==l&&Object(c.jsx)("div",{className:"bg-red-200 text-red-800 px-2 animate__animated animate__bounceIn  py-1 rounded text-sm",children:l}),Object(c.jsx)("label",{className:"px-1 text-sm text-gray-300",htmlFor:"selected_comment",children:"Comment"}),Object(c.jsx)("div",{className:"px-1",children:Object(c.jsx)("textarea",{disabled:j,id:"selected_comment",className:"w-full p-1 rounded bg-white dark:bg-primary-900 dark:text-white",value:d,onChange:a,placeholder:o})}),Object(c.jsxs)("div",{className:"flex gap-2 px-1 pb-1",children:[Object(c.jsx)(r.a,{loading:j,onClick:function(){isNaN(+n)||""===n?(g("Valid number is required"),setTimeout((function(){g("")}),2e3)):void 0!==_&&+n<+_?(g("The minimum value is ".concat(_)),setTimeout((function(){g("")}),2e3)):(m(),g(""))},theme:"success",disabled:j,children:"Save change"}),!1===j&&Object(c.jsx)(r.a,{loading:j,onClick:b,theme:"danger",children:"Cancel"})]})]})]})})}},138:function(e,t,a){"use strict";a.r(t),a.d(t,"DistrictPostDistribution",(function(){return y}));var s=a(36),i=a(4),r=a(26),c=a(27),n=a(28),d=a(29),l=a(2),o=a.n(l),u=a(16),m=a(12),b=a(24),j=a(127),_=a(30),h=a(40),p=a(104),x=a(31),g=a(48),v=a(128),f=a(7),O=a(18),N=a(1),q=function(e){Object(n.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).submitLogin=function(e){e.preventDefault()},s.selectRequest=function(e){""===s.state.selected_request_id&&s.setState({selected_comment:e.dde_distribution_comment,selected_request_id:e.post_request_id,selected_value:e.dde_post_distribution+""})},s.cancelRequest=function(){return s.setState({selected_comment:"",selected_request_id:"",selected_value:"0",error:{target:null,msg:""}})},s.saveRequest=function(e){if(null!==s.props.basic.academic_calender){var t=s.props.basic.academic_calender.academic_year_id;s.setState({loading:!0,error:{target:null,msg:""}}),Object(m.P)({academic_year_id:t,dde_distribution_comment:s.state.selected_comment,district_code:e.district_code,dde_post_distribution:+s.state.selected_value,position_code:e.position_code,post_request_id:e.post_request_id,qualification_id:e.qualification_id},(function(e,t,a){console.log({status:e,data:t,msg:a}),!0===e&&null!==t?null!==t.academic_distributed?(s.cleanAlert(),s.setState({loading:!1,error:{target:"main-success",msg:"Post updated successful"},remain_post_by_levels:s.state.remain_post_by_levels.map((function(e){var a=t.total_distributed.find((function(t){return t.qualification_id===e.qualification_id}));return Object(i.a)(Object(i.a)({},e),{},{remain:void 0===a?0:+a.remaining_limits})})),requests:null===t.academic_distributed?s.state.requests:s.state.requests.map((function(e){var a;return e.post_request_id===(null===(a=t.academic_distributed)||void 0===a?void 0:a.post_request_id)?Object(i.a)(Object(i.a)({},e),{},{dde_post_distribution:+t.academic_distributed.dde_post_distribution,dde_distribution_comment:t.academic_distributed.dde_distribution_comment}):e})),selected_comment:"",selected_value:"",selected_request_id:""})):s.setState({loading:!1,error:{target:"update-error",msg:t.message}}):s.setState({loading:!1,error:{target:"update-error",msg:a}})}))}},s.componentDidMount=function(){var e;Object(f.a)(null===(e=s.props.auth.role)||void 0===e?void 0:e.access,f.b.DDE_DISTRIBUTION,(function(){s.startApp()}))},s.startApp=function(){if(null===s.props.basic.academic_calender)s.setState({error:{target:"main",msg:"failed to load data, please reload the page (Refresh)"}});else if(null===s.props.auth.district)s.setState({error:{target:"main",msg:"No district assigned to you"}});else{var e=s.props.basic.academic_calender.academic_year_id,t=s.props.auth.district.district_code;s.setState({loading_requests:!0}),Object(m.p)({academic_id:e,district_id:t},(function(e,t,a){!0===e&&null!==t?(console.log({status:e,data:t,msg:a}),s.setState({loading_requests:!1,requests:t.academic_distributed.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{limits:+e.dde_post_distribution,dde_distribution_comment:null===e.dde_distribution_comment?"":e.dde_distribution_comment})})),remain_post_by_levels:s.props.basic.qualifications.map((function(e){var a=t.total_distributed.find((function(t){return t.qualification_id===e.qualification_id}));return{qualification_id:e.qualification_id,qualification_title:e.qualification_name,remain:void 0===a?0:+a.remaining_limits,total:void 0===a?0:+a.limits}}))})):s.setState({loading_requests:!1,error:{msg:a,target:"requests-error"}})}))}},s.state={loading:!1,requests:[],remain_post_by_levels:[],error:{target:null,msg:""},loading_requests:!1,selected_level:"",selected_request_id:"",selected_value:"0",selected_comment:"",selected_auto_level:"",search:""},s}return Object(c.a)(a,[{key:"cleanAlert",value:function(){var e=this;setTimeout((function(){e.setState({error:{target:null,msg:""}})}),2e3)}},{key:"render",value:function(){var e,t=this;if(!0===this.state.loading_requests)return Object(N.jsx)(_.a,{children:Object(N.jsx)("div",{className:"py-4 flex items-center justify-center",children:Object(N.jsx)(g.a,{})})});var a=""===this.state.selected_level?this.state.requests:this.state.requests.filter((function(e){return e.qualification_id===t.state.selected_level}));return a=Object(O.f)(a,this.state.search,{district_name:!0}),Object(N.jsxs)(N.Fragment,{children:["main-success"===this.state.error.target&&Object(N.jsx)(b.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(N.jsxs)(_.a,{children:["main"===this.state.error.target&&Object(N.jsx)(b.a,{theme:"danger",children:this.state.error.msg}),"loading-update-error"===this.state.error.target&&Object(N.jsx)(b.a,{theme:"danger",children:this.state.error.msg}),Object(N.jsxs)(h.a,{children:[null===(e=this.props.auth.district)||void 0===e?void 0:e.district_name," district Distribution"]}),Object(N.jsxs)("div",{className:"flex mt-2",children:[Object(N.jsxs)("div",{className:"flex-1",children:[Object(N.jsx)("p",{className:"opacity-60",children:"Distribution"}),Object(N.jsx)("div",{className:"flex overflow-x-hidden",children:this.state.remain_post_by_levels.map((function(e,t){return t>=5?null:Object(N.jsx)(j.a,{remain:e.remain,title:e.qualification_title,total:e.total},t)}))})]}),Object(N.jsx)("div",{className:""})]}),Object(N.jsxs)("div",{className:"mt-3",children:[Object(N.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded",children:[Object(N.jsx)("div",{className:"flex-1 pr-2",children:Object(N.jsx)(x.a,{error:"",label:"Search",name:"",onChange:function(e){return t.setState({search:e.target.value})},placeholder:"Search by district name",value:this.state.search,size:"sm"})}),Object(N.jsx)("div",{className:"",children:Object(N.jsx)(p.a,{data:[{title:"All qualifications",value:""}].concat(Object(s.a)(this.props.basic.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})))),error:"",name:"select_level",onChange:function(e){return t.setState({selected_level:e.target.value})},label:"Qualification",placeholder:"Select",value:this.state.selected_level,size:"sm"})})]}),Object(N.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{className:"p-1 border",children:"#"}),Object(N.jsx)("th",{className:"p-1 border",children:"School name"}),Object(N.jsx)("th",{className:"p-1 border",children:"Post name"}),Object(N.jsx)("th",{className:"p-1 border",children:"Qualification"}),Object(N.jsxs)("th",{className:"p-1 border",children:["Existing post","(","s",")"]}),Object(N.jsx)("th",{className:"p-1 border ",children:"School Post Requests"}),Object(N.jsx)("th",{className:"p-1 border",children:"DDE post requests"}),Object(N.jsx)("th",{className:"p-1 border text-green-800",children:"Post distribution"}),Object(N.jsx)("th",{className:"p-1 border",children:"Total posts"}),Object(N.jsx)("th",{className:"p-1 border",children:"Comment"})]})}),Object(N.jsx)("tbody",{children:a.length<=0?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:6,className:"p-6 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(N.jsx)(h.a,{size:"md",children:"No results found"})})}):a.map((function(e,a){var s=t.props.basic.qualifications.find((function(t){return t.qualification_id===e.qualification_id}));return Object(N.jsx)(l.Fragment,{children:Object(N.jsxs)("tr",{className:"border rounded hover:bg-blue-500 hover:bg-opacity-20",children:[Object(N.jsx)("td",{className:"p-2 border",children:a+1},a),Object(N.jsx)("td",{className:"p-2 border",children:e.school_name}),Object(N.jsx)("td",{className:"p-2 border",children:e.position_name}),Object(N.jsx)("td",{className:"p-2 border",children:null===s||void 0===s?void 0:s.qualification_name}),Object(N.jsx)("td",{className:"p-2 border",children:e.existing_post}),Object(N.jsx)("td",{className:"p-2 border  text-black",children:e.head_teacher_post_request}),Object(N.jsx)("td",{className:"p-2 border",children:e.dde_post_request}),t.state.selected_request_id===e.post_request_id?Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(v.a,{error:"update-error"===t.state.error.target?t.state.error.msg:"",comment:t.state.selected_comment,onChangeComment:function(e){return t.setState({selected_comment:e.target.value})},loading:t.state.loading,onCancel:t.cancelRequest.bind(t),onChange:function(e){return t.setState({selected_value:e.target.value})},onSave:t.saveRequest.bind(t,e),placeholderComment:"Add comment",value:t.state.selected_value,minValue:"0"})}):Object(N.jsx)("td",{className:"p-2 border w-20 font-bold bg-green-100 bg-opacity-40 text-green-800 cursor-pointer",onClick:t.selectRequest.bind(t,e),children:e.dde_post_distribution}),Object(N.jsx)("td",{className:"p-2 border w-20 font-bold",children:+e.dde_post_distribution+ +e.existing_post}),Object(N.jsx)("td",{className:"p-2 border",title:e.dde_distribution_comment,children:Object(O.g)(e.dde_distribution_comment,20)})]})},a)}))})]})]})]})]})}}]),a}(o.a.Component),y=Object(u.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(q)}}]);
//# sourceMappingURL=20.fd8b84cc.chunk.js.map