(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[44],{356:function(t,e,c){"use strict";c.d(e,"a",(function(){return u})),c.d(e,"b",(function(){return p})),c.d(e,"c",(function(){return h})),c.d(e,"d",(function(){return j}));var r=c(3),s=c(6),i=c(7),n=c.n(i),a=c(13),o=c(12),d=c(8),l=c(11),u=function(t,e){return e(!0,null,""),function(){var c=Object(s.a)(Object(r.a)().mark((function c(s){var i,u;return Object(r.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:a.a.GET_ALL_TRANSFER,payload:[]}),Object(d.a)(),c.next=5,n.a.get("".concat(o.e,"/teachertransfers/requesteddde/").concat(t));case 5:i=c.sent,u=i.data.filter((function(t){return"APPROVED"===t.requested_status})),s({type:a.a.GET_ALL_TRANSFER,payload:u}),e(!1,u,""),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),e(!1,null,Object(l.a)(c.t0));case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(t){return c.apply(this,arguments)}}()},p=function(){var t=Object(s.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(s.a)(Object(r.a)().mark((function t(e,c){var s,i,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0,s=0,null,""),t.prev=2,Object(d.a)(),(i=new FormData).append("teacher_supporting_document",e),t.next=8,n.a.post("".concat(o.e,"/teachertransfers/uploadSupportingDocument"),i,{onUploadProgress:function(t){s=+(null===t||void 0===t?void 0:t.loaded)/+t.total*100,c(!0,s,null,"")}});case 8:a=t.sent,console.log("Uploaded document: ",a.data),c(!1,s,a.data,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0),c(!1,s,"",Object(l.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,c){return t.apply(this,arguments)}}(),j=function(t,e,c){c(!0,"");return function(){var i=Object(s.a)(Object(r.a)().mark((function s(i){var u,p;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),c(!0,""),(u=new FormData).append("teacher_transfer_id",t),u.append("mayor_letter",e),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),r.prev=11,Object(d.a)(),r.next=15,n.a.post("".concat(o.e,"/teachertransfers/outgoing"),u);case 15:p=r.sent,console.log("Uploaded document: ",p.data),i({type:a.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:t,mayor_letter:p.data.mayor_letter}}),c(!1,""),r.next=25;break;case 21:r.prev=21,r.t0=r.catch(11),console.error(r.t0),c(!1,Object(l.a)(r.t0));case 25:case"end":return r.stop()}}),s,null,[[11,21]])})));return function(t){return i.apply(this,arguments)}}()}},584:function(t,e,c){"use strict";c.r(e),c.d(e,"PermutationsReports",(function(){return b}));var r=c(41),s=c(28),i=c(20),n=c(21),a=c(22),o=c(23),d=c(4),l=c(401),u=c(36),p=c(13),h=c(356),j=c(53),x=c(24),_=c(1),m=function(t){Object(a.a)(c,t);var e=Object(o.a)(c);function c(t){var n;return Object(i.a)(this,c),(n=e.call(this,t)).FilteredData=function(){var t,e=null===(t=n.props.permutations.permutations)||void 0===t?void 0:t.find((function(t){return t.page===n.state.page}));if(void 0!==e){var c,i=Object(s.a)(e.permutations_data);try{for(i.s();!(c=i.n()).done;){var a=c.value;n.setState({schools_selected:[].concat(Object(r.a)(n.state.schools_selected),Object(r.a)(a.schools))})}}catch(o){i.e(o)}finally{i.f()}return e.permutations_data}return null},n.componentDidMount=function(){var t;null===n.state.districts&&(n.setState({loading:!0}),Object(h.b)((function(t,e,c){console.log({data:e}),null!==e&&n.setState({districts:e,loading:!1}),n.setState({loading:!1})}))),null===n.props.permutations.permutations&&null!==n.props.auth.district&&null!==n.props.auth.role&&"3"===n.props.auth.role.role_id&&n.props.FC_GetPermutationsByDistrict(n.props.auth.district.district_code,n.state.page,n.state.limit,n.setLoading),"4"===(null===(t=n.props.auth.role)||void 0===t?void 0:t.role_id)&&null===n.props.permutations.permutations&&n.props.FC_GetNationalPermutations(n.state.page,n.state.limit,(function(t){n.setState({loading:t})}))},n.FindUser=function(t,e){var c=e.find((function(e){return e.user_id===t}));return void 0!==c?c:null},n.FindSchool=function(t,e){var c=e.find((function(e){return e.school_code===t}));return void 0!==c?c:null},n.setLoading=function(t){return n.setState({loading:t})},n.state={loading:!1,districts:null,selected_district_code:null!==n.props.auth.district&&null!==n.props.auth.role&&"3"===n.props.auth.role.role_id?n.props.auth.district.district_code:null,selected_school_code:null,page:1,limit:1e3,schools_selected:[]},n}return Object(n.a)(c,[{key:"render",value:function(){var t=this;return null===this.state.districts||!0===this.state.loading?Object(_.jsx)(j.a,{children:Object(_.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(_.jsx)(x.a,{}),Object(_.jsx)("div",{children:"Loading permutations..."})]})}):Object(_.jsxs)(j.a,{children:[Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(_.jsxs)("div",{className:"text-3xl font-bold flex flex-col",children:[Object(_.jsx)("span",{children:"Permutations report"}),Object(_.jsx)("span",{className:"text-base font-light text-gray-600",children:"List of permutations"})]}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[null!==this.props.auth.district&&null!==this.props.auth.role&&"3"===this.props.auth.role.role_id?Object(_.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(_.jsx)("span",{className:"text-gray-500",children:"Selected district"}),Object(_.jsx)("span",{className:"font-extrabold",children:this.props.auth.district.district_name})]}):null!==this.props.auth.role&&"4"===this.props.auth.role.role_id&&Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("span",{children:"Filter district"}),Object(_.jsxs)("select",{value:null===this.state.selected_district_code?"":this.state.selected_district_code,onChange:function(e){return t.setState({selected_district_code:e.target.value})},className:"border border-gray-500 rounded px-3 py-2",children:[Object(_.jsx)("option",{value:"",children:"Choose district"}),this.state.districts.map((function(t,e){return Object(_.jsx)("option",{value:t.district_code,children:t.district_name},e+1)}))]})]}),null!==this.props.auth.school&&null!==this.props.auth.role&&"2"===this.props.auth.role.role_id?Object(_.jsxs)("div",{className:"flex flex-col rounded px-3 py-2 bg-gray-100 text-center",children:[Object(_.jsx)("span",{className:"text-gray-500",children:"Selected school"}),Object(_.jsx)("span",{className:"font-extrabold",children:this.props.auth.school.school_name})]}):Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("span",{children:"Filter School"}),Object(_.jsxs)("select",{className:"px-3 py-2 rounded border border-gray-500",children:[Object(_.jsx)("option",{value:"",children:"Choose school"}),this.state.schools_selected.map((function(t,e){return Object(_.jsx)("option",{value:t.school_code,children:t.school_name})}))]})]})]})]}),Object(_.jsxs)("div",{className:"flex flex-row items-center w-full mt-2 gap-3",children:[Object(_.jsx)("input",{placeholder:"Search",className:"px-3 py-2 rounded border border-gray-500 w-full"}),Object(_.jsxs)("div",{className:"bg-yellow-100 text-black hover:bg-accent-900 hover:text-white rounded px-3 py-2 flex flex-row items-center gap-2 cursor-pointer",children:[Object(_.jsx)("div",{children:Object(_.jsx)(l.a,{className:"text-xl"})}),Object(_.jsx)("span",{children:"Export"})]})]})]}),Object(_.jsx)("div",{className:"mt-5",children:Object(_.jsxs)("table",{className:"w-full rounded",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{className:"bg-blue-100 rounded-t",children:[Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"#"}),Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"User one"}),Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"School one"}),Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"User two"}),Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"School two"}),Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"Position"}),Object(_.jsx)("td",{className:"px-3 py-2 text-left",children:"Qualification"})]})}),Object(_.jsx)("tbody",{children:null===this.FilteredData()?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"Loading..."})}):0===this.FilteredData().length?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:7,className:"text-center p-5 bg-gray-100 rounded-md text-lg",children:"No data found!"})}):this.FilteredData().map((function(e,c){var r,s,i,n;return Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{children:c+1}),Object(_.jsx)("td",{children:null===(r=t.FindUser(e.user_one,e.usersInfo))||void 0===r?void 0:r.full_name}),Object(_.jsx)("td",{children:null===(s=t.FindSchool(e.school_one,e.schools))||void 0===s?void 0:s.school_name}),Object(_.jsx)("td",{children:null===(i=t.FindUser(e.user_two,e.usersInfo))||void 0===i?void 0:i.full_name}),Object(_.jsx)("td",{children:null===(n=t.FindSchool(e.school_two,e.schools))||void 0===n?void 0:n.school_name}),Object(_.jsx)("td",{children:e.position_name}),Object(_.jsx)("td",{children:e.qualification_name})]})}))})]})})]})}}]),c}(d.Component),b=Object(u.b)((function(t){return{auth:t.auth,basic:t.basic,permutations:t.permutations}}),{FC_GetPermutationsByDistrict:p.X,FC_GetNationalPermutations:p.S})(m)}}]);
//# sourceMappingURL=44.ded3f449.chunk.js.map