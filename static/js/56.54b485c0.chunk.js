(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[56],{555:function(e,t,s){"use strict";s.r(t),s.d(t,"TransferApproval",(function(){return G}));var a,c=s(28),r=s(29),n=s(30),l=s(31),i=s(3),d=s(17),o=s(27),j=s(16),x=s(51),h=s(19),b=s(403),m=s(4),u=s(7),p=s(35),f=s(8),O=s(9),g=s.n(O),v=s(48),_=s(15),N=s(382),y=s(2);!function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.CANCELED="CANCELED"}(a||(a={}));var w=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).GetTransferRequestsDetailsList=function(){var e=Object(f.a)(Object(m.a)().mark((function e(t){var s;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,g.a.get("".concat(_.d,"/teachertransfer/districtDetails/").concat(t));case 4:200===(s=e.sent).status&&(a.setState({data:s.data,loading:!1,filterSchools:0===s.data.length?[]:s.data.filter((function(e){return null!==e.requested_school_info})).map((function(e){var t,s=[],a=Object(p.a)(e.requested_school_info);try{for(a.s();!(t=a.n()).done;){var c=t.value;s.push({school_code:c.school_code,district_name:c.district_name,school_name:c.school_name,sector_name:c.sector_name})}}catch(r){a.e(r)}finally{a.f()}return s}))[0]}),console.log("Res: ",s.data)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: ",Object(u.a)({},e.t0)),a.setState({data:[],loading:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.ReturnFilteredData=function(){if(null===a.state.data)return[];var e=a.state.data;return e=null===a.state.selected_status?a.state.data:a.state.data.filter((function(e){return e.requested_status===a.state.selected_status})),e=null===a.state.selected_filterSchool?e:e.filter((function(e){var t;return void 0!==(null===(t=e.requested_school_info)||void 0===t?void 0:t.find((function(e){return e.school_code===a.state.selected_filterSchool})))})),Object(h.i)(e,a.state.searchData)},a.componentDidMount=function(){a.GetTransferRequestsDetailsList(a.props.transferDetails.district_code)},a.state={loading:!1,searchData:"",data:null,selected_status:null,filterSchools:[],selected_filterSchool:null},a}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return null===this.state.data||!0===this.state.loading?Object(y.jsx)(x.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center p-3",children:[Object(y.jsx)(v.a,{}),Object(y.jsx)("div",{className:"",children:"Loading, please wait..."})]})}):Object(y.jsxs)(x.a,{children:[Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(y.jsxs)("div",{onClick:this.props.backToApproval,className:"flex flex-row items-center gap-2 bg-blue-100 text-primary-800 hover:text-white hover:bg-primary-800 rounded cursor-pointer px-3 py-2 font-bold",children:[Object(y.jsx)("div",{children:Object(y.jsx)(d.A,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Back"})]}),Object(y.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"text-2xl font-light -mb-1 text-gray-700",children:"Transfer requests details"}),Object(y.jsx)("div",{className:"flex flex-row items-center w-full justify-between",children:Object(y.jsxs)("div",{className:"font-extrabold text-black text-lg ml-1 flex items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"",children:Object(y.jsx)(d.cb,{className:"text-2xl"})})}),Object(y.jsxs)("span",{children:[this.props.transferDetails.district_name," district"]})]})})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("select",{onChange:function(t){return e.setState({selected_status:""===t.target.value?null:t.target.value})},value:null===this.state.selected_status?"":this.state.selected_status,className:"border border-gray-500 rounded px-3 py-2",children:[Object(y.jsx)("option",{value:"",children:"Filter by status"}),Object(y.jsx)("option",{value:"",children:"All requests"}),[{key:a.PENDING,value:"Waiting requests"},{key:a.APPROVED,value:"Approved requests"},{key:a.REJECTED,value:"Rejected requests"}].map((function(e,t){return Object(y.jsx)("option",{value:e.key,children:e.value},t+1)}))]})})]})]})}),Object(y.jsx)("div",{className:"",children:Object(y.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full mt-2",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("select",{onChange:function(t){return e.setState({selected_filterSchool:""===t.target.value?null:t.target.value})},className:"px-3 py-2 rounded border border-gray-500",children:[Object(y.jsx)("option",{value:"",children:"All requested schools"}),this.state.filterSchools.map((function(e,t){return Object(y.jsx)("option",{value:e.school_code,children:e.school_name},t+1)}))]})}),Object(y.jsx)("div",{className:"",children:Object(y.jsxs)("div",{className:"border border-blue-400 text-primary-800 rounded px-3 py-2 flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{className:"text-xl"})}),Object(y.jsx)("span",{children:"Export"})]})})]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("table",{className:"w-full mt-5",children:[Object(y.jsx)("thead",{className:"bg-blue-100 text-primary-800 text-left text-sm",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Full name"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Qualification"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Position"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Phone number"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Current district"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Current school"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Requested school"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Accepted school"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Status"})]})}),Object(y.jsxs)("tbody",{children:[Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:10,children:Object(y.jsx)("input",{onChange:function(t){return e.setState({searchData:t.target.value})},placeholder:"Search by name",className:"border border-gray-400 px-3 py-2 rounded w-full my-1"})})}),0===this.ReturnFilteredData().length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:10,className:"",children:Object(y.jsx)("div",{className:"bg-gray-100 rounded-md p-5 text-2xl font-light text-center",children:"No requests found!"})})}):this.ReturnFilteredData().map((function(e,t){var s,c,r;return Object(y.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":""," hover:bg-blue-50 group text-sm"),children:[Object(y.jsx)("td",{className:"px-3 py-2",children:t+1}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.teacher_full_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.qualification_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.position_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.teacher_phone_number}),Object(y.jsx)("td",{className:"px-3 py-2",children:null===(s=e.school_from_info)||void 0===s?void 0:s.district_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:null===(c=e.school_from_info)||void 0===c?void 0:c.school_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.requested_school_info.map((function(e,t){return Object(y.jsxs)("div",{children:[e.school_name,", ",""]})}))}),Object(y.jsx)("td",{children:null===(r=e.approved_school_info)||void 0===r?void 0:r.school_name}),Object(y.jsx)("td",{children:e.requested_status===a.PENDING?"Waiting":e.requested_status})]},t+1)}))]})]})})]})}}]),s}(i.Component),D=s(53),S=s(56),A=s(62),C=s(57),k=function(e){return Object(y.jsx)("div",{children:e.index<=3?Object(y.jsxs)("div",{className:"bg-gray-800 font-bold flex flex-row items-center justify-between px-3 py-2 mb-1 animate__animated animate__zoomIn",children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{className:"bg-green-600 text-white rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(y.jsx)("div",{className:"text-green-400",children:e.district_detail.district_name})]}),Object(y.jsx)("div",{children:Object(y.jsx)(C.a,{className:"text-xl text-green-500"})})]}):4===e.index?Object(y.jsxs)("div",{className:"bg-accent-900 flex flex-row items-center justify-between px-3 py-2 mb-1",children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2 font-bold",children:[Object(y.jsx)("div",{className:"bg-white text-accent-900 rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(y.jsx)("div",{children:e.district_detail.district_name})]}),Object(y.jsx)("div",{children:Object(y.jsx)(A.c,{className:"text-xl animate-spin"})})]}):Object(y.jsxs)("div",{className:"bg-gray-800 flex flex-row items-center justify-between px-3 py-2 mb-1  animate__animated animate__fadeIn",children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{className:"bg-gray-500 rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(y.jsx)("div",{children:e.district_detail.district_name})]}),Object(y.jsx)("div",{children:Object(y.jsx)(d.K,{className:"text-xl animate-pulse text-gray-400"})})]})})},T=s(402),R=s.n(T),q=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){setInterval((function(){a.state.count<1e4&&a.setState({count:a.state.count+1})}),30)},a.state={count:0,loading:!1,chartData:{options:{chart:{id:"basic-bar"},xaxis:{categories:["Nyarugenge","Kicukiro","Gasabo","Muhanga","Kayonza","Nyaruguru","Kamonyi","Musanze","Gicumbi","Rubavu"]}},series:[{name:"series-1",data:[1,2,4,1,8,3,5,7,9,5]}]}},a}return Object(r.a)(s,[{key:"render",value:function(){return Object(y.jsx)(i.Fragment,{children:Object(y.jsxs)("div",{className:"h-screen bg-white fixed z-40 left-0 right-0 animate__animated animate__fadeIn",children:[Object(y.jsx)("div",{className:"bg-primary-800 text-white fixed top-18 left-0 right-0 w-full z-50",children:Object(y.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(y.jsxs)("div",{className:"px-3 py-2 flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(S.e,{className:"text-5xl -mt-1 animate__animated animate__flash"})}),Object(y.jsx)("div",{className:"text-2xl font-extrabold",children:"Transfer runner"})]}),Object(y.jsx)("div",{className:"px-2",children:Object(y.jsx)("div",{className:"bg-green-600 hover:bg-green-800 rounded-md font-bold px-3 py-2 cursor-pointer border border-white",children:"Reload process"})})]})}),Object(y.jsxs)("div",{className:"bg-black h-full overflow-y-auto text-white pt-12 grid grid-cols-12",children:[Object(y.jsx)("div",{className:"col-span-3 w-full h-full bg-gray-700 pt-3",children:this.props.districts_requests.map((function(e,t){return Object(y.jsx)(k,{index:t+1,district_detail:e},t)}))}),Object(y.jsxs)("div",{className:"col-span-9 pt-6 pl-3",children:[Object(y.jsxs)("div",{className:"flex flex-row w-full",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{}),Object(y.jsx)("div",{className:"font-extrabold text-lg text-gray-400",children:"Placement progress (Nyanza)"}),Object(y.jsxs)("div",{className:"bg-gray-800 h-52 border border-gray-700 rounded-md p-3 px-4 text-sm text-green-300 overflow-hidden cursor-not-allowed flex items-center justify-center gap-3  animate__animated animate__zoomIn",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:Object(y.jsx)(S.e,{className:"text-9xl text-gray-200 animate__animated animate__flash"})}),Object(y.jsxs)("div",{className:"flex flex-row items-center justify-center text-gray-400",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)(d.I,{className:"text-xl animate-spin"})}),Object(y.jsx)("div",{children:"23 mins remaining"})]})]}),Object(y.jsxs)("div",{className:"flex flex-col text-xs font-extralight",children:[Object(y.jsx)("span",{children:"Initializing process ..."}),Object(y.jsx)("span",{children:"Placing process ..."}),Object(y.jsx)("span",{children:"Placing process, tasking ..."}),Object(y.jsx)("span",{children:"Placing process ..."}),Object(y.jsx)("span",{children:"Placing process ..."}),Object(y.jsx)("span",{children:"Placing process, waiting ..."})]})]})]}),Object(y.jsx)("div",{className:"pt-8 pl-3",children:Object(y.jsxs)("div",{className:"flex flex-row items-center gap-3 mb-3",children:[Object(y.jsxs)("div",{className:"bg-gray-600 rounded-md p-3 animate__animated animate__zoomIn",children:[Object(y.jsx)("div",{children:"Waiting"}),Object(y.jsx)("div",{className:"text-4xl font-extrabold",children:Object(h.g)(22382-this.state.count)})]}),Object(y.jsxs)("div",{className:"bg-green-800 rounded-md p-3 w-1/2 animate__animated animate__zoomIn",children:[Object(y.jsx)("div",{children:"Approved"}),Object(y.jsx)("div",{className:"text-4xl font-extrabold",children:Object(h.g)(this.state.count+(this.state.count-1))})]}),Object(y.jsxs)("div",{className:"bg-red-800 rounded-md p-3 w-1/2 animate__animated animate__zoomIn",children:[Object(y.jsx)("div",{children:"Rejected"}),Object(y.jsx)("div",{className:"text-4xl font-extrabold",children:Object(h.g)(this.state.count)})]})]})})]}),Object(y.jsx)("div",{className:"mr-2",children:Object(y.jsx)("div",{className:"h-4 w-full bg-gray-600 mt-2 rounded-full  animate__animated animate__fadeIn",children:Object(y.jsx)("div",{className:"bg-yellow-400 h-4 rounded-full",style:{width:"70%"}})})}),Object(y.jsxs)("div",{className:"mt-3",children:[Object(y.jsx)("div",{className:"mb-2 font-bold text-lg text-gray-400",children:"Districts Transfer monitoring"}),Object(y.jsx)("div",{className:"px-3 mr-2 rounded-md bg-gray-800",children:Object(y.jsx)(R.a,{options:this.state.chartData.options,series:this.state.chartData.series,type:"bar",width:"100%"})})]})]})]})]})})}}]),s}(i.Component),I=s.p+"static/media/robot2.79aa3484.gif",E=s(339),P=s(41),z=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).GetAlgorithmResults=function(){var e=Object(f.a)(Object(m.a)().mark((function e(t){var s;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,g.a.get("".concat(_.d,"/teachertransfer/results/").concat(t));case 4:s=e.sent,a.setState({data:s.data,loading:!1,round:0===s.data.length?"1":s.data[s.data.length-1].round_id}),console.log("Res: ",s.data),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),a.setState({data:[],loading:!1}),console.log("error: ",e.t0),console.log("error: ",Object(u.a)({},e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),a.getData=function(){if(null!==a.state.data){var e=a.state.data.find((function(e){return e.round_id===a.state.round}));if(void 0!==e)return e.datas}return[]},a.getRounds=function(){var e=[];if(null!==a.state.data){var t,s=Object(p.a)(a.state.data);try{for(s.s();!(t=s.n()).done;){var c=t.value;e=[].concat(Object(P.a)(e),[c.round_id])}}catch(r){s.e(r)}finally{s.f()}}return e},a.componentDidMount=function(){null===a.state.data&&a.GetAlgorithmResults(a.props.academic_calendar.academic_year_id)},a.state={loading:!1,data:null,round:"1"},a}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return!0===this.state.loading||null===this.state.data?Object(y.jsx)(x.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(y.jsx)(v.a,{}),Object(y.jsx)("div",{children:"Loading..."})]})}):Object(y.jsxs)("div",{className:"p-4",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"text-center",children:[Object(y.jsx)("span",{className:"font-bold text-3xl text-green-700",children:"Transfer algorithm results"}),Object(y.jsxs)("div",{className:"flex items-center justify-center my-3 gap-3",children:[Object(y.jsx)("select",{onChange:function(t){return e.setState({round:t.target.value})},className:"border border-gray-500 px-3 py-2 rounded",children:this.getRounds().map((function(e,t){return Object(y.jsxs)("option",{value:e,children:["Round ",e]},t+1)}))}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{onClick:function(){return e.GetAlgorithmResults(e.props.academic_calendar.academic_year_id)},className:"bg-accent-900 text-white px-3 py-2 rounded cursor-pointer",children:"Reload results"})}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{onClick:this.props.close,className:"bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded cursor-pointer",children:"Close window"})})]})]})}),Object(y.jsx)("div",{children:0===this.state.data.length?Object(y.jsx)("div",{className:"bg-gray-200 rounded-md p-6 text-center text-3xl",children:"No result found!"}):Object(y.jsxs)("table",{className:"w-full",children:[Object(y.jsx)("thead",{className:"bg-blue-100",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"#"}),Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"District"}),Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"School code"}),Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"School name"}),Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"Position"}),Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"Teachers placed"}),Object(y.jsx)("th",{className:"px-3 py-2 text-left",children:"Vacants"})]})}),Object(y.jsx)("tbody",{children:this.getData().map((function(e,t){var s,a,c;return Object(y.jsxs)("tr",{className:"border-b",children:[Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:t+1}),Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:null===(s=e.school_info)||void 0===s?void 0:s.district_name}),Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:null===(a=e.school_info)||void 0===a?void 0:a.school_code}),Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:null===(c=e.school_info)||void 0===c?void 0:c.school_name}),Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:e.position_info.position_name}),Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:e.placed_teachers}),Object(y.jsx)("td",{className:"px-3 py-2 text-left",children:e.vacant_posts})]},t+1)}))})]})})]})}}]),s}(i.Component),F=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){null===a.props.transferAlgorithm.transfers&&a.props.FC_Load_All_Transfers((function(e){return a.setState({loading:e})}))},a.TotalWaiting=function(e){if(null===e)return 0;var t=0;return e.map((function(e){return t+=parseInt(e.total_requested_pending)})),t},a.RunAlgorithm=function(){a.props.Run_Transfer_Algorithm((function(e){!1===e&&(a.setState({loading:!0}),a.props.FC_Load_All_Transfers((function(t){!0===t&&!1===e&&a.setState({loading:!1,success:"Transfer done successfully!"})})))}))},a.state={loading:!1,viewTransferDetails:null,confirm_run_algorithm:!1,run_algorithm_page:!1,success:"",view_algorithm_results:!1},a}return Object(r.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.props.transferAlgorithm.transfers||!0===this.state.loading?Object(y.jsx)(x.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center p-3",children:[Object(y.jsx)(v.a,{}),Object(y.jsx)("div",{className:"",children:"Loading, please wait..."})]})}):!0===this.state.run_algorithm_page?Object(y.jsx)(q,{districts_requests:this.props.transferAlgorithm.transfers}):null===this.state.viewTransferDetails?Object(y.jsxs)(i.Fragment,{children:[Object(y.jsxs)(x.a,{children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-4 justify-between",children:[Object(y.jsxs)("div",{className:"w-max",children:[Object(y.jsx)("div",{className:"text-3xl font-extrabold",children:"Transfer approval"}),Object(y.jsxs)("div",{className:"font-extrabold text-primary-800",children:["Academic year:"," ",null===(e=this.props.basic.academic_calender)||void 0===e?void 0:e.academic_year_name]})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(d.n,{})}),Object(y.jsx)("span",{children:"Transfer start date: "}),Object(y.jsx)("span",{children:this.props.basic.academic_calender&&Object(h.a)(this.props.basic.academic_calender.transfer_request_start)})]}),Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(d.n,{})}),Object(y.jsx)("span",{children:"Transfer ending date: "}),Object(y.jsx)("span",{children:this.props.basic.academic_calender&&Object(h.a)(this.props.basic.academic_calender.transfer_request_end)})]})]})]}),Object(y.jsxs)("div",{className:"border-t border-gray-400 my-5 flex flex-row items-center gap-3 justify-between py-2",children:[Object(y.jsx)("div",{className:"text-2xl font-light",children:"Transfer requests"}),Object(y.jsxs)("div",{onClick:function(){return t.setState({confirm_run_algorithm:!0})},className:"bg-accent-900 hover:bg-yellow-900 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.a,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Run transfer algorithm"})]})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("table",{className:"w-full",children:[Object(y.jsx)("thead",{className:"bg-blue-100 text-primary-800 text-left",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"District code"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"District name"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Approved"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Rejected"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Waiting"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Total"}),Object(y.jsx)("th",{className:"px-3 py-2 text-right"})]})}),Object(y.jsx)("tbody",{children:0===this.props.transferAlgorithm.transfers.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:8,className:"",children:Object(y.jsx)("div",{className:"bg-gray-100 rounded-md p-5 text-2xl font-light text-center my-2",children:"No requests found!"})})}):this.props.transferAlgorithm.transfers.map((function(e,s){return Object(y.jsxs)("tr",{className:"".concat(s%2!==0?"bg-gray-100":""," hover:bg-blue-50 group"),children:[Object(y.jsx)("td",{className:"px-3 py-2",children:s+1}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.district_code}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.district_name}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_approved}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_rejected}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_pending}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:parseInt(e.total_requested_approved)+parseInt(e.total_requested_rejected)+parseInt(e.total_requested_pending)}),Object(y.jsx)("td",{className:"py-2",children:Object(y.jsx)("div",{className:"w-full flex justify-end",children:Object(y.jsx)("div",{onClick:function(){return t.setState({viewTransferDetails:e})},className:"".concat(s%2!==0?"bg-white":"bg-gray-100"," group-hover:bg-blue-100 group-hover:text-primary-800 px-2 py-1 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max"),children:"Details"})})})]},s+1)}))})]})})]}),!0===this.state.view_algorithm_results&&Object(y.jsx)(D.c,{backDrop:!0,theme:D.b.default,close:function(){return t.setState({view_algorithm_results:!1})},backDropClose:!0,widthSizeClass:D.a.maxWidth,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:null!==this.props.basic.academic_calender&&Object(y.jsx)(z,{academic_calendar:this.props.basic.academic_calender,reload:function(){},close:function(){return t.setState({view_algorithm_results:!1,confirm_run_algorithm:!1,success:""})}})}),!0===this.state.confirm_run_algorithm&&Object(y.jsx)(D.c,{backDrop:!0,theme:D.b.default,close:function(){return!1===t.props.transferAlgorithm.placing_loading_status&&t.setState({confirm_run_algorithm:!1})},backDropClose:!0,widthSizeClass:D.a.medium,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:Object(y.jsx)("div",{className:"p-5 py-6",children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[Object(y.jsx)("div",{className:"text-accent-900 mt-3",children:""===this.state.success&&!1===this.props.transferAlgorithm.placing_loading_status&&Object(y.jsx)(S.e,{className:"text-8xl ".concat("animate-bounce")})}),!1===this.props.transferAlgorithm.placing_loading_status?""!==this.state.success?Object(y.jsxs)("div",{className:"flex flex-col w-full items-center justify-center p-4",children:[Object(y.jsx)("div",{children:Object(y.jsx)(A.b,{className:"text-9xl text-green-600"})}),Object(y.jsx)("div",{className:"text-center text-3xl w-full",children:this.state.success}),Object(y.jsxs)("div",{className:"text-center text-xl font-extrabold text-accent-900 w-full",children:[this.TotalWaiting(this.props.transferAlgorithm.transfers)," ","teachers waiting"]}),0===this.TotalWaiting(this.props.transferAlgorithm.transfers)?Object(y.jsx)("div",{onClick:function(){return t.setState({confirm_run_algorithm:!1,run_algorithm_page:!1,success:""})},className:"bg-green-600 rounded px-3 py-2 cursor-pointer text-white hover:bg-green-800",children:"Click to confirm transfer"}):Object(y.jsxs)("div",{onClick:function(){return t.RunAlgorithm()},className:"bg-accent-900 hover:bg-yellow-900 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max mt-4",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.a,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Run again"})]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"text-3xl font-extrabold animate__animated animate__fadeIn",children:"Start transfer"}),Object(y.jsx)("div",{className:"text-center my-2 mb-5",children:"If you start the process, the robotra will start placing at all districts at time. Please make sure you have stable internet so that the action can not be interrupted"}),Object(y.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[Object(y.jsxs)("div",{onClick:function(){return!1===t.props.transferAlgorithm.placing_loading_status&&t.setState({confirm_run_algorithm:!1})},className:"bg-gray-200 hover:bg-gray-600 text-black hover:text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max",children:[Object(y.jsx)("div",{children:Object(y.jsx)(d.N,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Cancel"})]}),Object(y.jsxs)("div",{onClick:function(){return t.RunAlgorithm()},className:"bg-green-600 hover:bg-green-800 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max animate__animated animate__fadeIn",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.a,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Yes, start"})]})]})]}):Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[Object(y.jsx)("img",{src:I,alt:"TMIS",className:"w-80 animate__animated animate__zoomInUp"}),Object(y.jsxs)("div",{className:"text-gray-600 text-lg mb-5 text-center -mt-3 flex flex-row items-center gap-2 z-50",children:[Object(y.jsx)("div",{children:Object(y.jsx)(E.d,{className:"text-3xl animate-spin"})}),Object(y.jsx)("span",{children:"Transfer algorithm is running..."})]})]})]})})})]}):Object(y.jsx)(w,{transferDetails:this.state.viewTransferDetails,backToApproval:function(){t.setState({viewTransferDetails:null})}})}}]),s}(i.Component),G=Object(o.b)((function(e){return{auth:e.auth,basic:e.basic,transferAlgorithm:e.transferAlgorithm}}),{FC_Load_All_Transfers:j.cb,Run_Transfer_Algorithm:j.Eb})(F)}}]);
//# sourceMappingURL=56.54b485c0.chunk.js.map