(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[82],{600:function(t,e,n){"use strict";n.r(e),n.d(e,"RebTrainingList",(function(){return v}));var i=n(41),a=n(19),s=n(20),r=n(21),c=n(22),l=n(4),d=n.n(l),o=n(42),g=n(36),u=n(13),j=n(47),h=n(53),b=n(92),x=n(139),O=n(24),m=n(480),_=n(481),f=n(453),p=n(1),N={target:null,msg:""},S=function(t){Object(r.a)(n,t);var e=Object(c.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).selectTrainingToEdit=function(t){s.setState({selected_training_edit:t})},s.clearError=function(){return setTimeout((function(){s.setState({alert:N})}),3e3)},s.createTrainingDraft=function(){var t;window.confirm("Are you sure you want to request for training application?")&&(s.setState({loading_create_training_draft:!0}),Object(u.q)((null===(t=s.props.auth.stakeholder)||void 0===t?void 0:t.development_partner_id)+"",(function(t,e,n){s.setState({loading_create_training_draft:!1,trainings:t&&e?[e].concat(Object(i.a)(s.state.trainings)):s.state.trainings,selected_training_edit:t&&e?e.id:s.state.selected_training_edit,alert:t?N:{target:"MAIN-ERROR",msg:"Error: ".concat(n)}}),s.clearError()})))},s.deleteTraining=function(t){window.confirm("Are you sure you want to delete the training?")&&(s.setState({delete_training:t.toString()}),Object(u.v)(t.toString(),(function(e,n){s.setState({delete_training:null,trainings:e?s.state.trainings.filter((function(e){return e.id.toString()!==t.toString()})):s.state.trainings,alert:e?{target:"MAIN-SUCCESS",msg:"Training has been deleted successfully!"}:{target:"MAIN-ERROR",msg:"Error: ".concat(n)}}),s.clearError()})))},s.getTrainingStatus=function(t){s.setState({loading:!0,selected_status:t}),Object(u.Q)(t,(function(t,e,n){s.setState({loading:!1,alert:t?N:{target:"MAIN-ERROR",msg:n},trainings:e}),s.clearError()}))},s.state={loading:!0,alert:N,selected_training_edit:null,selected_training_details:null,trainings:[],loading_create_training_draft:!1,delete_training:null,selected_status:u.wc.READY_FOR_EVALUATION},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getTrainingStatus(u.wc.READY_FOR_EVALUATION)}},{key:"render",value:function(){var t=this;return null!==this.state.selected_training_edit?Object(p.jsx)(m.a,{training_id:this.state.selected_training_edit,close:function(){return t.setState({selected_training_edit:null})}}):null!==this.state.selected_training_details?Object(p.jsx)(_.a,{deleteUpdate:function(){},training_id:this.state.selected_training_details,close:function(){return t.setState({selected_training_details:null})},editTraining:function(t){},rebPreview:!0}):Object(p.jsxs)(p.Fragment,{children:["MAIN-ERROR"===this.state.alert.target&&Object(p.jsx)(j.a,{theme:"danger",fixed:!0,children:this.state.alert.msg}),"MAIN-SUCCESS"===this.state.alert.target&&Object(p.jsx)(j.a,{theme:"success",fixed:!0,children:this.state.alert.msg}),Object(p.jsx)("div",{className:"lg:sticky top-3 z-50 mb-4",children:Object(p.jsx)(h.a,{children:Object(p.jsxs)("div",{className:"flex w-full items-center py-2",children:[Object(p.jsx)("div",{className:"pr-4 text-4xl",children:Object(p.jsx)(o.d,{})}),Object(p.jsxs)("div",{className:"flex-1",children:[Object(p.jsx)(b.a,{size:"md",children:"Review Training applications"}),Object(p.jsx)("p",{className:"text-gray-600 text-sm",children:"Training institution"})]}),Object(p.jsx)("div",{className:"pr-2 ",children:Object(p.jsx)(x.a,{onChange:function(e){return t.getTrainingStatus(e.target.value)},value:this.state.selected_status,error:"",label:"",placeholder:"",name:"",data:[{title:"Ready for evaluation",value:u.wc.READY_FOR_EVALUATION},{title:"Completed",value:u.wc.COMPLETED},{title:"Draft",value:u.wc.DRAFT},{title:"Inprogress",value:u.wc.INPROGRESS}]})}),Object(p.jsxs)("div",{className:"p-1 text-center bg-blue-100 text-blue-800 px-4 rounded-lg",children:[Object(p.jsx)("section",{className:"text-sm opacity-50",children:"Total"}),Object(p.jsx)("h2",{className:"font-bold text-xl",children:this.state.trainings.length})]})]})})}),Object(p.jsx)("div",{className:"container mx-auto px-2",children:Object(p.jsx)("div",{className:"bg-white p-1",children:Object(p.jsxs)("table",{className:"w-full",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{className:"text-left  bg-yellow-100",children:[Object(p.jsx)("th",{className:"p-2 border",children:"#"}),Object(p.jsx)("th",{className:"p-2 border",children:"Title"}),Object(p.jsx)("th",{className:"p-2 border",children:"Training institution"}),Object(p.jsx)("th",{className:"p-2 border",children:"Area of intervention"}),Object(p.jsx)("th",{className:"p-2 border",children:"Start date"}),Object(p.jsx)("th",{className:"p-2 border",children:"End date"}),Object(p.jsx)("th",{className:"p-2 border w-5",children:"Status"})]})}),Object(p.jsxs)("tbody",{children:[Object(p.jsx)("tr",{children:Object(p.jsx)("td",{colSpan:10,children:!0===this.state.loading?Object(p.jsx)("div",{className:"mx-auto py-6 text-center",children:Object(p.jsx)("div",{className:"inline",children:Object(p.jsx)(O.a,{})})}):Object(p.jsx)(p.Fragment,{children:this.state.trainings.length<=0&&!1===this.state.loading&&Object(p.jsxs)("div",{className:"mx-auto py-8 text-center opacity-50",children:[Object(p.jsx)("h1",{className:"text-9xl text-center mx-auto",children:Object(p.jsx)(o.d,{className:"inline"})}),Object(p.jsx)("h2",{className:"text-2xl font-bold",children:"No Training requests found"})]})})})}),!1===this.state.loading&&this.state.trainings.map((function(e,n){return Object(p.jsx)(f.a,{i:n,training:e,viewDetails:function(e){return t.setState({selected_training_details:e.toString()})},deleteTraining:t.deleteTraining,update_loading:null,editTraining:function(e){return t.setState({selected_training_edit:e.toString()})},delete_loading:t.state.delete_training},n)}))]})]})})})]})}}]),n}(d.a.Component),v=Object(g.b)((function(t){return{auth:t.auth}}),{})(S)}}]);
//# sourceMappingURL=82.109802c6.chunk.js.map