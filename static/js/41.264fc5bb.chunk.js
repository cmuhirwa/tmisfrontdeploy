(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[41],{429:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return j})),r.d(t,"a",(function(){return x}));var s=r(3),a=r(11),i=r(6),n=r(7),c=r.n(n),l=r(12),d=r(15),o=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,r){var i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0,null),e.prev=1,e.next=4,c.a.get("".concat(l.k,"/district/training/").concat(t));case 4:(i=e.sent)&&r(!1,{data:i.data,type:"success",msg:"Data loaded successfully"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),r(!1,{data:null,type:"error",msg:Object(d.u)(e.t0)}),console.log("Err: ",Object(a.a)({},e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,r){var i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0,null),e.prev=1,e.next=4,c.a.get("".concat(l.k,"/training/trainee/request/total/").concat(t));case 4:(i=e.sent)&&r(!1,{data:i.data,type:"success",msg:"Data loaded successfully"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),r(!1,{data:null,type:"error",msg:Object(d.u)(e.t0)}),console.log("Err: ",Object(a.a)({},e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,r){var i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0,null),e.prev=1,e.next=4,c.a.post("".concat(l.k,"/school/request"),{is_approved:t.is_approved,training_request_id:parseInt(t.training_request_id)});case 4:i=e.sent,console.log("Training status changed: ",i),i&&r(!1,{type:"success",msg:!0===t.is_approved?"Training request approved successfully!":"Training request undo successfully!"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r(!1,{type:"error",msg:Object(d.u)(e.t0)}),console.log("Err: ",Object(a.a)({},e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()},625:function(e,t,r){"use strict";r.r(t),r.d(t,"DDETrainingApproval",(function(){return A}));var s=r(41),a=r(29),i=r(19),n=r(20),c=r(21),l=r(22),d=r(4),o=r(61),j=r(24),x=r(42),u=r(94),p=r(16),b=r(58),h=r(36),g=r(13),m=r(429),_=r(23),f=r(25),v=r(27),O=r(400),y=r(15),N=r(363),w=r(450),S=r(1),q=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(e){var s;return Object(i.a)(this,r),(s=t.call(this,e)).GetParticipantUnique=function(e){var t,r=[],s=Object(a.a)(e);try{var i=function(){var e=t.value;void 0===r.find((function(t){return t.id===e.id}))&&r.push(e)};for(s.s();!(t=s.n()).done;)i()}catch(n){s.e(n)}finally{s.f()}return r},s.LoadParticipants=function(){s.setState({loading:!0}),Object(N.f)(s.props.training_id,""===s.props.selected_training_request.school_code?null===s.props.selected_district_code?"":s.props.selected_district_code.district_code:s.props.selected_training_request.school_code,(function(e,t){s.setState({loading:e}),null!==t&&"success"===t.type&&s.setState({trainees:null===t.data?null:s.GetParticipantUnique(t.data),loading:!1}),null!==t&&"error"===t.type&&s.setState({trainees:[],loading:!1,error:t.msg})}))},s.componentDidMount=function(){null===s.state.trainees&&s.LoadParticipants()},s.state={loading:!1,trainees:null,error:"",search_data:"",view_subjects:null},s}return Object(n.a)(r,[{key:"render",value:function(){var e,t,r=this;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"text-xl font-bold",children:"Trainings List"}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2",children:[Object(S.jsx)("div",{className:"flex flex-row items-center gap-2",children:Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:this.props.onGoBack,className:"h-11 w-11 cursor-pointer bg-accent-400 text-accent-900 hover:bg-accent-500 flex items-center justify-center rounded-full",children:Object(S.jsx)(j.a,{className:"text-2xl"})})}),Object(S.jsxs)("div",{className:"bg-primary-100 rounded-md flex flex-col w-max px-3 py-1 text-primary-800 my-2",children:[Object(S.jsx)("span",{className:"text-sm",children:"Selected school/district"}),Object(S.jsxs)("span",{className:"font-bold text-base",children:[""!==this.props.selected_training_request.school_code?this.props.selected_training_request.school_code:null===(e=this.props.selected_district_code)||void 0===e?void 0:e.district_code," ","-"," ",""!==this.props.selected_training_request.school_name?this.props.selected_training_request.school_name:null===(t=this.props.selected_district_code)||void 0===t?void 0:t.district_name]})]})]})}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[Object(S.jsxs)("div",{className:" px-4 py-0 text-right",children:[Object(S.jsx)("div",{className:"text-sm",children:"Total trainees"}),Object(S.jsxs)("div",{className:"text-lg -mt-1 font-bold",children:[null===this.state.trainees?"...":this.state.trainees.length," ","of ",this.props.selected_training_request.total]})]}),Object(S.jsx)("div",{children:1!==this.props.selected_training_request.is_approved&&Object(S.jsxs)("div",{onClick:function(){r.props.onSubmitApproval(r.props.selected_training_request.request_id)},className:"flex flex-row items-center justify-center gap-3 bg-green-100 text-green-700 hover:bg-green-700 hover:text-white rounded px-3 py-2 w-max cursor-pointer font-bold",children:[Object(S.jsx)("div",{children:Object(S.jsx)(j.j,{className:"text-2xl"})}),Object(S.jsx)("span",{children:"Approve"})]})})]})]}),""!==this.state.error&&Object(S.jsxs)("div",{onClick:function(){return r.setState({error:""})},className:"bg-red-100 text-red-700 px-3 py-2 rounded cursor-pointer flex flex-row items-center justify-between gap-2 my-3 animate__animated animate__shakeX",children:[Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("span",{className:"text-lg font-bold",children:"Error occurred:"}),Object(S.jsx)("span",{children:this.state.error})]}),Object(S.jsx)("div",{children:Object(S.jsx)(p.r,{className:"text-2xl"})})]}),Object(S.jsxs)("div",{className:"relative w-full mt-3",children:[Object(S.jsx)("div",{className:"absolute px-3 py-2",children:Object(S.jsx)(b.f,{className:"text-2xl text-gray-600"})}),Object(S.jsx)("input",{type:"search",className:"font-normal bg-gray-100 w-full px-3 pl-12 py-2 rounded",placeholder:"Search...",value:this.state.search_data,onChange:function(e){return r.setState({search_data:e.target.value})}})]}),Object(S.jsx)("div",{className:"w-full overflow-x-auto",children:null===this.state.trainees?Object(S.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-gray-100 rounded my-4",children:[Object(S.jsx)(f.a,{}),Object(S.jsx)("div",{className:"text-center font-light text-lg",children:"Loading, please wait..."})]}):0===this.state.trainees.length?Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"text-center p-5 bg-gray-100 rounded-md mt-3 flex flex-col items-center justify-center w-full",children:[Object(S.jsx)("div",{className:"text-xl font-bold",children:"No trainees found!"}),Object(S.jsxs)("div",{className:"text-sm text-gray-500",children:["No trainees assigned to the selected training from the school or district ",this.props.selected_training_request.school_name]}),Object(S.jsx)("div",{className:"mt-4",children:Object(S.jsx)("div",{className:"bg-white hover:bg-gray-300 border border-gray-300 px-3 py-2 rounded w-max cursor-pointer italic",onClick:this.props.onGoBack,children:"Go back to the list"})})]})}):Object(S.jsx)("div",{className:"mt-3 w-full overflow-x-auto",children:Object(S.jsxs)("table",{className:"min-w-full text-left text-sm animate__animated animate__fadeIn",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{className:"text-primary-800 truncate",children:[Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300 text-center",children:"#"}),Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300",children:"Full name"}),Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300",children:"National ID"}),Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300",children:"Teaching level"}),Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300",children:"Qualification"}),Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300",children:"Position"}),Object(S.jsx)("th",{className:"px-2 py-2 border border-gray-300 text-right",children:"Subjects taught"})]})}),Object(S.jsx)("tbody",{children:0===Object(y.v)(this.state.trainees,this.state.search_data).length?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:8,className:"p-6 text-lg font-light text-center",children:Object(S.jsx)("div",{className:"animate__animated animate__shakeX text-center",children:"No result found!"})})}):Object(y.v)(this.state.trainees,this.state.search_data).map((function(e,t){return Object(S.jsxs)("tr",{className:"group",children:[Object(S.jsx)("td",{className:"px-2 py-2 border border-gray-300 text-center",children:t+1}),Object(S.jsxs)("td",{className:"px-2 py-2 border border-gray-300",children:[e.first_name," ",e.last_name]}),Object(S.jsx)("td",{className:"px-2 py-2 border border-gray-300",children:e.nid}),Object(S.jsx)("td",{className:"px-2 py-2 border border-gray-300",children:e.teaching_level}),Object(S.jsx)("td",{className:"px-2 py-2 border border-gray-300",children:e.qualification_name}),Object(S.jsx)("td",{className:"px-2 py-2 border border-gray-300",children:void 0===e.position_name?e.role:e.position_name}),Object(S.jsxs)("td",{className:"px-1 py-1 border border-gray-300",children:[void 0!==e.subjects&&e.subjects.length>0?Object(S.jsxs)("div",{onClick:function(){return r.setState({view_subjects:e})},className:"bg-gray-100 px-2 py-2 rounded cursor-pointer hover:text-primary-800 text-sm w-max hover:bg-primary-100 float-right",children:["View subjects (",Object(w.b)(e.subjects).length,")"]}):Object(S.jsx)("div",{className:"px-3"}),null!==r.state.view_subjects&&r.state.view_subjects.nid===e.nid&&Object(S.jsxs)("div",{className:"bg-white border rounded-md shadow-lg absolute right-5 animate__animated animate__zoomIn animate__faster",style:{zIndex:9},children:[Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 p-2 px-3",children:[Object(S.jsx)("span",{className:"font-bold text-lg",children:"Subjects taught"}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:function(){return r.setState({view_subjects:null})},className:"h-8 w-8 rounded-full bg-red-100 text-red-700 cursor-pointer hover:bg-red-200 flex items-center justify-center",children:Object(S.jsx)(p.r,{className:"text-2xl"})})})]}),Object(S.jsx)("div",{className:"p-2",children:Object(S.jsxs)("table",{className:"w-full text-sm text-left",children:[Object(S.jsxs)("thead",{children:[Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300 font-bold",children:"#"}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300 font-bold",children:"Course code"}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300 font-bold",children:"Course name"})]}),Object(S.jsx)("tbody",{children:Object(w.b)(r.state.view_subjects.subjects).map((function(e,t){return Object(S.jsxs)("tr",{className:"",children:[Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:t+1}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:e.course_code}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:e.course_name})]},t+1)}))})]})})]})]})]},t+1)}))})]})})})]})}}]),r}(d.Component),T=r(69),G=r(68),k=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(e){var s;return Object(i.a)(this,r),(s=t.call(this,e)).ReturnFilterTrainings=function(){var e=s.props.trainings_list;return null!==s.state.selected_training_provider_id&&(e=e.filter((function(e){return null!==s.state.selected_training_provider_id&&e.development_partner_id.toString()===s.state.selected_training_provider_id.training_provider_id.toString()}))),Object(y.v)(e,s.state.search_data)},s.GetTotalRequired=function(){var e,t=0,r=Object(a.a)(s.props.trainings_list);try{for(r.s();!(e=r.n()).done;){var i=e.value;t+=s.props.GetTotalRequiredTrainees(i.training_id)}}catch(n){r.e(n)}finally{r.f()}return t},s.GetTrainingProviders=function(){var e,t=[],r=Object(a.a)(s.props.trainings_list);try{var i=function(){var r=e.value;void 0===t.find((function(e){return e.training_provider_id.toString()===r.development_partner_id.toString()}))&&t.push({training_provider_id:r.development_partner_id,training_provider_name:r.development_partner_name})};for(r.s();!(e=r.n()).done;)i()}catch(n){r.e(n)}finally{r.f()}return t},s.state={loading:!1,search_data:"",openSelectTrainingProvider:!1,selected_training_provider_id:null},s}return Object(n.a)(r,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-3 lg:justify-between px-2 py-2 pb-4",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3 w-full",children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:this.props.onGoBack,className:"p-1 rounded-full bg-accent-400 h-12 w-12 flex items-center justify-center cursor-pointer",children:Object(S.jsx)(j.a,{className:"text-3xl text-accent-900 animate__animated animate__zoomIn"})})}),Object(S.jsxs)("div",{className:"truncate",children:[Object(S.jsx)("div",{className:"text-xl font-bold",children:"Trainings list"}),Object(S.jsx)("div",{className:"text-gray-500",children:"Choose or select a training from the list"})]})]}),Object(S.jsx)("div",{className:"flex flex-row items-center justify-end gap-2",children:Object(S.jsxs)("div",{className:"flex flex-col items-center justify-center bg-primary-100 p-2 px-3 rounded",children:[Object(S.jsx)("div",{className:"truncate text-sm text-primary-700",children:"Total required trainees"}),Object(S.jsx)("div",{className:"font-bold text-xl text-primary-700",children:Object(y.i)(this.GetTotalRequired())})]})})]}),Object(S.jsxs)("div",{className:"flex flex-row items-center gap-2 justify-between w-full",children:[Object(S.jsxs)("div",{className:"relative w-full rounded bg-primary-100 -mt-3 text-primary-700 cursor-pointer hover:bg-primary-100",children:[Object(S.jsxs)("div",{onClick:function(){return e.setState({openSelectTrainingProvider:!e.state.openSelectTrainingProvider})},className:"flex flex-row items-center justify-between gap-2 w-full py-2 px-3",children:[Object(S.jsx)("div",{className:"font-bold",children:null!==this.state.selected_training_provider_id?this.state.selected_training_provider_id.training_provider_name:Object(S.jsx)("span",{className:"text-primary-800",children:"Filter by training provider"})}),Object(S.jsx)("div",{children:!1===this.state.openSelectTrainingProvider?Object(S.jsx)(j.b,{className:"text-2xl"}):Object(S.jsx)(x.m,{className:"text-2xl text-yellow-700"})})]}),!0===this.state.openSelectTrainingProvider&&Object(S.jsx)("div",{className:"absolute pt-2 animate__animated animate__zoomIn animate__faster text-black",children:Object(S.jsx)(G.a,{loading:this.state.loading,id:"training_provider_id",title:"training_provider_name",close:function(){return e.setState({openSelectTrainingProvider:!1})},data:this.GetTrainingProviders(),click:function(t){e.setState({selected_training_provider_id:t,openSelectTrainingProvider:!1})}})})]}),null!==this.state.selected_training_provider_id&&Object(S.jsx)("div",{title:"Reset",className:"py-1 px-2 border border-accent-500 text-yellow-600 h-11 bg-accent-400 rounded-md -mt-3 hover:bg-accent-500 cursor-pointer flex items-center justify-center animate__animated animate__zoomIn animate__faster",onClick:function(){return e.setState({selected_training_provider_id:null})},children:Object(S.jsx)(T.d,{className:"text-3xl"})}),Object(S.jsxs)("div",{className:"relative w-full mb-3",children:[Object(S.jsx)("div",{className:"absolute px-3 py-2",children:Object(S.jsx)(b.f,{className:"text-2xl text-gray-600"})}),Object(S.jsx)("input",{type:"search",className:"font-normal bg-gray-100 w-full px-3 pl-12 py-2 rounded border border-gray-100",placeholder:"Search...",value:this.state.search_data,onChange:function(t){return e.setState({search_data:t.target.value})}})]})]}),0===this.props.trainings_list.length?Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"flex flex-col items-center justify-center bg-gray-100 rounded-md p-6",children:[Object(S.jsx)("div",{className:"mb-2",children:Object(S.jsx)(j.g,{className:"text-6xl text-gray-300 animate__animated animate__shakeX"})}),Object(S.jsx)("div",{className:"text-xl font-bold",children:"No trainings available"}),Object(S.jsx)("div",{className:"text-sm",children:"No trainings available for the selected district to be approved"})]})}):Object(S.jsx)("div",{children:Object(S.jsxs)("table",{className:"w-full text-sm text-left",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"#"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Training title"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Training provider"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Topic"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Start date"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"End date"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Total required"}),Object(S.jsx)("th",{className:"px-3 py-2 border border-gray-300"})]})}),Object(S.jsx)("tbody",{children:this.ReturnFilterTrainings().map((function(t,r){return Object(S.jsxs)("tr",{className:"cursor-pointer hover:bg-yellow-50 hover:text-accent-900 group",onClick:function(){return null!==e.props.selected_training&&e.props.selected_training.id===t.id?e.props.onGoBack():e.props.onSelected(t)},children:[Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:r+1}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:t.title}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:t.development_partner_name}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:t.topic_name}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:Object(y.a)(t.start_date)}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:Object(y.a)(t.end_date)}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:Object(y.i)(e.props.GetTotalRequiredTrainees(t.training_id.toString()))}),Object(S.jsx)("td",{className:"px-1 py-1 border border-gray-300 w-10",children:null!==e.props.selected_training&&e.props.selected_training.id===t.id?Object(S.jsx)("div",{className:"bg-white px-2 py-1 border wounded-md cursor-not-allowed rounded-md text-gray-500",children:"Selected"}):Object(S.jsxs)("div",{className:"px-2 py-1 rounded bg-accent-400 text-accent-900 text-sm flex flex-row items-center justify-center gap-2 w-max float-right group-hover:bg-accent-900 group-hover:text-white font-bold",children:[Object(S.jsx)("div",{children:"Select"}),Object(S.jsx)("div",{children:Object(S.jsx)(j.b,{className:"text-2xl"})})]})})]},r+1)}))})]})})]})}}]),r}(d.Component),C=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).LoadTotalTrainingAssignedTrainees=function(e){n.setState({loading:!0}),Object(m.b)(e,(function(e,t){n.setState({loading:e}),null!==t&&"success"===t.type&&null!==t.data&&n.setState({loading:!1,selected_training_totals:t.data}),null!==t&&"error"===t.type&&n.setState({loading:!1,selected_training_totals:[],error:t.msg})}))},n.GetDistrictsList=function(){n.setState({loading:!0}),Object(g.L)((function(e,t,r){!0===e&&n.setState({loading:!1,districts_list:t.map((function(e){return{district_code:e.district_code,district_name:e.district_name,province_code:""}})),error:""})}))},n.FC_GetTrainingsListToBeApproved=function(){null!==n.state.selected_district&&Object(m.c)(n.state.selected_district.district_code,(function(e,t){n.setState({loading:e}),null!==t&&"success"===t.type&&null!==t.data&&n.setState({trainings_list:t.data,loading:!1,chooseTrainingProvider:!0}),null!==t&&"error"===t.type&&n.setState({trainings_list:[],loading:!1,error:t.msg})}))},n.FC_GetTrainingsList=function(){if(null!==n.state.trainings_list){var e,t=[],r=Object(a.a)(n.state.trainings_list);try{var i=function(){var r=e.value;void 0===t.find((function(e){return e.training_id.toString()===r.training_id.toString()}))&&(t=[].concat(Object(s.a)(t),[{description:r.description,development_partner_id:r.development_partner_id,development_partner_name:r.development_partner_name,end_date:r.end_date,id:r.id,implementation_status:r.implementation_status,intervantion_area:r.intervantion_area,intervation_id:r.intervation_id,start_date:r.start_date,sub_area_id:r.sub_area_id,subarea_name:r.subarea_name,title:r.title,topic_id:r.topic_id,topic_name:r.topic_name,training_id:r.training_id}]))};for(r.s();!(e=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}return t}return[]},n.FC_GetTrainingSchools=function(){if(null===n.state.selected_training||null===n.state.trainings_list)return[];var e=[];if(null!==n.state.selected_training){var t,r=Object(a.a)(n.state.trainings_list.filter((function(e){return null!==n.state.selected_training&&e.training_id===n.state.selected_training.training_id})));try{for(r.s();!(t=r.n()).done;){var s=t.value;e.push({request_id:s.id.toString(),school_code:null===s.school_code?"":s.school_code.toString(),school_name:null===s.school_name?"":s.school_name,total:null===s.total?0:s.total,is_approved:s.is_approved})}}catch(i){r.e(i)}finally{r.f()}}return e},n.GetTotalRequiredTrainees=function(e){if(null===n.state.trainings_list||0===n.state.trainings_list.length)return 0;var t,r=0,s=Object(a.a)(n.state.trainings_list.filter((function(t){return t.training_id.toString()===e.toString()})));try{for(s.s();!(t=s.n()).done;){var i=t.value;null!==i.total&&(r+=i.total)}}catch(c){s.e(c)}finally{s.f()}return r},n.GetTotalRequiredByRequestId=function(e){if(null===n.state.trainings_list||0===n.state.trainings_list.length)return 0;var t,r=0,s=Object(a.a)(n.state.trainings_list.filter((function(t){return t.id.toString()===e.toString()})));try{for(s.s();!(t=s.n()).done;){var i=t.value;null!==i.total&&(r+=i.total)}}catch(c){s.e(c)}finally{s.f()}return r},n.GetTotalSchools=function(){return n.FC_GetTrainingSchools().length},n.GetTotalSchoolsApproved=function(){if(null!==n.state.selected_training_totals){var e,t=0,r=Object(a.a)(n.FC_GetTrainingSchools());try{var s=function(){var r=e.value;void 0!==n.state.selected_training_totals.find((function(e){return e.trainee_request_id.toString()===r.request_id.toString()&&1===r.is_approved}))&&(t+=1)};for(r.s();!(e=r.n()).done;)s()}catch(i){r.e(i)}finally{r.f()}return t}return 0},n.GetTotalAssignedByRequestId=function(e){if(null!==n.state.selected_training_totals){var t=n.state.selected_training_totals.find((function(t){return t.trainee_request_id.toString()===e.toString()}));if(void 0!==t)return t.total}return 0},n.GetTotalByRequestId=function(e){if(null!==n.state.trainings_list){var t=n.state.trainings_list.find((function(t){return t.id.toString()===e.toString()}));if(void 0!==t)return null===t.total?0:t.total}return 0},n.GetTotalApprovedTrainees=function(){if(null!==n.state.selected_training_totals){var e,t=0,r=Object(a.a)(n.FC_GetTrainingSchools());try{var s=function(){var r=e.value,s=n.state.selected_training_totals.find((function(e){return e.trainee_request_id.toString()===r.request_id.toString()&&1===r.is_approved}));void 0!==s&&(t+=s.total)};for(r.s();!(e=r.n()).done;)s()}catch(i){r.e(i)}finally{r.f()}return t}return 0},n.FC_ApproveTrainingRequest=function(e){n.setState({approve_training_request:null,loading:!0}),Object(m.a)({is_approved:1===e.is_approved,training_request_id:e.request_id},(function(t,r){if(n.setState({loading:t}),null!==r&&"success"===r.type){if(null!==n.state.trainings_list){var s,i=[],c=Object(a.a)(n.state.trainings_list);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.id.toString()===e.request_id.toString()?i.push({description:l.description,development_partner_id:l.development_partner_id,development_partner_name:l.development_partner_name,end_date:l.end_date,id:l.id,implementation_status:l.implementation_status,intervantion_area:l.intervantion_area,intervation_id:l.intervation_id,is_approved:1===l.is_approved?0:1,school_code:l.school_code,school_name:l.school_name,start_date:l.start_date,sub_area_id:l.sub_area_id,subarea_name:l.subarea_name,title:l.title,topic_id:l.topic_id,topic_name:l.topic_name,total:l.total,training_id:l.training_id,cohort_id:l.cohort_id}):i.push(l)}}catch(d){c.e(d)}finally{c.f()}n.setState({selected_status:0===i.filter((function(e){return 0===e.is_approved})).length?1:0,trainings_list:i})}n.setState({success:r.msg,error:"",loading:!1})}null!==r&&"error"===r.type&&n.setState({success:"",error:r.msg,loading:!1})}))},n.state={loading:!1,error:"",districts_list:null,selected_district:n.props.auth.district,chooseTrainingProvider:!1,trainings_list:null,selected_training:null,selected_training_totals:null,search_data:"",selected_training_request:null,selected_status:null,approve_training_request:null,success:""},n}return Object(n.a)(r,[{key:"componentDidMount",value:function(){null===this.state.selected_district&&this.GetDistrictsList(),null===this.state.trainings_list&&this.FC_GetTrainingsListToBeApproved()}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container mx-auto p-3 relative h-full",children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"bg-white rounded p-2",children:Object(S.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between gap-2 w-full",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-2 w-full lg:w-1/2",children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"h-14 w-14 rounded-md bg-accent-400 text-accent-900 flex items-center justify-center",children:Object(S.jsx)(p.bb,{className:"text-5xl"})})}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("span",{className:"text-xl font-bold",children:"Training participants approval"}),Object(S.jsx)("span",{className:"text-sm text-gray-500",children:"View list of selected participants for the training"})]})]}),Object(S.jsx)("div",{className:"w-full lg:w-1/2",children:Object(S.jsxs)("div",{onClick:function(){return!1===e.state.loading&&e.setState({chooseTrainingProvider:!e.state.chooseTrainingProvider})},className:"".concat(null!==this.state.selected_training?"bg-accent-400 border-accent-500":"bg-gray-100 border-white"," hover:bg-accent-400 border  hover:border-accent-500 w-full pl-3 py-1 pr-1 rounded flex flex-row items-center justify-between gap-20 group cursor-pointer animate__animated animate__fadeIn"),children:[null!==this.state.selected_training?Object(S.jsx)("div",{className:"flex flex-row items-center gap-2",children:Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("span",{className:"text-black text-sm",children:"Selected training"}),Object(S.jsx)("div",{className:"font-bold text-yellow-700",children:this.state.selected_training.title})]})}):Object(S.jsx)("div",{className:"text-lg font-normal pl-2 text-gray-500",children:"No training selected!"}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)("div",{className:"bg-white group-hover:bg-accent-900 group-hover:text-white rounded p-1 flex items-center justify-center",children:Object(S.jsx)(u.h,{className:"text-4xl text-accent-900 group-hover:text-white"})})})]})})]})})}),Object(S.jsxs)("div",{className:"h-full",children:[""!==this.state.error&&Object(S.jsxs)("div",{onClick:function(){return e.setState({error:"",success:""})},className:"bg-red-50 text-red-700 font-bold px-3 py-2 my-3",children:[Object(S.jsx)("div",{children:"Error occurred!"}),Object(S.jsx)("div",{className:"font-normal",children:this.state.error})]}),""!==this.state.success&&Object(S.jsxs)("div",{onClick:function(){return e.setState({success:"",error:""})},className:"bg-green-50 text-green-700 font-bold px-3 py-2 my-3 animate__animated animate__zoomIn rounded-md border-2 border-white",children:[Object(S.jsx)("div",{children:"Action succeeded!"}),Object(S.jsx)("div",{className:"font-normal",children:this.state.success})]}),!1===this.state.loading?null===this.state.selected_training?Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white rounded-md p-6 mt-3",children:[Object(S.jsx)("div",{className:"mb-2",children:Object(S.jsx)(x.d,{className:"text-6xl text-gray-300 animate__animated animate__shakeX"})}),Object(S.jsx)("div",{className:"text-xl font-bold",children:"Select training for approval"}),Object(S.jsx)("div",{className:"text-sm",children:"No training selected to be approved, click to select training"}),Object(S.jsx)(_.a,{onClick:function(){return!1===e.state.loading&&e.setState({chooseTrainingProvider:!e.state.chooseTrainingProvider})},className:"mt-3",children:"Select training"})]})}):Object(S.jsxs)("div",{className:"bg-white rounded my-2 p-2 h-full animate__animated animate__fadeIn",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 mb-4",children:[Object(S.jsx)("div",{className:"font-bold text-lg pl-2",children:"Trainees summary"}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[Object(S.jsxs)("div",{className:"bg-gray-100 rounded-full px-3 w-max",children:["Start date:"," ",Object(y.a)(this.state.selected_training.start_date)]}),Object(S.jsxs)("div",{className:"bg-gray-100 rounded-full px-3 w-max",children:["Ending date: ",Object(y.a)(this.state.selected_training.end_date)]})]})]}),Object(S.jsxs)("div",{className:"mb-6 flex flex-col lg:flex-row items-center justify-between gap-2",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 h-full",children:[Object(S.jsxs)("div",{className:"rounded-md bg-gray-100 p-1 px-5 flex flex-col justify-center",children:[Object(S.jsx)("div",{className:"text-sm",children:"Total schools"}),Object(S.jsx)("div",{className:"font-bold text-xl",children:Object(y.i)(this.GetTotalSchools())})]}),Object(S.jsxs)("div",{className:"rounded-md bg-green-50 text-green-700 p-1 px-5 flex flex-col justify-center",style:{borderColor:"#afd9cc"},children:[Object(S.jsx)("div",{className:"text-sm",children:"Total approved schools"}),Object(S.jsx)("div",{className:"font-bold text-xl",children:Object(y.i)(this.GetTotalSchoolsApproved())})]}),Object(S.jsxs)("div",{className:"rounded-md bg-red-50 text-red-700 p-1 px-5 flex flex-col justify-center",children:[Object(S.jsx)("div",{className:"text-sm",children:"Remaining schools"}),Object(S.jsx)("div",{className:"font-bold text-xl",children:Object(y.i)(this.GetTotalSchools()-this.GetTotalSchoolsApproved())})]})]}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2",children:[Object(S.jsxs)("div",{className:"rounded-md bg-gray-100 p-1 px-5 flex flex-col justify-center",children:[Object(S.jsx)("div",{className:"text-sm",children:"Total required trainees"}),Object(S.jsx)("div",{className:"font-bold text-xl",children:Object(y.i)(this.GetTotalRequiredTrainees(this.state.selected_training.training_id))})]}),Object(S.jsxs)("div",{className:"rounded-md bg-green-50 text-green-700 p-1 px-5 flex flex-col justify-center",style:{borderColor:"#afd9cc"},children:[Object(S.jsx)("div",{className:"text-sm",children:"Total approved trainees"}),Object(S.jsx)("div",{className:"font-bold text-xl",children:Object(y.i)(this.GetTotalApprovedTrainees())})]}),Object(S.jsxs)("div",{className:"rounded-md bg-red-50 text-red-700 p-1 px-5 flex flex-col justify-center",children:[Object(S.jsx)("div",{className:"text-sm",children:"Not approved trainees"}),Object(S.jsx)("div",{className:"font-bold text-xl",children:Object(y.i)(this.GetTotalRequiredTrainees(this.state.selected_training.training_id)-this.GetTotalApprovedTrainees())})]})]})]}),Object(S.jsxs)("div",{className:"flex flex-row items-center gap-2 w-full",children:[Object(S.jsxs)("select",{value:null===this.state.selected_status?"":this.state.selected_status.toString(),onChange:function(t){return e.setState({selected_status:"1"===t.target.value?1:"0"===t.target.value?0:null})},className:"px-3 py-2 rounded bg-primary-100 -mt-3 border border-primary-700 text-primary-800",children:[Object(S.jsxs)("option",{value:"0",children:["Not approved schools (",this.FC_GetTrainingSchools().filter((function(e){return 0===e.is_approved})).length,")"]}),Object(S.jsxs)("option",{value:"1",children:["Approved schools (",this.FC_GetTrainingSchools().filter((function(e){return 1===e.is_approved})).length,")"]}),Object(S.jsxs)("option",{value:"",children:["All schools (",this.FC_GetTrainingSchools().length,")"]})]}),Object(S.jsxs)("div",{className:"relative w-full mb-3",children:[Object(S.jsx)("div",{className:"absolute px-3 py-2",children:Object(S.jsx)(b.f,{className:"text-2xl text-gray-600"})}),Object(S.jsx)("input",{type:"search",className:"font-normal bg-gray-100 w-full px-3 pl-12 py-2 rounded border-2 border-gray-100",placeholder:"Search...",value:this.state.search_data,onChange:function(t){return e.setState({search_data:t.target.value})}})]})]}),Object(S.jsx)("div",{className:"text-xl font-light",children:Object(S.jsxs)("table",{className:"w-full text-left text-sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{className:"border-b border-gray-300",children:[Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"#"}),Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"School/District code"}),Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"School/District name"}),Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"Total required"}),Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"Total assigned"}),Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"Status"}),Object(S.jsx)("th",{className:"px-3 py-3 border border-gray-300",children:"Action"})]})}),Object(S.jsx)("tbody",{children:0===Object(y.v)(this.FC_GetTrainingSchools().filter((function(t){return null===e.state.selected_status||t.is_approved===e.state.selected_status})),this.state.search_data).length?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:6,className:"py-3 text-center text-xl font-light",children:"No result found!"})}):Object(y.v)(this.FC_GetTrainingSchools().filter((function(t){return null===e.state.selected_status||t.is_approved===e.state.selected_status})),this.state.search_data).map((function(t,r){var s,a;return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:r+1}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:""===t.school_code?null===(s=e.state.selected_district)||void 0===s?void 0:s.district_code:t.school_code}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:""===t.school_name?null===(a=e.state.selected_district)||void 0===a?void 0:a.district_name:t.school_name}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:Object(y.i)(t.total)}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:Object(y.i)(e.GetTotalAssignedByRequestId(t.request_id))}),Object(S.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:"1"===t.is_approved.toString()?Object(S.jsx)("div",{className:"w-max bg-green-100 rounded-full text-sm px-3 py-1 text-green-600 font-normal",children:"Approved"}):Object(S.jsx)("div",{className:"w-max bg-accent-400 rounded-full text-sm px-3 py-1 text-accent-900 font-normal",children:"Not approved"})}),Object(S.jsx)("td",{className:"px-1 py-1 border border-gray-300 w-10",children:Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 w-max",children:[Object(S.jsxs)("div",{onClick:function(){return e.setState({selected_training_request:t})},className:"flex flex-row items-center justify-center gap-3 bg-gray-100 text-gray-700 hover:bg-gray-400 hover:text-white rounded p-2 pr-3 w-max cursor-pointer font-bold group",children:[Object(S.jsx)("div",{children:Object(S.jsx)(x.r,{className:"text-2xl text-gray-400 group-hover:text-white"})}),Object(S.jsx)("span",{children:"Trainees"})]}),1!==t.is_approved?Object(S.jsxs)("div",{onClick:function(){e.setState({approve_training_request:{request_id:t.request_id,school_code:t.school_code,school_name:t.school_name,total:t.total,is_approved:1}})},className:"flex flex-row items-center justify-center gap-3 bg-green-100 text-green-600 hover:bg-green-600 hover:text-white rounded p-2 pr-3 w-max cursor-pointer font-bold",children:[Object(S.jsx)("div",{children:Object(S.jsx)(j.j,{className:"text-2xl"})}),Object(S.jsx)("span",{children:"Approve"})]}):Object(S.jsxs)("div",{onClick:function(){e.setState({approve_training_request:{request_id:t.request_id,school_code:t.school_code,school_name:t.school_name,total:t.total,is_approved:0}})},className:"flex flex-row items-center justify-center gap-1 bg-accent-400 text-accent-900 hover:bg-accent-900 hover:text-white rounded p-2 pr-3 w-max cursor-pointer font-bold",children:[Object(S.jsx)("div",{children:Object(S.jsx)(o.g,{className:"text-2xl"})}),Object(S.jsx)("span",{children:"Undo approval"})]})]})})]},r+1)}))})]})})]}):Object(S.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-white rounded my-4",children:[Object(S.jsx)(f.a,{}),Object(S.jsx)("div",{className:"text-center font-light text-lg",children:"Loading, please wait..."})]})]}),!0===this.state.chooseTrainingProvider&&null!==this.state.trainings_list&&Object(S.jsx)(O.a,{className:"p-3 px-4",children:Object(S.jsx)(k,{onGoBack:function(){return e.setState({chooseTrainingProvider:!1})},trainings_list:this.FC_GetTrainingsList(),selected_training:this.state.selected_training,onSelected:function(t){e.setState({chooseTrainingProvider:!1,selected_training:t}),e.LoadTotalTrainingAssignedTrainees(t.training_id)},GetTotalRequiredTrainees:this.GetTotalRequiredTrainees,GetTotalRequiredByRequestId:this.GetTotalRequiredByRequestId})}),null!==this.state.selected_training&&null!==this.state.selected_training_request&&Object(S.jsx)(O.a,{className:"p-3 px-4",children:Object(S.jsx)(q,{selected_district_code:null===this.props.auth.district?null:this.props.auth.district,training_id:this.state.selected_training.training_id,selected_training_request:this.state.selected_training_request,onGoBack:function(){return e.setState({selected_training_request:null})},GetTotalRequiredByRequestId:this.GetTotalAssignedByRequestId,onSubmitApproval:function(t){null!==e.state.selected_training_request&&e.setState({approve_training_request:{is_approved:1,request_id:e.state.selected_training_request.request_id,school_code:e.state.selected_training_request.school_code,school_name:e.state.selected_training_request.school_name,total:e.state.selected_training_request.total},selected_training_request:null})}})}),null!==this.state.approve_training_request&&Object(S.jsx)(v.d,{backDrop:!0,close:function(){return e.setState({approve_training_request:null})},backDropClose:!0,displayClose:!1,widthSizeClass:v.b.large,padding:{title:void 0,body:!0,footer:void 0},children:Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"text-2xl font-bold pb-3 mb-3 ".concat(1===this.state.approve_training_request.is_approved?"text-green-700":"text-accent-900"," flex flex-row items-center gap-3"),children:[Object(S.jsx)("div",{children:1===this.state.approve_training_request.is_approved?Object(S.jsx)(j.y,{className:"text-3xl"}):Object(S.jsx)(o.g,{className:"text-3xl"})}),Object(S.jsx)("span",{children:1===this.state.approve_training_request.is_approved?"Training trainees approval":"Undo training approval"})]}),Object(S.jsxs)("div",{className:"",children:[Object(S.jsx)("div",{children:"School/District name"}),Object(S.jsxs)("div",{className:"font-bold text-lg",children:[this.state.approve_training_request.school_code," -"," ",this.state.approve_training_request.school_name]})]}),Object(S.jsxs)("div",{className:"rounded-md my-3 flex flex-row items-center justify-between gap-3",children:[Object(S.jsxs)("div",{className:"rounded-md p-1 flex flex-row items-center gap-3 border border-accent-600 w-full bg-accent-40 animate__animated animate__fadeIn",children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"h-14 w-14 rounded-md bg-accent-400 flex items-center justify-center text-accent-900",children:Object(S.jsx)(x.r,{className:"text-4xl"})})}),Object(S.jsxs)("div",{className:"flex flex-col ",children:[Object(S.jsx)("span",{className:"",children:"Total required trainees"}),Object(S.jsx)("span",{className:"font-bold text-2xl text-accent-900",children:Object(y.i)(this.state.approve_training_request.total)})]})]}),Object(S.jsxs)("div",{className:"rounded-md p-1 flex flex-row items-center gap-3 border w-full bg-accent-40 group animate__animated animate__fadeIn",style:{borderColor:"#afd9cc"},children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"h-14 w-14 rounded-md bg-green-100 flex items-center justify-center text-green-600",children:Object(S.jsx)(x.d,{className:"text-4xl"})})}),Object(S.jsxs)("div",{className:"flex flex-col w-full",children:[Object(S.jsx)("span",{className:"",children:"Total Assigned trainees"}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 w-full",children:[Object(S.jsx)("span",{className:"font-bold text-2xl text-green-600",children:Object(y.i)(this.GetTotalAssignedByRequestId(this.state.approve_training_request.request_id))}),Object(S.jsx)("div",{onClick:function(){null!==e.state.approve_training_request&&e.setState({selected_training_request:{is_approved:1===e.state.approve_training_request.is_approved?0:1,request_id:e.state.approve_training_request.request_id,school_code:e.state.approve_training_request.school_code,school_name:e.state.approve_training_request.school_name,total:e.state.approve_training_request.total},approve_training_request:null})},className:"cursor-pointer px-2 py-1 rounded text-sm bg-gray-100 font-bold w-max float-right group-hover:bg-accent-400 group-hover:text-accent-900",children:"View trainees"})]})]})]})]}),Object(S.jsx)("div",{className:"font-light",children:Object(S.jsx)("div",{children:"Are you sure do you want to confirm?"})}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[Object(S.jsx)(_.a,{onClick:function(){return e.setState({approve_training_request:null})},theme:"default",children:"Cancel"}),Object(S.jsx)(_.a,{onClick:function(){null!==e.state.approve_training_request&&e.FC_ApproveTrainingRequest(e.state.approve_training_request)},theme:1===this.state.approve_training_request.is_approved?"success":"accent",className:"animate__animated animate__zoomIn",children:1===this.state.approve_training_request.is_approved?"Approve training trainees":"Undo training approval"})]})]})})]})}}]),r}(d.Component),A=Object(h.b)((function(e){return{basic:e.basic,auth:e.auth}}),{})(C)}}]);
//# sourceMappingURL=41.264fc5bb.chunk.js.map