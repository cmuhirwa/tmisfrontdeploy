(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[7],{344:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return m})),i.d(t,"d",(function(){return _}));var s=i(3),n=i(8),r=i(9),a=i.n(r),c=i(16),d=i(14),o=i(11),l=i(13),u=function(e){return e(!0,null,""),function(){var t=Object(n.a)(Object(s.a)().mark((function t(i){var n,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(o.a)(),t.next=4,a.a.get("".concat(d.d,"/teachertransfers/requesteddde"));case 4:n=t.sent,console.log("===================================="),console.log({getAllTransfers:n}),console.log("===================================="),r=n.data.filter((function(e){return"APPROVED"===e.requested_status})),i({type:c.a.GET_ALL_TRANSFER,payload:r}),e(!1,r,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e(!1,null,Object(l.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},p=function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(n.a)(Object(s.a)().mark((function e(t,i){var n,r,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0,n=0,null,""),e.prev=2,Object(o.a)(),(r=new FormData).append("teacher_supporting_document",t),e.next=8,a.a.post("".concat(d.d,"/teachertransfers/uploadSupportingDocument"),r,{onUploadProgress:function(e){n=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100,i(!0,n,null,"")}});case 8:c=e.sent,console.log("Uploaded document: ",c.data),i(!1,n,c.data,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),i(!1,n,"",Object(l.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,i){return e.apply(this,arguments)}}(),_=function(e,t,i){i(!0,"");return function(){var r=Object(n.a)(Object(s.a)().mark((function n(r){var u,p;return Object(s.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),i(!0,""),(u=new FormData).append("teacher_transfer_id",e),u.append("mayor_letter",t),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),s.prev=11,Object(o.a)(),s.next=15,a.a.post("".concat(d.d,"/teachertransfers/outgoing"),u);case 15:p=s.sent,console.log("Uploaded document: ",p.data),r({type:c.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:e,mayor_letter:p.data.mayor_letter}}),i(!1,""),s.next=25;break;case 21:s.prev=21,s.t0=s.catch(11),console.error(s.t0),i(!1,Object(l.a)(s.t0));case 25:case"end":return s.stop()}}),n,null,[[11,21]])})));return function(e){return r.apply(this,arguments)}}()}},348:function(e,t,i){"use strict";i(4);var s=i(121),n=i(2);t.a=function(e){var t=e.onChange,i=e.value,r=e.error,a=e.label,c=e.placeholder,d=e.disabled,o=void 0!==d&&d,l=e.name,u=e.Input_className,p=void 0===u?"":u,m=e.Label_className,_=void 0===m?"":m,b=e.InputContainer_className,g=void 0===b?"":b,h=e.MainContainer_className,v=void 0===h?"":h,j=e.labelColor,x=void 0===j?"text-primary-900 dark:text-primary-100":j,f=e.size,y=void 0===f?"md":f;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"w-full my-2 ".concat(v),children:[""!==a&&Object(n.jsx)("label",{htmlFor:"any-form",className:"".concat(x," ").concat(_),children:a}),Object(n.jsxs)("div",{className:"rounded relative ".concat(g),children:[Object(n.jsx)("textarea",{name:l,placeholder:c,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(s.a)(y),"\n                ").concat(""!==r?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(p),value:i,disabled:o}),""!==r&&Object(n.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:r})]})]})})}},363:function(e,t,i){"use strict";var s,n=i(3),r=i(8),a=i(28),c=i(29),d=i(30),o=i(31),l=i(9),u=i.n(l),p=i(4),m=i(49),_=i(17),b=i(344),g=i(14),h=i(13),v=i(52),j=i(41),x=i(353),f=i(48),y=i(2),O=function(e){var t="";return 0===e.size&&(t="Invalid file"),e.size>1038221&&(t="File should not be greater than 1MB"),"application/pdf"!==e.type&&"image/png"!==e.type&&"image/jpeg"!==e.type&&"image/webp"!==e.type&&"image/tiff"!==e.type&&"image/bmp"!==e.type&&"image/gif"!==e.type&&"image/jfif"!==e.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&(t="Invalid file type, accepted files(PDF, IMAGES(png, jpeg, webp, tiff, bmp, gif, jfif))"),""!==t?t:""};!function(e){e.RESIDENCE="RESIDENCE",e.DISABILITY="DISABILITY",e.ALL="ALL"}(s||(s={}));var N=function(e){Object(d.a)(i,e);var t=Object(o.a)(i);function i(e){var c;return Object(a.a)(this,i),(c=t.call(this,e)).setLoadingSaving=function(e){return c.setState({loading_saving:e})},c.UpdateUserDocuments=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var i,r,a,d;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c.setState({error:null,success:""}),c.state.addDocType!==s.RESIDENCE){e.next=11;break}if(null!==c.state.resident_district_id&&""!==c.state.resident_district_id){e.next=5;break}return e.abrupt("return",c.setState({error:{element:"main",msg:"Please select residence district!"}}));case 5:if(null!==c.state.resident_surpoting_document){e.next=9;break}return e.abrupt("return",c.setState({error:{element:"resident_surpoting_document",msg:"Please select resident surpoting document!"}}));case 9:if(""===O(c.state.resident_surpoting_document)){e.next=11;break}return e.abrupt("return",c.setState({error:{element:"main",msg:O(c.state.resident_surpoting_document)}}));case 11:if(c.state.addDocType!==s.DISABILITY){e.next=18;break}if(null!==c.state.disability_surpoting_document){e.next=16;break}return e.abrupt("return",c.setState({error:{element:"disability_surpoting_document",msg:"Please select disability surpoting document!"}}));case 16:if(""===O(c.state.disability_surpoting_document)){e.next=18;break}return e.abrupt("return",c.setState({error:{element:"main",msg:O(c.state.disability_surpoting_document)}}));case 18:return(r=new FormData).append("disability",(c.state.addDocType===s.DISABILITY||"").toString()),r.append("resident_district_id",null===c.state.resident_district_id?"":c.state.resident_district_id),r.append("disability_surpoting_document",null===c.state.disability_surpoting_document?"":c.state.disability_surpoting_document),r.append("resident_surpoting_document",null===c.state.resident_surpoting_document?"":c.state.resident_surpoting_document),a=null===(i=c.state.districts)||void 0===i?void 0:i.find((function(e){return e.district_code===c.state.resident_district_id})),r.append("resident_district_name",void 0===a?"":a.district_name),c.setState({loading_saving:!0}),e.prev=26,e.next=29,u.a.post("".concat(g.d,"/user/account/updateprofile"),r);case 29:d=e.sent,c.setState({success:"Document added successfully!"}),setInterval((function(){!0===c.state.loading_saving&&(c.props.FC_UpdateUserDocuments({resident_district_id:c.state.resident_district_id,disability:(c.state.addDocType===s.DISABILITY).toString(),disability_surpoting_document:d.data.disabilityNewFileName,resident_surpoting_document:d.data.residentNewFileName}),c.setState({loading_saving:!1}))}),3e3),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(26),c.setState({error:{element:"main",msg:Object(h.a)(e.t0)},loading_saving:!1});case 37:case"end":return e.stop()}}),e,null,[[26,34]])})));return function(t){return e.apply(this,arguments)}}(),c.SubmitNoDisability=Object(r.a)(Object(n.a)().mark((function e(){var t,i,s,r,a,d,o,l,p;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({loading_saving:!0}),e.prev=1,a=null===(t=c.props.auth.user)||void 0===t?void 0:t.resident_district_id,d=null===(i=c.props.auth.user)||void 0===i?void 0:i.disability_surpoting_document,o=null===(s=c.props.auth.user)||void 0===s?void 0:s.resident_surpoting_document,l=null===(r=c.props.auth.user)||void 0===r?void 0:r.resident_district_name,e.next=8,u.a.post("".concat(g.d,"/user/account/updateprofile"),{disability:(!1).toString(),resident_district_id:null===a||void 0===a?"":a,disability_surpoting_document:null===d||void 0===d?"":d,resident_surpoting_document:null===o||void 0===o?"":o,resident_district_name:null===l||void 0===l?"":l});case 8:p=e.sent,c.setState({success:"Submitted successfully!"}),setInterval((function(){c.props.FC_UpdateUserDocuments({resident_district_id:null===a||void 0===a?"":a,disability:(!1).toString(),disability_surpoting_document:p.data.disabilityNewFileName,resident_surpoting_document:p.data.residentNewFileName}),c.setState({loading_saving:!1})}),3e3),alert("Submitted successfully!"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),c.setState({error:{element:"main",msg:Object(h.a)(e.t0)},loading_saving:!1});case 17:case"end":return e.stop()}}),e,null,[[1,14]])}))),c.componentDidMount=function(){null===c.state.districts&&(c.setState({loading:!0}),Object(b.b)((function(e,t,i){null!==t&&c.setState({districts:t,loading:!1}),c.setState({loading:!1})})))},c.state={districts:null,loading:!1,loading_saving:!1,addDocuments:!1,addDocType:s.ALL,resident_district_id:null,disability_surpoting_document:null,resident_surpoting_document:null,error:null,success:"",disabled_none_selected:!1},c}return Object(c.a)(i,[{key:"render",value:function(){var e,t,i,n,r,a,c,d,o,l,u,b,h,O,N,S,D,w,k,I,C,T=this;return null===this.state.districts||!0===this.state.loading?Object(y.jsx)(v.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(y.jsx)(j.a,{}),Object(y.jsx)("div",{children:"Loading..."})]})}):Object(y.jsxs)(p.Fragment,{children:[""!==this.state.success&&Object(y.jsx)("div",{className:"text-green-700 bg-green-100 rounded px-3 py-2",children:this.state.success}),null!==this.state.error&&Object(y.jsx)("div",{className:"text-red-700 bg-red-100 rounded px-3 py-2",children:this.state.error.msg}),!1===this.state.addDocuments?Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"py-2 border-b",children:Object(y.jsx)("span",{className:"text-xl font-bold ",children:"My documents"})}),Object(y.jsxs)("div",{className:"py-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object(y.jsxs)("div",{className:"col-span-1 flex items-center gap-3 ".concat(null===(null===(e=this.props.auth.user)||void 0===e?void 0:e.resident_surpoting_document)||""===(null===(t=this.props.auth.user)||void 0===t?void 0:t.resident_surpoting_document)?"bg-yellow-100":"bg-gray-100"," rounded-lg p-3 py-4 hover:bg-blue-100 hover:text-primary-800 group"),children:[Object(y.jsx)("div",{children:null===(null===(i=this.props.auth.user)||void 0===i?void 0:i.resident_surpoting_document)||""===(null===(n=this.props.auth.user)||void 0===n?void 0:n.resident_surpoting_document)?Object(y.jsx)(_.g,{className:"text-gray-400 group-hover:text-primary-800 text-6xl"}):Object(y.jsx)(m.c,{className:"text-primary-800 group-hover:text-primary-800 text-6xl"})}),Object(y.jsxs)("div",{children:[null===(null===(r=this.props.auth.user)||void 0===r?void 0:r.resident_surpoting_document)||""===(null===(a=this.props.auth.user)||void 0===a?void 0:a.resident_surpoting_document)?Object(y.jsx)("div",{className:"text-accent-900 font-bold group-hover:text-primary-800",children:"Resident district is missing!"}):Object(y.jsx)("div",{className:"text-gray-900 font-bold group-hover:text-primary-800",children:"My resident district"}),Object(y.jsx)("div",{onClick:function(){var e,t,i;(null===(null===(e=T.props.auth.user)||void 0===e?void 0:e.resident_surpoting_document)||void 0===(null===(t=T.props.auth.user)||void 0===t?void 0:t.resident_surpoting_document)||""===(null===(i=T.props.auth.user)||void 0===i?void 0:i.resident_surpoting_document))&&T.setState({addDocuments:!0,addDocType:s.RESIDENCE})},className:"text-xl font-bold cursor-pointer",children:null===(null===(c=this.props.auth.user)||void 0===c?void 0:c.resident_surpoting_document)||""===(null===(d=this.props.auth.user)||void 0===d?void 0:d.resident_surpoting_document)?Object(y.jsx)("span",{className:"underline",children:"Choose your residence"}):Object(y.jsx)("span",{className:"text-primary-800",children:null===(o=this.state.districts.find((function(e){var t;return e.district_code===(null===(t=T.props.auth.user)||void 0===t?void 0:t.resident_district_id)})))||void 0===o?void 0:o.district_name})}),null!==(null===(l=this.props.auth.user)||void 0===l?void 0:l.resident_surpoting_document)&&void 0!==(null===(u=this.props.auth.user)||void 0===u?void 0:u.resident_surpoting_document)&&""!==(null===(b=this.props.auth.user)||void 0===b?void 0:b.resident_surpoting_document)&&Object(y.jsxs)("div",{className:"flex flex-row items-center w-full gap-2 mt-2",children:[Object(y.jsxs)("div",{onClick:function(){T.setState({addDocuments:!0,addDocType:s.RESIDENCE})},className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(_.q,{className:"text-lg"})}),Object(y.jsx)("span",{children:"Update"})]}),Object(y.jsxs)("a",{href:"".concat(g.e,"/").concat(this.props.auth.user.resident_surpoting_document),target:"__blank",className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(x.b,{className:"text-lg"})}),Object(y.jsx)("span",{children:"View"})]})]})]})]}),Object(y.jsxs)("div",{className:"col-span-1 flex items-center gap-3 bg-gray-50 rounded-lg p-3 py-4 hover:bg-gray-100  group",children:[Object(y.jsx)("div",{children:null===(null===(h=this.props.auth.user)||void 0===h?void 0:h.disability_surpoting_document)||""===(null===(O=this.props.auth.user)||void 0===O?void 0:O.disability_surpoting_document)?Object(y.jsx)(_.X,{className:"text-gray-400  text-6xl"}):Object(y.jsx)(m.c,{className:"text-primary-800 group-hover:text-primary-800 text-6xl"})}),Object(y.jsxs)("div",{children:[!(null!==(N=this.props.auth.user)&&void 0!==N&&N.disability_surpoting_document)&&Object(y.jsx)("div",{className:"text-gray-600 ",children:"Do you have a disability?"}),(null===(S=this.props.auth.user)||void 0===S?void 0:S.disability_surpoting_document)&&Object(y.jsxs)("div",{className:"text-gray-600 ",children:[Object(y.jsx)("h2",{className:"text-lg font-bold cursor-pointer text-black",children:"Disability document is found."}),Object(y.jsx)("span",{className:"text-sm",children:"you can Change disability document"})]}),Object(y.jsx)("div",{className:"text-xl font-bold cursor-pointer",children:null===(null===(D=this.props.auth.user)||void 0===D?void 0:D.disability_surpoting_document)||""===(null===(w=this.props.auth.user)||void 0===w?void 0:w.disability_surpoting_document)?Object(y.jsxs)("div",{className:"flex flex-row items-center gap-3 text-base",children:[Object(y.jsxs)(f.a,{onClick:function(){var e,t,i;(null===(null===(e=T.props.auth.user)||void 0===e?void 0:e.disability_surpoting_document)||void 0===(null===(t=T.props.auth.user)||void 0===t?void 0:t.disability_surpoting_document)||""===(null===(i=T.props.auth.user)||void 0===i?void 0:i.disability_surpoting_document))&&T.setState({addDocuments:!0,addDocType:s.DISABILITY,disabled_none_selected:!1})},type:"button",theme:!0===this.state.disabled_none_selected?"default":"accent-light",children:[Object(y.jsx)("b",{children:"Yes"}),", I have s disability"]}),Object(y.jsxs)(f.a,{type:"button",className:"px-2",theme:!0===this.state.disabled_none_selected?"success":"accent-light",onClick:function(){return T.setState({disabled_none_selected:!0})},children:[!0===this.state.disabled_none_selected?Object(y.jsx)(_.i,{className:"inline-block text-xl mr-1"}):Object(y.jsx)(_.j,{className:"inline-block text-xl mr-1"}),"No"]})]}):""}),null!==(null===(k=this.props.auth.user)||void 0===k?void 0:k.disability_surpoting_document)&&void 0!==(null===(I=this.props.auth.user)||void 0===I?void 0:I.disability_surpoting_document)&&""!==(null===(C=this.props.auth.user)||void 0===C?void 0:C.disability_surpoting_document)&&Object(y.jsxs)("div",{className:"flex flex-row items-center w-full gap-2 mt-2",children:[Object(y.jsxs)("div",{onClick:function(){T.setState({addDocuments:!0,addDocType:s.DISABILITY})},className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(_.q,{className:"text-lg"})}),Object(y.jsx)("span",{children:"Update"})]}),Object(y.jsxs)("a",{href:"".concat(g.e,"/").concat(this.props.auth.user.disability_surpoting_document),target:"__blank",className:"bg-white cursor-pointer rounded flex items-center gap-2 px-2 py-1 hover:bg-primary-800 hover:text-white",children:[Object(y.jsx)("div",{children:Object(y.jsx)(x.b,{className:"text-lg"})}),Object(y.jsx)("span",{children:"View"})]})]})]})]})]})]}):Object(y.jsx)("div",{className:"p-5 bg-white animate__animated animate__fadeIn animate__faster",children:Object(y.jsxs)("form",{onSubmit:this.UpdateUserDocuments,className:"flex flex-col md:flex-row items-center gap-6",children:[Object(y.jsx)("div",{className:"flex flex-col text-base",children:this.state.addDocType===s.RESIDENCE&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("label",{className:"font-bold",children:"Choose resident district"}),Object(y.jsxs)("select",{value:null===this.state.resident_district_id?"":this.state.resident_district_id,onChange:function(e){return T.setState({resident_district_id:e.target.value})},className:"border border-gray-400 rounded px-3 py-2 mb-5",children:[Object(y.jsx)("option",{value:"",children:"Choose district"}),this.state.districts.map((function(e,t){return Object(y.jsx)("option",{value:e.district_code,children:e.district_name},t+1)}))]}),Object(y.jsxs)("label",{className:"font-bold",children:["Residence supporting document ","(Size < 1MB)"]}),Object(y.jsx)("input",{type:"file",onChange:function(e){return T.setState({resident_surpoting_document:null===e.target.files?null:e.target.files[0]})},className:"border border-gray-400 rounded px-3 py-2"})]})}),Object(y.jsxs)("div",{className:"flex flex-col text-base",children:[this.state.addDocType===s.DISABILITY&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("label",{className:"font-bold",children:["Disability supporting document ","(Size < 1MB)"]}),Object(y.jsx)("input",{type:"file",onChange:function(e){return T.setState({disability_surpoting_document:null===e.target.files?null:e.target.files[0]})},className:"border border-gray-400 rounded px-3 py-2"})]}),Object(y.jsxs)("div",{className:"px-3 py-2 rounded bg-yellow-100 gap-3",children:[Object(y.jsx)("span",{className:"font-extrabold",children:"Warning"})," Make sure you are providing correct information. For any inconvenience, rules will be applied"]}),Object(y.jsxs)("div",{className:"flex items-center gap-3 mt-6",children:[Object(y.jsx)(f.a,{onClick:function(){return T.setState({addDocuments:!1,addDocType:s.ALL,resident_district_id:null,disability_surpoting_document:null,resident_surpoting_document:null,success:"",error:null})},theme:"default",children:"Back"}),Object(y.jsx)(f.a,{type:"submit",theme:"success",children:"Submit"})]})]})]})})]})}}]),i}(p.Component);t.a=N}}]);
//# sourceMappingURL=7.b4fdc788.chunk.js.map