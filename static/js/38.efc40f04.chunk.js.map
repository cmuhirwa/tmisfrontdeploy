{"version":3,"sources":["components/SchoolPositions/AddSchoolPositions.tsx","containers/Head-Teacher/Request/AddActionInput.tsx","containers/Head-Teacher/Request/HeadTeacherRequestToDee.tsx"],"names":["AddSchoolPositions","props","addPositionToSchool","position","setState","schoolPositionsTemp","state","filter","itm","position_id","FilterByPositionsHavingTeacher","sort","a","b","count","testPosition","schoolPositions","find","position_code","undefined","parseInt","total_on_position","addSchoolPositions","window","confirm","length","school","auth","setAxiosToken","newPositions","loading","newP","push","school_code","console","log","axios","post","APP_URL","appendPositionsToSchool","success","error","alert","errorToText","RemoveSchoolPosition","school_has_position_id","removePositionsToSchool","response","data","users","positionTemp","positions","selected_position_users_on_delete","PositionsSortByHavingTeacher","positionsTemp","countOnA","countOnB","test","search","searchPositionValue","edit","className","this","onClick","theme","close","onChange","e","target","value","placeholder","type","name","label","map","item","i","position_name","qualification_name","school_name","backDrop","Themes","default","backDropClose","widthSizeClass","ModalSize","extraLarge","displayClose","padding","body","staff_code","full_name","nid","phone_numbers","Component","AddActionInput","useState","reason","setReason","currentRequests","toString","inputValue","setInputValue","setError","htmlFor","postRequestReasons","element","reason_id","reason_name","res","getPostRequestItem","postsNumber","submitRequest","totalItemPosts","totalExistingPostsStatic","testItem","existing_post","dde_post_distribution","vacantPosts","normalSchoolPositions","total","_HdRequestToDee","setLoading","status","getPostRequestReasons","get","existingTeachersCount","n","existingTeachersCount1","newAddedTeachersCount","addedNewTeachers","nn","new_position","head_teacher_post_request","TotalAllowedTeachersCount","countRequestedPosts","allRequest","sumWithInitial","reduce","previousValue","currentValue","totalRequested","cleanAlert","setTimeout","msg","getSchoolPositions","academic_year_id","getNotInitializedPosts","school_positions","school_post_requests","initializePosts","TotalVacantPosts","elements","sendFinalPostRequest","addedRequests","current","post_request_id","academic_calendar_id","qualification_id","head_teacher_id","head_teacher_reason_id","dde_id_request","dde_post_request","dde_id_distribution","dde_distribution_comment","district_code","created_by","school_level_name","getUpdatedValue","number","updatedPosts","requestPosts","getValue","currentPostsData","district_code_split","user","user_id","newRequestdPosts","basic","academic_calender","NewUpdatedRequest","filterData","allData","seleQualification","seacrhValue","componentDidMount","FC_GetAllPositions","addPostRequestItem","district","request","substring","selected","qualification","allFliteredData","sendPostRequest","Container","title","subTitle","Alert","Loading","TextInput","size","qualifications","style","width","colSpan","index","HdRequestToDee","connect"],"mappings":"uRAsDaA,EAAb,kDAIE,WAAYC,GAAiC,IAAD,8BAC1C,cAAMA,IAYRC,oBAAsB,SAACC,GACrB,EAAKC,SAAS,CACZC,oBAAoB,CAClBF,GADiB,mBAEd,EAAKG,MAAMD,oBAAoBE,QAChC,SAACC,GAAD,OAASA,EAAIC,cAAgBN,EAASM,WAAtC,OAIP,EAtB2C,EAwB5CC,+BAAiC,WAiB/B,OAhBkB,EAAKJ,MAAMD,oBAEZM,MAAK,SAACC,EAAGC,GACxB,IAAIC,EAAgB,EACdC,EAAe,EAAKd,MAAMe,gBAAgBC,MAC9C,SAACT,GAAD,OAASA,EAAIU,gBAAkBN,EAAEM,aAAjC,IAKF,YAHqBC,IAAjBJ,IACFD,EAAQM,SAASL,EAAaM,oBAE5BP,EAAQ,GACF,EAED,CAEV,GAEF,EA1C2C,EA2C5CQ,mBA3C4C,gCA2CvB,wGAGjB,IADAC,OAAOC,QAAQ,oDAFE,sBAMf,EAAKlB,MAAMD,oBAAoBoB,OAAS,QAClBN,IAAtB,EAAKlB,MAAMyB,OACP,EAAKzB,MAAM0B,KAAKD,OAChB,EAAKzB,MAAMyB,QATA,iBAWfE,cACIC,EAAe,GACnB,EAAKzB,SAAS,CAAE0B,SAAS,IAbV,cAcE,EAAKxB,MAAMD,qBAdb,IAcf,2BAAS0B,EAAwC,QAC/CF,EAAaG,KAAK,CAChBC,iBACwBd,IAAtB,EAAKlB,MAAMyB,OACP,EAAKzB,MAAM0B,KAAKD,OAAQO,YACxB,EAAKhC,MAAMyB,OAAOO,YACxBf,cAAea,EAAKb,eApBT,sCAuBfgB,QAAQC,IAAI,oBAAqBN,GAvBlB,mBAyBPO,IAAMC,KAAN,UAAcC,IAAd,0BAA+CT,GAzBxC,QA0Bb,EAAK5B,MAAMsC,wBAAwB,EAAKjC,MAAMD,qBAC9C,EAAKD,SAAS,CAAEC,oBAAqB,KACrC,EAAKD,SAAS,CAAE0B,SAAS,IACzB,EAAK1B,SAAS,CACZoC,QAAS,gCACTC,MAAO,KAETC,MAAM,iCAjCO,kDAmCb,EAAKtC,SAAS,CAAE0B,SAAS,IACzB,EAAK1B,SAAS,CAAEqC,MAAOE,YAAY,EAAD,MAClCT,QAAQC,IAAI,QAAZ,sBArCa,0DA3CuB,EAqF5CS,qBArF4C,iDAqFrB,WACrBC,EACAZ,GAFqB,sGAIrB,EAAK7B,SAAS,CAAE0B,SAAS,IAJJ,kBAMDM,IAAMC,KAAN,UACbC,IADa,kCACoBO,GACpC,CACEZ,YAAaA,IATE,gBAajB,EAAK7B,SAAS,CACZoC,QAAS,gCACTC,MAAO,KAET,EAAKxC,MAAM6C,wBAAwBD,IAjBlB,gDAoBnBX,QAAQC,IAAI,cAAZ,UAA2B,KAAMY,gBAAjC,iBAA2B,EAAgBC,YAA3C,aAA2B,EAAsBC,YAEf9B,KAAhC,eAAM4B,gBAAN,mBAAgBC,YAAhB,eAAsBC,QACtB,KAAMF,SAASC,KAAKC,MAAMxB,OAAS,GAE7ByB,EAAe,EAAKjD,MAAMe,gBAAgBC,MAC9C,SAACT,GAAD,OAASA,EAAIqC,yBAA2BA,CAAxC,SAKe1B,KAHXhB,EAAW,EAAKF,MAAMkD,UAAUlC,MACpC,SAACT,GAAD,OAASA,EAAIU,iBAAJ,OAAsBgC,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAchC,cAA7C,KAGA,EAAKd,SAAS,CACZgD,kCAAmC,CACjCjD,SAAUA,EACV6C,KAAI,UAAE,KAAMD,gBAAR,iBAAE,EAAgBC,YAAlB,aAAE,EAAsBC,SAIhC,EAAK7C,SAAS,CACZqC,MAAO,gCAIX,EAAKrC,SAAS,CACZqC,MAAOE,YAAY,EAAD,MAGtB,EAAKvC,SAAS,CAAE0B,SAAS,IACzBI,QAAQC,IAAI,QAAZ,sBAjDmB,yDArFqB,0DA2I5CkB,6BAA+B,WAC7B,IAAIC,EAA6C,GA0BjD,OANAA,GAnBAA,EAAgB,EAAKrD,MAAMkD,UAAUxC,MAAK,SAACC,EAAGC,GAC5C,IAAM0C,EAAW,EAAKtD,MAAMe,gBAAgBC,MAC1C,SAACT,GAAD,OAASA,EAAIU,gBAAkBN,EAAEM,aAAjC,IAEIsC,EAAW,EAAKvD,MAAMe,gBAAgBC,MAC1C,SAACT,GAAD,OAASA,EAAIU,gBAAkBL,EAAEK,aAAjC,IAEF,YAAiBC,IAAboC,QAAuCpC,IAAbqC,EAE1BpC,SAASmC,EAASlC,mBAClBD,SAASoC,EAASnC,oBAEV,EAED,EAGJ,CACR,KAC6Bd,QAC5B,SAACC,GAAD,YAGQW,IAFN,EAAKlB,MAAMe,gBAAgBC,MACzB,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBV,EAAIU,aAArC,GAFJ,IAKKwC,YACLJ,EACA,EAAKhD,MAAMqD,oBAEd,EAvKC,EAAKrD,MAAQ,CACXqD,oBAAqB,GACrBtD,oBAAqB,GACrBuD,MAAM,EACN9B,SAAS,EACTU,QAAS,GACTC,MAAO,GACPW,kCAAmC,MAVK,CAY3C,CAhBH,0CAgLE,WAAU,IAAD,WACP,OACE,eAAC,WAAD,WACE,8BACE,sBAAKS,UAAU,wCAAf,UACE,sBAAKA,UAAU,6CAAf,UACE,sBAAKA,UAAU,0DAAf,UACE,sBAAMA,UAAU,sCAAhB,UACuB,IAApBC,KAAKxD,MAAMsD,KACR,6BACA,0BAEN,8BACE,eAAC,IAAD,CACEG,QAAS,kBAAM,EAAK3D,SAAS,CAAEwD,MAAO,EAAKtD,MAAMsD,MAAxC,EACTI,OAA2B,IAApBF,KAAKxD,MAAMsD,KAAgB,UAAY,SAC9CC,UAAS,8DACa,IAApBC,KAAKxD,MAAMsD,KACP,kBACA,uBANR,UASE,+BACuB,IAApBE,KAAKxD,MAAMsD,KACV,cAAC,IAAD,CAAaC,UAAU,aAEvB,cAAC,IAAD,CAAOA,UAAU,eAGrB,gCACuB,IAApBC,KAAKxD,MAAMsD,KACR,eACA,mCAKUzC,IAArB2C,KAAK7D,MAAMgE,OACV,8BACE,qBACEF,QAAS,kBAAM,EAAK9D,MAAMgE,OAAS,EAAKhE,MAAMgE,OAArC,EACTJ,UAAU,mGAFZ,SAIE,cAAC,IAAD,CAASA,UAAU,oBAKH,KAAvBC,KAAKxD,MAAMkC,SACV,qBACEuB,QAAS,kBAAM,EAAK3D,SAAS,CAAEoC,QAAS,IAA/B,EACTqB,UAAU,4JAFZ,SAIE,sBAAKA,UAAU,mDAAf,UACE,4CAAeC,KAAKxD,MAAMkC,WAC1B,8BACE,cAAC,IAAD,CAASqB,UAAU,yDAKL,KAArBC,KAAKxD,MAAMmC,OACV,qBACEsB,QAAS,kBAAM,EAAK3D,SAAS,CAAEqC,MAAO,IAA7B,EACToB,UAAU,0JAFZ,SAIE,sBAAKA,UAAU,mDAAf,UACE,0CAAaC,KAAKxD,MAAMmC,SACxB,8BACE,cAAC,IAAD,CAASoB,UAAU,yDAK3B,sBACEA,UAAS,6BACa,IAApBC,KAAKxD,MAAMsD,KAAgB,IAAM,KAFrC,UAKE,sBACEC,UAAS,oCACa,IAApBC,KAAKxD,MAAMsD,KAAgB,GAAK,UAFpC,UAUE,qBAAKC,UAAU,GAAf,SACE,cAAC,IAAD,CACEK,SAAU,SAACC,GAAD,OACR,EAAK/D,SAAS,CAAEuD,oBAAqBQ,EAAEC,OAAOC,OADtC,EAGV5B,MAAO,GACP6B,YAAY,qBACZD,MAAOP,KAAKxD,MAAMqD,oBAClBY,KAAK,SACLC,KAAK,OACLC,MAAM,aAGV,qBAAKZ,UAAU,2BAAf,SACkD,IAA/CC,KAAKT,+BAA+B5B,OACnC,sDAEAqC,KAAKT,+BAA+BqB,KAAI,SAACC,EAAMC,GAAP,aACtC,sBAEEf,UAAU,oKACVE,QAAS,WACP,EAAK7D,oBAAoByE,EAC1B,EALH,UAOE,qBAAKd,UAAU,gBAAf,SACE,sBAAKA,UAAU,kGAAf,UACE,8BACE,qBAAKA,UAAU,oKAAf,SACGe,EAAI,MAGT,uBAAMf,UAAU,aAAhB,UACGc,EAAKzD,cADR,OAGA,uBAAM2C,UAAU,GAAhB,UACGc,EAAKE,cADR,KACyBF,EAAKG,mBAD9B,YAWJ,sBAAKjB,UAAU,mCAAf,eAGQ1C,IAFL,EAAKlB,MAAMe,gBAAgBC,MAC1B,SAACT,GAAD,OAASA,EAAIU,gBAAkByD,EAAKzD,aAApC,KAEA,sBAAK2C,UAAU,sFAAf,mBACS,IADT,UAGI,EAAK5D,MAAMe,gBAAgBC,MACzB,SAACT,GAAD,OACEA,EAAIU,gBAAkByD,EAAKzD,aAD7B,WAJN,aAGI,EAGGG,qBAIT,qBAAKwC,UAAU,yIAAf,yBAzCGe,EAAI,EAF2B,SAqD9C,sBAAKf,UAAU,kBAAf,UACG,IAED,qBAAKA,UAAU,qDAAf,SAEE,sBAAKA,UAAU,6CAAf,UACE,uBAAMA,UAAU,oCAAhB,eACyB1C,IAAtB2C,KAAK7D,MAAMyB,OAAX,UACGoC,KAAK7D,MAAM0B,KAAKD,cADnB,aACG,EAAwBqD,YACxBjB,KAAK7D,MAAMyB,OAAOqD,YAAa,IAHrC,SAKyB5D,IAAtB2C,KAAK7D,MAAMyB,OAAX,UACGoC,KAAK7D,MAAM0B,KAAKD,cADnB,aACG,EAAwBO,YACxB6B,KAAK7D,MAAMyB,OAAOO,YAPxB,OAUA,qBAAK4B,UAAU,qBAAf,SAEI,sBACKC,KAAKxD,MAAMD,qBADhB,YAEKyD,KAAK7D,MAAMe,kBACdS,cAWV,qBAAKoC,UAAU,OAAf,SAIe,IAHZ,sBACIC,KAAKxD,MAAMD,qBADf,YAEIyD,KAAK7D,MAAMe,kBACdS,OACA,sBAAKoC,UAAU,8EAAf,UACE,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,MAEF,sBAAMA,UAAU,sBAAhB,wCAGA,sBAAMA,UAAU,wBAAhB,qFAMF,gCAC6C,IAA1CC,KAAKxD,MAAMD,oBAAoBoB,QAC9B,qBAAKoC,UAAU,0CAAf,yBAIDC,KAAKxD,MAAMD,oBAAoBqE,KAAI,SAACC,EAAMC,GAAP,OAClC,qBAEEf,UAAS,qEAGD1C,IAFN,EAAKb,MAAMD,oBAAoBY,MAC7B,SAACT,GAAD,OAASA,EAAIC,cAAgBkE,EAAKlE,WAAlC,IAEE,iCACA,+CALG,KAFX,SAUE,sBAAKoD,UAAU,6CAAf,UACE,sBAAKA,UAAU,uDAAf,UACE,qBAAKA,UAAU,oKAAf,SACGe,EAAI,IAEP,uBAAMf,UAAU,aAAhB,UACGc,EAAKzD,cADR,OAGA,uBAAM2C,UAAU,GAAhB,UACGc,EAAKE,cADR,KACyBF,EAAKG,mBAD9B,UAKF,qBAAKjB,UAAU,GAAf,SACE,qBACEE,QAAS,WACP,EAAK3D,SAAS,CACZC,oBACE,EAAKC,MAAMD,oBAAoBE,QAC7B,SAACC,GAAD,OACEA,EAAIC,cAAgBkE,EAAKlE,WAD3B,KAIP,EACDoD,UAAU,+FAVZ,0BAvBCe,EAAI,EAFuB,IA0DO,IAA1Cd,KAAKxD,MAAMD,oBAAoBoB,QAC9B,8BACE,cAAC,IAAD,CACEsC,QAAS,WACP,EAAKzC,oBACN,EACD0C,MAAM,SAJR,gCAUmC,IAAtCF,KAAK7D,MAAMe,gBAAgBS,QAC1B,qBAAKoC,UAAU,uCAAf,qCAIDC,KAAK7D,MAAMe,gBAAgB0D,KAAI,SAACC,EAAMC,GAAP,aAC9B,sBAEEf,UAAS,qEAGD1C,IAFN,EAAKb,MAAMD,oBAAoBY,MAC7B,SAACT,GAAD,OAASA,EAAIU,gBAAkByD,EAAKzD,aAApC,IAEE,iCACA,gCALG,qDAFX,UAUE,qBAAK2C,UAAU,GAAf,SACE,qBAAKA,UAAU,6CAAf,SACE,sBAAKA,UAAU,uDAAf,UACE,8BACE,qBAAKA,UAAU,qHAAf,SACGe,EAAI,MAGT,uBAAMf,UAAU,aAAhB,UACGc,EAAKzD,cADR,OAGA,uBAAM2C,UAAU,GAAhB,UACGc,EAAKE,cADR,KAEGF,EAAKG,mBAFR,cAON,sBAAKjB,UAAU,mCAAf,UACE,sBAAKA,UAAU,sFAAf,mBACS,IADT,UAGI,EAAK5D,MAAMe,gBAAgBC,MACzB,SAACT,GAAD,OACEA,EAAIU,gBAAkByD,EAAKzD,aAD7B,WAJN,aAGI,EAGGG,0BAKDF,IAFL,EAAKlB,MAAMe,gBAAgBC,MAC1B,SAACT,GAAD,OAASA,EAAIU,gBAAkByD,EAAKzD,aAApC,KAEAE,SACE,EAAKnB,MAAMe,gBAAgBC,MACzB,SAACT,GAAD,OACEA,EAAIU,gBAAkByD,EAAKzD,aAD7B,IAECG,oBACA,GACH,qBACE0C,QAAS,WAEgB,KAArBY,EAAK1C,cAGC,IAFNV,OAAOC,QACL,qDAGF,EAAKoB,qBACH+B,EAAK9B,uBACL8B,EAAK1C,YAGV,EACD4B,UAAU,oHAdZ,yBAqBE1C,IAFL,EAAKlB,MAAMe,gBAAgBC,MAC1B,SAACT,GAAD,OAASA,EAAIU,gBAAkByD,EAAKzD,aAApC,KAEAE,SACE,EAAKnB,MAAMe,gBAAgBC,MACzB,SAACT,GAAD,OACEA,EAAIU,gBAAkByD,EAAKzD,aAD7B,IAECG,mBACD,GACF,qBACE0C,QAAS,kBACP,EAAKnB,qBACH+B,EAAK9B,uBACL8B,EAAK1C,YAHA,EAMT4B,UAAU,2MAPZ,yBA1EDe,EAAI,EAFmB,oBAkGI,OAAjDd,KAAKxD,MAAM8C,mCACV,cAAC,IAAD,CACE4B,UAAU,EACVhB,MAAOiB,IAAOC,QACdjB,MAAO,kBACL,EAAK7D,SAAS,CAAEgD,kCAAmC,MAD9C,EAGP+B,eAAe,EACfC,eAAgBC,IAAUC,WAC1BC,cAAc,EACdC,QAAS,CACPC,MAAM,GAVV,UAa0B,IAAvB3B,KAAKxD,MAAMwB,QACV,sBAAK+B,UAAU,uBAAf,UACE,cAAC,IAAD,IACA,qBAAKA,UAAU,iCAAf,wCAKF,sBAAKA,UAAU,WAAf,UACE,sBAAKA,UAAU,sCAAf,UACE,gCACE,qBAAKA,UAAU,0BAAf,SAEIC,KAAKxD,MAAM8C,kCAAkCjD,SAC1C0E,gBAGP,8EAEF,qBACEd,QAAS,kBACP,EAAK3D,SAAS,CAAEgD,kCAAmC,MAD5C,EAGTS,UAAU,gHAJZ,6BASF,qBAAKA,UAAU,OAAf,SACE,wBAAOA,UAAU,wCAAjB,UACE,uBAAOA,UAAU,iBAAjB,SACE,+BACE,oBAAIA,UAAU,YAAd,eACA,oBAAIA,UAAU,YAAd,wBACA,oBAAIA,UAAU,YAAd,uBACA,oBAAIA,UAAU,YAAd,iBACA,oBAAIA,UAAU,YAAd,+BAGJ,gCACGC,KAAKxD,MAAM8C,kCAAkCJ,KAAK0B,KACjD,SAACC,EAAMC,GAAP,OACE,qBAEEf,UAAS,UAAKe,EAAI,IAAM,EAAI,cAAgB,IAF9C,UAIE,oBAAIf,UAAU,YAAd,SAA2Be,EAAI,IAC/B,oBAAIf,UAAU,YAAd,SAA2Bc,EAAKe,aAChC,oBAAI7B,UAAU,YAAd,SAA2Bc,EAAKgB,YAChC,oBAAI9B,UAAU,YAAd,SAA2Bc,EAAKiB,MAChC,oBAAI/B,UAAU,YAAd,SAA2Bc,EAAKkB,kBAP3BjB,EAAI,EAFb,WAgBR,qBAAKf,UAAU,cAAf,SACE,sBAAKA,UAAU,mFAAf,UACE,8BACE,cAAC,IAAD,CAAeA,UAAU,eAE3B,sBAAKA,UAAU,8CAAf,UACE,sBAAMA,UAAU,iBAAhB,+CAGA,sBAAMA,UAAU,YAAhB,qMAenB,KAnpBH,GAAwCiC,aAspBzB9F,K,mXCxlBA+F,EA7FiC,SAC9C9F,GAEA,MAA4B+F,mBAAiB,IAA7C,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAoCF,mBAClC/F,EAAMkG,gBAAgBC,YADxB,mBAAOC,EAAP,KAAmBC,EAAnB,KAGA,EAA0BN,mBAAwB,MAAlD,mBAAOvD,EAAP,KAAc8D,EAAd,KACA,OACE,qCACE,uBACEhC,KAAK,SACLV,UAAU,uFACVQ,MAAOgC,EACP7B,KAAK,SACLN,SAAU,SAACC,GACToC,EAAS,MACTD,EAAcnC,EAAEC,OAAOC,MACxB,IAEH,sBAAKR,UAAU,iIAAf,UACE,uBACEA,UAAU,6BACV2C,QAAQ,mBAFV,4BAMA,qBAAK3C,UAAU,OAAf,SACE,yBACEQ,MAAO4B,EACP3B,YAAY,gBACZT,UAAU,mMACVK,SAAU,SAACC,GACToC,EAAS,MACTL,EAAU/B,EAAEC,OAAOC,MACpB,EAPH,UASE,wBAAQA,MAAO,gBAAf,2BACCpE,EAAMwG,mBAAmB/B,KAAI,SAACgC,GAC7B,OACE,wBAAgCrC,MAAOqC,EAAQC,UAA/C,SACGD,EAAQE,aADEF,EAAQC,UAIxB,SAGM,OAAVlE,GACC,qBACEsB,QAAS,kBAAMwC,EAAS,KAAf,EACT1C,UAAU,+GAFZ,SAIGpB,IAGL,sBAAKoB,UAAU,OAAf,UACE,wBACEE,QAAS,WACP,GAAIsC,EAAW5E,OAAS,EACtB8E,EAAS,2DACJ,GAAIN,EAAOxE,OAAS,EACzB8E,EAAS,0DACJ,CACLA,EAAS,MACM,KAAXN,GACFC,EAAUjG,EAAMwG,mBAAmB,GAAGE,WAExC,IAAME,EAAM5G,EAAM6G,mBAAmB,CACnC3G,SAAUF,EAAME,SAChB8F,OAAQA,EACRc,YAAa3F,SAASiF,KAExBnE,QAAQC,IAAI,SAAU0E,GACtB5G,EAAM+G,cAAcH,GACpB5G,EAAMgE,OACP,CACF,EACDJ,UAAU,wEArBZ,0BAyBA,wBACEE,QAAS,kBAAM9D,EAAMgE,OAAZ,EACTJ,UAAU,gEAFZ,4BAUT,E,yDCFYoD,EAAiB,SAC5BjG,EACA0F,GAEA,IAAIQ,EAAmC,EACnCC,EAAWnG,EAAgBC,MAC7B,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBwF,EAAQxF,aAAzC,IAeF,YAbiBC,IAAbgG,IACFD,OAC6B/F,IAA3BgG,EAASC,cACL,EACAhG,SAAS+F,EAASC,gBASnBF,GAL6B,OAAlCR,EAAQW,4BAC0BlG,IAAlCuF,EAAQW,sBACJ,EACAjG,SAASsF,EAAQW,uBAGxB,EAEYC,EAAc,SACzBC,EACAvG,EACA0F,GAEA,IAAIc,EAAQ,EAERzG,EAAewG,EAAsBtG,MACvC,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBwF,EAAQxF,aAAzC,IAOF,YALqBC,IAAjBJ,IACFyG,EACEP,EAAejG,EAAiB0F,GAChCtF,SAASL,EAAaM,oBAEnBmG,CACR,EAEYC,EAAb,kDAIE,WAAYxH,GAAsC,IAAD,8BAC/C,cAAMA,IAyBRyH,WAAa,SAACC,GACZ,EAAKvH,SAAS,CAAE0B,QAAS6F,GAC1B,EA5BgD,EA8BjDC,sBA9BiD,gCA8BzB,qGACtBhG,cACA,EAAK8F,YAAW,GAFM,kBAIFtF,IAAMyF,IAAN,UACbvF,IADa,wBAJE,OAIduE,EAJc,OAOpB,EAAKzG,SAAS,CAAEqG,mBAAoBI,EAAI7D,OAPpB,gDASpBd,QAAQC,IAAR,MAToB,QAWtB,EAAKuF,YAAW,GAXM,yDA9ByB,EA6CjDI,sBAAwB,SAAC9G,GACvB,IADgE,EAC5D+G,EAAI,EADwD,cAE3C,EAAKzH,MAAMiH,uBAFgC,yBAEvDpH,EAFuD,aAMtDgB,IAFN,EAAKb,MAAMiH,sBAAsBtG,MAC/B,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBf,EAASe,aAA1C,MAGF6G,GAAK3G,SACH,EAAKd,MAAMiH,sBAAsBtG,MAC/B,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBf,EAASe,aAA1C,IACCG,mBAXuD,EAEhE,2BAAwD,GAFQ,+BAehE,OAAO0G,CACR,EA7DgD,EAgEjDC,uBAAyB,SAAChH,GACxB,IADiE,EAC7D+G,EAAI,EADyD,cAE5C/G,GAF4C,yBAExDb,EAFwD,aAMvDgB,IAFN,EAAKb,MAAMiH,sBAAsBtG,MAC/B,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBf,EAASe,aAA1C,MAGF6G,GAAK3G,SACH,EAAKd,MAAMiH,sBAAsBtG,MAC/B,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBf,EAASe,aAA1C,IACCG,mBAXwD,EAEjE,2BAAuC,GAF0B,+BAejE,OAAO0G,CACR,EAhFgD,EAkFjDE,sBAAwB,SAACC,GACvB,IADiE,EAC7DC,EAAK,EADwD,cAExCD,GAFwC,IAEjE,2BAA2C,CAAC,IAAnCE,EAAkC,aACMjH,IAA3CiH,EAAaC,4BACfF,GAAM/G,SAASgH,EAAaC,2BAE/B,CANgE,+BAOjE,OAAOF,CACR,EA1FgD,EA4FjDG,0BAA4B,SAACJ,GAC3B,IADqE,EACjEC,EAAK,EAD4D,cAE5CD,GAF4C,IAErE,2BAA2C,CAAC,IAAnCE,EAAkC,QAEA,OAAvCA,EAAaf,4BAC0BlG,IAAvCiH,EAAaf,wBAEbc,GAAM/G,SAASgH,EAAaf,uBAE/B,CAToE,+BAUrE,OAAOc,CACR,EAvGgD,EA0GjDI,oBAAsB,SAACC,GACrB,IAAMC,EAAiBD,EAAWE,QAChC,SAACC,EAAeC,GAAhB,OACED,EAAgBvH,SAASwH,EAAaP,0BADxC,GAEA,GAEF,EAAKjI,SAAS,CAAEyI,eAAgBJ,GACjC,EAjHgD,EAoHjDK,WAAa,WACXC,YAAW,WACT,EAAK3I,SAAS,CACZsC,MAAO,CACL0B,OAAQ,KACR4E,IAAK,KAGV,GAAE,IACJ,EA7HgD,EA+HjDC,mBA/HiD,iDA+H5B,WACnBhH,EACAiH,GAFmB,wFAInBtH,cACA,EAAK8F,YAAW,GALG,kBAOEtF,IAAMyF,IAAN,UACdvF,IADc,sCACuBL,EADvB,YACsCiH,IARxC,OAOXlG,EAPW,OAUjBd,QAAQC,IAAI,aAAca,EAAKA,MAE7B,EAAKmG,uBACHnG,EAAKA,KAAKoG,iBACVpG,EAAKA,KAAKqG,sBACV5H,OAAS,EAEX,EAAK6H,gBACHtG,EAAKA,KAAKoG,iBACVpG,EAAKA,KAAKqG,uBAGZ,EAAKjJ,SAAS,CAAEmH,sBAAuBvE,EAAKA,KAAKoG,mBACjD,EAAKhJ,SAAS,CACZY,gBAAiBgC,EAAKA,KAAKqG,wBAxBd,kDA4BjBnH,QAAQC,IAAI,QAAZ,sBACA,EAAK2G,aA7BY,QA+BnB,EAAKpB,YAAW,GA/BG,0DA/H4B,0DAgKjD6B,iBAAmB,SAACC,GAClB,IAD4D,EACxDhC,EAAQ,EADgD,cAE3CgC,GAF2C,IAE5D,2BAA2B,CAAC,IAAnB7E,EAAkB,QACzB6C,GAASF,EACP,EAAKhH,MAAMiH,sBACX,EAAKjH,MAAMU,gBACX2D,EAEH,CAR2D,+BAS5D,OAAO6C,CACR,EA1KgD,EA4KjDiC,qBA5KiD,iDA4K1B,WAAOC,GAAP,0FACQ,IAAzBA,EAAcjI,OADG,yCAEZ,EAAKrB,SAAS,CACnBsC,MAAO,CACL0B,OAAQ,aACR4E,IAAK,wBALU,YAS4B,KAA/CU,EAAc,GAAGrB,2BACjBjH,SAASsI,EAAc,GAAGrB,2BAA6B,GAVpC,yCAYZ,EAAKjI,SAAS,CACnBsC,MAAO,CACL0B,OAAQ,aACR4E,IAAK,oDAfU,cAoBrB,EAAKtB,YAAW,GApBK,SAsBnB9F,cAtBmB,UAwBbQ,IAAMC,KAAN,UACDC,IADC,gCAEJoH,GA1BiB,QAgCnB,GAJAxH,QAAQC,IAAI,cAAeuH,QAIdvI,IAHF,EAAKb,MAAMU,gBAAgBC,MACpC,SAACT,GAAD,OAASA,EAAIU,gBAAkBwI,EAAc,GAAGxI,aAAhD,IAIA,EAAK+H,mBACHS,EAAc,GAAGzH,YACjByH,EAAc,GAAGR,sBAEd,CACDS,EAA+B,GAD9B,cAEY,EAAKrJ,MAAMU,iBAFvB,IAEL,4BAAS2D,EAAoC,SAClCzD,gBAAkBwI,EAAc,GAAGxI,cAC1CyI,EAAQ3H,KAAK,CACX8C,mBAAoBH,EAAKG,mBACzBD,cAAeF,EAAKE,cACpB+E,gBAAiBjF,EAAKiF,gBACtBC,qBAAsBlF,EAAKkF,qBAC3B5H,YAAa0C,EAAK1C,YAClBf,cAAeyD,EAAKzD,cACpB4I,iBAAkBnF,EAAKmF,iBACvBC,gBAAiBpF,EAAKoF,gBACtB1B,0BACEqB,EAAc,GAAGrB,0BAA0BjC,WAC7C4D,uBAAwBN,EAAc,GAAGM,uBACzCC,eAAgBtF,EAAKsF,eACrBC,iBAAkBvF,EAAKuF,iBACvBC,oBAAqBxF,EAAKwF,oBAC1B9C,sBAAuB1C,EAAK0C,sBAC5B+C,yBAA0BzF,EAAKyF,yBAC/BC,cAAe1F,EAAK0F,cACpBC,WAAY3F,EAAK2F,WACjBlD,cAAezC,EAAKyC,cACpBmD,kBAAmB5F,EAAK4F,kBACxBlJ,kBAAmBsD,EAAKtD,kBACxBwB,uBAAwB8B,EAAK9B,yBAG/B8G,EAAQ3H,KAAK2C,EA7BZ,+BAmCQ,IAHb,EAAKwE,uBACH,EAAK7I,MAAMiH,sBACX,EAAKjH,MAAMU,iBACXS,QACA,EAAKrB,SAAS,CACZsC,MAAO,CACL0B,OAAQ,eACR4E,IAAK,2CAGX,EAAK5I,SAAS,CAAEY,gBAAiB2I,GAClC,CACD,EAAKb,aACL,EAAKP,oBAAoB,IAnFN,kDAqFnBrG,QAAQC,IAAI,cAAZ,sBACA,EAAK2G,aACL,EAAK1I,SAAS,CACZsC,MAAO,CACL0B,OAAQ,aACR4E,IAAK,mEA1FU,QA8FrB,EAAKtB,YAAW,GA9FK,0DA5K0B,wDA6QjD8C,gBAAkB,SAACC,EAAgBvJ,GACjC,IAAMwJ,EAAe,EAAKpK,MAAMqK,aAAajG,KAAI,SAACgC,GAIhD,OAHIA,EAAQxF,gBAAkBA,IAC5BwF,EAAQ2B,0BAA4BoC,GAE/B/D,CACR,IACD,EAAKtG,SAAS,CAAEuK,aAAcD,IAC9B,EAAKnC,oBAAoB,EAAKjI,MAAMqK,aACrC,EAtRgD,EAyRjDC,SAAW,SAACH,EAAgBhK,GAAyB,IAAD,QAC5CiK,EAAe,EAAKpK,MAAMuK,iBAAiBtK,QAC/C,SAACmG,GAAD,OAAaA,EAAQjG,cAAgBA,CAArC,IACA,GACIqK,EAAmB,oBAAM,EAAK7K,MAAM0B,KAAKD,cAAtB,aAAM,EAAwBO,YAAY,IAA1C,iBAA+C,EAAKhC,MAAM0B,KAAKD,cAA/D,aAA+C,EAAwBO,YAAY,IAC5G,GACEyI,GACAI,GADA,UAEA,EAAK7K,MAAM0B,KAAKD,cAFhB,OAEA,EAAwBO,aAFxB,UAGA,EAAKhC,MAAM0B,KAAKoJ,YAHhB,OAGA,EAAsBC,QACtB,CAAC,IAAD,EACMC,EAAmB,CACvBpB,sBACE,YAAK5J,MAAMiL,MAAMC,yBAAjB,eAAoCjC,mBAAoB,IAC1DjH,YAAa,EAAKhC,MAAM0B,KAAKD,OAAOO,YACpC4C,cAAe6F,EAAa7F,cAC5BC,mBAAoB4F,EAAa5F,mBACjC5D,cAAewJ,EAAaxJ,cAC5B4I,iBAAkBY,EAAaZ,iBAC/BC,gBAAiB,EAAK9J,MAAM0B,KAAKoJ,KAAKC,QACtC3C,0BAA2BoC,EAC3BT,uBAAwB,IACxBK,cAAeS,GAEXM,EAAiB,sBAAO,EAAK9K,MAAMqK,cAAlB,CAAgCM,IACvD,EAAK7K,SAAS,CAAEuK,aAAcS,IAC9B,EAAK7C,oBAAoB6C,GACzB,EAAKhL,SAAS,CAAEuK,aAAcS,GAC/B,CACF,EAtTgD,EAwTjDC,WAAa,WACX,IAAMC,EAAO,sBACR,EAAKhL,MAAMiH,sBAAsBhH,QAClC,SAACC,GAAD,aACEA,EAAIU,iBAAJ,UACA,EAAKZ,MAAMU,gBAAgBC,MACzB,SAACwC,GAAD,OAAUA,EAAKvC,gBAAkBV,EAAIU,aAArC,WAFF,aACA,EAEGA,cAJL,KAFS,YAQR,EAAKZ,MAAMU,kBAEV6F,EAC6B,QAAjC,EAAKvG,MAAMiL,kBACPD,EACAA,EAAQ/K,QACN,SAACmG,GAAD,OACEA,EAAQoD,mBAAqB,EAAKxJ,MAAMiL,iBAD1C,IAGR,OAAO7H,YAAOmD,EAAK,EAAKvG,MAAMkL,YAC/B,EA3UgD,EA6UjDC,kBAAoB,WAEiB,OAA/B,EAAKxL,MAAMiL,MAAM/H,WACnB,EAAKlD,MAAMyL,oBAAmB,SAAC/D,EAAiBqB,GAC9C,EAAKtB,YAAW,IACD,IAAXC,GACF,EAAKvH,SAAS,CACZsC,MAAO,CACL0B,OAAQ,aACR4E,IAAKA,KAIX,EAAKtB,YAAW,EACjB,IAGC,EAAKzH,MAAM0B,KAAKD,QAAU,EAAKzB,MAAMiL,MAAMC,mBAC7C,EAAKlC,mBACH,EAAKhJ,MAAM0B,KAAKD,OAAOO,YACvB,EAAKhC,MAAMiL,MAAMC,kBAAkBjC,kBAMM,IAAzC,EAAK5I,MAAMmG,mBAAmBhF,QAChC,EAAKmG,uBAER,EA1WgD,EA4WjD+D,mBAAqB,SAAC3I,GAKpB,EAAK/C,MAAMiL,MAAMC,mBACf,EAAKlL,MAAM0B,KAAKoJ,MAChB,EAAK9K,MAAM0B,KAAKiK,UAChB,EAAKxL,SAAS,CACZsJ,cAAc,GAAD,mBACR,EAAKpJ,MAAMoJ,cAAcnJ,QAC1B,SAACC,GAAD,OAASA,EAAIU,gBAAkB8B,EAAK7C,SAASe,aAA7C,KAFS,CAIX,CACEgI,iBACE,EAAKjJ,MAAMiL,MAAMC,kBAAkBjC,iBACrCjH,YAAae,EAAK7C,SAAS8B,YAC3Bf,cAAe8B,EAAK7C,SAASe,cAC7B4I,iBAAkB9G,EAAK7C,SAAS2J,iBAChCC,gBAAiB,EAAK9J,MAAM0B,KAAKoJ,KAAKC,QACtC3C,0BAA2BrF,EAAK+D,YAAYX,WAC5CgB,mBACkCjG,IAAhC6B,EAAK7C,SAASiH,cACV,IACApE,EAAK7C,SAASiH,cACpB4C,uBAAwBhH,EAAKiD,OAC7BoE,cAAe,EAAKpK,MAAM0B,KAAKiK,SAASvB,kBAIjD,EA1YgD,EA4YjDlB,uBAAyB,SACvB5B,EACAvG,GAEA,IADwB,EACpB6F,EAA2B,GADP,cAEPU,GAFO,yBAEf5C,EAFe,aAMRxD,IAHFH,EAAgBC,MAC1B,SAACT,GAAD,OAASA,EAAIU,gBAAkByD,EAAKzD,aAApC,KAGA2F,EAAI7E,KAAK2C,EAPW,EAExB,2BAAyC,GAFjB,+BAUxB,OAAOkC,CACR,EA1ZgD,EA4ZjDyC,gBAAkB,SAChB/B,EACAvG,GAEA,IADG,EACC6K,EAA6B,GAD9B,cAEctE,GAFd,IAEH,2BAAwC,CAAC,IAAhC5C,EAA+B,QACtCkH,EAAO,sBACFA,GADE,YAEF,EAAK/E,mBAAmB,CACzB3G,SAAUwE,EACVsB,OAAQ,IACRc,YAAa,KAGlB,CAXE,+BAYH7E,QAAQC,IAAI,aAAc0J,GAC1B,EAAKpC,qBAAqBoC,GAC1B3J,QAAQC,IAAI,uBAAwB,CAClCnB,gBAAiBA,EACjBuG,sBAAuBA,GAI1B,EAnbgD,EAqbjDT,mBAAqB,SAAC9D,GAKpB,IAAI6D,EAAyB,GAmB7B,OAlBI,EAAK5G,MAAMiL,MAAMC,mBAAqB,EAAKlL,MAAM0B,KAAKoJ,OACxDlE,EAAG,sBACE,EAAKvG,MAAMoJ,cAAcnJ,QAC1B,SAACC,GAAD,OAASA,EAAIU,gBAAkB8B,EAAK7C,SAASe,aAA7C,KAFD,CAID,CACEgI,iBAAkB,EAAKjJ,MAAMiL,MAAMC,kBAAkBjC,iBACrDjH,YAAae,EAAK7C,SAAS8B,YAC3Bf,cAAe8B,EAAK7C,SAASe,cAC7B4I,iBAAkB9G,EAAK7C,SAAS2J,iBAChCC,gBAAiB,EAAK9J,MAAM0B,KAAKoJ,KAAKC,QACtC3C,0BAA2BrF,EAAK+D,YAAYX,WAC5CgB,cAAepE,EAAK7C,SAASkB,kBAC7B2I,uBAAwBhH,EAAKiD,OAC7BoE,cAAerH,EAAK7C,SAAS8B,YAAY6J,UAAU,EAAG,OAIrDjF,CACR,EA3cC,EAAKvG,MAAQ,CACXyL,SAAU,KACVR,kBAAmB,MACnBS,cAAe,GACfnD,eAAgB,EAChB2C,YAAa,GACb9I,MAAO,CACL0B,OAAQ,KACR4E,IAAK,IAEP6B,iBAAkB,GAClBoB,gBAAiB,GACjBtB,aAAc,GACdrJ,oBAAoB,EACpBN,gBAAiB,GACjBuG,sBAAuB,GACvB2E,iBAAiB,EACjBxC,cAAe,GACfjD,mBAAoB,GACpB3E,SAAS,GAtBoC,CAwBhD,CA5BH,0CAmdE,WAAU,IAAD,SACP,OACE,mCACE,eAACqK,EAAA,EAAD,CACEC,MAAM,iBACNC,SAAS,mCACTxI,UAAU,WAHZ,UASe,IAHZC,KAAKqF,uBACJrF,KAAKxD,MAAMiH,sBACXzD,KAAKxD,MAAMU,iBACXS,QACA,qBAAKoC,UAAU,yGAAf,SACE,sBAAKA,UAAU,mEAAf,UACE,sBAAMA,UAAU,WAAhB,wCACA,sBAAMA,UAAU,0BAAhB,iCAIuB,iBAA5BC,KAAKxD,MAAMoC,MAAM0B,QAChB,qBAAKP,UAAU,QAAf,SACE,cAACyI,EAAA,EAAD,CAAOtI,MAAM,UAAb,SAAwBF,KAAKxD,MAAMoC,MAAMsG,QAGhB,eAA5BlF,KAAKxD,MAAMoC,MAAM0B,QAChB,qBAAKP,UAAU,QAAf,SACE,cAACyI,EAAA,EAAD,CAAOtI,MAAM,SAAb,SAAuBF,KAAKxD,MAAMoC,MAAMsG,QAGZ,OAA/BlF,KAAK7D,MAAMiL,MAAM/H,UAChB,sBAAKU,UAAU,mFAAf,UACE,cAAC0I,EAAA,EAAD,IACA,qBAAK1I,UAAU,sCAAf,SACE,8DAGgC,IAAlCC,KAAKxD,MAAMgB,oBACkB,OAA/BwC,KAAK7D,MAAMiL,MAAM/H,UACjB,qBAAKU,UAAU,sBAAf,SACE,cAAC7D,EAAA,EAAD,CACE2B,KAAMmC,KAAK7D,MAAM0B,KACjBwB,UAAWW,KAAK7D,MAAMiL,MAAM/H,UAC5BnC,gBAAiB8C,KAAKxD,MAAMU,gBAC5BuB,wBAAyB,SACvBS,GAGE,EAAK/C,MAAM0B,KAAKD,QAChB,EAAKzB,MAAMiL,MAAMC,mBAEjB,EAAKlC,mBACH,EAAKhJ,MAAM0B,KAAKD,OAAOO,YACvB,EAAKhC,MAAMiL,MAAMC,kBAAkBjC,iBAGxC,EACDpG,wBAAyB,SAACD,GAEtB,EAAK5C,MAAM0B,KAAKD,QAChB,EAAKzB,MAAMiL,MAAMC,mBAEjB,EAAKlC,mBACH,EAAKhJ,MAAM0B,KAAKD,OAAOO,YACvB,EAAKhC,MAAMiL,MAAMC,kBAAkBjC,iBAGxC,EACDjF,MAAO,WACL,EAAK7D,SAAS,CAAEkB,oBAAoB,GACrC,OAG4B,IAA/BwC,KAAKxD,MAAM4L,gBACb,wBAEA,sBAAKrI,UAAU,GAAf,UAEE,sBAAKA,UAAU,kDAAf,UACE,qBAAKA,UAAU,yBAAf,sCAIA,qBAAKA,UAAU,GAAf,SACE,qBAAKA,UAAU,gCAAf,SACE,8BACE,sBAAKA,UAAU,iEAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,qBAAKA,UAAU,8BAAf,+BAGA,sBAAKA,UAAU,mCAAf,UACGC,KAAKgE,sBACJhE,KAAKxD,MAAMU,iBACT,GACA,EACA,GACH8C,KAAKgE,sBACJhE,KAAKxD,MAAMU,uBAIjB,sBAAK6C,UAAU,cAAf,UACE,qBAAKA,UAAU,gCAAf,2BAGA,sBAAKA,UAAU,qCAAf,UACGC,KAAKyF,iBAAiBzF,KAAKxD,MAAMU,iBAClC,GACI,EACA,GACH8C,KAAKmE,sBACJnE,KAAKxD,MAAMU,oCAmCH,IAAvB8C,KAAKxD,MAAMwB,QACV,sBAAK+B,UAAU,4EAAf,UACE,cAAC0I,EAAA,EAAD,IACA,qBAAK1I,UAAU,WAAf,wCAGF,qBAAKA,UAAU,sBAAf,SACE,sBAAKA,UAAU,uEAAf,UACE,sBAAKA,UAAU,oCAAf,UACE,qBAAKA,UAAU,SAAf,SACE,cAAC2I,EAAA,EAAD,CACEtI,SAAU,SAACC,GAAD,OACR,EAAK/D,SAAS,CAAEoL,YAAarH,EAAEC,OAAOC,OAD9B,EAGV5B,MAAO,GACP6B,YAAY,sBACZD,MAAOP,KAAKxD,MAAMkL,YAClBjH,KAAK,SACLC,KAAK,OACLC,MAAM,SACNgI,KAAM,SAGV,sBAAK5I,UAAU,yCAAf,UACE,yBACEQ,MAAOP,KAAKxD,MAAMiL,kBAClBjH,YAAY,MACZT,UAAU,+LACVK,SAAU,SAACC,GACT,EAAK/D,SAAS,CACZmL,kBAAmBpH,EAAEC,OAAOC,OAE/B,EARH,UAUE,wBAAQA,MAAO,MAAf,iBACCP,KAAK7D,MAAMiL,MAAMwB,eAAehI,KAAI,SAACgC,GACpC,OACE,wBAEErC,MAAOqC,EAAQoD,iBAFjB,SAIGpD,EAAQ5B,oBAHJ4B,EAAQoD,iBAMlB,OAEH,qBAAKjG,UAAU,sFAAf,SACE,cAAC,IAAD,CAAaA,UAAU,iCAI7B,qBAAKA,UAAU,gBAAf,SACE,qBAAKA,UAAU,kCAAf,SACE,wBAAOA,UAAU,SAAjB,UACE,gCACE,+BACE,oBAAIA,UAAU,0BAAd,eACA,oBACEA,UAAU,wBACV8I,MAAO,CAAEC,MAAO,UAFlB,sBAMA,oBAAI/I,UAAU,0BAAd,2BAGA,oBAAIA,UAAU,0BAAd,+BAGA,oBAAIA,UAAU,mEAAd,mCAGA,oBAAIA,UAAU,yCAAd,mCAGA,oBAAIA,UAAU,0CAAd,yBAIA,oBAAIA,UAAU,2BAAd,0BAGA,oBAAIA,UAAU,0BAAd,0BAMJ,kCACGC,KAAKxD,MAAMiH,sBAAsB9F,QAAU,GAC1C,6BACE,oBAAIoC,UAAU,kBAAkBgJ,QAAS,EAAzC,SACE,sBAAKhJ,UAAU,6BAAf,UACE,qBAAKA,UAAU,sCAAf,gCAGA,sBAAKA,UAAU,wBAAf,0DAES,IAFT,UAGGC,KAAK7D,MAAM0B,KAAKD,cAHnB,aAGG,EAAwBqD,eAE3B,qBAAKlB,UAAU,kCAAf,SACE,qBACEE,QAAS,WACP,EAAK3D,SAAS,CACZkB,oBAAoB,GAEvB,EACDuC,UAAU,iJANZ,oCAeTC,KAAKuH,aAAa3G,KAAI,SAACgC,EAAS9B,GAAO,IAAD,EACjCkI,EAAQlI,EAAI,EAChB,OACE,cAAC,WAAD,UACE,qBACEf,UAAS,kBACP6C,EAAQxF,gBACR,EAAKZ,MAAMyL,SACP,yBACA,GAJG,iBAUD5K,IAJN,EAAKb,MAAMoJ,cAAczI,MACvB,SAACT,GAAD,OACEA,EAAIU,gBACJwF,EAAQxF,aAFV,IAIE,0CACA,yCAZG,+BADX,UAgBE,oBAAI2C,UAAU,yBAAd,SACGiJ,IAEH,oBAAIjJ,UAAU,aAAd,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAMA,UAAU,YAAhB,SACG6C,EAAQ7B,gBAEX,uBAAMhB,UAAU,+CAAhB,0BACgB,IACd,sBAAMA,UAAU,YAAhB,SACG6C,EAAQ6D,4BAKjB,oBAAI1G,UAAU,yBAAd,SACG6C,EAAQ5B,qBAEX,oBAAIjB,UAAU,yBAAd,mBAEI,EAAKvD,MAAMiH,sBAAsBtG,MAC/B,SAACwC,GAAD,OACEA,EAAKvC,gBACLwF,EAAQxF,aAFV,WAHN,aAEI,EAIGG,oBAINqF,EAAQxF,gBACT,EAAKZ,MAAMyL,SACT,oBAAIlI,UAAU,yBAAd,SACG,EAAKvD,MAAMiH,sBAAsBtG,MAChC,SAACT,GAAD,OACEA,EAAIU,gBACJwF,EAAQxF,aAFV,KAIA,cAAC,EAAD,CACEuF,mBACE,EAAKnG,MAAMmG,mBAEbK,mBACE,EAAKA,mBAEP7C,MAAO,WACL,EAAK7D,SAAS,CAAE2L,SAAU,MAC3B,EACD5F,qBAEEhF,IADAuF,EAAQ2B,2BAIJ,OADA3B,EAAQ2B,0BADR,EAIAjH,SACEsF,EAAQ2B,2BAGhBrB,cACE,EAAKyC,qBAEPtJ,SACE,EAAKG,MAAMiH,sBAAsBtG,MAC/B,SAACT,GAAD,OACEA,EAAIU,gBACJwF,EAAQxF,aAFV,QASV,oBACE2C,UAAS,+BAEP,OADA6C,EAAQ2B,0BAEJ,gDACA,0CAJG,oGAMTtE,QAAS,SAACI,GACR,EAAK/D,SAAS,CACZ2L,SAAUrF,EAAQxF,eAErB,EAXH,cAcEC,IADCuF,EAAQ2B,0BAEP,sBAAMxE,UAAU,4CAAhB,eAIA,OADE6C,EAAQ2B,0BAEV3B,EAAQ2B,0BAER,qBACExE,UAAS,yEADX,uBASN,oBAAIA,UAAU,kDAAd,cAEE1C,IADCuF,EAAQW,sBAEP,sBAAMxD,UAAU,4CAAhB,eAIA,OADE6C,EAAQW,sBAEV,EAEAX,EAAQW,wBAGZ,oBAAIxD,UAAU,yBAAd,SACGoD,EACC,EAAK3G,MAAMU,gBACX0F,KAGJ,oBAAI7C,UAAU,yBAAd,SACGyD,EACC,EAAKhH,MAAMiH,sBACX,EAAKjH,MAAMU,gBACX0F,GACE,EACF,sBAAM7C,UAAU,YAEhByD,EACE,EAAKhH,MAAMiH,sBACX,EAAKjH,MAAMU,gBACX0F,KAIN,oBAAI7C,UAAU,yBAAd,SACG6C,EAAQ0D,+BA3JA0C,EAgKlB,0BAa1B,KA34BH,GAAqChH,aAq5BxBiH,EAAiBC,aAPN,SAAC,GAIvB,MAAO,CAAErL,KADqC,EAF9CA,KAGqBuJ,MADyB,EAD9CA,MAGD,GAEsD,CACrDQ,wBAD4BsB,CAE3BvF,E","file":"static/js/38.efc40f04.chunk.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { MdAdd, MdArrowBack, MdClose, MdInfoOutline } from \"react-icons/md\";\nimport { Auth, SchoolData } from \"../../actions\";\nimport { SchoolPositionApiResponse } from \"../../types/HeadTeacherRequesTypes\";\nimport TextInput from \"../Inputs/TextInput\";\n// import { BsFillCheckSquareFill } from \"react-icons/bs\";\nimport { FiSearch } from \"react-icons/fi\";\n// import { ImCheckboxUnchecked } from \"react-icons/im\";\nimport { APP_URL } from \"../../config/app.config\";\nimport axios from \"axios\";\nimport { setAxiosToken } from \"../../utils/AxiosToken\";\nimport { PositionsOnSchool } from \"../../containers/Head-Teacher/Request/HeadTeacherRequestToDee\";\nimport { search } from \"../../utils/functions\";\nimport Button from \"../Buttons/Button\";\nimport { errorToText } from \"../../utils/errors\";\nimport Modal, { ModalSize, Themes } from \"../Modal/Modal\";\nimport Loading from \"../Loading/Loading\";\n\ninterface PositionStaffOnDelete {\n  first_name: string;\n  full_name: string;\n  last_name: string;\n  middle_name: string;\n  nid: string;\n  phone_numbers: string;\n  staff_code: string;\n  user_id: string;\n}\n\ninterface AddSchoolPositionsProps {\n  auth: Auth;\n  positions: SchoolPositionApiResponse[];\n  schoolPositions: PositionsOnSchool[];\n  appendPositionsToSchool: (\n    schoolPositions: SchoolPositionApiResponse[]\n  ) => void;\n  removePositionsToSchool: (school_has_position_id: string) => void;\n  close?: () => void;\n  school?: SchoolData;\n}\n\ninterface AddSchoolPositionsState {\n  searchPositionValue: string;\n  schoolPositionsTemp: SchoolPositionApiResponse[];\n  edit: boolean;\n  loading: boolean;\n  success: string;\n  error: string;\n  selected_position_users_on_delete: {\n    position: SchoolPositionApiResponse;\n    data: PositionStaffOnDelete[];\n  } | null;\n}\n\nexport class AddSchoolPositions extends Component<\n  AddSchoolPositionsProps,\n  AddSchoolPositionsState\n> {\n  constructor(props: AddSchoolPositionsProps) {\n    super(props);\n\n    this.state = {\n      searchPositionValue: \"\",\n      schoolPositionsTemp: [],\n      edit: false,\n      loading: false,\n      success: \"\",\n      error: \"\",\n      selected_position_users_on_delete: null,\n    };\n  }\n  addPositionToSchool = (position: SchoolPositionApiResponse) => {\n    this.setState({\n      schoolPositionsTemp: [\n        position,\n        ...this.state.schoolPositionsTemp.filter(\n          (itm) => itm.position_id !== position.position_id\n        ),\n      ],\n    });\n  };\n  // Filter by positions having teachers\n  FilterByPositionsHavingTeacher = (): SchoolPositionApiResponse[] => {\n    const Positions = this.state.schoolPositionsTemp;\n    let temp = [];\n    temp = Positions.sort((a, b) => {\n      let count: number = 0;\n      const testPosition = this.props.schoolPositions.find(\n        (itm) => itm.position_code === a.position_code\n      );\n      if (testPosition !== undefined) {\n        count = parseInt(testPosition.total_on_position);\n      }\n      if (count > 0) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    return temp;\n  };\n  addSchoolPositions = async () => {\n    if (\n      window.confirm(\"Are you sure do you want to add these positions?\") ===\n      true\n    ) {\n      if (\n        this.state.schoolPositionsTemp.length > 0 &&\n        this.props.school === undefined\n          ? this.props.auth.school\n          : this.props.school\n      ) {\n        setAxiosToken();\n        let newPositions = [];\n        this.setState({ loading: true });\n        for (let newP of this.state.schoolPositionsTemp) {\n          newPositions.push({\n            school_code:\n              this.props.school === undefined\n                ? this.props.auth.school!.school_code\n                : this.props.school.school_code,\n            position_code: newP.position_code,\n          });\n        }\n        console.log(\"Positions codes: \", newPositions);\n        try {\n          await axios.post(`${APP_URL}/schoolposition/assign`, newPositions);\n          this.props.appendPositionsToSchool(this.state.schoolPositionsTemp);\n          this.setState({ schoolPositionsTemp: [] });\n          this.setState({ loading: false });\n          this.setState({\n            success: \"Positions added successfully!\",\n            error: \"\",\n          });\n          alert(\"Positions added successfully!\");\n        } catch (error: any) {\n          this.setState({ loading: false });\n          this.setState({ error: errorToText(error) });\n          console.log(\"Err: \", { ...error });\n        }\n      }\n    }\n  };\n  RemoveSchoolPosition = async (\n    school_has_position_id: string,\n    school_code: string\n  ) => {\n    this.setState({ loading: true });\n    try {\n      const res = await axios.post(\n        `${APP_URL}/schoolposition/delete/${school_has_position_id}`,\n        {\n          school_code: school_code,\n        }\n      );\n      if (res) {\n        this.setState({\n          success: \"Positions added successfully!\",\n          error: \"\",\n        });\n        this.props.removePositionsToSchool(school_has_position_id);\n      }\n    } catch (error: any) {\n      console.log(\"error res: \", error.response?.data?.users);\n      if (\n        error.response?.data?.users !== undefined &&\n        error.response.data.users.length > 0\n      ) {\n        const positionTemp = this.props.schoolPositions.find(\n          (itm) => itm.school_has_position_id === school_has_position_id\n        );\n        const position = this.props.positions.find(\n          (itm) => itm.position_code === positionTemp?.position_code\n        );\n        if (position !== undefined) {\n          this.setState({\n            selected_position_users_on_delete: {\n              position: position,\n              data: error.response?.data?.users as PositionStaffOnDelete[],\n            },\n          });\n        } else {\n          this.setState({\n            error: \"Invalid Position selected!\",\n          });\n        }\n      } else {\n        this.setState({\n          error: errorToText(error),\n        });\n      }\n      this.setState({ loading: false });\n      console.log(\"Err: \", { ...error });\n    }\n  };\n\n  // Sort positions first by positions with available teacher and search\n  PositionsSortByHavingTeacher = () => {\n    let positionsTemp: SchoolPositionApiResponse[] = [];\n    positionsTemp = this.props.positions.sort((a, b) => {\n      const countOnA = this.props.schoolPositions.find(\n        (itm) => itm.position_code === a.position_code\n      );\n      const countOnB = this.props.schoolPositions.find(\n        (itm) => itm.position_code === b.position_code\n      );\n      if (countOnA !== undefined && countOnB !== undefined) {\n        if (\n          parseInt(countOnA.total_on_position) >\n          parseInt(countOnB.total_on_position)\n        ) {\n          return -1;\n        } else {\n          return 1;\n        }\n      }\n      return 0;\n    });\n    positionsTemp = positionsTemp.filter(\n      (itm) =>\n        this.props.schoolPositions.find(\n          (test) => test.position_code === itm.position_code\n        ) === undefined\n    );\n    return search(\n      positionsTemp,\n      this.state.searchPositionValue\n    ) as SchoolPositionApiResponse[];\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div>\n          <div className=\"bg-white dark:bg-dark-800 p-3 rounded\">\n            <div className=\"flex flex-row items-center justify-between\">\n              <div className=\"flex flex-row items-center gap-2 justify-between w-full\">\n                <span className=\"text-2xl font-bold text-primary-800\">\n                  {this.state.edit === true\n                    ? \"Assign positions to school\"\n                    : \"School positions list\"}\n                </span>\n                <div>\n                  <Button\n                    onClick={() => this.setState({ edit: !this.state.edit })}\n                    theme={this.state.edit === true ? \"default\" : \"accent\"}\n                    className={`flex flex-row items-center gap-3 animate__animated ${\n                      this.state.edit === false\n                        ? \"animate__zoomIn\"\n                        : \"animate__fadeInLeft\"\n                    }`}\n                  >\n                    <div>\n                      {this.state.edit === true ? (\n                        <MdArrowBack className=\"text-2xl\" />\n                      ) : (\n                        <MdAdd className=\"text-2xl\" />\n                      )}\n                    </div>\n                    <span>\n                      {this.state.edit === true\n                        ? \"Back to list\"\n                        : \"Add new positions\"}\n                    </span>\n                  </Button>\n                </div>\n              </div>\n              {this.props.close !== undefined && (\n                <div>\n                  <div\n                    onClick={() => this.props.close && this.props.close()}\n                    className=\"bg-gray-100 hover:bg-yellow-100 flex items-center justify-center p-1 cursor-pointer rounded-full\"\n                  >\n                    <MdClose className=\"text-3xl\" />\n                  </div>\n                </div>\n              )}\n            </div>\n            {this.state.success !== \"\" && (\n              <div\n                onClick={() => this.setState({ success: \"\" })}\n                className=\"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight\"\n              >\n                <div className=\"flex flex-row justify-between items-center gap-8\">\n                  <div>Success: {this.state.success}</div>\n                  <div>\n                    <MdClose className=\"text-2xl text-red-600 bg-red-100 rounded-full\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {this.state.error !== \"\" && (\n              <div\n                onClick={() => this.setState({ error: \"\" })}\n                className=\"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight\"\n              >\n                <div className=\"flex flex-row justify-between items-center gap-8\">\n                  <div>Error: {this.state.error}</div>\n                  <div>\n                    <MdClose className=\"text-2xl text-red-600 bg-red-100 rounded-full\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            <div\n              className={`grid md:grid-cols-${\n                this.state.edit === true ? \"2\" : \"1\"\n              }`}\n            >\n              <div\n                className={`col-span-1 border-r pr-2 ${\n                  this.state.edit === true ? \"\" : \"hidden\"\n                }`}\n              >\n                {/* <div>\n                <span className=\"text-sm\">\n                  Positions list, Select a position\n                </span>\n              </div> */}\n                <div className=\"\">\n                  <TextInput\n                    onChange={(e) =>\n                      this.setState({ searchPositionValue: e.target.value })\n                    }\n                    error={\"\"}\n                    placeholder=\"Search position...\"\n                    value={this.state.searchPositionValue}\n                    type=\"search\"\n                    name=\"post\"\n                    label=\"Search\"\n                  />\n                </div>\n                <div className=\"h-screen overflow-y-auto\">\n                  {this.PositionsSortByHavingTeacher().length === 0 ? (\n                    <div>No positions found!</div>\n                  ) : (\n                    this.PositionsSortByHavingTeacher().map((item, i) => (\n                      <div\n                        key={i + 1}\n                        className=\"border border-gray-300 px-3 py-2 flex flex- justify-between group bg-white hover:bg-blue-50 hover:border-blue-300 gap-3  items-center cursor-pointer my-1 rounded\"\n                        onClick={() => {\n                          this.addPositionToSchool(item);\n                        }}\n                      >\n                        <div className=\"flex flex-col\">\n                          <div className=\"flex flex-row items-center gap-1 text-base font-bold text-gray-700 group-hover:text-primary-800\">\n                            <div>\n                              <div className=\"flex items-center justify-center font-normal rounded-full h-8 -ml-1 w-8 border border-gray-400 bg-gray-200 group-hover:bg-gray-500 group-hover:text-white text-sm\">\n                                {i + 1}\n                              </div>\n                            </div>\n                            <span className=\"font-light\">\n                              {item.position_code}-\n                            </span>\n                            <span className=\"\">\n                              {item.position_name} ({item.qualification_name})\n                            </span>\n                          </div>\n                          {/* <div className=\"text-sm text-gray-400\">\n                            School level:{\" \"}\n                            <span className={`text-black`}>\n                              {item.school_level_name}\n                            </span>\n                          </div> */}\n                        </div>\n                        <div className=\"flex flex-row items-center gap-2\">\n                          {this.props.schoolPositions.find(\n                            (itm) => itm.position_code === item.position_code\n                          ) !== undefined && (\n                            <div className=\"bg-yellow-100 rounded-full text-sm font-bold px-2 border border-yellow-400 truncate\">\n                              Total:{\" \"}\n                              {\n                                this.props.schoolPositions.find(\n                                  (itm) =>\n                                    itm.position_code === item.position_code\n                                )?.total_on_position\n                              }\n                            </div>\n                          )}\n                          <div className=\"bg-blue-100 text-primary px-3 py-1 rounded cursor-pointer text-base text-primary-800 group-hover:text-white group-hover:bg-primary-800\">\n                            Select\n                          </div>\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n              {/* Right col */}\n              <div className=\"col-span-1 px-3\">\n                {\" \"}\n                {/* RiHome6Fill : School home icon later */}\n                <div className=\"flex flex-col border-b pb-3 border-accent-900 mt-2\">\n                  {/* <span>School</span> */}\n                  <div className=\"flex flex-row items-center justify-between\">\n                    <span className=\"text-accent-900 text-xl font-bold\">\n                      {this.props.school === undefined\n                        ? this.props.auth.school?.school_name\n                        : this.props.school.school_name}{\" \"}\n                      (\n                      {this.props.school === undefined\n                        ? this.props.auth.school?.school_code\n                        : this.props.school.school_code}\n                      )\n                    </span>\n                    <div className=\"font-bold text-2xl\">\n                      {\n                        [\n                          ...this.state.schoolPositionsTemp,\n                          ...this.props.schoolPositions,\n                        ].length\n                      }\n                    </div>\n                  </div>\n                </div>\n                {/* <div>\n                <span className=\"text-primary-800 font-bold text-lg\">\n                  School positions\n                </span>\n              </div> */}\n                {/* School positions */}\n                <div className=\"mt-3\">\n                  {[\n                    ...this.state.schoolPositionsTemp,\n                    ...this.props.schoolPositions,\n                  ].length === 0 ? (\n                    <div className=\"flex flex-col bg-gray-100 w-full justify-center items-center rounded-md p-4\">\n                      <div className=\"text-7xl text-gray-400\">\n                        <FiSearch />\n                      </div>\n                      <span className=\"text-3xl text-black\">\n                        School positions not found\n                      </span>\n                      <span className=\"text-sm text-gray-600\">\n                        This school has no positions assigned to it. Please\n                        select positions\n                      </span>\n                    </div>\n                  ) : (\n                    <div>\n                      {this.state.schoolPositionsTemp.length !== 0 && (\n                        <div className=\"text-xl text-primary-800 my-3 font-bold\">\n                          New pending\n                        </div>\n                      )}\n                      {this.state.schoolPositionsTemp.map((item, i) => (\n                        <div\n                          key={i + 1}\n                          className={`border rounded-md px-3 py-2 mb-2 group cursor-pointer ${\n                            this.state.schoolPositionsTemp.find(\n                              (itm) => itm.position_id === item.position_id\n                            ) !== undefined\n                              ? \"bg-yellow-50 border-yellow-400\"\n                              : \"bg-blue-50 border-blue-400 hover:bg-blue-100\"\n                          } `}\n                        >\n                          <div className=\"flex flex-row items-center justify-between\">\n                            <div className=\"flex flex-row items-center gap-1 text-base font-bold\">\n                              <div className=\"flex items-center justify-center font-normal rounded-full h-8 -ml-1 w-8 border border-gray-400 bg-gray-200 group-hover:bg-gray-500 group-hover:text-white text-sm\">\n                                {i + 1}\n                              </div>\n                              <span className=\"font-light\">\n                                {item.position_code}-\n                              </span>\n                              <span className=\"\">\n                                {item.position_name} ({item.qualification_name})\n                              </span>\n                            </div>\n\n                            <div className=\"\">\n                              <div\n                                onClick={() => {\n                                  this.setState({\n                                    schoolPositionsTemp:\n                                      this.state.schoolPositionsTemp.filter(\n                                        (itm) =>\n                                          itm.position_id !== item.position_id\n                                      ),\n                                  });\n                                }}\n                                className=\"bg-white text-accent-900 px-3 py-1 rounded cursor-pointer text-base border border-yellow-400\"\n                              >\n                                Remove\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* <div className=\"text-sm\">\n                          School level:{\" \"}\n                          <span\n                            className={`font-bold ${\n                              this.state.schoolPositionsTemp.find(\n                                (itm) => itm.position_id === item.position_id\n                              ) !== undefined\n                                ? \"text-accent-900\"\n                                : \"text-primary-800\"\n                            }`}\n                          >\n                            {item.school_level_name}\n                          </span>\n                        </div> */}\n                        </div>\n                      ))}\n                      {this.state.schoolPositionsTemp.length !== 0 && (\n                        <div>\n                          <Button\n                            onClick={() => {\n                              this.addSchoolPositions();\n                            }}\n                            theme=\"accent\"\n                          >\n                            Submit positions\n                          </Button>\n                        </div>\n                      )}\n                      {this.props.schoolPositions.length !== 0 && (\n                        <div className=\"font-bold text-lg text-gray-500 my-3\">\n                          List of school position\n                        </div>\n                      )}\n                      {this.props.schoolPositions.map((item, i) => (\n                        <div\n                          key={i + 1}\n                          className={`border rounded-md px-3 py-2 mb-2 group cursor-pointer ${\n                            this.state.schoolPositionsTemp.find(\n                              (itm) => itm.position_code === item.position_code\n                            ) !== undefined\n                              ? \"bg-yellow-50 border-yellow-400\"\n                              : \"bg-gray-100 hover:bg-blue-100\"\n                          } flex flex-row items-center justify-between gap-4`}\n                        >\n                          <div className=\"\">\n                            <div className=\"flex flex-row items-center justify-between\">\n                              <div className=\"flex flex-row gap-1 items-center text-base font-bold\">\n                                <div>\n                                  <div className=\"flex items-center justify-center font-normal rounded-full h-8 -ml-1 w-8 border border-blue-400 bg-blue-100 text-sm\">\n                                    {i + 1}\n                                  </div>\n                                </div>\n                                <span className=\"font-light\">\n                                  {item.position_code}-\n                                </span>\n                                <span className=\"\">\n                                  {item.position_name} (\n                                  {item.qualification_name})\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                          <div className=\"flex flex-row items-center gap-2\">\n                            <div className=\"bg-yellow-100 rounded-full text-sm font-bold px-2 border border-yellow-400 truncate\">\n                              Total:{\" \"}\n                              {\n                                this.props.schoolPositions.find(\n                                  (itm) =>\n                                    itm.position_code === item.position_code\n                                )?.total_on_position\n                              }\n                            </div>\n                            {this.props.schoolPositions.find(\n                              (itm) => itm.position_code === item.position_code\n                            ) !== undefined &&\n                              parseInt(\n                                this.props.schoolPositions.find(\n                                  (itm) =>\n                                    itm.position_code === item.position_code\n                                )!.total_on_position\n                              ) <= 0 && (\n                                <div\n                                  onClick={() => {\n                                    if (\n                                      item.school_code !== \"\" &&\n                                      window.confirm(\n                                        \"Are you sure do you want to remove this position\"\n                                      ) === true\n                                    ) {\n                                      this.RemoveSchoolPosition(\n                                        item.school_has_position_id,\n                                        item.school_code\n                                      );\n                                    }\n                                  }}\n                                  className=\"bg-white text-red-800 group-hover:text-white group-hover:bg-red-600 px-3 py-1 font-bold text-center rounded -mr-1\"\n                                >\n                                  Delete\n                                </div>\n                              )}\n                            {this.props.schoolPositions.find(\n                              (itm) => itm.position_code === item.position_code\n                            ) !== undefined &&\n                              parseInt(\n                                this.props.schoolPositions.find(\n                                  (itm) =>\n                                    itm.position_code === item.position_code\n                                )!.total_on_position\n                              ) > 0 && (\n                                <div\n                                  onClick={() =>\n                                    this.RemoveSchoolPosition(\n                                      item.school_has_position_id,\n                                      item.school_code\n                                    )\n                                  }\n                                  className=\"bg-blue-100 border border-white text-primary-800 group-hover:border-primary-800 hover:border-primary-800 group-hover:bg-primary-800 group-hover:text-white px-3 py-1 font-bold text-center rounded -mr-1\"\n                                >\n                                  Staffs\n                                </div>\n                              )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.selected_position_users_on_delete !== null && (\n          <Modal\n            backDrop={true}\n            theme={Themes.default}\n            close={() =>\n              this.setState({ selected_position_users_on_delete: null })\n            }\n            backDropClose={false}\n            widthSizeClass={ModalSize.extraLarge}\n            displayClose={false}\n            padding={{\n              body: true,\n            }}\n          >\n            {this.state.loading === true ? (\n              <div className=\"bg-white rounded p-4\">\n                <Loading />\n                <div className=\"text-xl font-light ml-4 -mt-10\">\n                  Loading, please wait...\n                </div>\n              </div>\n            ) : (\n              <div className=\"bg-white\">\n                <div className=\"flex flex-row gap-3 justify-between\">\n                  <div>\n                    <div className=\"font-extrabold text-2xl\">\n                      {\n                        this.state.selected_position_users_on_delete.position\n                          .position_name\n                      }\n                    </div>\n                    <div>List of staffs for the selected position</div>\n                  </div>\n                  <div\n                    onClick={() =>\n                      this.setState({ selected_position_users_on_delete: null })\n                    }\n                    className=\"bg-accent-800 font-bold cursor-pointer px-3 py-2 rounded truncate w-max h-10 flex items-center justify-center\"\n                  >\n                    Close window\n                  </div>\n                </div>\n                <div className=\"mt-3\">\n                  <table className=\"w-full text-left text-base font-light\">\n                    <thead className=\"bg-primary-100\">\n                      <tr>\n                        <th className=\"px-3 py-1\">#</th>\n                        <th className=\"px-3 py-1\">Staff code</th>\n                        <th className=\"px-3 py-1\">Full name</th>\n                        <th className=\"px-3 py-1\">NID</th>\n                        <th className=\"px-3 py-1\">Phone number</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {this.state.selected_position_users_on_delete.data.map(\n                        (item, i) => (\n                          <tr\n                            key={i + 1}\n                            className={`${i % 2 !== 0 ? \"bg-gray-100\" : \"\"}`}\n                          >\n                            <td className=\"px-3 py-1\">{i + 1}</td>\n                            <td className=\"px-3 py-1\">{item.staff_code}</td>\n                            <td className=\"px-3 py-1\">{item.full_name}</td>\n                            <td className=\"px-3 py-1\">{item.nid}</td>\n                            <td className=\"px-3 py-1\">{item.phone_numbers}</td>\n                          </tr>\n                        )\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n                <div className=\"mt-3 w-full\">\n                  <div className=\"flex flex-row gap-2 w-full bg-accent-400 rounded-md p-4 border border-yellow-400\">\n                    <div>\n                      <MdInfoOutline className=\"text-5xl\" />\n                    </div>\n                    <div className=\"text-xl font-light text-black flex flex-col\">\n                      <span className=\"font-extrabold\">\n                        You can not remove this position!\n                      </span>\n                      <span className=\"text-base\">\n                        If you want to remove this position, you need to check\n                        these staffs before. Thus, if you decided to remove it,\n                        please remove these staffs before removing this\n                        position!\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </Modal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default AddSchoolPositions;\n","import React, { FC, ReactElement, useState } from \"react\";\n// import axios from \"axios\";\n// import TextInput from \"../../../components/Inputs/TextInput\";\n// import { FaAngleDown } from \"react-icons/fa\";\nimport { PostRequestReasons } from \"../../../types/HeadTeacherRequesTypes\";\n// import { setAxiosToken } from \"../../../utils/AxiosToken\";\n// import { APP_URL } from \"../../../config/app.config\";\n// import { InputSizeType } from \"../../../components/Inputs/InputTypes\";\nimport { PositionsOnSchool, PostRequestItem } from \"./HeadTeacherRequestToDee\";\n\ntype AddActionInputProps = {\n  postRequestReasons: PostRequestReasons[];\n  getPostRequestItem: (data: {\n    position: PositionsOnSchool;\n    reason: string;\n    postsNumber: number;\n  }) => PostRequestItem[];\n  close: () => void;\n  currentRequests: number;\n  submitRequest: (addedRequests: PostRequestItem[]) => void;\n  position: PositionsOnSchool;\n};\n\nconst AddActionInput: FC<AddActionInputProps> = (\n  props: AddActionInputProps\n): ReactElement => {\n  const [reason, setReason] = useState<string>(\"\");\n  const [inputValue, setInputValue] = useState<string>(\n    props.currentRequests.toString()\n  );\n  const [error, setError] = useState<string | null>(null);\n  return (\n    <>\n      <input\n        type=\"number\"\n        className=\"w-20 p-1 border-4 rounded-t border-primary-800 font-bold px-3 text-center text-black\"\n        value={inputValue}\n        name=\"POSTSS\"\n        onChange={(e) => {\n          setError(null);\n          setInputValue(e.target.value);\n        }}\n      />\n      <div className=\"animate__animated animate__zoomIn animate__faster absolute p-1 bg-primary-800 rounded-b -mt-0.5 rounded-tl  z-40 w-80 right-0 \">\n        <label\n          className=\"px-2 text-sm text-gray-300\"\n          htmlFor=\"selected_comment\"\n        >\n          Request reason\n        </label>\n        <div className=\"px-2\">\n          <select\n            value={reason}\n            placeholder=\"Select reason\"\n            className=\"block appearance-none w-full bg-white border-2 border-primary-800 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline md:w-full text-black\"\n            onChange={(e) => {\n              setError(null);\n              setReason(e.target.value);\n            }}\n          >\n            <option value={\"Select reason\"}>Select reason</option>\n            {props.postRequestReasons.map((element) => {\n              return (\n                <option key={element.reason_id} value={element.reason_id}>\n                  {element.reason_name}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        {error !== null && (\n          <div\n            onClick={() => setError(null)}\n            className=\"bg-red-100 rounded-md text-red-600 px-2 py-2 mx-3 my-2 animate__animated animate__animated animate__bounceIn\"\n          >\n            {error}\n          </div>\n        )}\n        <div className=\"flex\">\n          <button\n            onClick={() => {\n              if (inputValue.length < 0) {\n                setError(\"Please number of requests should be greater than 0\");\n              } else if (reason.length < 0) {\n                setError(\"Please select reason for number of requested posts\");\n              } else {\n                setError(null);\n                if (reason === \"\") {\n                  setReason(props.postRequestReasons[0].reason_id);\n                }\n                const res = props.getPostRequestItem({\n                  position: props.position,\n                  reason: reason,\n                  postsNumber: parseInt(inputValue),\n                });\n                console.log(\"Send: \", res);\n                props.submitRequest(res);\n                props.close();\n              }\n            }}\n            className=\"p-1 px-4 rounded text-white bg-green-400 hover:bg-green-500 mx-2 my-1\"\n          >\n            Send request\n          </button>\n          <button\n            onClick={() => props.close()}\n            className=\"p-1 px-2 rounded text-white bg-red-600 hover:bg-red-600  my-1\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default AddActionInput;\n","import React, { Fragment, Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Auth, Basic, FC_GetAllPositions } from \"../../../actions\";\nimport { StoreState } from \"../../../reducers\";\nimport axios from \"axios\";\nimport { FaAngleDown } from \"react-icons/fa\";\n\nimport Container from \"../../../components/ContainerComponents/Container\";\nimport AddActionInput from \"./AddActionInput\";\nimport TextInput from \"../../../components/Inputs/TextInput\";\nimport Alert from \"../../../components/Alert/Alert\";\n\nimport { setAxiosToken } from \"../../../utils/AxiosToken\";\nimport {\n  SchoolPositionApiResponse,\n  headTeacherRequestSubmit,\n  Qualifications,\n  PostRequestReasons,\n} from \"../../../types/HeadTeacherRequesTypes\";\nimport { APP_URL } from \"../../../config/app.config\";\nimport AddSchoolPositions from \"../../../components/SchoolPositions/AddSchoolPositions\";\nimport Loading from \"../../../components/Loading/Loading\";\nimport { search } from \"../../../utils/functions\";\n\nexport interface PositionsOnSchool {\n  // archive: string;\n  // archived_at: string | null;\n  // archived_by: string | null;\n  // position_code: string;\n  // position_name: string;\n  // qualification_id: string;\n  // qualification_name: string;\n  // school_code: string;\n  // school_has_position_id: string;\n  // school_level_id: string;\n  // school_level_name: string;\n  // school_name: string;\n  // total_on_position: number;\n  qualification_name: string;\n  position_name: string;\n  post_request_id: string;\n  academic_calendar_id: string;\n  school_code: string;\n  position_code: string;\n  qualification_id: string;\n  head_teacher_id: string;\n  head_teacher_post_request: string | undefined;\n  head_teacher_reason_id: string;\n  dde_id_request: string;\n  dde_post_request: string;\n  dde_id_distribution: string | null;\n  dde_post_distribution: string | null | undefined;\n  dde_distribution_comment: string | null;\n  district_code: string;\n  created_by: string;\n  existing_post: string | undefined;\n  school_level_name: string;\n  total_on_position: string;\n  school_has_position_id: string;\n}\n\nexport interface PostRequestItem {\n  academic_year_id: string;\n  school_code: string;\n  position_code: string;\n  qualification_id: string;\n  head_teacher_id: string;\n  head_teacher_post_request: string;\n  existing_post: string;\n  head_teacher_reason_id: string;\n  district_code: string;\n}\n\nexport interface SchoolPositionsCombination {\n  school_post_requests: PositionsOnSchool[];\n  school_positions: PositionsOnSchool[];\n}\n\ntype AlertMessage = {\n  target: \"main-error\" | \"main-success\" | null;\n  msg: string;\n};\n\ninterface HeadTeacherRequestToDeeState {\n  selected: string | null; // 0\n  seleQualification: string; //'All'\n  qualification: Qualifications[]; //[]\n  // postsRequests: TeacherRequestedPostsInterface[]; //[]\n  totalRequested: number; //0\n  seacrhValue: string; //''\n  alert: AlertMessage;\n  currentPostsData: SchoolPositionApiResponse[]; //[]\n  allFliteredData: SchoolPositionApiResponse[]; //[]\n  // requested post\n  requestPosts: headTeacherRequestSubmit; //[]\n  addSchoolPositions: boolean;\n  schoolPositions: PositionsOnSchool[];\n  normalSchoolPositions: PositionsOnSchool[];\n  sendPostRequest: boolean;\n  addedRequests: PostRequestItem[];\n  postRequestReasons: PostRequestReasons[];\n  loading: boolean;\n}\n\ninterface HeadTeacherRequestToDeeProps {\n  auth: Auth;\n  basic: Basic;\n  FC_GetAllPositions: (\n    callBack: (status: boolean, msg: string) => void\n  ) => void;\n}\n\nexport const totalItemPosts = (\n  schoolPositions: PositionsOnSchool[],\n  element: PositionsOnSchool\n): number => {\n  let totalExistingPostsStatic: number = 0;\n  let testItem = schoolPositions.find(\n    (test) => test.position_code === element.position_code\n  );\n  if (testItem !== undefined) {\n    totalExistingPostsStatic =\n      testItem.existing_post === undefined\n        ? 0\n        : parseInt(testItem.existing_post);\n  }\n\n  const totalDistributed: number =\n    element.dde_post_distribution === null ||\n    element.dde_post_distribution === undefined\n      ? 0\n      : parseInt(element.dde_post_distribution);\n\n  return totalExistingPostsStatic + totalDistributed;\n};\n\nexport const vacantPosts = (\n  normalSchoolPositions: PositionsOnSchool[],\n  schoolPositions: PositionsOnSchool[],\n  element: PositionsOnSchool\n): number => {\n  let total = 0;\n\n  let testPosition = normalSchoolPositions.find(\n    (test) => test.position_code === element.position_code\n  );\n  if (testPosition !== undefined) {\n    total =\n      totalItemPosts(schoolPositions, element) -\n      parseInt(testPosition.total_on_position);\n  }\n  return total;\n};\n\nexport class _HdRequestToDee extends Component<\n  HeadTeacherRequestToDeeProps,\n  HeadTeacherRequestToDeeState\n> {\n  constructor(props: HeadTeacherRequestToDeeProps) {\n    super(props);\n\n    this.state = {\n      selected: null,\n      seleQualification: \"All\",\n      qualification: [],\n      totalRequested: 0,\n      seacrhValue: \"\",\n      alert: {\n        target: null,\n        msg: \"\",\n      },\n      currentPostsData: [],\n      allFliteredData: [],\n      requestPosts: [],\n      addSchoolPositions: false,\n      schoolPositions: [],\n      normalSchoolPositions: [],\n      sendPostRequest: true,\n      addedRequests: [],\n      postRequestReasons: [],\n      loading: false,\n    };\n  }\n\n  setLoading = (status: boolean) => {\n    this.setState({ loading: status });\n  };\n\n  getPostRequestReasons = async () => {\n    setAxiosToken();\n    this.setLoading(true);\n    try {\n      const res = await axios.get<PostRequestReasons[]>(\n        `${APP_URL}/postRequestReasons`\n      );\n      this.setState({ postRequestReasons: res.data });\n    } catch (error) {\n      console.log(error);\n    }\n    this.setLoading(false);\n  };\n\n  // Find Existing teachers\n  existingTeachersCount = (schoolPositions: PositionsOnSchool[]) => {\n    let n = 0;\n    for (let position of this.state.normalSchoolPositions) {\n      if (\n        this.state.normalSchoolPositions.find(\n          (test) => test.position_code === position.position_code\n        ) !== undefined\n      ) {\n        n += parseInt(\n          this.state.normalSchoolPositions.find(\n            (test) => test.position_code === position.position_code\n          )!.total_on_position\n        );\n      }\n    }\n    return n;\n  };\n\n  // Find Existing teachers\n  existingTeachersCount1 = (schoolPositions: PositionsOnSchool[]) => {\n    let n = 0;\n    for (let position of schoolPositions) {\n      if (\n        this.state.normalSchoolPositions.find(\n          (test) => test.position_code === position.position_code\n        ) !== undefined\n      ) {\n        n += parseInt(\n          this.state.normalSchoolPositions.find(\n            (test) => test.position_code === position.position_code\n          )!.total_on_position\n        );\n      }\n    }\n    return n;\n  };\n\n  newAddedTeachersCount = (addedNewTeachers: PositionsOnSchool[]) => {\n    let nn = 0;\n    for (let new_position of addedNewTeachers) {\n      if (new_position.head_teacher_post_request !== undefined) {\n        nn += parseInt(new_position.head_teacher_post_request);\n      }\n    }\n    return nn;\n  };\n\n  TotalAllowedTeachersCount = (addedNewTeachers: PositionsOnSchool[]) => {\n    let nn = 0;\n    for (let new_position of addedNewTeachers) {\n      if (\n        new_position.dde_post_distribution !== null &&\n        new_position.dde_post_distribution !== undefined\n      ) {\n        nn += parseInt(new_position.dde_post_distribution);\n      }\n    }\n    return nn;\n  };\n\n  // count requested posts\n  countRequestedPosts = (allRequest: headTeacherRequestSubmit) => {\n    const sumWithInitial = allRequest.reduce(\n      (previousValue, currentValue) =>\n        previousValue + parseInt(currentValue.head_teacher_post_request),\n      0\n    );\n    this.setState({ totalRequested: sumWithInitial });\n  };\n\n  // clear alert\n  cleanAlert = () => {\n    setTimeout(() => {\n      this.setState({\n        alert: {\n          target: null,\n          msg: \"\",\n        },\n      });\n    }, 2000);\n  };\n  // Get school positions requests\n  getSchoolPositions = async (\n    school_code: string,\n    academic_year_id: string\n  ) => {\n    setAxiosToken();\n    this.setLoading(true);\n    try {\n      const data = await axios.get<SchoolPositionsCombination>(\n        `${APP_URL}/schoolpostrequest/request/${school_code}/${academic_year_id}`\n      );\n      console.log(\"RES DATA: \", data.data);\n      if (\n        this.getNotInitializedPosts(\n          data.data.school_positions,\n          data.data.school_post_requests\n        ).length > 0\n      ) {\n        this.initializePosts(\n          data.data.school_positions,\n          data.data.school_post_requests\n        );\n      } else {\n        this.setState({ normalSchoolPositions: data.data.school_positions });\n        this.setState({\n          schoolPositions: data.data.school_post_requests,\n        });\n      }\n    } catch (error: any) {\n      console.log(\"Err: \", { ...error });\n      this.cleanAlert();\n    }\n    this.setLoading(false);\n  };\n  TotalVacantPosts = (elements: PositionsOnSchool[]): number => {\n    let total = 0;\n    for (let item of elements) {\n      total += vacantPosts(\n        this.state.normalSchoolPositions,\n        this.state.schoolPositions,\n        item\n      );\n    }\n    return total;\n  };\n\n  sendFinalPostRequest = async (addedRequests: PostRequestItem[]) => {\n    if (addedRequests.length === 0) {\n      return this.setState({\n        alert: {\n          target: \"main-error\",\n          msg: \"No request found!\",\n        },\n      });\n    } else if (\n      addedRequests[0].head_teacher_post_request === \"\" ||\n      parseInt(addedRequests[0].head_teacher_post_request) < 0\n    ) {\n      return this.setState({\n        alert: {\n          target: \"main-error\",\n          msg: \"Please type number of requests greater than 0\",\n        },\n      });\n    }\n\n    this.setLoading(true);\n    try {\n      setAxiosToken();\n      // await this.getSchoolPostsRequests();\n      await axios.post<PostRequestItem[]>(\n        `${APP_URL}/schoolpostrequest/htrequest`,\n        addedRequests\n      );\n      console.log(\"Sent data: \", addedRequests);\n      let test = this.state.schoolPositions.find(\n        (itm) => itm.position_code === addedRequests[0].position_code\n      );\n      if (test === undefined) {\n        // reload school positions\n        this.getSchoolPositions(\n          addedRequests[0].school_code,\n          addedRequests[0].academic_year_id\n        );\n      } else {\n        let current: PositionsOnSchool[] = [];\n        for (let item of this.state.schoolPositions) {\n          if (item.position_code === addedRequests[0].position_code) {\n            current.push({\n              qualification_name: item.qualification_name,\n              position_name: item.position_name,\n              post_request_id: item.post_request_id,\n              academic_calendar_id: item.academic_calendar_id,\n              school_code: item.school_code,\n              position_code: item.position_code,\n              qualification_id: item.qualification_id,\n              head_teacher_id: item.head_teacher_id,\n              head_teacher_post_request:\n                addedRequests[0].head_teacher_post_request.toString(),\n              head_teacher_reason_id: addedRequests[0].head_teacher_reason_id,\n              dde_id_request: item.dde_id_request,\n              dde_post_request: item.dde_post_request,\n              dde_id_distribution: item.dde_id_distribution,\n              dde_post_distribution: item.dde_post_distribution,\n              dde_distribution_comment: item.dde_distribution_comment,\n              district_code: item.district_code,\n              created_by: item.created_by,\n              existing_post: item.existing_post,\n              school_level_name: item.school_level_name,\n              total_on_position: item.total_on_position,\n              school_has_position_id: item.school_has_position_id,\n            });\n          } else {\n            current.push(item);\n          }\n        }\n        this.getNotInitializedPosts(\n          this.state.normalSchoolPositions,\n          this.state.schoolPositions\n        ).length === 0 &&\n          this.setState({\n            alert: {\n              target: \"main-success\",\n              msg: \"Posts Request Submitted Successfully!\",\n            },\n          });\n        this.setState({ schoolPositions: current });\n      }\n      this.cleanAlert();\n      this.countRequestedPosts([]);\n    } catch (error: any) {\n      console.log(\"Erro post: \", { ...error });\n      this.cleanAlert();\n      this.setState({\n        alert: {\n          target: \"main-error\",\n          msg: \"Something went Wrong, Sending Request, Please try Again Later\",\n        },\n      });\n    }\n    this.setLoading(false);\n  };\n  // get updated value\n  getUpdatedValue = (number: string, position_code: string) => {\n    const updatedPosts = this.state.requestPosts.map((element) => {\n      if (element.position_code === position_code) {\n        element.head_teacher_post_request = number;\n      }\n      return element;\n    });\n    this.setState({ requestPosts: updatedPosts });\n    this.countRequestedPosts(this.state.requestPosts);\n  };\n\n  // get new value\n  getValue = (number: string, position_id: string) => {\n    const updatedPosts = this.state.currentPostsData.filter(\n      (element) => element.position_id === position_id\n    )[0];\n    const district_code_split = `${this.props.auth.school?.school_code[0]}${this.props.auth.school?.school_code[1]}`;\n    if (\n      updatedPosts &&\n      district_code_split &&\n      this.props.auth.school?.school_code &&\n      this.props.auth.user?.user_id\n    ) {\n      const newRequestdPosts = {\n        academic_calendar_id:\n          this.props.basic.academic_calender?.academic_year_id || \"1\",\n        school_code: this.props.auth.school.school_code,\n        position_name: updatedPosts.position_name,\n        qualification_name: updatedPosts.qualification_name,\n        position_code: updatedPosts.position_code,\n        qualification_id: updatedPosts.qualification_id,\n        head_teacher_id: this.props.auth.user.user_id,\n        head_teacher_post_request: number,\n        head_teacher_reason_id: \"7\",\n        district_code: district_code_split,\n      };\n      const NewUpdatedRequest = [...this.state.requestPosts, newRequestdPosts];\n      this.setState({ requestPosts: NewUpdatedRequest });\n      this.countRequestedPosts(NewUpdatedRequest);\n      this.setState({ requestPosts: NewUpdatedRequest });\n    }\n  };\n\n  filterData = (): PositionsOnSchool[] => {\n    const allData = [\n      ...this.state.normalSchoolPositions.filter(\n        (itm) =>\n          itm.position_code !==\n          this.state.schoolPositions.find(\n            (test) => test.position_code === itm.position_code\n          )?.position_code\n      ),\n      ...this.state.schoolPositions,\n    ];\n    const res =\n      this.state.seleQualification === \"All\"\n        ? allData\n        : allData.filter(\n            (element) =>\n              element.qualification_id === this.state.seleQualification\n          );\n    return search(res, this.state.seacrhValue);\n  };\n\n  componentDidMount = () => {\n    // this.getQualification();\n    if (this.props.basic.positions === null) {\n      this.props.FC_GetAllPositions((status: boolean, msg: string) => {\n        this.setLoading(true);\n        if (status === false) {\n          this.setState({\n            alert: {\n              target: \"main-error\",\n              msg: msg,\n            },\n          });\n        }\n        this.setLoading(false);\n      });\n    }\n\n    if (this.props.auth.school && this.props.basic.academic_calender) {\n      this.getSchoolPositions(\n        this.props.auth.school.school_code,\n        this.props.basic.academic_calender.academic_year_id\n      );\n    }\n    // if (this.state.postsRequests.length === 0) {\n    //   this.getSchoolPostsRequests();\n    // }\n    if (this.state.postRequestReasons.length === 0) {\n      this.getPostRequestReasons();\n    }\n  };\n\n  addPostRequestItem = (data: {\n    position: PositionsOnSchool;\n    reason: string;\n    postsNumber: number;\n  }) => {\n    this.props.basic.academic_calender &&\n      this.props.auth.user &&\n      this.props.auth.district &&\n      this.setState({\n        addedRequests: [\n          ...this.state.addedRequests.filter(\n            (itm) => itm.position_code !== data.position.position_code\n          ),\n          {\n            academic_year_id:\n              this.props.basic.academic_calender.academic_year_id,\n            school_code: data.position.school_code,\n            position_code: data.position.position_code,\n            qualification_id: data.position.qualification_id,\n            head_teacher_id: this.props.auth.user.user_id,\n            head_teacher_post_request: data.postsNumber.toString(),\n            existing_post:\n              data.position.existing_post === undefined\n                ? \"0\"\n                : data.position.existing_post,\n            head_teacher_reason_id: data.reason,\n            district_code: this.props.auth.district.district_code,\n          },\n        ],\n      });\n  };\n\n  getNotInitializedPosts = (\n    normalSchoolPositions: PositionsOnSchool[],\n    schoolPositions: PositionsOnSchool[]\n  ): PositionsOnSchool[] => {\n    let res: PositionsOnSchool[] = [];\n    for (let item of normalSchoolPositions) {\n      let check = schoolPositions.find(\n        (itm) => itm.position_code === item.position_code\n      );\n      if (check === undefined) {\n        res.push(item);\n      }\n    }\n    return res;\n  };\n\n  initializePosts = (\n    normalSchoolPositions: PositionsOnSchool[],\n    schoolPositions: PositionsOnSchool[]\n  ) => {\n    let request: PostRequestItem[] = [];\n    for (let item of normalSchoolPositions) {\n      request = [\n        ...request,\n        ...this.getPostRequestItem({\n          position: item,\n          reason: \"7\",\n          postsNumber: 0,\n        }),\n      ];\n    }\n    console.log(\"Requests: \", request);\n    this.sendFinalPostRequest(request);\n    console.log(\"Testing reset data: \", {\n      schoolPositions: schoolPositions,\n      normalSchoolPositions: normalSchoolPositions,\n    });\n    // this.setState({ schoolPositions: schoolPositions });\n    // this.setState({ normalSchoolPositions: normalSchoolPositions });\n  };\n\n  getPostRequestItem = (data: {\n    position: PositionsOnSchool;\n    reason: string;\n    postsNumber: number;\n  }): PostRequestItem[] => {\n    let res: PostRequestItem[] = [];\n    if (this.props.basic.academic_calender && this.props.auth.user) {\n      res = [\n        ...this.state.addedRequests.filter(\n          (itm) => itm.position_code !== data.position.position_code\n        ),\n        {\n          academic_year_id: this.props.basic.academic_calender.academic_year_id,\n          school_code: data.position.school_code,\n          position_code: data.position.position_code,\n          qualification_id: data.position.qualification_id,\n          head_teacher_id: this.props.auth.user.user_id,\n          head_teacher_post_request: data.postsNumber.toString(),\n          existing_post: data.position.total_on_position,\n          head_teacher_reason_id: data.reason,\n          district_code: data.position.school_code.substring(0, 2),\n        },\n      ];\n    }\n    return res;\n  };\n  render() {\n    return (\n      <>\n        <Container\n          title=\"Posts requests\"\n          subTitle=\"School posts requests management\"\n          className=\"h-screen\"\n        >\n          {/* Check not initialized posts */}\n          {this.getNotInitializedPosts(\n            this.state.normalSchoolPositions,\n            this.state.schoolPositions\n          ).length !== 0 && (\n            <div className=\"fixed bg-black bg-opacity-50 h-full w-full top-0 left-0 z-50 flex flex-row items-center justify-center\">\n              <div className=\"bg-white rounded-md p-10 text-center flex flex-col bg-opacity-80\">\n                <span className=\"text-2xl\">Initializing new positions</span>\n                <span className=\"text-base text-gray-500\">Please wait...</span>\n              </div>\n            </div>\n          )}\n          {this.state.alert.target === \"main-success\" && (\n            <div className=\"mb-20\">\n              <Alert theme=\"success\">{this.state.alert.msg}</Alert>\n            </div>\n          )}\n          {this.state.alert.target === \"main-error\" && (\n            <div className=\"mb-20\">\n              <Alert theme=\"danger\">{this.state.alert.msg}</Alert>\n            </div>\n          )}\n          {this.props.basic.positions === null ? (\n            <div className=\"flex flex-col justify-center items-center bg-gray-100 rounded-md p-5 w-full mt-4\">\n              <Loading />\n              <div className=\"text-xl text-gray-800 animate-pulse\">\n                <span>Loading positions...</span>\n              </div>\n            </div>\n          ) : this.state.addSchoolPositions === true &&\n            this.props.basic.positions !== null ? (\n            <div className=\"mt-4 border rounded\">\n              <AddSchoolPositions\n                auth={this.props.auth}\n                positions={this.props.basic.positions}\n                schoolPositions={this.state.schoolPositions}\n                appendPositionsToSchool={(\n                  data: SchoolPositionApiResponse[]\n                ) => {\n                  if (\n                    this.props.auth.school &&\n                    this.props.basic.academic_calender\n                  ) {\n                    this.getSchoolPositions(\n                      this.props.auth.school.school_code,\n                      this.props.basic.academic_calender.academic_year_id\n                    );\n                  }\n                }}\n                removePositionsToSchool={(school_has_position_id: string) => {\n                  if (\n                    this.props.auth.school &&\n                    this.props.basic.academic_calender\n                  ) {\n                    this.getSchoolPositions(\n                      this.props.auth.school.school_code,\n                      this.props.basic.academic_calender.academic_year_id\n                    );\n                  }\n                }}\n                close={() => {\n                  this.setState({ addSchoolPositions: false });\n                }}\n              />\n            </div>\n          ) : this.state.sendPostRequest === false ? (\n            <div></div>\n          ) : (\n            <div className=\"\">\n              {/* table */}\n              <div className=\"flex flex-row w-full justify-between mt-3 -mb-3\">\n                <div className=\"text-xl uppercase mb-2\">\n                  LIST OF SCHOOL POSITIONS\n                </div>\n                {/* Total Post */}\n                <div className=\"\">\n                  <div className=\"flex flex-row gap-5 md:-mt-12\">\n                    <div>\n                      <div className=\"flex flex-row gap-5 bg-blue-50 -mt-3 mb-3 rounded-md pt-2 px-4\">\n                        <div className=\"mb-3 text-center\">\n                          <div className=\"text-sm text-gray-900 -mt-1\">\n                            Existing teachers\n                          </div>\n                          <div className=\"text-4xl font-bold text-gray-900\">\n                            {this.existingTeachersCount(\n                              this.state.schoolPositions\n                            ) < 10\n                              ? 0\n                              : \"\"}\n                            {this.existingTeachersCount(\n                              this.state.schoolPositions\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"text-sm text-accent-900 -mt-1\">\n                            Total vacants\n                          </div>\n                          <div className=\"text-4xl font-bold text-accent-900\">\n                            {this.TotalVacantPosts(this.state.schoolPositions) <\n                            10\n                              ? 0\n                              : \"\"}\n                            {this.newAddedTeachersCount(\n                              this.state.schoolPositions\n                            )}\n                          </div>\n                        </div>\n                        {/* <div className=\"border-green-600 text-center\">\n                          <div className=\"text-sm text-green-600 -mt-1\">\n                            <span>Total allowed posts</span>\n                          </div>\n                          <div className=\"text-4xl font-bold text-green-600\">\n                            {this.TotalAllowedTeachersCount(\n                              this.state.schoolPositions\n                            ) < 10\n                              ? 0\n                              : \"\"}\n                            {this.TotalAllowedTeachersCount(\n                              this.state.schoolPositions\n                            )}\n                          </div>\n                        </div> */}\n                        {/* <div>\n                          {this.state.selected === null && (\n                            <div\n                              onClick={() => this.sendFinalPostRequest()}\n                              title=\"Click to submit all added requests\"\n                              className=\"bg-primary-800 hover:bg-primary-900 cursor-pointer text-white font-bold px-4 py-2 rounded text-center w-max animate__animated animate__zoomIn\"\n                            >\n                              Send requests\n                            </div>\n                          )}\n                        </div> */}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              {this.state.loading === true ? (\n                <div className=\"flex flex-col items-center justify-center bg-gray-100 rounded-lg p-5 mt-5\">\n                  <Loading />\n                  <div className=\"text-2xl\">Loading, please wait...</div>\n                </div>\n              ) : (\n                <div className=\"flex flex-row gap-2\">\n                  <div className=\"flex-1 bg-white dark:bg-dark-800 shadow-lg rounded-md p-2 pt-0 mb-10\">\n                    <div className=\"flex flex-row items-center w-full\">\n                      <div className=\"flex-1\">\n                        <TextInput\n                          onChange={(e) =>\n                            this.setState({ seacrhValue: e.target.value })\n                          }\n                          error={\"\"}\n                          placeholder=\"Search Post Here...\"\n                          value={this.state.seacrhValue}\n                          type=\"search\"\n                          name=\"post\"\n                          label=\"Search\"\n                          size={\"sm\"}\n                        />\n                      </div>\n                      <div className=\"flex-2 relative inline-block mt-6 ml-2\">\n                        <select\n                          value={this.state.seleQualification}\n                          placeholder=\"All\"\n                          className=\"block appearance-none w-full bg-white border-2 border-primary-800 hover:border-black px-4 py-2 pr-8 rounded  leading-tight focus:outline-none md:w-full dark:text-white dark:bg-primary-900 \"\n                          onChange={(e) => {\n                            this.setState({\n                              seleQualification: e.target.value,\n                            });\n                          }}\n                        >\n                          <option value={\"All\"}>All</option>\n                          {this.props.basic.qualifications.map((element) => {\n                            return (\n                              <option\n                                key={element.qualification_id}\n                                value={element.qualification_id}\n                              >\n                                {element.qualification_name}\n                              </option>\n                            );\n                          })}\n                        </select>\n                        <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                          <FaAngleDown className=\"fill-current h-4 w-4\" />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"w-full h-full\">\n                      <div className=\"w-full h-full overflow-x-scroll\">\n                        <table className=\"h-auto\">\n                          <thead>\n                            <tr>\n                              <th className=\"border text-center px-2\">#</th>\n                              <th\n                                className=\"text-left border px-2\"\n                                style={{ width: \"2000px\" }}\n                              >\n                                Position\n                              </th>\n                              <th className=\"text-center border px-2\">\n                                Qualification\n                              </th>\n                              <th className=\"text-center border w-40\">\n                                Existing teachers\n                              </th>\n                              <th className=\"text-center text-blue-800 bg-blue-50 border border-blue-100 w-48\">\n                                HT new posts requests\n                              </th>\n                              <th className=\"text-center border text-green-800 w-48\">\n                                Approved posts by DDE\n                              </th>\n                              <th className=\"text-center border text-accent-900 w-48\">\n                                Total posts\n                              </th>\n\n                              <th className=\"text-center border  w-48\">\n                                Vacant posts\n                              </th>\n                              <th className=\"text-center border w-52\">\n                                Comment\n                              </th>\n                              {/* <th className=\"text-left\">Action</th> */}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {this.state.normalSchoolPositions.length <= 0 && (\n                              <tr>\n                                <td className=\"text-center p-2\" colSpan={9}>\n                                  <div className=\"bg-gray-100 rounded-md p-6\">\n                                    <div className=\"text-2xl font-extrabold text-center\">\n                                      No positions Found\n                                    </div>\n                                    <div className=\"text-base text-center\">\n                                      There are no positions assigned to the\n                                      school{\" \"}\n                                      {this.props.auth.school?.school_name}\n                                    </div>\n                                    <div className=\"flex justify-center w-full mt-3\">\n                                      <div\n                                        onClick={() => {\n                                          this.setState({\n                                            addSchoolPositions: true,\n                                          });\n                                        }}\n                                        className=\"btn bg-yellow-50 border-2 border-yellow-500 hover:bg-accent-900 w-max rounded-md px-4 py-2 text-base font-bold hover:text-white cursor-pointer\"\n                                      >\n                                        Add positions\n                                      </div>\n                                    </div>\n                                  </div>\n                                </td>\n                              </tr>\n                            )}\n                            {this.filterData().map((element, i) => {\n                              let index = i + 1;\n                              return (\n                                <Fragment key={index}>\n                                  <tr\n                                    className={`rounded ${\n                                      element.position_code ===\n                                      this.state.selected\n                                        ? \"bg-yellow-50 font-bold\"\n                                        : \"\"\n                                    } ${\n                                      this.state.addedRequests.find(\n                                        (itm) =>\n                                          itm.position_code ===\n                                          element.position_code\n                                      ) !== undefined\n                                        ? \"hover:bg-blue-50 hover:text-primary-800\"\n                                        : \"hover:bg-gray-50 hover:text-accent-900\"\n                                    }  hover:text-dark-900 group`}\n                                  >\n                                    <td className=\"p-2 border text-center\">\n                                      {index}\n                                    </td>\n                                    <td className=\"p-2 border\">\n                                      <div className=\"flex flex-col\">\n                                        <span className=\"text-base\">\n                                          {element.position_name}\n                                        </span>\n                                        <span className=\"text-gray-500 text-sm group-hover:text-black\">\n                                          School level:{\" \"}\n                                          <span className=\"font-bold\">\n                                            {element.school_level_name}\n                                          </span>\n                                        </span>\n                                      </div>\n                                    </td>\n                                    <td className=\"p-2 border text-center\">\n                                      {element.qualification_name}\n                                    </td>\n                                    <td className=\"p-2 border text-center\">\n                                      {\n                                        this.state.normalSchoolPositions.find(\n                                          (test) =>\n                                            test.position_code ===\n                                            element.position_code\n                                        )?.total_on_position\n                                      }\n                                    </td>\n\n                                    {element.position_code ===\n                                    this.state.selected ? (\n                                      <td className=\" border  w-12 relative\">\n                                        {this.state.normalSchoolPositions.find(\n                                          (itm) =>\n                                            itm.position_code ===\n                                            element.position_code\n                                        ) && (\n                                          <AddActionInput\n                                            postRequestReasons={\n                                              this.state.postRequestReasons\n                                            }\n                                            getPostRequestItem={\n                                              this.getPostRequestItem\n                                            }\n                                            close={() => {\n                                              this.setState({ selected: null });\n                                            }}\n                                            currentRequests={\n                                              element.head_teacher_post_request ===\n                                              undefined\n                                                ? 0\n                                                : element.head_teacher_post_request ===\n                                                  null\n                                                ? 0\n                                                : parseInt(\n                                                    element.head_teacher_post_request\n                                                  )\n                                            }\n                                            submitRequest={\n                                              this.sendFinalPostRequest\n                                            }\n                                            position={\n                                              this.state.normalSchoolPositions.find(\n                                                (itm) =>\n                                                  itm.position_code ===\n                                                  element.position_code\n                                              )!\n                                            }\n                                          />\n                                        )}\n                                      </td>\n                                    ) : (\n                                      <td\n                                        className={`p-2 border-2 rounded ${\n                                          element.head_teacher_post_request ===\n                                          null\n                                            ? \"group-hover:bg-primary-800 border-primary-800\"\n                                            : \"group-hover:bg-blue-300 border-blue-300\"\n                                        } group-hover:text-black w-12 font-bold  bg-blue-100 hover:bg-blue-300 cursor-pointer text-center`}\n                                        onClick={(e) => {\n                                          this.setState({\n                                            selected: element.position_code,\n                                          });\n                                        }}\n                                      >\n                                        {element.head_teacher_post_request ===\n                                        undefined ? (\n                                          <span className=\"text-gray-400 group-hover:text-yellow-800\">\n                                            0\n                                          </span>\n                                        ) : element.head_teacher_post_request !==\n                                          null ? (\n                                          element.head_teacher_post_request\n                                        ) : (\n                                          <div\n                                            className={`w-full h-full rounded text-center text-blue-800 group-hover:text-white`}\n                                          >\n                                            Request\n                                          </div>\n                                        )}\n                                      </td>\n                                    )}\n\n                                    <td className=\"p-2 text-green-600 border font-bold text-center\">\n                                      {element.dde_post_distribution ===\n                                      undefined ? (\n                                        <span className=\"text-gray-400 group-hover:text-yellow-800\">\n                                          0\n                                        </span>\n                                      ) : element.dde_post_distribution ===\n                                        null ? (\n                                        0\n                                      ) : (\n                                        element.dde_post_distribution\n                                      )}\n                                    </td>\n                                    <td className=\"p-2 border text-center\">\n                                      {totalItemPosts(\n                                        this.state.schoolPositions,\n                                        element\n                                      )}\n                                    </td>\n                                    <td className=\"p-2 border text-center\">\n                                      {vacantPosts(\n                                        this.state.normalSchoolPositions,\n                                        this.state.schoolPositions,\n                                        element\n                                      ) < 0 ? (\n                                        <span className=\"text-sm\"></span>\n                                      ) : (\n                                        vacantPosts(\n                                          this.state.normalSchoolPositions,\n                                          this.state.schoolPositions,\n                                          element\n                                        )\n                                      )}\n                                    </td>\n                                    <td className=\"p-2 border text-center\">\n                                      {element.dde_distribution_comment}\n                                    </td>\n                                  </tr>\n                                </Fragment>\n                              );\n                            })}\n                          </tbody>\n                        </table>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = ({\n  auth,\n  basic,\n}: StoreState): { auth: Auth; basic: Basic } => {\n  return { auth: auth, basic: basic };\n};\n\nexport const HdRequestToDee = connect(mapStateToProps, {\n  FC_GetAllPositions,\n})(_HdRequestToDee);\n"],"sourceRoot":""}