(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[29],{367:function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s(19),a=s(20),i=s(21),o=s(22),c=s(4),r=s.n(c),l=s(13),d=s(47),p=s(23),u=s(53),b=s(139),j=s(93),h=s(39),O=s(26),m=s(5),x=s(17),v=s(1),g={target:null,msg:""},f=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).deleteSetting=function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&(a.setState({selected_id:e.id+"",delete_loading:!0}),Object(l.t)("".concat(a.props.delete_route,"/").concat(e.id),(function(t,s,n){t?a.setState({delete_loading:!1,alert:{target:"MAIN-SUCCESS",msg:"".concat(e.name," deleted successfully.")},data:a.state.data.filter((function(t){return t.id+""!==e.id+""})),selected_id:""}):a.setState({alert:{target:"MAIN-ERROR",msg:"Error: ".concat(n)},delete_loading:!1,selected_id:""})})))},a.state={loading:!0,alert:g,data:[],selected_id:"",delete_loading:!1,search:""},a}return Object(a.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;Object(m.c)(null===(e=this.props.auth.role)||void 0===e?void 0:e.access,this.props.access.view)&&Object(l.pb)("".concat(this.props.route),(function(e,s,n){t.setState({loading:!1,data:e?s:[],alert:e?g:{target:"MAIN-ERROR",msg:"Error: ".concat(n)}})}))}},{key:"cleanAlert",value:function(){var e=this;setTimeout((function(){e.setState({alert:g})}),3e3)}},{key:"render",value:function(){var e,t,s,n=this;if(!Object(m.c)(null===(e=this.props.auth.role)||void 0===e?void 0:e.access,this.props.access.view))return null;var a=this.props,i=a.title,o=a.description,c=a.title_key,r=Object(x.n)(this.state.data,this.state.search,{id:!0,name:!0,description:!0});return Object(v.jsxs)(v.Fragment,{children:["MAIN-ERROR"===this.state.alert.target&&Object(v.jsx)(d.a,{theme:"danger",fixed:!0,children:this.state.alert.msg}),"MAIN-SUCCESS"===this.state.alert.target&&Object(v.jsx)(d.a,{theme:"success",fixed:!0,children:this.state.alert.msg}),Object(v.jsx)(u.a,{children:Object(v.jsxs)("div",{className:"flex items-center",children:[Object(v.jsxs)("div",{className:"py-2 flex-1",children:[Object(v.jsx)(j.a,{size:"lg",children:i}),Object(v.jsx)("p",{className:"text-gray-400",children:o})]}),Object(v.jsx)("div",{className:"",children:this.props.openCreate&&Object(v.jsxs)(p.a,{onClick:this.props.openCreate,children:["Add new ",c]})})]})}),Object(v.jsxs)(u.a,{children:[Object(v.jsxs)("div",{className:"py-2 flex items-center pb-2",children:[Object(v.jsx)(h.a,{onChange:function(e){return n.setState({search:e.target.value})},value:this.state.search,error:"",label:"",placeholder:"Search",name:"",size:"sm"}),Object(v.jsxs)("div",{className:" text-center px-6",children:[Object(v.jsx)("h2",{className:"text-gray-400",children:"Total"}),Object(v.jsx)("h1",{className:"text-blue-600 text-xl font-bold -mt-1",children:this.state.data.length})]}),this.state.data.length>=1&&Object(v.jsx)("div",{className:"",children:Object(v.jsx)(b.a,{fileData:this.state.data,fileName:"Transfer requests candidates",btnName:"Download EXCEL"})})]}),Object(v.jsxs)("table",{className:"w-full border",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"p-2 border w-2",children:"#"}),Object(v.jsx)("th",{className:"p-2 border",children:"Name"}),this.props.intervention_area&&Object(v.jsx)("th",{className:"p-2 border",children:"Intervention Area"}),Object(v.jsx)("th",{className:"p-2 border",children:"Description"}),this.props.update_link&&Object(m.c)(null===(t=this.props.auth.role)||void 0===t?void 0:t.access,this.props.access.update)&&Object(v.jsx)("th",{className:"p-2 border"}),Object(m.c)(null===(s=this.props.auth.role)||void 0===s?void 0:s.access,this.props.access.delete)&&Object(v.jsx)("th",{className:"p-2 border"})]})}),Object(v.jsx)("tbody",{children:this.state.loading?Object(v.jsx)("tr",{children:Object(v.jsx)("td",{className:"text-center py-8",colSpan:30,children:Object(v.jsx)(O.a,{})})}):0===this.state.data.length?Object(v.jsx)("tr",{children:Object(v.jsx)("td",{className:"text-center py-8",colSpan:30,children:Object(v.jsxs)("h2",{className:"text-3xl  text-gray-600",children:["No ",this.props.title_key," found!"]})})}):r.map((function(e,t){var s,a;return Object(v.jsxs)("tr",{className:"hover:bg-blue-50",children:[Object(v.jsx)("td",{className:"p-2 border",children:t+1}),Object(v.jsxs)("td",{className:"p-2 border",children:[Object(v.jsxs)("label",{className:"".concat(n.props.sub_data_list?"text-lg font-bold block":""),children:[e.name," ",n.props.is_mandatory&&Object(v.jsx)(v.Fragment,{children:null!==e&&void 0!==e&&e.is_mandatory?Object(v.jsx)("label",{className:"p-0.5 px-1 rounded-full text-xs text-blue-600 bg-blue-100",children:"Mandatory"}):null}),e.status?0===(null===e||void 0===e?void 0:e.status)&&Object(v.jsx)("label",{className:"p-0.5 px-1 rounded-full text-xs text-red-600 bg-red-100",children:"Disabled"}):null]}),n.props.sub_data_list&&Object(v.jsx)("p",{className:"text-gray-500",children:null===e||void 0===e?void 0:e.description})]}),n.props.intervention_area&&Object(v.jsx)("td",{className:"p-2 border",children:null===e||void 0===e?void 0:e.intervention_area}),Object(v.jsx)("td",{className:"p-2 border",children:n.props.sub_data_list?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("ul",{children:null===e||void 0===e||null===(s=e.tags_list)||void 0===s?void 0:s.map((function(e){return Object(v.jsx)("li",{children:e.name},e.id)}))})}):null===e||void 0===e?void 0:e.description}),n.props.openUpdate&&Object(v.jsx)("td",{className:"p-1 border w-3",children:Object(v.jsx)(p.a,{onClick:n.props.openUpdate.bind(n,e.id+""),theme:"primary-light",size:"sm",children:"Update"})}),Object(m.c)(null===(a=n.props.auth.role)||void 0===a?void 0:a.access,n.props.access.delete)&&Object(v.jsx)("td",{className:"p-1 border w-3",children:Object(v.jsx)(p.a,{theme:"danger-light",size:"sm",disabled:n.state.delete_loading,loading:!(!n.state.delete_loading||n.state.selected_id+""!==e.id+""),onClick:n.deleteSetting.bind(n,e),children:"Delete"})})]},t)}))})]})]})]})}}]),s}(r.a.Component)},368:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s(19),a=s(20),i=s(21),o=s(22),c=s(4),r=s(24),l=s(142),d=s(1),p=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){return Object(d.jsx)(r.c,{backDrop:!0,theme:r.b.default,close:this.props.onClose,backDropClose:!0,widthSizeClass:r.a.large,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:Object(d.jsx)(l.a,{component_type:this.props.route_name,onCloseModal:this.props.onClose,onSubmit:this.props.onSubmit,isModal:!0})})}}]),s}(c.Component)},369:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s(19),a=s(20),i=s(21),o=s(22),c=s(4),r=s(24),l=s(63),d=s(26),p=s(32),u=s(142),b=s(1),j=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).GetDetailsToUpdate=function(){a.setState({loading:!0}),null!==Object(p.GetComponentType)(a.props.component_type)&&Object(l.d)(Object(p.GetComponentType)(a.props.component_type).key,a.props.id,(function(e,t){a.setState({loading:e}),null!==t&&"success"===t.status&&a.setState({loading:!1,editData:t.data})}))},a.FC_GetAreasIntervention=function(){a.setState({loading:!0}),Object(l.b)((function(e,t){a.setState({loading:e}),!1===e&&null!==t&&t.data.length>0&&a.setState({areas_of_intervention:t.data,loading:!1})}))},a.state={loading:!1,editData:null,areas_of_intervention:null},a}return Object(a.a)(s,[{key:"componentDidMount",value:function(){this.GetDetailsToUpdate(),null===Object(p.GetComponentType)(this.props.component_type)||Object(p.GetComponentType)(this.props.component_type).key!==p.SettingsRouteType.subarea&&Object(p.GetComponentType)(this.props.component_type).key!==p.SettingsRouteType.topic||this.FC_GetAreasIntervention()}},{key:"render",value:function(){return null===this.state.editData||!0===this.state.loading||null===this.state.areas_of_intervention&&null!==Object(p.GetComponentType)(this.props.component_type)&&(Object(p.GetComponentType)(this.props.component_type).key===p.SettingsRouteType.subarea||Object(p.GetComponentType)(this.props.component_type).key===p.SettingsRouteType.topic)?Object(b.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white rounded p-4",children:[Object(b.jsx)(d.a,{}),Object(b.jsx)("div",{children:"Loading, please wait..."})]}):Object(b.jsx)("div",{children:null!==Object(p.GetComponentType)(this.props.component_type)&&Object(b.jsx)(u.a,{component_type:this.props.component_type,update_data:this.state.editData,onSubmit:this.props.onSubmit,isModal:this.props.isModal,onCloseModal:this.props.onCloseModal,areas:null===this.state.areas_of_intervention?[]:this.state.areas_of_intervention})})}}]),s}(c.Component),h=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){return Object(b.jsx)(r.c,{backDrop:!0,theme:r.b.default,close:this.props.onClose,backDropClose:!0,widthSizeClass:r.a.large,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:Object(b.jsx)(j,{onSubmit:this.props.onSubmit,component_type:this.props.route_name,id:this.props.id,isModal:!0,onCloseModal:this.props.onClose})})}}]),s}(c.Component)},596:function(e,t,s){"use strict";s.r(t),s.d(t,"TopicsList",(function(){return b}));var n=s(27),a=s(4),i=s(36),o=s(13),c=s(5),r=s(367),l=s(32),d=s(368),p=s(369),u=s(1),b=Object(i.b)((function(e){return{auth:e.auth}}),{})((function(e){var t=e.auth,s=Object(a.useState)(!1),i=Object(n.a)(s,2),b=i[0],j=i[1],h=Object(a.useState)(null),O=Object(n.a)(h,2),m=O[0],x=O[1];return console.log(t),!0===b?Object(u.jsx)(d.a,{onClose:function(){j(!1),x(null)},onSubmit:function(){j(!1),x(null)},route_name:l.SettingsRouteType.topic}):null!==m?Object(u.jsx)(p.a,{onClose:function(){j(!1),x(null)},onSubmit:function(){j(!1),x(null)},route_name:l.SettingsRouteType.topic,id:m}):Object(u.jsx)(r.a,{auth:t,description:"Topics list in TMIS",route:o.Dc,title:"Topics settings",title_key:"topic",create_link:"/training/settings/create",update_link:"/training/settings/update",delete_route:o.Cc,sub_data_list:{key:"tags",title:"Sub areas"},access:{create:c.b.CREATE_TOPIC,update:c.b.UPDATE_TOPIC,delete:c.b.TRNG_TOPICS_DELETE,view:c.b.TRNG_TOPICS_VIEW},openCreate:j.bind(undefined,!0),openUpdate:function(e){return x(e)}})}))}}]);
//# sourceMappingURL=29.dcf88910.chunk.js.map