(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[35],{106:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r}));var s,c,r,n=a(12),i=a(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(s||(s={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(c||(c={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(r||(r={}));t.c=function(e){var t,a=e.title,l=e.backDrop,d=e.theme,o=e.close,j=e.backDropClose,x=e.widthSizeClass,b=e.displayClose,h=e.padding,m=void 0===h?{title:!0,body:!0,footer:!0}:h;switch(d){case s.primary:t="blue-primary";break;case s.secondary:t="gray-300";break;case s.danger:t="red-500";break;case s.success:t="green-500";break;case s.warning:t="yellow-500";break;default:t="white"}return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{onClick:function(){return j&&o()},className:"fixed bg-black bg-opacity-".concat(!0===l?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(i.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?c.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(x," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==c.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(x===r.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(i.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===m.title?"py-4 px-4":""," rounded-t text-").concat(d===s.default||d===s.secondary?"black":"white"),children:[a&&""!==a?Object(i.jsx)("h4",{className:"text-lg font-bold ",children:a}):Object(i.jsx)("div",{}),!1===b?"":Object(i.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(i.jsx)(n.i,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return o()}})})]}),Object(i.jsx)("div",{className:"space-x-3 ".concat(!0===m.body?"py-4 px-4":""),children:Object(i.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(i.jsx)("div",{className:"flex float-right ".concat(!0===m.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},171:function(e,t,a){"use strict";a.r(t),a.d(t,"TransferApproval",(function(){return I}));var s,c=a(4),r=a(6),n=a(28),i=a(29),l=a(30),d=a(31),o=a(3),j=a.n(o),x=a(2),b=a(12),h=a(16),m=a(32),p=a(18),u=a(144),f=a(5),O=a.n(f),g=a(42),v=a(13),N=a(9),y=a(1);!function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.CANCELED="CANCELED"}(s||(s={}));var _=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).GetTransferRequestsDetailsList=function(){var e=Object(r.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({loading:!0}),e.prev=1,e.next=4,O.a.get("".concat(v.c,"/teachertransfer/districtDetails/").concat(t));case 4:200===(a=e.sent).status&&(s.setState({data:a.data,loading:!1}),console.log("Res: ",a.data)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: ",Object(c.a)({},e.t0)),alert(Object(N.a)(e.t0)),s.setState({data:[],loading:!1});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),s.componentDidMount=function(){s.GetTransferRequestsDetailsList(s.props.transferDetails.district_code)},s.state={loading:!1,searchData:"",data:null},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return null===this.state.data||!0===this.state.loading?Object(y.jsx)(m.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center p-3",children:[Object(y.jsx)(g.a,{}),Object(y.jsx)("div",{className:"",children:"Loading, please wait..."})]})}):Object(y.jsxs)(m.a,{children:[Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(y.jsxs)("div",{onClick:this.props.backToApproval,className:"flex flex-row items-center gap-2 bg-blue-100 text-primary-800 hover:text-white hover:bg-primary-800 rounded cursor-pointer px-3 py-2 font-bold",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.s,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Back to list"})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"text-2xl font-light -mb-1 text-gray-700",children:"Transfer requests details"}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"font-extrabold text-black text-lg ml-1 flex items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"",children:Object(y.jsx)(b.S,{className:"text-2xl"})})}),Object(y.jsxs)("span",{children:[this.props.transferDetails.district_name," district"]})]})})]})]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("table",{className:"w-full mt-5",children:[Object(y.jsx)("thead",{className:"bg-blue-100 text-primary-800 text-left text-sm",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Full name"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Qualification"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Position"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Phone number"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Current district"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Current school"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Requested school"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Accepted school"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"Status"})]})}),Object(y.jsxs)("tbody",{children:[Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:10,children:Object(y.jsx)("input",{onChange:function(t){return e.setState({searchData:t.target.value})},placeholder:"Search by name",className:"border border-gray-400 px-3 py-2 rounded w-full my-1"})})}),0===Object(p.g)(this.state.data,this.state.searchData).length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:10,className:"",children:Object(y.jsx)("div",{className:"bg-gray-100 rounded-md p-5 text-2xl font-light text-center",children:"No requests found!"})})}):Object(p.g)(this.state.data,this.state.searchData).map((function(e,t){var a,c,r,n;return Object(y.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":""," hover:bg-blue-50 group text-sm"),children:[Object(y.jsx)("td",{className:"px-3 py-2",children:t+1}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.teacher_full_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.qualification_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.position_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.teacher_phone_number}),Object(y.jsx)("td",{className:"px-3 py-2",children:null===(a=e.school_from_info)||void 0===a?void 0:a.district_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:null===(c=e.school_from_info)||void 0===c?void 0:c.school_name}),Object(y.jsx)("td",{className:"px-3 py-2",children:null===(r=e.requested_school_info)||void 0===r?void 0:r.school_name}),Object(y.jsx)("td",{children:null===(n=e.approved_school_info)||void 0===n?void 0:n.school_name}),Object(y.jsx)("td",{children:e.requested_status===s.PENDING?"Waiting":e.requested_status})]},t+1)}))]})]})})]})}}]),a}(x.Component),w=a(106),k=a(128),D=function(e){return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"bg-gray-800 flex flex-row items-center justify-between px-3 py-2 mb-1  animate__animated animate__fadeIn",children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{className:"bg-gray-500 rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(y.jsx)("div",{children:e.district_detail.district_name})]}),Object(y.jsx)("div",{children:Object(y.jsx)(b.D,{className:"text-xl animate-pulse text-gray-400"})})]})})},T=a(142),C=a.n(T),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={loading:!1,chartData:{options:{chart:{id:"basic-bar"},xaxis:{categories:[1991,1992,1993,1994,1995,1996,213,34,324,213]}},series:[{name:"series-1",data:[1,2,4,1,8,3,5,7,9,5]}]}},s}return Object(i.a)(a,[{key:"render",value:function(){return Object(y.jsx)(x.Fragment,{children:Object(y.jsxs)("div",{className:"h-screen bg-white fixed z-40 left-0 right-0 animate__animated animate__fadeIn",children:[Object(y.jsx)("div",{className:"bg-primary-800 text-white fixed top-18 left-0 right-0 w-full z-50",children:Object(y.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(y.jsxs)("div",{className:"px-3 py-2 flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(k.b,{className:"text-5xl -mt-1 animate__animated animate__flash"})}),Object(y.jsx)("div",{className:"text-2xl font-extrabold",children:"Transfer runner"})]}),Object(y.jsx)("div",{className:"px-2",children:Object(y.jsx)("div",{className:"bg-green-600 hover:bg-green-800 rounded-md font-bold px-3 py-2 cursor-pointer border border-white",children:"Reload process"})})]})}),Object(y.jsxs)("div",{className:"bg-black h-full overflow-y-auto text-white pt-12 grid grid-cols-12",children:[Object(y.jsx)("div",{className:"col-span-3 w-full h-full bg-gray-700 pt-3",children:this.props.districts_requests.map((function(e,t){return Object(y.jsx)(D,{index:t+1,district_detail:e},t)}))}),Object(y.jsxs)("div",{className:"col-span-9 pt-6 pl-3",children:[Object(y.jsxs)("div",{className:"flex flex-row w-full",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{}),Object(y.jsx)("div",{className:"font-extrabold text-lg text-gray-400 mx-2",children:"Placement progress"}),Object(y.jsxs)("div",{className:"bg-gray-800 h-52 border border-gray-700 rounded-md p-3 px-4 text-sm text-green-300 overflow-hidden cursor-not-allowed flex items-center justify-center gap-3  animate__animated animate__zoomIn",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:Object(y.jsx)(k.b,{className:"text-9xl text-gray-200 animate__animated animate__flash"})}),Object(y.jsxs)("div",{className:"flex flex-row items-center justify-center text-gray-400",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)(b.B,{className:"text-xl animate-spin"})}),Object(y.jsx)("div",{children:"23 mins remaining"})]})]}),Object(y.jsxs)("div",{className:"flex flex-col text-xs font-extralight",children:[Object(y.jsx)("span",{children:"Initializing process ..."}),Object(y.jsx)("span",{children:"Placing process ..."}),Object(y.jsx)("span",{children:"Placing process, tasking ..."}),Object(y.jsx)("span",{children:"Placing process ..."}),Object(y.jsx)("span",{children:"Placing process ..."}),Object(y.jsx)("span",{children:"Placing process, waiting ..."})]})]})]}),Object(y.jsx)("div",{className:"pt-8 pl-3",children:Object(y.jsxs)("div",{className:"flex flex-row items-center gap-3 mb-3",children:[Object(y.jsxs)("div",{className:"bg-gray-600 rounded-md p-3 animate__animated animate__zoomIn",children:[Object(y.jsx)("div",{children:"Waiting"}),Object(y.jsx)("div",{className:"text-4xl font-extrabold",children:"2,900"})]}),Object(y.jsxs)("div",{className:"bg-green-800 rounded-md p-3 w-1/2 animate__animated animate__zoomIn",children:[Object(y.jsx)("div",{children:"Approved"}),Object(y.jsx)("div",{className:"text-4xl font-extrabold",children:"2,900"})]}),Object(y.jsxs)("div",{className:"bg-red-800 rounded-md p-3 w-1/2 animate__animated animate__zoomIn",children:[Object(y.jsx)("div",{children:"Rejected"}),Object(y.jsx)("div",{className:"text-4xl font-extrabold",children:"2,900"})]})]})})]}),Object(y.jsx)("div",{className:"mr-2",children:Object(y.jsx)("div",{className:"h-4 w-full bg-gray-600 mt-2 rounded-full  animate__animated animate__fadeIn",children:Object(y.jsx)("div",{className:"bg-yellow-400 h-4 rounded-full",style:{width:"70%"}})})}),Object(y.jsx)("div",{className:"mt-3",children:Object(y.jsx)("div",{className:"px-3 mr-2 rounded-md bg-gray-800",children:Object(y.jsx)(C.a,{options:this.state.chartData.options,series:this.state.chartData.series,type:"line",width:"100%"})})})]})]})]})})}}]),a}(x.Component),q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).GetTransferRequests=Object(r.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({loading:!0}),e.prev=1,e.next=4,O.a.get("".concat(v.c,"/teachertransfers/districtcount"));case 4:200===(t=e.sent).status&&s.setState({data:t.data,loading:!1}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: ",Object(c.a)({},e.t0)),alert(Object(N.a)(e.t0)),s.setState({data:[],loading:!1});case 13:case"end":return e.stop()}}),e,null,[[1,8]])}))),s.componentDidMount=function(){null===s.state.data&&s.GetTransferRequests()},s.state={loading:!1,viewTransferDetails:null,confirm_run_algorithm:!1,run_algorithm_page:!1,data:null},s}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this;return null===this.state.data||!0===this.state.loading?Object(y.jsx)(m.a,{children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center p-3",children:[Object(y.jsx)(g.a,{}),Object(y.jsx)("div",{className:"",children:"Loading, please wait..."})]})}):!0===this.state.run_algorithm_page?Object(y.jsx)(S,{districts_requests:this.state.data}):null===this.state.viewTransferDetails?Object(y.jsxs)(x.Fragment,{children:[Object(y.jsxs)(m.a,{children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-4 justify-between",children:[Object(y.jsxs)("div",{className:"w-max",children:[Object(y.jsx)("div",{className:"text-3xl font-extrabold",children:"Transfer approval"}),Object(y.jsxs)("div",{className:"font-extrabold text-primary-800",children:["Academic year:"," ",null===(e=this.props.basic.academic_calender)||void 0===e?void 0:e.academic_year_name]})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.k,{})}),Object(y.jsx)("span",{children:"Transfer start date: "}),Object(y.jsx)("span",{children:this.props.basic.academic_calender&&Object(p.a)(this.props.basic.academic_calender.transfer_request_start)})]}),Object(y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.k,{})}),Object(y.jsx)("span",{children:"Transfer ending date: "}),Object(y.jsx)("span",{children:this.props.basic.academic_calender&&Object(p.a)(this.props.basic.academic_calender.transfer_request_end)})]})]})]}),Object(y.jsxs)("div",{className:"border-t border-gray-400 my-5 flex flex-row items-center gap-3 justify-between py-2",children:[Object(y.jsx)("div",{className:"text-2xl font-light",children:"Transfer requests"}),Object(y.jsxs)("div",{onClick:function(){return t.setState({confirm_run_algorithm:!0})},className:"bg-blue-500 hover:bg-primary-800 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max",children:[Object(y.jsx)("div",{children:Object(y.jsx)(u.a,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Run transfer algorithm"})]})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("table",{className:"w-full",children:[Object(y.jsx)("thead",{className:"bg-blue-100 text-primary-800 text-left",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"District code"}),Object(y.jsx)("th",{className:"px-3 py-2",children:"District name"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Approved"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Rejected"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Waiting"}),Object(y.jsx)("th",{className:"px-3 py-2 text-center",children:"Total"}),Object(y.jsx)("th",{className:"px-3 py-2 text-right"})]})}),Object(y.jsx)("tbody",{children:0===this.state.data.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:8,className:"",children:Object(y.jsx)("div",{className:"bg-gray-100 rounded-md p-5 text-2xl font-light text-center my-2",children:"No requests found!"})})}):this.state.data.map((function(e,a){return Object(y.jsxs)("tr",{className:"".concat(a%2!==0?"bg-gray-100":""," hover:bg-blue-50 group"),children:[Object(y.jsx)("td",{className:"px-3 py-2",children:a+1}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.district_code}),Object(y.jsx)("td",{className:"px-3 py-2",children:e.district_name}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_approved}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_rejected}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_pending}),Object(y.jsx)("td",{className:"px-3 py-2 text-center",children:parseInt(e.total_requested_approved)+parseInt(e.total_requested_rejected)+parseInt(e.total_requested_pending)}),Object(y.jsx)("td",{className:"py-2",children:Object(y.jsx)("div",{className:"w-full flex justify-end",children:Object(y.jsx)("div",{onClick:function(){return t.setState({viewTransferDetails:e})},className:"".concat(a%2!==0?"bg-white":"bg-gray-100"," group-hover:bg-blue-100 group-hover:text-primary-800 px-2 py-1 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max"),children:"Details"})})})]},a+1)}))})]})})]}),!0===this.state.confirm_run_algorithm&&Object(y.jsx)(w.c,{backDrop:!0,theme:w.b.default,close:function(){return t.setState({confirm_run_algorithm:!1})},backDropClose:!0,widthSizeClass:w.a.medium,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:Object(y.jsx)("div",{className:"p-5 py-6",children:Object(y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[Object(y.jsx)("div",{className:"text-accent-900 mt-3",children:Object(y.jsx)(k.b,{className:"text-8xl animate-bounce"})}),Object(y.jsx)("div",{className:"text-3xl font-extrabold animate__animated animate__fadeIn",children:"Start transfer"}),Object(y.jsx)("div",{className:"text-center my-2 mb-5",children:"If you start the process, the robotra will start placing at all districts at time. Please make sure you have stable internet so that the action can not be interrupted"}),Object(y.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[Object(y.jsxs)("div",{onClick:function(){return t.setState({confirm_run_algorithm:!1})},className:"bg-gray-200 hover:bg-gray-600 text-black hover:text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max",children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.G,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Cancel"})]}),Object(y.jsxs)("div",{onClick:function(){return t.setState({run_algorithm_page:!0})},className:"bg-blue-500 hover:bg-primary-800 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max animate__animated animate__fadeIn",children:[Object(y.jsx)("div",{children:Object(y.jsx)(u.a,{className:"text-2xl"})}),Object(y.jsx)("span",{children:"Yes, start"})]})]})]})})})]}):Object(y.jsx)(_,{transferDetails:this.state.viewTransferDetails,backToApproval:function(){t.setState({viewTransferDetails:null})}})}}]),a}(x.Component),I=Object(h.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(q)}}]);
//# sourceMappingURL=35.0cdec7e3.chunk.js.map