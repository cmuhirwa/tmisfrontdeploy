(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[28],{105:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return a}));var c,s,a,n=r(11),l=r(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(c||(c={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(s||(s={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(a||(a={}));t.c=function(e){var t,r=e.title,o=e.backDrop,i=e.theme,d=e.close,b=e.backDropClose,h=e.widthSizeClass,u=e.displayClose,j=e.padding,m=void 0===j?{title:!0,body:!0,footer:!0}:j;switch(i){case c.primary:t="blue-primary";break;case c.secondary:t="gray-300";break;case c.danger:t="red-500";break;case c.success:t="green-500";break;case c.warning:t="yellow-500";break;default:t="white"}return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{onClick:function(){return b&&d()},className:"fixed bg-black bg-opacity-".concat(!0===o?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(l.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?s.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(h," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==s.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(h===a.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(l.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===m.title?"py-4 px-4":""," rounded-t text-").concat(i===c.default||i===c.secondary?"black":"white"),children:[r&&""!==r?Object(l.jsx)("h4",{className:"text-lg font-bold ",children:r}):Object(l.jsx)("div",{}),!1===u?"":Object(l.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(l.jsx)(n.h,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(l.jsx)("div",{className:"space-x-3 ".concat(!0===m.body?"py-4 px-4":""),children:Object(l.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(l.jsx)("div",{className:"flex float-right ".concat(!0===m.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},132:function(e,t,r){"use strict";r.r(t),r.d(t,"FilteredData",(function(){return I})),r.d(t,"SubjectsList",(function(){return D}));var c=r(26),s=r(27),a=r(28),n=r(29),l=r(2),o=r(111),i=r(37),d=r(11),b=r(12),h=r(18),u=r(48),j=r(16),m=r(30),x=r(10),p=r(105),f=r(4),O=r(6),y=r(20),v=r(3),g=r.n(v),_=r(5),N=r.n(_),w=r(13),S=r(8),C=r(9),k=r(1);function H(e){var t=Object(l.useState)(e.data.course_code),r=Object(y.a)(t,2),c=r[0],s=r[1],a=Object(l.useState)(e.data.course_name),n=Object(y.a)(a,2),o=n[0],i=n[1],d=Object(l.useState)(e.data.teaching_period),b=Object(y.a)(d,2),h=b[0],u=b[1],j=Object(l.useState)(""),m=Object(y.a)(j,2),x=m[0],p=m[1],v=Object(l.useState)(!1),_=Object(y.a)(v,2),H=_[0],I=_[1],A=Object(l.useState)(null),D=Object(y.a)(A,2),T=D[0],F=D[1],z=function(){var t=Object(O.a)(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),F(null),""!==c){t.next=4;break}return t.abrupt("return",F({element:"course_code",msg:"Please fill course code"}));case 4:if(""!==o){t.next=6;break}return t.abrupt("return",F({element:"course_name",msg:"Please fill course name"}));case 6:if(""!==h){t.next=8;break}return t.abrupt("return",F({element:"periods",msg:"Please fill teaching periods"}));case 8:return I(!0),Object(S.a)(),t.prev=10,t.next=13,N.a.post("".concat(w.c,"/hierarch/upperiod"),{studyhierarchyid:e.data.studyhierarchyid,course_code:c,course_name:o,teaching_period:parseInt(h)});case 13:200===t.sent.status&&(e.reload(),I(!1),p("Subject updated successfully!")),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(10),console.log("Erro: ",Object(f.a)({},t.t0)),F({element:"main",msg:Object(C.a)(t.t0)}),I(!1);case 22:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"py-3",children:[Object(k.jsxs)("div",{className:"bg-blue-100 rounded p-3 flex flex-col gap-2 mb-3",children:[Object(k.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(k.jsx)("span",{className:"text-gray-800",children:"School level:"}),Object(k.jsxs)("span",{className:"text-primary-800 font-bold",children:["(",e.data.level_code,") ",e.data.level_name]})]}),Object(k.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(k.jsx)("span",{className:"text-gray-800",children:"Combination:"}),Object(k.jsxs)("span",{className:"text-primary-800 font-bold",children:["(",e.data.combination_code,") ",e.data.combination_name]})]}),Object(k.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(k.jsx)("span",{className:"text-gray-800",children:"Grade:"}),Object(k.jsxs)("span",{className:"text-primary-800 font-bold",children:["(",e.data.grade_code,") ",e.data.grade_name]})]})]}),Object(k.jsxs)("form",{onSubmit:z,children:[Object(k.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(k.jsx)("span",{children:"Course code"}),Object(k.jsx)("input",{type:"text",value:c,onChange:function(e){s(e.target.value)},className:"border ".concat(null!==T&&"course_code"===T.element?"border-red-600":"border-gray-300"," px-3 py-2 w-full rounded"),placeholder:"Fill course code",disabled:H}),null!==T&&"course_code"===T.element&&Object(k.jsx)("div",{className:"text-red-600 font-bold text-base",children:T.msg})]}),Object(k.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(k.jsx)("span",{children:"Course name"}),Object(k.jsx)("input",{type:"text",value:o,onChange:function(e){i(e.target.value)},className:"border ".concat(null!==T&&"course_name"===T.element?"border-red-600":"border-gray-300"," px-3 py-2 w-full rounded"),placeholder:"Fill course name",disabled:H}),null!==T&&"course_name"===T.element&&Object(k.jsx)("div",{className:"text-red-600 font-bold text-base",children:T.msg})]}),Object(k.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(k.jsx)("span",{children:"Periods"}),Object(k.jsx)("input",{type:"number",value:h,onChange:function(e){u(e.target.value)},className:"border ".concat(null!==T&&"periods"===T.element?"border-red-600":"border-gray-300"," px-3 py-2 w-full rounded"),placeholder:"Fill number of periods",disabled:H}),null!==T&&"periods"===T.element&&Object(k.jsx)("div",{className:"text-red-600 font-bold text-base",children:T.msg})]}),null!==T&&"main"===T.element&&Object(k.jsx)("div",{onClick:function(){return F(null)},className:"cursor-pointer text-red-600 font-bold text-base bg-red-100 rounded px-3 py-2",children:T.msg}),""!==x&&Object(k.jsx)("div",{onClick:function(){return p("")},className:"cursor-pointer text-green-600 font-bold text-base bg-green-100 rounded px-3 py-2",children:x}),Object(k.jsxs)("div",{className:"flex flex-row justify-between items-center gap-3 mb-3 mt-3",children:[Object(k.jsx)("div",{}),Object(k.jsx)("button",{type:"submit",className:"flex items-center justify-center px-3 py-2 rounded cursor-pointer bg-primary-800 text-white font-bold hover:bg-blue-500",disabled:H,children:"Update subject"})]})]})]})}var I=function(e,t,r){var c=e;return null!==c?(null!==t&&""!==t&&(c=c.filter((function(e){return e.level_code===t}))),null!==r&&(c=c.filter((function(e){return e.combination_code===r}))),c):[]},A=function(e){Object(a.a)(r,e);var t=Object(n.a)(r);function r(e){var s;return Object(c.a)(this,r),(s=t.call(this,e)).componentDidMount=function(){null===s.props.schoolHierarchyStore.hierarchy&&(s.setState({loading:!0}),s.props.FC_AllSchoolHierarchyDetails((function(e,t){!0===e&&s.setState({loading:!1})})))},s.state={selected_level_code:null,filter_by_combination:!1,selected_combination_code:null,search_comb:"",addedSubjects:[],loading:!1,success:"",error:"",ediSubject:null},s}return Object(s.a)(r,[{key:"render",value:function(){var e,t,r=this;return Object(k.jsxs)(l.Fragment,{children:[Object(k.jsx)(m.a,{children:Object(k.jsxs)("div",{className:"bg-white rounded-md z-50 w-full h-full overflow-auto",children:[Object(k.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 py-2 border-b border-gray-400",children:[Object(k.jsxs)("div",{className:"text-xl font-bold ml-2 uppercase mt-2",children:["List of subjects (",null===(e=this.props.schoolHierarchyStore.hierarchy)||void 0===e?void 0:e.length,")"]}),Object(k.jsxs)(x.b,{to:"/hierarchy-add-subject",className:"flex items-center justify-center py-2 px-3 rounded bg-gray-100 text-2xl hover:bg-blue-100 hover:text-primary-800 cursor-pointer",title:"Close window",children:[Object(k.jsx)(d.b,{}),Object(k.jsx)("span",{className:"text-base",children:"Add subject"})]})]}),Object(k.jsx)("div",{className:"",children:Object(k.jsx)("div",{className:"",children:Object(k.jsx)("div",{className:"mb-10",children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"mb-5",children:Object(k.jsxs)("div",{className:"mt-4",children:[Object(k.jsx)("div",{children:"Filter by"}),Object(k.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(k.jsxs)("select",{onChange:function(e){return r.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(k.jsx)("option",{value:"",children:"Choose education level"}),Object(k.jsx)("option",{value:"",children:"Show all levels"}),this.props.schoolHierarchyStore.hierarchy&&Object(b.A)(this.props.schoolHierarchyStore.hierarchy,{type:b.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(k.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{onClick:function(){return r.setState({filter_by_combination:!r.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(k.jsx)("span",{children:"All- Click to filter by combination"}):Object(k.jsx)("span",{children:this.props.schoolHierarchyStore.hierarchy&&(null===(t=Object(b.A)(this.props.schoolHierarchyStore.hierarchy,{type:b.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===r.state.selected_combination_code})))||void 0===t?void 0:t.combination_name)}),Object(k.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(k.jsx)(d.h,{}):Object(k.jsx)(i.a,{})})]}),!0===this.state.filter_by_combination&&Object(k.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(k.jsx)("input",{value:this.state.search_comb,onChange:function(e){return r.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(k.jsx)("div",{children:Object(k.jsx)("div",{onClick:function(){return r.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(k.jsx)(d.h,{})})})]}),null!==this.state.selected_combination_code&&Object(k.jsxs)("div",{onClick:function(){r.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(k.jsx)("div",{children:Object(k.jsx)(o.a,{className:"text-xl"})}),Object(k.jsx)("span",{children:"Click to view all"})]})]}),Object(k.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(h.f)(this.props.schoolHierarchyStore.hierarchy&&Object(b.A)(this.props.schoolHierarchyStore.hierarchy,{type:b.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(k.jsx)("div",{className:"text-center text-lg font-bold p-5 px-10 text-gray-500",children:"No result found!"}):this.props.schoolHierarchyStore.hierarchy&&Object(h.f)(Object(b.A)(this.props.schoolHierarchyStore.hierarchy,{type:b.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,t){return Object(k.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(r.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){r.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(k.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]})]})]})}),Object(k.jsx)("div",{className:"bg-white rounded border border-gray-200",children:Object(k.jsx)("div",{className:"w-full overflow-x-auto",children:Object(k.jsxs)("table",{className:"min-w-full text-left",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(k.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(k.jsx)("tbody",{className:"text-sm",children:null===this.props.schoolHierarchyStore.hierarchy?Object(k.jsx)("tr",{children:Object(k.jsx)("td",{colSpan:7,children:Object(k.jsx)("div",{className:"flex w-full items-center justify-center py-3",children:Object(k.jsx)(u.a,{})})})}):0===I(this.props.schoolHierarchyStore.hierarchy,this.state.selected_level_code,this.state.selected_combination_code).length?Object(k.jsx)("td",{colSpan:7,children:Object(k.jsx)("div",{className:"text-lg p-3 text-center",children:"No result found"})}):I(this.props.schoolHierarchyStore.hierarchy,this.state.selected_level_code,this.state.selected_combination_code).map((function(e,t){return Object(k.jsxs)("tr",{className:"text-gray-500 group",children:[Object(k.jsx)("td",{className:"p-2 border-b text-center",children:t+1}),Object(k.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(k.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(k.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(k.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(k.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(k.jsx)("td",{className:"p-2 border-b",children:Object(k.jsx)("div",{className:"flex flex-row items-center justify-end",children:Object(k.jsx)("div",{onClick:function(){return r.setState({ediSubject:e})},className:"px-3 py-1 rounded bg-blue-100 group-hover:bg-primary-800 cursor-pointer text-black font-bold group-hover:text-white",children:"Edit"})})})]},t+1)}))})]})})})]})})})})]})}),null!==this.state.ediSubject&&Object(k.jsx)(p.c,{title:"Update subject",backDrop:!0,theme:p.b.default,close:function(){return r.setState({ediSubject:null})},backDropClose:!0,widthSizeClass:p.a.medium,displayClose:!0,padding:{title:!0,body:!1},children:Object(k.jsx)("div",{className:"border-t border-gray-400 px-3",children:Object(k.jsx)(H,{data:this.state.ediSubject,reload:function(){r.setState({loading:!0}),r.props.FC_AllSchoolHierarchyDetails((function(e,t){!0===e&&r.setState({loading:!1})}))}})})})]})}}]),r}(l.Component),D=Object(j.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_AllSchoolHierarchyDetails:b.c})(A)}}]);
//# sourceMappingURL=28.65fe5f88.chunk.js.map