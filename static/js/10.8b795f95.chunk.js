(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[10,6,13],{104:function(e,t,s){"use strict";s(2);var a=s(49),r=s(1);t.a=function(e){var t=e.onChange,s=e.value,i=e.error,c=e.label,o=e.placeholder,n=e.disabled,l=void 0!==n&&n,d=e.name,h=e.Input_className,u=void 0===h?"":h,m=e.Label_className,b=void 0===m?"":m,j=e.InputContainer_className,p=void 0===j?"":j,x=e.MainContainer_className,f=void 0===x?"":x,_=e.size,g=void 0===_?"md":_,O=e.data;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"w-full my-2 ".concat(f),children:[Object(r.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(b),children:c}),Object(r.jsxs)("div",{className:"rounded relative ".concat(p),children:[Object(r.jsx)("select",{name:d,placeholder:o,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(a.a)(g),"\n                     ").concat(""!==i?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(u),value:s,disabled:l,children:O.map((function(e,t){return Object(r.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==i&&Object(r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:i})]})]})})}},105:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var a,r,i,c=s(11),o=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(a||(a={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(r||(r={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(i||(i={}));t.c=function(e){var t,s=e.title,n=e.backDrop,l=e.theme,d=e.close,h=e.backDropClose,u=e.widthSizeClass,m=e.displayClose,b=e.padding,j=void 0===b?{title:!0,body:!0,footer:!0}:b;switch(l){case a.primary:t="blue-primary";break;case a.secondary:t="gray-300";break;case a.danger:t="red-500";break;case a.success:t="green-500";break;case a.warning:t="yellow-500";break;default:t="white"}return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{onClick:function(){return h&&d()},className:"fixed bg-black bg-opacity-".concat(!0===n?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(o.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?r.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(u," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==r.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(u===i.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(o.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===j.title?"py-4 px-4":""," rounded-t text-").concat(l===a.default||l===a.secondary?"black":"white"),children:[s&&""!==s?Object(o.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(o.jsx)("div",{}),!1===m?"":Object(o.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(o.jsx)(c.h,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(o.jsx)("div",{className:"space-x-3 ".concat(!0===j.body?"py-4 px-4":""),children:Object(o.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(o.jsx)("div",{className:"flex float-right ".concat(!0===j.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},106:function(e,t,s){"use strict";var a=s(50),r=s(20),i=s(2),c=s(11),o=s(18),n=s(48),l=s(1);t.a=function(e){var t=e.loading,s=(e.id,e.title),d=e.close,h=e.data,u=e.click,m=Object(i.useState)(""),b=Object(r.a)(m,2),j=b[0],p=b[1],x=Object(o.f)(h,j,Object(a.a)({},s,!0));return Object(l.jsxs)("div",{className:" bg-gray-100 shadow-lg border-gray-500 border-2 h-64 rounded-md flex flex-col",children:[Object(l.jsxs)("div",{className:"p-1 bg-white rounded flex items-center",children:[Object(l.jsx)("label",{htmlFor:"search-input-data",children:Object(l.jsx)(c.F,{className:"text-2xl"})}),Object(l.jsx)("input",{type:"search",className:"py-1 px-1 flex-1",placeholder:"Search",value:j,id:"search-input-data",onChange:function(e){return p(e.target.value)}}),!1===t&&Object(l.jsx)("button",{onClick:function(){return d()},className:"px-2 py-0.5 rounded text-sm ml-3 bg-red-200 text-red-800",children:"Cancel"})]}),Object(l.jsx)("div",{className:"flex-1 p-2 overflow-y-auto border-t ",children:!0===t?Object(l.jsxs)("div",{className:"my-4",children:[Object(l.jsx)("div",{className:"mx-auto text-center",children:Object(l.jsx)(n.a,{})}),Object(l.jsx)("p",{className:"text-center text-gray-500",children:"Loading"})]}):Object(l.jsx)(i.Fragment,{children:0===x.length?Object(l.jsx)("section",{className:"p-4 text-center",children:Object(l.jsx)("h2",{className:"text-lg text-gray-400",children:"No results found"})}):x.map((function(e,t){return Object(l.jsx)("button",{onClick:function(){return u(e)},className:"block p-1 border-b w-full text-left border-gray-300 hover:text-white hover:bg-blue-600",type:"button",children:e[s]},t)}))})})]})}},108:function(e,t,s){"use strict";s(2);var a=s(49),r=s(1);t.a=function(e){var t=e.onChange,s=e.value,i=e.error,c=e.label,o=e.placeholder,n=e.disabled,l=void 0!==n&&n,d=e.name,h=e.Input_className,u=void 0===h?"":h,m=e.Label_className,b=void 0===m?"":m,j=e.InputContainer_className,p=void 0===j?"":j,x=e.MainContainer_className,f=void 0===x?"":x,_=e.labelColor,g=void 0===_?"text-primary-900 dark:text-primary-100":_,O=e.size,v=void 0===O?"md":O;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"w-full my-2 ".concat(f),children:[""!==c&&Object(r.jsx)("label",{htmlFor:"any-form",className:"".concat(g," ").concat(b),children:c}),Object(r.jsxs)("div",{className:"rounded relative ".concat(p),children:[Object(r.jsx)("textarea",{name:d,placeholder:o,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(a.a)(v),"\n                ").concat(""!==i?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(u),value:s,disabled:l}),""!==i&&Object(r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:i})]})]})})}},109:function(e,t,s){"use strict";var a;s.d(t,"a",(function(){return a})),function(e){e.PENDING="PENDING TERMINATION",e.TERMINATED="TERMINATED",e.PENDING_SUSPENSION="PENDING SUSPENTION",e.SUSPENDED="SUSPENDED",e.REJECTED="REJECTED"}(a||(a={}))},110:function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return n})),s.d(t,"e",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return u}));var a,r,i,c=s(18),o=100;!function(e){e.GOVERNMENT_AIDED="GOVERNMENT_AIDED",e.PRIVATE="GOVERNMENT_AIDED",e.PUBLIC="PUBLIC"}(a||(a={})),function(e){e.EXIST="Exist",e.NEW="new"}(r||(r={})),function(e){e.role="role",e.district_name="district_name",e.full_name="full_name",e.first_name="first_name",e.last_name="last_name",e.phone_numbers="phone_numbers",e.email="email",e.sex="sex",e.dob="dob",e.marital_status="marital_status",e.nid="nid",e.rssb_number="rssb_number",e.bank_account="bank_account",e.position="position",e.specialization="specialization",e.qualification="qualification",e.staff_category="staff_category",e.staff_code="staff_code",e.status="status",e.school_code="school_code",e.school_name="school_name",e.school_category="school_category",e.school_status="school_status",e.region_code="region_code",e.village_name="village_name",e.cell_name="cell_name",e.cell_code="cell_code",e.sector_name="sector_name",e.sector_code="sector_code",e.district_code="district_code",e.province_name="province_name",e.province_code="province_code",e.subjects="subjects",e.grades="grades",e.periods="periods",e.date_in_school="date_in_school",e.date_of_hire="date_of_hire",e.nationality="nationality",e.middle_name="middle_name",e.bank_name="bank_name"}(i||(i={}));var n=[{key:i.staff_code,title:"Staff code",status:!0,isChangeAllowed:!1},{key:i.nid,title:"National ID",status:!0,isChangeAllowed:!1},{key:i.full_name,title:"Staff Full Names",status:!0,isChangeAllowed:!0},{key:i.first_name,title:"Staff First Name",status:!0,isChangeAllowed:!0},{key:i.middle_name,title:"Staff Middle Name",status:!0,isChangeAllowed:!0},{key:i.last_name,title:"Staff Last Name",status:!0,isChangeAllowed:!0},{key:i.phone_numbers,title:"Staff Phone",status:!0,isChangeAllowed:!0},{key:i.email,title:"Staff Email",status:!0,isChangeAllowed:!0},{key:i.dob,title:"Date of Birth",status:!0,isChangeAllowed:!0},{key:i.sex,title:"Sex",status:!0,isChangeAllowed:!0},{key:i.marital_status,title:"Marital status",status:!0,isChangeAllowed:!0},{key:i.qualification,title:"Qualification",status:!0,isChangeAllowed:!0},{key:i.specialization,title:"Specialization",status:!0,isChangeAllowed:!0},{key:i.rssb_number,title:"RSSB",status:!0,isChangeAllowed:!0},{key:i.bank_name,title:"Bank name",status:!0,isChangeAllowed:!0},{key:i.bank_account,title:"Bank account",status:!0,isChangeAllowed:!0},{key:i.position,title:"Position",status:!0,isChangeAllowed:!0},{key:i.role,title:"Staff role",status:!0,isChangeAllowed:!0},{key:i.district_code,title:"District Code",status:!0,isChangeAllowed:!0},{key:i.district_name,title:"District Name",status:!0,isChangeAllowed:!0},{key:i.school_code,title:"School Code",status:!0,isChangeAllowed:!0},{key:i.school_name,title:"School Name",status:!0,isChangeAllowed:!0},{key:i.school_category,title:"School Category",status:!0,isChangeAllowed:!0},{key:i.school_status,title:"School Status",status:!0,isChangeAllowed:!0},{key:i.nationality,title:"Nationality",status:!0,isChangeAllowed:!0},{key:i.date_of_hire,title:"Date to hire",status:!0,isChangeAllowed:!0},{key:i.date_in_school,title:"Date in school",status:!0,isChangeAllowed:!0},{key:i.subjects,title:"Subjects",status:!0,isChangeAllowed:!0},{key:i.grades,title:"Grade (No of Group)",status:!0,isChangeAllowed:!0},{key:i.periods,title:"Periods",status:!0,isChangeAllowed:!0}],l={system:["26","Admin"],country:["REB","4","RTB","300","MINECOFIN","27"],district:["DDE","3","Human Resource","25"],school:["Head Teacher","Teacher","2"]},d=function(e){return null===e?"":u(e)?Object(c.a)(e):e},h=function(e){var t="",s=[],a="",r={grade_names:[],grade_codes:[],courses:[],group:[]},i=0;if(e){var o=function(a){var o=e[a];if(s.includes(o.course_code)||(s.push(o.course_code),t+=Object(c.e)(t)?o.course_name:", "+o.course_name),r.grade_codes.includes(o.grade_code)){if(r.courses.findIndex((function(e){return e===o.course_code}))>=0){var n=r.courses.findIndex((function(e){return e===o.course_code}));r.group[n]+=JSON.parse(o.grade_group).length}}else r.grade_codes.push(o.grade_code),r.grade_names.push(o.grade_name),r.courses.push(o.course_code),r.group.push(JSON.parse(o.grade_group).length);i+=Number(o.teaching_period)*JSON.parse(o.grade_group).length};for(var n in e)o(n);for(var l in r.courses)a+=Object(c.e)(a)?"".concat(r.grade_names[l]," (").concat(r.group[l],")"):", ".concat(r.grade_names[l]," (").concat(r.group[l],")")}return{courses:t,grades:a,periods:i.toString()}},u=function(e){if(null===e)return!1;var t=new Date(e);return!isNaN(t.getDate())}},112:function(e,t,s){"use strict";s.d(t,"a",(function(){return y}));var a=s(36),r=s(4),i=s(26),c=s(27),o=s(28),n=s(29),l=s(2),d=s.n(l),h=s(16),u=s(12),m=s(24),b=s(30),j=s(104),p=s(31),x=s(25),f=s(40),_=s(48),g=s(106),O=s(1),v=function(e){Object(o.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).submitLogin=function(e){var t;if(e.preventDefault(),a.props.current_position&&a.props.school&&a.props.current_position===a.state.position_id&&a.state.school_code===(null===(t=a.props.school)||void 0===t?void 0:t.school_id))return a.setState({error:{target:"position_id",msg:"The selected position is the same as the current position of this user on this school"}});if("REGISTER"===a.props.assignType){if(!0===a.props.required.nid&&a.state.nid.length<=4)return a.setState({error:{target:"nid",msg:"NID/Passport is required (minimum 4 character)."}});if(!0===a.props.required.phone_numbers&&a.state.phone_numbers.length<=3)return a.setState({error:{target:"phone_numbers",msg:"Required"}});if(!0===a.props.required.first_name&&a.state.first_name.length<=3)return a.setState({error:{target:"first_name",msg:"Required"}});if(!0===a.props.required.middle_name&&a.state.middle_name.length<=3)return a.setState({error:{target:"middle_name",msg:"Required"}});if(!0===a.props.required.last_name&&a.state.last_name.length<=3)return a.setState({error:{target:"last_name",msg:"Required"}});if(!0===a.props.required.full_name&&a.state.full_name.length<=3)return a.setState({error:{target:"full_name",msg:"Required"}})}if(!0===a.props.required.school_code&&""===a.state.school_code)return a.setState({error:{target:"school_code",msg:"Required"}});if(!0===a.props.required.role_id&&""===a.state.role_id)return a.setState({error:{target:"role_id",msg:"Required"}});if(null===a.props.basic.academic_calender)return a.setState({error:{target:"main-error",msg:"You have no academic selected, Please refresh the page."}});if(!0===a.props.required.position_id&&""===a.state.position_id)return a.setState({error:{target:"position_id",msg:"Required"}});if(!0===a.props.required.start_date_in_the_school&&""===a.state.start_date_in_the_school)return a.setState({error:{target:"start_date_in_the_school",msg:"Required"}});if(a.props.select_district_active&&!0===a.props.select_district_active&&a.state.district_code.length<=0)return a.setState({error:{target:"district_list_select",msg:"Required"}});var s,r,i=a.props.assignType;"REGISTER"!==a.props.assignType&&(null!==(s=a.props.school)&&void 0!==s&&s.school_id&&(null===(r=a.props.school)||void 0===r?void 0:r.school_id)===a.state.school_code&&(i="UPDATE_POSITION"));var c={role_id:a.state.role_id,country_id:a.state.country_id,district_code:a.state.district_code,sector_code:a.state.sector_code,school_code:a.state.school_code,qualification_id:a.state.qualification_id,academic_year_id:a.props.basic.academic_calender.academic_year_id,stakeholder_id:a.state.stakeholder_id,start_date_in_the_school:"",hired_date:a.state.start_date_in_the_school,position_code:a.state.position_id,user_id:a.props.user_id,first_name:a.state.first_name,last_name:a.state.last_name,full_name:a.state.full_name,middle_name:a.state.middle_name,nid:a.state.nid,phone_numbers:a.state.phone_numbers,key:i};a.setState({loading:!0}),Object(u.e)(c,(function(e,t){!0===e?(a.setState({loading:!1,error:{target:"main-success",msg:"Staff was added successfully"}}),a.props.success(c)):a.setState({loading:!1,error:{target:"main-error",msg:t}}),setTimeout((function(){a.setState({error:{target:null,msg:""}})}),3e3)}))},a.state={loading_assets:!0,loading:!1,select_school_open:!1,select_sector_open:!1,select_role_open:!1,select_district_open:!1,select_position_open:!1,error:{target:null,msg:""},district_code:a.props.district_id,sector_code:"",school_code:a.props.school?a.props.school.school_id:"",academic_year_id:"",stakeholder_id:"",role_id:"",country_id:"",start_date_in_the_school:"",position_id:a.props.position_code?a.props.position_code:"",qualification_id:void 0===a.props.qualification_id?"":a.props.qualification_id,first_name:"",last_name:"",full_name:"",middle_name:"",nid:a.props.nid_value?a.props.nid_value:"",phone_numbers:"",loading_positions_schools:!1,school_posts:null,assignType:a.props.assignType,loading_districts:!1,district_list:[],district_name:"",loading_assigning_data:!1},a}return Object(c.a)(s,[{key:"getDistrictAssets",value:function(e){var t=this;this.setState({loading_assigning_data:!0}),this.props.FC_GetAssignAssets(e,(function(e,s){!0===e?t.setState({error:{target:null,msg:""},loading_assigning_data:!1,school_code:"",select_school_open:!0}):t.setState({error:{target:"main-error",msg:s},loading_assigning_data:!1,school_code:"",select_school_open:!0})}))}},{key:"componentDidMount",value:function(){var e,t=this;(!0!==this.props.basic.assign_teacher_assets.loading&&null!==this.props.basic.assign_teacher_assets.data||this.getDistrictAssets(this.props.district_id),void 0!==this.props.school&&void 0!==this.props.only_post_for_school)&&this.loadSchoolPosts(null===(e=this.props.school)||void 0===e?void 0:e.school_id);this.props.select_district_active&&!0===this.props.select_district_active&&(this.setState({loading_districts:!0}),Object(u.r)((function(e,s,a){!0===e?t.setState({loading_districts:!1,district_list:s}):t.setState({error:{target:"district_list_select",msg:a},loading_districts:!1})})))}},{key:"loadSchoolPosts",value:function(e){var t,s,a=this;void 0!==this.props.only_post_for_school&&(null!==(t=this.props.basic.academic_calender)&&void 0!==t&&t.academic_year_id&&(this.setState({loading_positions_schools:!0}),Object(u.B)(e,null===(s=this.props.basic.academic_calender)||void 0===s?void 0:s.academic_year_id,(function(e,t,s){console.log({status:e,data:t,msg:s}),!0===e?a.setState({loading_positions_schools:!1,school_posts:t}):a.setState({loading_positions_schools:!1,school_posts:null,error:{target:"main-error",msg:"Failed to load positions for this schools"}})}))))}},{key:"componentDidUpdate",value:function(e){var t,s;(null===(t=e.school)||void 0===t?void 0:t.school_id)===(null===(s=this.props.school)||void 0===s?void 0:s.school_id)&&e.district_id===this.props.district_id||(void 0!==this.props.school?(this.setState({school_code:this.props.school.school_id,position_id:"",select_school_open:!1}),this.loadSchoolPosts(this.props.school.school_id)):this.setState({school_code:"",position_id:"",select_position_open:!1,select_school_open:!0}))}},{key:"render",value:function(){var e,t,s,i=this;if(!0===this.props.basic.assign_teacher_assets.loading||null===this.props.basic.assign_teacher_assets.data)return Object(O.jsx)(b.a,{children:Object(O.jsx)("div",{className:"py-6 mx-auto text-center",children:Object(O.jsx)(_.a,{})})});var c=this.props.basic.assign_teacher_assets.data,o=this.props.basic.assign_teacher_assets.data.schools.find((function(e){return e.school_code===i.state.school_code})),n=void 0!==o?"".concat(o.school_code," - ").concat(o.school_name,"  ").concat(o.school_category):"Select a school",l=c.sectors.find((function(e){return e.sector_code===i.state.sector_code})),d=void 0!==l?l.sector_name:"",h=c.roles.find((function(e){return e.role_id===i.state.role_id})),u=void 0!==h?h.role:"",v=c.positions.find((function(e){return e.position_code===i.state.position_id})),y=void 0!==v?"".concat(v.position_code," - ").concat(v.position_name," - ").concat(v.qualification_name):"";return Object(O.jsxs)(O.Fragment,{children:["main-error"===this.state.error.target&&Object(O.jsx)(m.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(O.jsx)(m.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(O.jsx)(b.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(O.jsxs)("form",{onSubmit:this.submitLogin,children:[Object(O.jsxs)("div",{className:"p-2 flex flex-wrap",children:["REGISTER"===this.props.assignType&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"border-b-2 w-full my-2",children:Object(O.jsx)(f.a,{size:"sm",children:"User info"})}),this.props.formAccess.nid&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(p.a,{disabled:this.state.loading,label:"NID/Passport",name:"nid",type:"text",max:16,onChange:function(e){i.setState({nid:e.target.value,error:{target:null,msg:""}})},value:this.state.nid,error:"nid"===this.state.error.target?this.state.error.msg:"",placeholder:"National ID",className:"p-2"})}),this.props.formAccess.phone_numbers&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(p.a,{disabled:this.state.loading,label:"Phone number",name:"phone_numbers",type:"number",onChange:function(e){e.target.value.length<=10&&i.setState({phone_numbers:e.target.value,error:{target:null,msg:""}})},value:this.state.phone_numbers,error:"phone_numbers"===this.state.error.target?this.state.error.msg:"",placeholder:"0700000000",className:"p-2"})}),this.props.formAccess.first_name&&Object(O.jsx)("div",{className:"w-full lg:w-1/3 py-1 px-3",children:Object(O.jsx)(p.a,{disabled:this.state.loading,label:"First name",name:"first_name",onChange:function(e){return i.setState({first_name:e.target.value,full_name:"".concat(null!==e.target.value?e.target.value:""," ").concat(null!==i.state.middle_name?i.state.middle_name:""," ").concat(null!==i.state.last_name?i.state.last_name:""),error:{target:null,msg:""}})},value:this.state.first_name,error:"first_name"===this.state.error.target?this.state.error.msg:"",placeholder:"First name",className:"p-2"})}),this.props.formAccess.middle_name&&Object(O.jsx)("div",{className:"w-full lg:w-1/3 py-1 px-3",children:Object(O.jsx)(p.a,{disabled:this.state.loading,label:"Middle name",name:"middle_name",onChange:function(e){return i.setState({middle_name:e.target.value,full_name:"".concat(null!==i.state.first_name?i.state.first_name:""," ").concat(null!==e.target.value?e.target.value:""," ").concat(null!==i.state.last_name?i.state.last_name:""),error:{target:null,msg:""}})},value:this.state.middle_name,error:"middle_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Middle name",className:"p-2"})}),this.props.formAccess.last_name&&Object(O.jsx)("div",{className:"w-full lg:w-1/3 py-1 px-3",children:Object(O.jsx)(p.a,{disabled:this.state.loading,label:"Last name",name:"last_name",onChange:function(e){return i.setState({last_name:e.target.value,full_name:"".concat(null!==i.state.first_name?i.state.first_name:""," ").concat(null!==i.state.middle_name?i.state.middle_name:""," ").concat(null!==e.target.value?e.target.value:""),error:{target:null,msg:""}})},value:this.state.last_name,error:"last_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Last name",className:"p-2"})}),this.props.formAccess.full_name&&Object(O.jsx)("div",{className:"w-full  py-1 px-3",children:Object(O.jsx)(p.a,{disabled:!0,label:"Full name",name:"full_name",onChange:function(e){return i.setState({full_name:e.target.value,error:{target:null,msg:""}})},value:this.state.full_name,error:"full_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Full name",className:"p-2"})})]}),Object(O.jsx)("div",{className:"border-b-2 w-full my-2",children:Object(O.jsx)(f.a,{size:"sm",children:"Academic info"})}),Object(O.jsxs)("div",{className:"w-full lg:flex py-1 px-3 bg-gray-100 rounded",children:[this.props.select_district_active&&!0===this.props.select_district_active&&Object(O.jsx)(O.Fragment,{children:!0===this.state.select_district_open?Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(g.a,{click:function(e){i.setState({district_code:e.district_code,district_name:e.district_name,select_district_open:!1,error:{target:null,msg:""}}),i.setState({loading_assigning_data:!0}),i.props.FC_GetSchoolsByDistrictRedux(e.district_code,(function(e,t){i.setState({loading_assigning_data:!1})}))},close:function(){return i.setState({select_district_open:!1})},data:this.state.district_list,id:"district_code",title:"district_name",loading:this.state.loading_districts})}):Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return i.setState({select_district_open:!0})},children:Object(O.jsx)(p.a,{disabled:!0,label:"District",name:"district",onChange:function(e){},value:this.state.district_name,error:"district_list_select"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a district",className:"p-2"})})}),this.props.formAccess.school_code&&Object(O.jsx)(O.Fragment,{children:void 0!==this.props.school?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return i.setState({select_school_open:!0,select_position_open:!1})},children:Object(O.jsx)(p.a,{disabled:!0,label:"School name",name:"school_name",onChange:function(e){},value:this.props.school.school_name,error:"school_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Select school",className:"p-2"})})}):Object(O.jsx)(O.Fragment,{children:this.props.formAccess.school_code&&null!==this.props.basic.qualifications&&Object(O.jsx)(O.Fragment,{children:!0===this.state.select_school_open?Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(g.a,{click:function(e){i.setState({school_code:e.school_code,select_school_open:!1,error:{target:null,msg:""},position_id:""}),i.loadSchoolPosts(e.school_code)},close:function(){return i.setState({select_school_open:!1})},data:this.props.basic.assign_teacher_assets.data.schools.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{school_name:"".concat(e.school_code," - ").concat(e.school_name,"  ").concat(e.school_category)})})),id:"school_code",title:"school_name",loading:this.state.loading_assigning_data||this.state.loading})}):Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return i.setState({select_school_open:!0})},children:Object(O.jsx)(p.a,{disabled:!0,label:"School name",name:"school_name",onChange:function(e){},value:n,error:"school_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Select school",className:"p-2"})})})})})]}),this.props.formAccess.stakeholder_id&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(j.a,{data:[{title:"",value:""}].concat(Object(a.a)(c.stakeholders.map((function(e){return{title:e.stakeholder_name,value:e.stakeholder_id}})))),error:"stakeholder_id"===this.state.error.target?this.state.error.msg:"",value:this.state.stakeholder_id,onChange:function(e){return i.setState({stakeholder_id:e.target.value,error:{target:null,msg:""}})},label:"Select a stakeholder",name:"select_a_stakeholder",placeholder:"Select a value"})}),this.props.formAccess.academic_year_id&&null!==this.props.basic.academic_calender&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(j.a,{data:[{title:null===(e=this.props.basic.academic_calender)||void 0===e?void 0:e.academic_year_name,value:null===(t=this.props.basic.academic_calender)||void 0===t?void 0:t.academic_year_id}],error:"academic_year_id"===this.state.error.target?this.state.error.msg:"",value:this.state.academic_year_id,onChange:function(e){return i.setState({academic_year_id:e.target.value,error:{target:null,msg:""}})},label:"Academic year",name:"accademic_year",placeholder:"Select a value"})}),void 0===this.props.qualification_id&&this.props.formAccess.qualification_id&&null!==this.props.basic.qualifications&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(j.a,{data:[{title:"",value:""}].concat(Object(a.a)(this.props.basic.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_id}})))),error:"qualification_id"===this.state.error.target?this.state.error.msg:"",value:this.state.qualification_id,onChange:function(e){},disabled:!0,label:"Qualification",name:"accademic_year",placeholder:"Select a value"})}),this.props.formAccess.sector_code&&Object(O.jsx)(O.Fragment,{children:!0===this.state.select_sector_open?Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(g.a,{click:function(e){i.setState({sector_code:e.sector_code,select_sector_open:!1})},close:function(){return i.setState({select_sector_open:!1})},data:c.sectors.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{sector_name:"".concat(e.sector_code," - ").concat(e.sector_name)})})),id:"sector_code",title:"sector_name",loading:this.state.loading})}):Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return i.setState({select_sector_open:!0})},children:Object(O.jsx)(p.a,{disabled:!0,label:"Sector name",name:"sector_name",onChange:function(e){},value:d,error:"sector_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a sector",className:"p-2"})})}),this.props.formAccess.role_id&&Object(O.jsx)(O.Fragment,{children:!0===this.state.select_role_open?Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(g.a,{click:function(e){i.setState({role_id:e.role_id,select_role_open:!1,error:{target:null,msg:""}})},close:function(){return i.setState({select_role_open:!1})},data:(void 0!==this.props.exclude_roles&&this.props.exclude_roles.length)>=1?c.roles.filter((function(e){var t;return!(null!==(t=i.props.exclude_roles)&&void 0!==t&&t.includes(e.role_id))})):c.roles,id:"role_id",title:"role",loading:this.state.loading})}):Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){return i.setState({select_role_open:!0})},children:Object(O.jsx)(p.a,{disabled:!0,label:"Role",name:"role",onChange:function(e){},value:u,error:"role_id"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a role",className:"p-2"})})}),this.props.formAccess.position_id&&void 0===this.props.position_code&&Object(O.jsx)(O.Fragment,{children:!0===this.state.select_position_open?Object(O.jsxs)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:[Object(O.jsx)("p",{children:"Position"}),Object(O.jsx)(g.a,{click:function(e){i.setState({position_id:e.position_code,select_position_open:!1,qualification_id:e.qualification_id,error:{target:null,msg:""}})},close:function(){return i.setState({select_position_open:!1})},data:void 0!==this.props.only_post_for_school?null!==this.state.school_posts?null===(s=this.state.school_posts)||void 0===s?void 0:s.school_positions.map((function(e){return{position_code:e.position_code,position_name:"".concat(e.position_code," - ").concat(e.position_name," - ").concat(e.qualification_name),qualification_id:e.qualification_id,qualification_name:e.qualification_name}})):[]:c.positions.map((function(e){return{position_code:e.position_code,position_name:"".concat(e.position_code," - ").concat(e.position_name," - ").concat(e.qualification_name),qualification_id:e.qualification_id,qualification_name:e.qualification_name}})),id:"position_code",title:"position_name",loading:this.state.loading})]}):Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",onClick:function(){""===i.state.school_code?i.setState({select_position_open:!1,select_school_open:!0,error:{target:"school_code",msg:"Please select the school"}}):i.setState({select_position_open:!0})},children:Object(O.jsx)(p.a,{disabled:!0,label:"Position",name:"role",onChange:function(e){},value:y,error:"position_id"===this.state.error.target?this.state.error.msg:"",placeholder:"Select a position",className:"p-2"})})}),this.props.formAccess.start_date_in_the_school&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(p.a,{disabled:this.state.loading,label:"Date of hire (Date in education)",name:"start_date_in_the_school",type:"date",onChange:function(e){return i.setState({start_date_in_the_school:e.target.value,error:{target:null,msg:""}})},value:this.state.start_date_in_the_school,error:"start_date_in_the_school"===this.state.error.target?this.state.error.msg:"",placeholder:"Select date",className:"p-2"})}),this.props.formAccess.country_id&&Object(O.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(O.jsx)(j.a,{data:[{title:"No",value:""},{title:"Yes",value:"1"}],error:"country_id"===this.state.error.target?this.state.error.msg:"",value:this.state.country_id,onChange:function(e){return i.setState({country_id:e.target.value,error:{target:null,msg:""}})},label:"User on country level",name:"country_level",placeholder:"Select a value"})})]}),Object(O.jsxs)("div",{className:"px-6 text-right flex",children:[Object(O.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(O.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)(x.a,{type:"submit",size:"lg",loading:this.state.loading,children:void 0===this.props.button_title?"Add new staff":this.props.button_title})})]})]})})]})}}]),s}(d.a.Component),y=Object(h.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_GetAssignAssets:u.m,FC_GetSchoolsByDistrictRedux:u.D})(v)},114:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var a=s(26),r=s(27),i=s(28),c=s(29),o=s(2),n=s.n(o),l=s(11),d=s(16),h=s(12),u=s(112),m=s(25),b=s(30),j=s(48),p=s(105),x=s(24),f=s(1),_=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){r.props.district_code||r.loadDistricts(),void 0===r.props.school_code&&r.setState({current_school:!1})},r.loadDistricts=function(){r.state.districts.length<=0&&(r.setState({loading_districts:!0}),Object(h.r)((function(e,t,s){e?r.setState({loading_districts:!1,districts:t}):r.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},r.selectDistrict=function(e){r.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),r.reloadDistrictResurces(e.district_code)},r.reloadDistrictResurces=function(e){e&&(r.setState({loading_resource:!0}),r.props.FC_GetAssignAssets(e,(function(e,t){e?r.setState({loading_resource:!1}):r.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,district_code:r.props.district_code?r.props.district_code:"",district_name:r.props.district_name?r.props.district_name:"",current_school:!0,selected_district:r.props.district_code?r.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,a,r,i=this;return"user-updates-success"===this.state.error.target?Object(f.jsx)(b.a,{className:"animate__animated animate__zoomIn ",children:Object(f.jsxs)("div",{className:"text-center py-10",children:[Object(f.jsx)(l.g,{className:"text-8xl text-green-600 mx-auto"}),Object(f.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(f.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(f.jsx)("br",{})," you can close the window and continue with other users"]}),Object(f.jsx)(m.a,{theme:"success-light",onClick:function(){i.props.close(),i.props.refreshApp&&i.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(f.jsxs)(f.Fragment,{children:["main-error"===this.state.error.target&&Object(f.jsx)(x.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(f.jsx)(x.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(f.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return i.setState({open_select_district:!1})}}),Object(f.jsx)(p.c,{backDrop:!0,backDropClose:!0,close:function(){return i.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:p.b.default,widthSizeClass:p.a.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(f.jsx)(j.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(f.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(f.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(f.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(f.jsx)("h6",{children:e.district_code}),Object(f.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(f.jsx)(m.a,{theme:"accent-light",size:"sm",onClick:i.selectDistrict.bind(i,e),children:"Select district"})]},t)}))})})]}),Object(f.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(f.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(f.jsx)(m.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(f.jsx)(b.a,{children:Object(f.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(f.jsx)("div",{className:"",children:Object(f.jsx)(l.a,{className:"text-6xl"})}),Object(f.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(f.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(f.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(f.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(f.jsx)("b",{children:null===(a=this.props.userDetails)||void 0===a?void 0:a.email})]})]})]})}),Object(f.jsx)("div",{className:"my-2",children:Object(f.jsx)(b.a,{children:Object(f.jsxs)("div",{className:"flex gap-3",children:[Object(f.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h2",{className:"text-lg pr-3",children:[Object(f.jsx)("b",{children:this.state.district_name}),"District"]}),Object(f.jsx)(m.a,{onClick:function(){i.setState({open_select_district:!0}),i.loadDistricts()},size:"sm",theme:"accent-light",children:"Choose District"}),this.props.district_code+""!==this.state.selected_district+""&&this.props.district_code&&this.props.district_code&&this.props.district_name&&Object(f.jsxs)(m.a,{onClick:function(){i.props.district_code&&i.props.district_code&&i.selectDistrict({district_code:i.props.district_code,district_name:i.props.district_code})},size:"sm",theme:"accent-light",children:["Choose ",Object(f.jsx)("b",{children:this.props.district_name})]})]})}),Object(f.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(f.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(r=this.props)||void 0===r?void 0:r.school_name)}),Object(f.jsx)(m.a,{onClick:function(){return i.setState({current_school:!i.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(u.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){i.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){i.props.refreshApp&&i.props.refreshApp(),i.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(n.a.Component),g=Object(d.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.m})(_)},116:function(e,t,s){"use strict";s.d(t,"a",(function(){return A})),s.d(t,"b",(function(){return R}));var a=s(6),r=s(4),i=s(41),c=s(26),o=s(27),n=s(28),l=s(29),d=s(3),h=s.n(d),u=s(2),m=s(16),b=s(37),j=s(11),p=s(111),x=s(12),f=s(18),_=s(48),g=s(36),O=s(20),v=s(5),y=s.n(v),N=s(107),w=s(13),S=s(1),k=function(e){var t=Object(u.useState)(void 0===e.addedGroups?[]:e.addedGroups.group),s=Object(O.a)(t,2),a=s[0],r=s[1],i=Object(u.useState)(""),c=Object(O.a)(i,2),o=c[0],n=c[1],l=Object(u.useState)(""),d=Object(O.a)(l,2),h=d[0],m=d[1];return Object(S.jsxs)("div",{className:"absolute bg-primary-800 p-2 rounded-md shadow-xl right-2 md:right-10 animate__animated animate__zoomIn animate__faster mb-10",style:{minWidth:"300px"},children:[Object(S.jsx)("div",{className:"text-lg text-white mb-2 text-left px-2 font-bold",children:"ADD GROUPS"}),Object(S.jsx)("div",{children:0===a.length?Object(S.jsx)("div",{className:"border-2 border-blue-500 text-blue-400 rounded-md px-3 py-4 mb-1 text-center text-base",children:"No groups"}):a.map((function(e,t){return Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 border-2 border-blue-300 rounded-md pl-3 py-1 pr-1 text-white font-bold mb-1",children:[Object(S.jsx)("div",{className:"uppercase",children:e}),Object(S.jsx)("div",{onClick:function(){return r(Object(g.a)(a.filter((function(t){return t!==e}))))},className:"bg-red-100 rounded-full text-lg p-1 text-red-700 cursor-pointer",children:Object(S.jsx)(j.h,{})})]},t+1)}))}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 mt-2",children:[Object(S.jsx)("input",{value:o,onChange:function(e){m(""),n(e.target.value)},placeholder:"Group name",className:"border-0 px-3 py-2 rounded w-full"}),""!==o&&Object(S.jsx)("div",{onClick:function(){""===o?m("Please fill group name!"):(m(""),r([].concat(Object(g.a)(a.filter((function(e){return e!==o}))),[o])),n(""))},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-blue-500 hover:bg-blue-600 text-white w-36 animate__animated animate__fadeIn animate__faster",children:"Add group"})]}),""!==h&&Object(S.jsx)("div",{className:"bg-red-100 text-red-700 px-3 py-2 rounded my-1 animate__animated animate__zoomIn animate__faster",onClick:function(){return m("")},children:h}),Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 mt-3 animate__animated animate__fadeInUp animate__faster",children:[Object(S.jsx)("div",{onClick:function(){return e.cancel()},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),a.length>0&&Object(S.jsx)("div",{onClick:function(){console.log("sd: ",e.addedGroups),void 0!==e.addedGroups&&e.addSubjectGroup(e.addedGroups.study_hierarchy_id,a)},className:"rounded px-3 py-2 font-bold  cursor-pointer bg-green-500 hover:bg-green-600 text-white animate__animated animate__fadeInRight animate__faster",children:"Save changes"})]})]})},C=function(){var e=Object(a.a)(h.a.mark((function e(t,s,a,i){var c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",alert("Please select atleast one subject"));case 2:return c=t.map((function(e){return{teacher_code:a,study_hierarchy_id:e.studyhierarchyid,grade_group:void 0===s.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid}))?"A":JSON.stringify(s.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid})).group)}})),i(!1,""),console.log("Sent data: ",c),e.prev=5,e.next=8,y.a.post("".concat(w.c,"/teacherhierarch/create"),c);case 8:o=e.sent,i(!0,"Teacher subjects has added successfully!"),console.log("Success: ",o),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),i(!0,""),console.log("Err: ",Object(r.a)({},e.t0));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,s,a,r){return e.apply(this,arguments)}}(),I=function(e){var t,s=Object(u.useState)(null),a=Object(O.a)(s,2),r=a[0],c=a[1],o=Object(u.useState)(!1),n=Object(O.a)(o,2),l=n[0],d=n[1],h=Object(u.useState)(null),m=Object(O.a)(h,2),_=m[0],v=m[1],y=Object(u.useState)(""),w=Object(O.a)(y,2),I=w[0],T=w[1],q=Object(u.useState)(null),R=Object(O.a)(q,2),D=R[0],E=R[1],P=Object(u.useState)([]),F=Object(O.a)(P,2),z=F[0],L=F[1],H=Object(u.useState)(!1),G=Object(O.a)(H,2),U=G[0],M=G[1],B=Object(u.useState)(""),V=Object(O.a)(B,2),X=V[0],J=V[1],W=Object(u.useState)(""),Q=Object(O.a)(W,2),Y=Q[0],K=Q[1],Z=Object(u.useState)([]),$=Object(O.a)(Z,2),ee=$[0],te=$[1],se=function(e,t){console.log(t),te([].concat(Object(g.a)(ee.filter((function(t){return t.study_hierarchy_id!==e}))),[{study_hierarchy_id:e,group:t}]))},ae=function(){var t=e.teacher_hierarchy_data;return null!==t?(null!==r&&""!==r&&(t=t.filter((function(e){return e.level_code===r}))),null!==_&&(t=t.filter((function(e){return e.combination_code===_}))),t):[]},re=function(t){var s,a=null===e.teacher_hierarchy_data||null===(s=ee.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})))||void 0===s?void 0:s.group;if(void 0!==a)return a;var r,i=null===e.teacher_data||void 0===e.teacher_data||null===(r=e.teacher_data.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})))||void 0===r?void 0:r.grade_group;return void 0!==i?JSON.parse(i):[]},ie=function(){var t,s=0,a=Object(i.a)(z);try{var r=function(){var e=t.value,a=ee.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid}));void 0!==a&&(s+=parseInt(e.teaching_period)*a.group.length)};for(a.s();!(t=a.n()).done;)r()}catch(l){a.e(l)}finally{a.f()}if(null!==e.teacher_hierarchy_data&&e.teacher_hierarchy_data.length>0){var c,o=Object(i.a)(e.teacher_hierarchy_data.filter((function(e){return void 0===z.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))})));try{for(o.s();!(c=o.n()).done;){var n=c.value;s+=parseInt(n.teaching_period)*re(n).length}}catch(l){o.e(l)}finally{o.f()}}return s};return Object(S.jsxs)("div",{className:"fixed bg-black bg-opacity-50 top-0 left-0 w-full h-full z-50 flex items-center justify-center animate__animated animate__fadeIn animate__faster",children:[Object(S.jsxs)("div",{className:"bg-white rounded-md animate__animated animate__zoomIn animate__faster z-50 w-full h-full overflow-auto",children:[Object(S.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 px-2 py-2 border-b border-gray-400",children:[Object(S.jsx)("div",{className:"text-xl font-bold ml-2 uppercase mt-2 text-primary-800",children:"TEACHER SUBJECTS ASSIGNMENT"}),Object(S.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"flex items-center justify-center p-1 rounded-full bg-accent-900 text-3xl hover:bg-yellow-900 text-white cursor-pointer border border-accent-900 hover:border-yellow-900",title:"Close window",children:Object(S.jsx)(j.h,{})})]}),Object(S.jsxs)("div",{className:"p-2 md:p-6",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(S.jsx)("div",{className:"text-5xl text-gray-400",children:Object(S.jsx)(N.c,{})}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsxs)("span",{className:"font-bold -mt-1",children:["Teacher: ",e.full_name]}),Object(S.jsxs)("span",{className:"font-bold -mt-1",children:["School name: ",e.school.school_name," (",e.school.school_code,")"]})]})]}),Object(S.jsxs)("div",{className:"flex flex-col justify-center items-end ".concat(ie()>45?"bg-red-100 text-red-800 rounded p-3":""),children:[Object(S.jsxs)("span",{className:"text-gray-500",children:["Total periods ",ie()>45?"(overloaded)":""]}),Object(S.jsx)("span",{className:"font-extrabold text-3xl",children:ie()})]})]}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)("div",{className:"mb-10",children:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"p-2 mb-5",children:Object(S.jsxs)("div",{className:"mt-4",children:[Object(S.jsx)("div",{children:"Filter by"}),Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(S.jsxs)("select",{onChange:function(e){return c(e.target.value)},value:null===r?"":r,className:"border border-gray-400 rounded px-3 py-2",children:[Object(S.jsx)("option",{value:"",children:"Choose education level"}),Object(S.jsx)("option",{value:"",children:"Show all levels"}),Object(x.A)(e.allHierarchy,{type:x.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(S.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{onClick:function(){return d(!l)},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===_?Object(S.jsx)("span",{children:"All- Click to filter by combination"}):Object(S.jsx)("span",{children:null===(t=Object(x.A)(e.allHierarchy,{type:x.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===_})))||void 0===t?void 0:t.combination_name}),Object(S.jsx)("div",{className:"-mr-3",children:!0===l?Object(S.jsx)(j.h,{}):Object(S.jsx)(b.a,{})})]}),!0===l&&Object(S.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(S.jsx)("input",{value:I,onChange:function(e){return T(e.target.value)},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:function(){return d(!1)},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(S.jsx)(j.h,{})})})]}),null!==_&&Object(S.jsxs)("div",{onClick:function(){v(null),d(!1)},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(S.jsx)("div",{children:Object(S.jsx)(p.a,{className:"text-xl"})}),Object(S.jsx)("span",{children:"Click to view all"})]})]}),Object(S.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(f.f)(Object(x.A)(e.allHierarchy,{type:x.X.COMBINATIONS,status:!0}).combinations,I).length?Object(S.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):Object(f.f)(Object(x.A)(e.allHierarchy,{type:x.X.COMBINATIONS,status:!0}).combinations,I).map((function(e,t){return Object(S.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(_===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){v(e.combination_code),d(!1)},children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(S.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]})]})]})}),Object(S.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(S.jsx)("div",{className:"w-full overflow-x-auto",children:Object(S.jsxs)("table",{className:"min-w-full text-left",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"Periods"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(S.jsx)("tbody",{className:"text-sm",children:null===e.teacher_hierarchy_data?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:7,children:Object(S.jsx)(A,{})})}):0===ae().length?Object(S.jsx)("td",{colSpan:7,className:"text-center p-3 text-xl text-gray-400",children:Object(S.jsx)("div",{children:"No result found"})}):ae().map((function(t,s){return Object(S.jsxs)("tr",{className:"".concat(void 0!==z.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"text-gray-500":null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"hover:bg-yellow-50 hover:text-accent-900":"hover:bg-blue-50 hover:text-primary-800"," group"),children:[Object(S.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(S.jsxs)("td",{className:"p-2 border-b",children:[t.course_code,"-",t.course_name]}),Object(S.jsx)("td",{className:"p-2 border-b",children:t.level_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:t.combination_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:t.grade_name}),Object(S.jsx)("td",{className:"p-2 border-b text-center",children:t.teaching_period}),Object(S.jsx)("td",{className:"p-2 border-b",children:Object(S.jsx)("div",{className:"flex flex-row items-center justify-end gap-2",children:Object(S.jsxs)("div",{className:"mx-3",children:[void 0===z.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-1",children:[Object(S.jsx)("div",{className:"flex flex-row items-center gap-1 justify-end",children:re(t).map((function(e,t){return Object(S.jsx)("div",{className:"bg-blue-100 rounded-md px-2 uppercase text-primary-800",children:e},t+1)}))}),Object(S.jsx)("div",{onClick:function(){var s=null===e.teacher_data?void 0:e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}));(null===D||D===t.studyhierarchyid)&&E(t.studyhierarchyid),se(t.studyhierarchyid,null===e.teacher_hierarchy_data||void 0===s?[]:JSON.parse(s.grade_group))},className:"rounded ".concat(null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"bg-yellow-100 group-hover:bg-accent-900 border-yellow-300 group-hover:border-accent-900":"bg-blue-100 group-hover:bg-primary-800 border-blue-300 group-hover:border-primary-800","   group-hover:text-white px-3 py-2 w-max text-center border cursor-pointer text-sm font-bold -mr-3"),children:null===e.teacher_data||void 0===e.teacher_data.find((function(e){return e.studyhierarchyid===t.studyhierarchyid}))?"Add subject":"Update subj"})]}):Object(S.jsxs)("div",{className:"flex flex-row items-center gap-1 justify-end -mr-3",children:[Object(S.jsx)("div",{className:"flex flex-row items-center gap-1 justify-end",children:re(t).map((function(e,t){return Object(S.jsx)("div",{className:"bg-blue-100 rounded-md px-2 uppercase text-primary-800",children:e},t+1)}))}),Object(S.jsx)("div",{onClick:function(){return e=t,void L(Object(g.a)(z.filter((function(t){return t.studyhierarchyid!==e.studyhierarchyid}))));var e},className:"rounded bg-red-50 group-hover:bg-red-200 text-black border border-red-100 group-hover:border-red-700 group-hover:text-red-800 px-3 py-2 w-max text-center cursor-pointer text-sm font-bold",children:"Remove"})]}),null!==D&&D===t.studyhierarchyid&&Object(S.jsx)(k,{addSubjectGroup:function(e,s){var a;se(e,s),console.log("Test grp: ",ee),a=t,L([].concat(Object(g.a)(z.filter((function(e){return e.studyhierarchyid!==a.studyhierarchyid}))),[a])),E(null)},addedGroups:ee.find((function(e){return e.study_hierarchy_id===t.studyhierarchyid})),cancel:function(){return E(null)}})]})})})]},s+1)}))})]})})})]})})})]})]}),z.length>0&&Object(S.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-50 bg-blue-600 p-2 animate__animated animate__fadeInUp",children:!1===U?Object(S.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[""!==Y&&Object(S.jsx)("div",{className:"bg-red-200 text-red-800 px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return K("")},children:Y}),""!==X&&Object(S.jsx)("div",{className:"bg-green-600 text-white px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return J("")},children:X}),Object(S.jsxs)("div",{className:"text-white flex flex-col items-end mr-2",children:[Object(S.jsx)("span",{className:"text-sm text-blue-300",children:"Selected subjects"}),Object(S.jsx)("span",{className:"text-2xl font-extrabold -mt-2",children:z.length})]}),Object(S.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"btn bg-gray-200 text-black rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Cancel"}),Object(S.jsx)("div",{onClick:function(){M(!0),null!==e.auth.user&&C(z,ee,e.staff_code,(function(t,s){""!==s&&!0===t&&(J("School subjects added successfully!"),L([]),e.setAddNew(!1),e.setLoadTeacherSubjects()),""===s&&!0===t&&K("Something went wrong. Try again!"),M(!1)})),M(!1)},className:"btn bg-green-700 text-white rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Save changes"})]}):Object(S.jsx)("div",{className:"text-white text-lg text-right py-2",children:"Saving, Please wait..."})})]})},T=s(9),A=function(){return Object(S.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(S.jsx)(_.a,{}),Object(S.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]})},q=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var o;return Object(c.a)(this,s),(o=t.call(this,e)).setAddNew=function(e){o.setState({addNew:e,addingNew:!0===e})},o.setAddingNew=function(e){o.setState({addingNew:e})},o.setLoading=function(e){o.setState({loading:e})},o.FilterSchoolHierarchy=function(e){var t,s=[],a=Object(i.a)(e);try{var r=function(){var e=t.value,a=null===o.props.schoolHierarchyStore.hierarchy?void 0:o.props.schoolHierarchyStore.hierarchy.find((function(t){return t.studyhierarchyid===e.shool_hierarch_id}));void 0!==a&&s.push(a)};for(a.s();!(t=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}return s},o.FilterTeacherHierarchy=function(e){var t,s=[],a=Object(i.a)(e);try{var r=function(){var e=t.value,a=null===o.props.schoolHierarchyStore.hierarchy?void 0:o.props.schoolHierarchyStore.hierarchy.find((function(t){return t.studyhierarchyid===e.study_hierarchy_id&&"0"!==e.status}));void 0!==a&&s.push(a)};for(a.s();!(t=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}return s},o.setLoadSchoolSubjects=function(){if(null!==o.props.auth.school)return Object(x.z)(o.props.auth.school.school_code,(function(e,t){o.setLoading(!0),!0===e&&null!==t?o.setState({school_hierarchy:t,school_hierarchy_data:o.FilterSchoolHierarchy(t),loading:!1}):o.setState({school_hierarchy:[],school_hierarchy_data:[],loading:!1})}))},o.setLoadTeacherSubjects=function(){return Object(x.E)(o.props.staff_code,(function(e,t){o.setLoading(!0),!0===e&&null!==t?(console.log("Teacher hie: ",t),o.setState({teacher_hierarchy_data:o.FilterTeacherHierarchy(t),teacherSchoolHierarchy:t,loading:!1}),o.FilteredData(o.FilterTeacherHierarchy(t))):(o.setState({teacher_hierarchy_data:[],teacherSchoolHierarchy:[],loading:!1}),o.FilteredData([]))}))},o.componentDidMount=function(){null===o.props.schoolHierarchyStore.hierarchy&&(o.setLoading(!0),o.props.FC_AllSchoolHierarchyDetails(!1,(function(e,t){!0===e&&o.setLoading(!1)}))),o.setLoadSchoolSubjects(),o.setLoadTeacherSubjects()},o.ReturnGradeGroups=function(e){var t,s=null===(t=o.state.teacherSchoolHierarchy.find((function(t){return t.study_hierarchy_id===e.studyhierarchyid})))||void 0===t?void 0:t.grade_group;return void 0!==s?JSON.parse(s):[]},o.FilteredData=function(e){try{console.log("Testing user hierarchy: ",e),null!==o.state.selected_level_code&&""!==o.state.selected_level_code&&(e=e.filter((function(e){return e.level_code===o.state.selected_level_code}))),null!==o.state.selected_combination_code&&(e=e.filter((function(e){return e.combination_code===o.state.selected_combination_code}))),o.setState({FilteredData:e})}catch(t){console.log("Error of loading: ",Object(r.a)({},t))}},o.TotalPeriods=function(){var e=0;if(null!==o.state.teacher_hierarchy_data&&o.state.teacher_hierarchy_data.length>0){var t,s=Object(i.a)(o.state.teacher_hierarchy_data);try{for(s.s();!(t=s.n()).done;){var a=t.value;e+=parseInt(a.teaching_period)*o.ReturnGradeGroups(a).length}}catch(r){s.e(r)}finally{s.f()}}return e},o.RemoveTeacherSchoolHierarchy=function(){var e=Object(a.a)(h.a.mark((function e(t){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to remove this subject on school?")){e.next=13;break}return o.setLoading(!0),e.prev=2,e.next=5,y.a.post("".concat(w.c,"/teacherhierarch/delete/").concat(t),{});case 5:s=e.sent,console.log("Success: ",s),200===s.status&&(o.setLoadTeacherSubjects(),o.setState({error:"",success:"School subject removed successfully!"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o.setState({error:Object(T.a)(e.t0),success:"",loading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),o.state={loading:!0,school_hierarchy:null,teacher_hierarchy_data:null,selected_level_code:null,selected_combination_code:null,filter_by_combination:!1,search_comb:"",addNew:!1,addingNew:!1,teacherSchoolHierarchy:[],school_hierarchy_data:null,FilteredData:null,success:"",error:""},o}return Object(o.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.state.school_hierarchy||null===this.props.schoolHierarchyStore.hierarchy||!0===this.state.loading||null===this.state.teacher_hierarchy_data||this.state.school_hierarchy_data,Object(S.jsxs)(u.Fragment,{children:[console.log("Teacher subjects: ",this.state.teacher_hierarchy_data),Object(S.jsx)("div",{className:"mb-10 bg-white rounded m-2",children:Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"p-2 mb-5",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3 justify-between",children:[Object(S.jsx)("div",{className:"flex flex-col",children:Object(S.jsx)("div",{className:"text-2xl font-bold",children:"TEACHER SUBJECTS ASSIGNMENT"})}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-col ".concat(this.TotalPeriods()>45?"bg-red-100 text-red-800":"bg-blue-100 text-primary-800","  rounded-t-md p-1 px-2 text-center"),children:[Object(S.jsxs)("span",{className:"text-sm",children:["Total periods"," ",this.TotalPeriods()>45?"(overloaded)":""]}),Object(S.jsx)("span",{className:"text-xl font-bold -mt-1",children:this.TotalPeriods()})]}),this.props.allowEdit&&Object(S.jsx)("div",{onClick:function(){t.setAddingNew(!0),t.setAddNew(!0)},className:"border font-bold ".concat(!1===this.state.addingNew?"bg-yellow-100 border-yellow-500 hover:border-yellow-600":"bg-gray-100"," text-black px-3 py-2 rounded text-center hover:bg-accent-900 hover:text-white cursor-pointer text-base"),children:!0===this.state.addingNew?"Loading":null!==this.state.teacher_hierarchy_data&&this.state.teacher_hierarchy_data.length>0?"Add & Update Subjects":"Assign teacher subjects"})]})]}),""!==this.state.success&&Object(S.jsx)("div",{onClick:function(){return t.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(S.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(S.jsxs)("div",{children:["Success: ",this.state.success]}),Object(S.jsx)("div",{children:Object(S.jsx)(j.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(S.jsx)("div",{onClick:function(){return t.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(S.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(S.jsxs)("div",{children:["Error: ",this.state.error]}),Object(S.jsx)("div",{children:Object(S.jsx)(j.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(S.jsxs)("div",{className:"mt-4",children:[Object(S.jsx)("div",{children:"Filter by"}),Object(S.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(S.jsxs)("select",{onChange:function(e){return t.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(S.jsx)("option",{value:"",children:"Choose education level"}),Object(S.jsx)("option",{value:"",children:"Filter by all levels"}),null!==this.props.schoolHierarchyStore.hierarchy&&Object(x.A)(this.props.schoolHierarchyStore.hierarchy,{type:x.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(S.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{onClick:function(){return t.setState({filter_by_combination:!t.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(S.jsx)("span",{children:"All- Click to filter by combination"}):Object(S.jsx)("span",{children:null!==this.props.schoolHierarchyStore.hierarchy&&(null===(e=Object(x.A)(this.props.schoolHierarchyStore.hierarchy,{type:x.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===t.state.selected_combination_code})))||void 0===e?void 0:e.combination_name)}),Object(S.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(S.jsx)(j.h,{className:"text-xl"}):Object(S.jsx)(b.a,{})})]}),!0===this.state.filter_by_combination&&Object(S.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(S.jsx)("input",{value:this.state.search_comb,onChange:function(e){return t.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:function(){return t.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(S.jsx)(j.h,{})})})]}),null!==this.state.selected_combination_code&&Object(S.jsxs)("div",{onClick:function(){return t.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(S.jsx)("div",{children:Object(S.jsx)(p.a,{className:"text-xl"})}),Object(S.jsx)("span",{children:"Click to view all"})]})]}),Object(S.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:null!==this.props.schoolHierarchyStore.hierarchy&&0===Object(f.f)(Object(x.A)(this.props.schoolHierarchyStore.hierarchy,{type:x.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(S.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):null!==this.props.schoolHierarchyStore.hierarchy&&Object(f.f)(Object(x.A)(this.props.schoolHierarchyStore.hierarchy,{type:x.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,s){return Object(S.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(t.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){return t.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:s+1})}),Object(S.jsx)("div",{children:e.combination_name})]},s+1)}))})]})]})]})]})]}),Object(S.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(S.jsx)("div",{className:"w-full overflow-x-auto",children:Object(S.jsxs)("table",{className:"min-w-full text-left",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Group"}),this.props.allowEdit&&Object(S.jsx)("th",{className:"p-2 border-b-2 border-gray-300"})]})}),Object(S.jsx)("tbody",{className:"text-sm",children:null===this.state.FilteredData?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:7,children:Object(S.jsx)(A,{})})}):0===this.state.FilteredData.length?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:7,className:"text-center p-3 text-xl text-gray-400",children:Object(S.jsx)("div",{children:"No result found"})})}):this.state.FilteredData.map((function(e,s){return Object(S.jsxs)("tr",{className:"hover:bg-yellow-50 group",children:[Object(S.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(S.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(S.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(S.jsx)("td",{className:"p-2 border-b uppercase",children:Object(S.jsx)("div",{className:"flex flex-row gap-1 items-center",children:t.ReturnGradeGroups(e).map((function(e,t){return Object(S.jsx)("div",{className:"bg-blue-100 rounded-md px-3 py-1 text-blue-800 w-max",children:e},t+1)}))})}),t.props.allowEdit&&Object(S.jsx)("td",{className:"border-b",children:Object(S.jsx)("div",{className:"flex justify-end",children:Object(S.jsx)("div",{onClick:function(){if(null!==t.state.teacher_hierarchy_data){var s=t.state.teacherSchoolHierarchy.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}));void 0!==s?t.RemoveTeacherSchoolHierarchy(s.teacher_study_hierarchy_id):alert("Plase try again!")}else alert("Plase try again!")},className:"bg-red-50 text-red-800 px-3 py-2 mx-1 my-1 rounded font-bold group-hover:bg-red-700 group-hover:text-white cursor-pointer",children:"Remove"})})})]},s+1)}))})]})})})]})}),!0===this.state.addNew&&null!==this.props.auth.school&&null!==this.props.schoolHierarchyStore.hierarchy&&null!==this.state.school_hierarchy&&Object(S.jsx)(I,{auth:this.props.auth,staff_code:this.props.staff_code,full_name:this.props.full_name,school:this.props.auth.school,setAddNew:this.setAddNew,allHierarchy:this.props.schoolHierarchyStore.hierarchy,teacher_hierarchy_data:this.FilterSchoolHierarchy(this.state.school_hierarchy),teacher_data:this.state.teacherSchoolHierarchy,setLoadTeacherSubjects:this.setLoadTeacherSubjects})]})}}]),s}(u.Component),R=Object(m.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_AllSchoolHierarchyDetails:x.c})(q)},119:function(e,t,s){"use strict";t.a=function(e){var t,s,a=[];return(!e.first_name||e.first_name.length<=2)&&a.push("First name is not valid"),(!e.last_name||e.last_name.length<=2)&&a.push("Last name is not valid"),(!e.bank_name||e.bank_name.length<=2)&&a.push("Bank name is not valid"),(!e.bank_account||e.bank_account.length<=2)&&a.push("Bank account number is not valid"),(!e.full_name||e.full_name.length<=2)&&a.push("Full names"),(!e.hired_date||e.hired_date.length<=2)&&a.push("Hired date is not valid"),(!e.marital_status||e.marital_status.length<=2)&&a.push("Martial status not valid"),(!e.nationality||e.nationality.length<=2)&&a.push("Nationality is not valid"),(!e.nid||e.nid.length<=4)&&a.push("NID is not valid"),(!e.phone_numbers||e.phone_numbers.length<=8)&&a.push("Phone number is not valid"),(!e.position||e.position.length<=2)&&a.push("No selected position"),(!e.qualification||e.qualification.length<=1)&&a.push("No selected qualification"),(!e.role||e.role.length<=2)&&a.push("No selected role"),(!e.rssb_number||e.rssb_number.length<=4)&&a.push("Invalid RSSB Number"),(!e.school||null===(t=e.school)||void 0===t||!t.school_name||(null===(s=e.school)||void 0===s?void 0:s.school_name.length)<=1)&&a.push("Invalid School"),(!e.sex||e.sex.length<=2)&&a.push("No sex selected"),(!e.specialization||e.specialization.length<=2)&&a.push("Invalid specialization"),(!e.staff_code||e.staff_code.length<=2)&&a.push("Invalid Staff category"),"1"===e.role_id&&(!e.teacher_hierarch||e.teacher_hierarch.length<=0)&&a.push("This user is a teacher, and must have at least one course"),{errors:a,validated:!(a.length>0)}}},121:function(e,t,s){"use strict";s.r(t),s.d(t,"UserProfile",(function(){return ie}));var a,r=s(26),i=s(27),c=s(28),o=s(29),n=s(2),l=s.n(n),d=s(16),h=s(12),u=s(24),m=s(11),b=s(1),j=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(m.B,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"About"})]}),Object(b.jsx)("div",{className:"text-gray-700",children:Object(b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 text-sm",children:[Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Staff code"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.staff_code})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"National ID"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.nid})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Full Name"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.full_name})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Gender"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.gender})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Contact No."}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.phone_numbers})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Address"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.address})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Email"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:Object(b.jsx)("a",{className:"text-blue-800",href:"mailto:".concat(e.info.email),children:e.info.email})})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2",children:"Birthday"}),Object(b.jsx)("div",{className:"px-4 py-2 font-semibold break-words",children:e.info.dob})]})]})})]})})},p=s(6),x=s(3),f=s.n(x),_=s(5),g=s.n(_),O=s(13),v=s(8),y=s(9),N=function(){var e=Object(p.a)(f.a.mark((function e(t,s){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,null,""),e.prev=1,Object(v.a)(),e.next=5,g.a.get("".concat(O.c,"/profile/teacher/").concat(t));case 5:a=e.sent,console.log("=================FC_GetProfilesssss==================="),console.log({FC_GetProfile:a}),console.log("=================FC_GetProfilesssss==================="),s(!1,a.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),s(!1,null,Object(y.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,s){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(f.a.mark((function e(t,s){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,""),e.prev=1,Object(v.a)(),e.next=5,g.a.post("".concat(O.c,"/user/updateinfo/credential/").concat(t.user_id),{username:t.username,password:t.password});case 5:a=e.sent,console.log("=================FC_ResetPassword==================="),console.log({FC_ResetPassword:a}),console.log("=================FC_ResetPassword==================="),s(!1,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),s(!1,Object(y.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,s){return e.apply(this,arguments)}}(),S=s(18);!function(e){e.NEW="New",e.ACTIVE="Active",e.DISABLED="Disabled",e.TRANSFERD="TRANSFERD",e.TERMINATED="TERMINATED",e.SUSPENDED="SUSPENDED"}(a||(a={}));var k,C=function(e){return console.log("=================workInfo==================="),console.log({workInfo:e.workInfo}),console.log("=================workInfo==================="),Object(b.jsx)("div",{className:"w-full md:w-3/12 md:mx-2",children:Object(b.jsxs)("div",{className:"bg-white p-3",children:[Object(b.jsx)("div",{className:"image overflow-hidden",children:Object(b.jsx)("img",{src:"https://stackdiary.com/140x100.png",className:"h-auto w-full mx-auto",alt:"Profile"})}),Object(b.jsx)("h1",{className:"text-gray-900 font-bold text-xl leading-8 my-1",children:e.basicInfo.full_name}),Object(b.jsxs)("ul",{className:"bg-gray-100 text-gray-600 hover:text-gray-700 hover:shadow py-2 px-3 mt-3 divide-y rounded shadow-sm",children:[Object(b.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(b.jsx)("span",{children:"Current School:"}),Object(b.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.school_name?e.workInfo.school_name:"-"})]}),Object(b.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(b.jsx)("span",{children:"Position:"}),Object(b.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.position?e.workInfo.position:"-"})]}),Object(b.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(b.jsx)("span",{children:"Combination:"}),Object(b.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.combination?e.workInfo.combination:"-"})]}),Object(b.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(b.jsx)("span",{children:"Qualification of payment:"}),Object(b.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.paid_qualification?e.workInfo.paid_qualification:"-"})]}),Object(b.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(b.jsx)("span",{children:"Status:"}),Object(b.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&(e.workInfo.status===a.ACTIVE||e.workInfo.status===a.NEW||e.workInfo.status===a.TRANSFERD?Object(b.jsx)("span",{className:"bg-primary-800 py-1 px-2 rounded text-white text-sm",children:Object(S.d)(e.workInfo.status.toLocaleLowerCase())}):e.workInfo.status?Object(b.jsx)("span",{className:"bg-yellow-800 py-1 px-2 rounded text-white text-sm",children:Object(S.d)(e.workInfo.status.toLocaleLowerCase())}):Object(b.jsx)("span",{className:"bg-gray-800 py-1 px-2 rounded text-white text-sm",children:"Undefined"}))})]}),Object(b.jsxs)("li",{className:"flex flex-col md:flex-row items-start gap-1 py-3",children:[Object(b.jsx)("span",{children:"Hired on:"}),Object(b.jsx)("span",{className:"ml-auto break-words font-semibold",children:e.workInfo&&e.workInfo.hired_date?Object(S.a)(e.workInfo.hired_date):"-"})]})]})]})})},I=l.a.memo(C),T=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(m.k,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"Experience"})]}),Object(b.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userExperiences.length&&Object(b.jsx)("li",{children:Object(b.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No experience available"})}),e.userExperiences.map((function(e,t){return Object(b.jsxs)("li",{children:[Object(b.jsxs)("div",{className:"text-teal-600",children:[e.position," at ",e.institution]}),Object(b.jsxs)("div",{className:"text-gray-500 text-xs",children:[e.starting_date?Object(S.a)(e.starting_date)+" - "+(e.ending_date?Object(S.a)(e.ending_date):"Now"):"-"," ","- ",e.ending_date]})]},t+Math.random())}))]})]})},A=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(m.d,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"Education"})]}),Object(b.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userEducations.length&&Object(b.jsx)("li",{children:Object(b.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No education available"})}),e.userEducations.map((function(e,t){return Object(b.jsxs)("li",{children:[Object(b.jsxs)("div",{className:"text-teal-600 flex items-center gap-2",children:[Object(b.jsxs)("a",{href:e.qualification_document?e.qualification_document:"",target:"_blank",rel:"noopener noreferrer",children:[e.qualification_name,e.given_institution&&" in "+e.given_institution]}),Object(b.jsx)("a",{href:e.qualification_document?e.qualification_document:"",target:"_blank",rel:"noopener noreferrer",children:Object(b.jsx)(m.k,{className:"text-gray-700 text-xl"})})]}),Object(b.jsx)("div",{className:"text-gray-500 text-xs",children:e.qualification_issued_date?Object(S.a)(e.qualification_issued_date):"-"})]},t+Math.random())}))]})]})},q=s(123),R=function(e){return console.log("===================================="),console.log({termination:e.userTerminations}),console.log("===================================="),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(q.b,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"Terminations"})]}),Object(b.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userTerminations.length&&Object(b.jsx)("li",{children:Object(b.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No termination available"})}),e.userTerminations.map((function(e,t){return Object(b.jsxs)("li",{children:[Object(b.jsxs)("div",{className:"text-teal-600",children:["Terminated on:"," ",Object(b.jsx)("span",{className:"font-semibold",children:e.termination_school_name})]}),Object(b.jsx)("div",{className:"text-gray-500 text-sm",children:e.termination_reason}),Object(b.jsx)("div",{className:"text-gray-500 text-xs",children:e.termination_status})]},t+Math.random())}))]})]})},D=s(107),E=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(D.e,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"Suspensions"})]}),Object(b.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userSuspensions.length&&Object(b.jsx)("li",{children:Object(b.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No Suspension available"})}),e.userSuspensions.map((function(e,t){return Object(b.jsxs)("li",{children:[Object(b.jsxs)("div",{className:"text-teal-600",children:["Suspended on:"," ",Object(b.jsx)("span",{className:"font-semibold",children:e.suspended_from_school})]}),Object(b.jsxs)("div",{className:"text-teal-600",children:["Start date:"," ",Object(b.jsx)("span",{className:"font-semibold",children:Object(S.a)(e.suspended_from)})]}),Object(b.jsxs)("div",{className:"text-teal-600",children:["End date:"," ",Object(b.jsx)("span",{className:"font-semibold",children:Object(S.a)(e.suspended_to)})]}),Object(b.jsx)("div",{className:"text-gray-500 text-sm",children:e.suspended_reason}),Object(b.jsx)("div",{className:"text-gray-500 text-xs",children:e.suspended_status})]},t+Math.random())}))]})]})},P=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8 mb-3",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(D.d,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"Transfer"})]}),Object(b.jsxs)("ul",{className:"list-inside space-y-2 divide-y-2",children:[0===e.userTransfers.length&&Object(b.jsx)("li",{children:Object(b.jsx)("div",{className:"text-teal-600 text-gray-500",children:"No transfer available"})}),e.userTransfers.map((function(e,t){return Object(b.jsxs)("li",{children:[Object(b.jsxs)("div",{className:"text-teal-600",children:["Transferred from:"," ",Object(b.jsx)("span",{className:"font-semibold",children:e.from_school_name})]}),Object(b.jsxs)("div",{className:"text-teal-600",children:["Transferred to:"," ",Object(b.jsx)("span",{className:"font-semibold",children:e.to_school_name?e.to_school_name:""})]}),Object(b.jsxs)("div",{className:"text-gray-500 text-sm",children:["Transferred on:"," ",Object(b.jsx)("span",{className:"font-semibold",children:e.transfer_date?Object(S.a)(e.transfer_date):"-"})]}),Object(b.jsx)("div",{className:"text-gray-500 text-xs",children:e.transfer_id})]},t+Math.random())}))]})]})},F=s(30),z=s(40),L=s(25),H=s(109),G=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(F.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(b.jsxs)("div",{className:"py-2 flex items-center",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsxs)(z.a,{children:["View"," ",e.thiTermination.requested_to_suspend_from?"suspension":"termination"," ","progress"]})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(L.a,{onClick:function(){return e.close(null)},theme:"default",children:"Close"})})]}),Object(b.jsxs)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:[Object(b.jsxs)("div",{className:"flex items-center space-x-2 font-semibold text-gray-900 leading-8",children:[Object(b.jsx)("span",{className:"text-primary-800",children:Object(b.jsx)(m.B,{size:25})}),Object(b.jsx)("span",{className:"tracking-wide",children:"Staff info"})]}),Object(b.jsx)("div",{className:"text-gray-700",children:Object(b.jsxs)("div",{className:"grid md:grid-cols-2 text-sm",children:[Object(b.jsxs)("div",{className:"grid grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Full Name"}),Object(b.jsx)("div",{className:"px-4 py-2",children:e.selectedStaff.full_name})]}),Object(b.jsxs)("div",{className:"grid grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Contact No."}),Object(b.jsx)("div",{className:"px-4 py-2",children:e.selectedStaff.phone_numbers})]}),Object(b.jsxs)("div",{className:"grid grid-cols-2",children:[Object(b.jsx)("div",{className:"px-4 py-2 font-semibold",children:"Email."}),Object(b.jsx)("div",{className:"px-4 py-2",children:Object(b.jsx)("a",{className:"text-blue-800",href:"mailto:jane@example.com",children:e.selectedStaff.email})})]})]})})]}),Object(b.jsxs)("div",{className:"bg-white p-3 border rounded",children:[Object(b.jsxs)("div",{className:"flex items-center px-2 py-1 bg-gray-200 rounded",children:[Object(b.jsx)(m.w,{className:"w-8"}),Object(b.jsx)("p",{children:e.thiTermination.reason_name})]}),Object(b.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Comment:"}),Object(b.jsx)("p",{className:"text-base",children:e.thiTermination.requested_by_comment})]}),Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Date:"}),Object(b.jsx)("p",{className:"text-base",children:Object(S.a)(e.thiTermination.requested_by_date)})]})]}),e.thiTermination.status!==H.a.PENDING&&e.thiTermination.status!==H.a.PENDING_SUSPENSION&&Object(b.jsxs)("section",{children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Feedback:"}),Object(b.jsxs)("div",{className:"bg-white p-3 border rounded",children:[Object(b.jsxs)("div",{className:"flex items-center gap-2",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Decision:"}),Object(b.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.status})]}),Object(b.jsxs)("div",{className:"flex items-center gap-2",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Start date:"}),Object(b.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.decided_to_suspend_from&&!Object(S.e)(e.thiTermination.decided_to_suspend_from)?Object(S.a)(e.thiTermination.decided_to_suspend_from):"-"})]}),Object(b.jsxs)("div",{className:"flex items-center gap-2",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"End date:"}),Object(b.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.decided_to_suspend_to&&!Object(S.e)(e.thiTermination.decided_to_suspend_to)?Object(S.a)(e.thiTermination.decided_to_suspend_to):"-"})]}),Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Comment:"}),Object(b.jsx)("p",{className:"text-base",children:e.thiTermination.decided_by_comment})]}),Object(b.jsxs)("div",{className:"flex items-center gap-2",children:[Object(b.jsx)("span",{className:"text-sm text-gray-500",children:"Done on:"}),Object(b.jsx)("p",{className:"text-base font-semibold",children:e.thiTermination.decided_by_date?Object(S.a)(e.thiTermination.decided_by_date):"-"})]})]})]})]})})},U=s(108),M=s(31),B=s(106),V=function(e){Object(c.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setSelectReason=function(e){a.setState({selectReason:e})},a.setLoadingRequest=function(e){a.setState({loadingRequest:e})},a.setAllReasons=function(e){a.setState({allReasons:e})},a.setThisReason=function(e){a.setState({thisReason:e})},a.setComment=function(e){a.setState({comment:e})},a.setStaffCode=function(e){a.setState({staffCode:e})},a.setStaffRegId=function(e){a.setState({staffRegId:e})},a.cleanToCLose=function(){a.props.close(null),a.setThisReason(null),a.setComment(""),a.setStaffCode(""),a.setStaffRegId(""),a.setState({error:{target:null,msg:""}})},a.getTerminationReasons=function(){var e=Object(p.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(!0,null,""),Object(v.a)(),e.next=5,g.a.get("".concat(O.c,"/changeStatusReasons/termination"));case 5:s=e.sent,console.log("===================================="),console.log({getTerminationReasons:s}),console.log("===================================="),t(!1,s.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(y.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){null===a.props.auth.school?a.setState({error:{target:"main-error",msg:"No school assigned to you"}}):null===a.state.allReasons&&a.getTerminationReasons((function(e,t,s){a.setLoading(e),!e&&Object(S.e)(s)&&t?a.setAllReasons(t):e||Object(S.e)(s)||a.setState({error:{target:"main-error",msg:s}})}))},a.submitTermination=function(){var e=Object(p.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.props.auth.school){e.next=3;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"No school assigned to you!"}}));case 3:if(a.props.auth.user){e.next=5;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify who you are!"}}));case 5:if(!Object(S.e)(a.props.auth.user.user_id)&&void 0!==a.props.auth.user.user_id){e.next=7;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify your code!"}}));case 7:if(null!==a.state.thisReason){e.next=9;break}return e.abrupt("return",a.setState({error:{target:"reason_id",msg:"Required!"}}));case 9:if(!Object(S.e)(a.state.comment)){e.next=11;break}return e.abrupt("return",a.setState({error:{target:"comment",msg:"Required!"}}));case 11:return e.prev=11,a.setLoadingRequest(!0),Object(v.a)(),e.next=16,g.a.post("".concat(O.c,"/changeteacherstatus/requestchangeteacherstatus"),{changeStatusType:"PENDING TERMINATION",staff_to_changestatus_id:a.props.selectedStaff.staff_code,school_code:a.props.auth.school.school_code,district_code:a.props.auth.school.school_code.substring(0,2),requested_by_reason_id:a.state.thisReason.termination_reason_id,requested_by_comment:a.state.comment});case 16:s=e.sent,console.log("===================================="),console.log({submitTermination:s}),console.log("===================================="),a.props.FC_GetAllTermination("hd",(function(e,t,s){a.setLoading(e),e||Object(S.e)(s)?(a.setState({loading:!1,thisReason:null,comment:"",error:{target:"main-success",msg:"Staff  termination requested successfully"}}),a.setLoadingRequest(!1),setTimeout((function(){a.cleanToCLose()}),2e3)):(console.log("===================================="),console.error({msg:s}),console.log("===================================="))})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(11),console.error(e.t0),a.setState({loading:!1,error:{target:"main-error",msg:Object(y.a)(e.t0)}});case 27:case"end":return e.stop()}}),e,null,[[11,23]])})));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!0,allReasons:null,loadingRequest:!1,thisReason:null,comment:"",error:{target:null,msg:""},staffRegId:"",staffCode:"",selectReason:!1},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:["main-success"===this.state.error.target&&Object(b.jsx)(u.a,{theme:"success",children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(b.jsx)(u.a,{theme:"danger",children:this.state.error.msg}),Object(b.jsxs)(F.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(b.jsxs)("div",{className:"py-2 flex items-center",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(z.a,{children:"Staff termination form"})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(L.a,{onClick:function(){return e.cleanToCLose()},theme:"default",disabled:this.state.loadingRequest,children:"Close"})})]}),Object(b.jsxs)("form",{onSubmit:this.submitTermination,children:[Object(b.jsxs)("div",{className:"p-2 flex flex-wrap",children:[Object(b.jsx)("div",{className:"w-full py-1 px-3",children:Object(b.jsx)(M.a,{disabled:!0,label:"Full name",name:"full_name",type:"text",value:this.props.selectedStaff.full_name,placeholder:"Full name",className:"p-2",onChange:function(){return null},error:""})}),Object(b.jsx)("div",{className:"w-full py-1 px-3",children:Object(b.jsxs)("div",{className:"w-full my-2",children:[Object(b.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100",children:"Termination reasons"}),this.state.selectReason?Object(b.jsx)(B.a,{title:"reason_name",id:"termination_reason_id",data:this.state.allReasons,loading:this.state.loading||this.state.loadingRequest,click:function(t){e.setThisReason(t),e.setSelectReason(!1)},close:function(){return e.setSelectReason(!1)}}):Object(b.jsxs)("div",{className:"rounded relative",children:[Object(b.jsx)("div",{className:"w-full text-lg rounded border-2 p-2 px-4 text-md ".concat(!this.state.thisReason&&"text-gray-500"," ").concat(this.state.allReasons?"cursor-pointer":"cursor-wait"," ").concat(this.state.error.target&&"reason_id"===this.state.error.target?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900"," px-3"),onClick:function(){return!e.state.loading&&!e.state.loadingRequest&&e.setSelectReason(!0)},children:this.state.thisReason?this.state.thisReason.reason_name:"Select termination reasons"}),this.state.error.target&&"reason_id"===this.state.error.target&&Object(b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:this.state.error.msg})]})]})}),Object(b.jsx)("div",{className:"w-full py-1 px-3",children:Object(b.jsx)(U.a,{disabled:this.state.loading||this.state.loadingRequest,label:"Comment",name:"other_reason",value:this.state.comment,placeholder:"Other termination reason",className:"p-2",onChange:function(t){return e.setComment(t.target.value)},error:this.state.error.target&&"comment"===this.state.error.target?this.state.error.msg:""})})]}),Object(b.jsxs)("div",{className:"px-6 text-right flex",children:[Object(b.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(b.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(L.a,{type:"submit",size:"lg",loading:this.state.loading,children:"Send"})})]})]})]})]})}}]),s}(n.Component),X=Object(d.b)(null,{FC_GetAllTermination:h.l})(V),J=function(e){Object(c.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setSelectReason=function(e){a.setState({selectReason:e})},a.setLoadingRequest=function(e){a.setState({loadingRequest:e})},a.setAllReasons=function(e){a.setState({allReasons:e})},a.setThisReason=function(e){a.setState({thisReason:e})},a.setComment=function(e){a.setState({comment:e})},a.setStartDate=function(e){a.setState({startDate:e})},a.setEndDate=function(e){a.setState({endDate:e})},a.setStaffCode=function(e){a.setState({staffCode:e})},a.setStaffRegId=function(e){a.setState({staffRegId:e})},a.cleanToCLose=function(){a.props.close(null),a.setThisReason(null),a.setComment(""),a.setStaffCode(""),a.setStaffRegId(""),a.setStartDate(""),a.setEndDate(""),a.setState({error:{target:null,msg:""}})},a.getSuspensionReasons=function(){var e=Object(p.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(!0,null,""),Object(v.a)(),e.next=5,g.a.get("".concat(O.c,"/changeStatusReasons/suspension"));case 5:s=e.sent,console.log("===================================="),console.log({getSuspensionReasons:s}),console.log("===================================="),t(!1,s.data,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(y.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){null===a.props.auth.school?a.setState({error:{target:"main-error",msg:"No school assigned to you"}}):null===a.state.allReasons&&a.getSuspensionReasons((function(e,t,s){a.setLoading(e),!e&&Object(S.e)(s)&&t?a.setAllReasons(t):e||Object(S.e)(s)||a.setState({error:{target:"main-error",msg:s}})}))},a.submitSuspension=function(){var e=Object(p.a)(f.a.mark((function e(t){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.props.auth.school){e.next=3;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"No school assigned to you!"}}));case 3:if(a.props.auth.user){e.next=5;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify who you are!"}}));case 5:if(!Object(S.e)(a.props.auth.user.user_id)&&void 0!==a.props.auth.user.user_id){e.next=7;break}return e.abrupt("return",a.setState({error:{target:"main-error",msg:"Can't identify your code!"}}));case 7:if(!Object(S.e)(a.state.startDate)){e.next=9;break}return e.abrupt("return",a.setState({error:{target:"start_date",msg:"Required!"}}));case 9:if(!Object(S.e)(a.state.endDate)){e.next=11;break}return e.abrupt("return",a.setState({error:{target:"end_date",msg:"Required!"}}));case 11:if(null!==a.state.thisReason){e.next=13;break}return e.abrupt("return",a.setState({error:{target:"reason_id",msg:"Required!"}}));case 13:if(!Object(S.e)(a.state.comment)){e.next=15;break}return e.abrupt("return",a.setState({error:{target:"comment",msg:"Required!"}}));case 15:return e.prev=15,a.setLoadingRequest(!0),Object(v.a)(),e.next=20,g.a.post("".concat(O.c,"/changeteacherstatus/requestchangeteacherstatus"),{changeStatusType:"PENDING SUSPENTION",staff_to_changestatus_id:a.props.selectedStaff.staff_code,school_code:a.props.auth.school.school_code,district_code:a.props.auth.school.school_code.substring(0,2),requested_by_reason_id:a.state.thisReason.suspension_reason_id,requested_by_comment:a.state.comment,requested_to_suspend_from:a.state.startDate,requested_to_suspend_to:a.state.endDate});case 20:s=e.sent,console.log("===================================="),console.log({submitSuspension:s}),console.log("===================================="),a.props.FC_GetAllTermination("hd",(function(e,t,s){a.setLoading(e),e||Object(S.e)(s)?(a.setState({loading:!1,thisReason:null,comment:"",error:{target:"main-success",msg:"Staff suspension requested successfully"}}),a.setLoadingRequest(!1),setTimeout((function(){a.cleanToCLose()}),2e3)):(console.log("===================================="),console.error({msg:s}),console.log("===================================="))})),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(15),console.error(e.t0),a.setState({loading:!1,error:{target:"main-error",msg:Object(y.a)(e.t0)}});case 31:case"end":return e.stop()}}),e,null,[[15,27]])})));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!0,allReasons:null,loadingRequest:!1,thisReason:null,comment:"",error:{target:null,msg:""},staffRegId:"",staffCode:"",startDate:"",endDate:"",selectReason:!1},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:["main-success"===this.state.error.target&&Object(b.jsx)(u.a,{theme:"success",children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(b.jsx)(u.a,{theme:"danger",children:this.state.error.msg}),Object(b.jsxs)(F.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(b.jsxs)("div",{className:"py-2 flex items-center",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(z.a,{children:"Staff suspension form"})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(L.a,{onClick:function(){return e.cleanToCLose()},theme:"default",disabled:this.state.loadingRequest,children:"Close"})})]}),Object(b.jsxs)("form",{onSubmit:this.submitSuspension,children:[Object(b.jsxs)("div",{className:"p-2 flex flex-wrap",children:[Object(b.jsx)("div",{className:"w-full py-1 px-3",children:Object(b.jsx)(M.a,{disabled:!0,label:"FUll name",name:"full_name",type:"text",value:this.props.selectedStaff.full_name,placeholder:"Full name",className:"p-2",onChange:function(){return null},error:""})}),Object(b.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(b.jsx)(M.a,{disabled:this.state.loading||this.state.loadingRequest,label:"Start date",name:"start_date",type:"date",value:this.state.startDate,placeholder:"Suspension starting date",className:"p-2",onChange:function(t){e.setStartDate(t.target.value),e.setState({error:{target:null,msg:""}})},error:this.state.error.target&&"start_date"===this.state.error.target?this.state.error.msg:""})}),Object(b.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(b.jsx)(M.a,{disabled:this.state.loading||this.state.loadingRequest,label:"End date",name:"end_date",type:"date",value:this.state.endDate,placeholder:"Suspension ending date",className:"p-2",onChange:function(t){e.setEndDate(t.target.value),e.setState({error:{target:null,msg:""}})},error:this.state.error.target&&"end_date"===this.state.error.target?this.state.error.msg:""})}),Object(b.jsx)("div",{className:"w-full py-1 px-3",children:Object(b.jsxs)("div",{className:"w-full my-2",children:[Object(b.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100",children:"Suspension reasons"}),this.state.selectReason?Object(b.jsx)(B.a,{title:"reason_name",id:"suspension_reason_id",data:this.state.allReasons,loading:this.state.loading||this.state.loadingRequest,click:function(t){e.setThisReason(t),e.setState({error:{target:null,msg:""}}),e.setSelectReason(!1)},close:function(){return e.setSelectReason(!1)}}):Object(b.jsxs)("div",{className:"rounded relative",children:[Object(b.jsx)("div",{className:"w-full text-lg rounded border-2 p-2 px-4 text-md ".concat(!this.state.thisReason&&"text-gray-500"," ").concat(this.state.allReasons?"cursor-pointer":"cursor-wait"," ").concat(this.state.error.target&&"reason_id"===this.state.error.target?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900"," px-3"),onClick:function(){return!e.state.loading&&!e.state.loadingRequest&&e.setSelectReason(!0)},children:this.state.thisReason?this.state.thisReason.reason_name:"Select termination reasons"}),this.state.error.target&&"reason_id"===this.state.error.target&&Object(b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:this.state.error.msg})]})]})}),Object(b.jsx)("div",{className:"w-full py-1 px-3",children:Object(b.jsx)(U.a,{disabled:this.state.loading||this.state.loadingRequest,label:"Comment",name:"other_reason",value:this.state.comment,placeholder:"Other suspension reason",className:"p-2",onChange:function(t){e.setComment(t.target.value),e.setState({error:{target:null,msg:""}})},error:this.state.error.target&&"comment"===this.state.error.target?this.state.error.msg:""})})]}),Object(b.jsxs)("div",{className:"px-6 text-right flex",children:[Object(b.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(b.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(L.a,{type:"submit",size:"lg",loading:this.state.loading,children:"Send"})})]})]})]})]})}}]),s}(n.Component),W=Object(d.b)(null,{FC_GetAllTermination:h.l})(J),Q=s(48),Y=s(116),K=s(114),Z=s(110),$=s(118),ee=s(0);function te(e){return Object(ee.a)({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}}]})(e)}!function(e){e.RESTORE_DELETE="restore_delete",e.DELETE="delete",e.INFO="info",e.OTHER="other"}(k||(k={}));var se=function(e){return Object(b.jsxs)("div",{className:"min-w-screen h-screen animated fadeIn faster  fixed  left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover",id:"modal-id",children:[Object(b.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),Object(b.jsx)("div",{className:"w-full  max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg bg-white animate__animated animate__zoomIn animate__faster",children:Object(b.jsxs)("div",{className:"",children:[Object(b.jsxs)("div",{className:"text-center p-5 flex-auto justify-center",children:[e.modalType===k.DELETE||e.modalType===k.RESTORE_DELETE&&Object(b.jsx)($.a,{className:"w-4 h-4 -m-1 flex items-center text-red-500 mx-auto"}),e.modalType===k.DELETE?Object(b.jsx)(m.j,{className:"w-16 h-16 flex items-center text-red-500 mx-auto"}):e.modalType===k.RESTORE_DELETE?Object(b.jsx)(m.D,{className:"w-16 h-16 flex items-center text-yellow-800 mx-auto"}):e.modalType===k.INFO?Object(b.jsx)(te,{className:"w-16 h-16 flex items-center text-blue-500 mx-auto"}):Object(b.jsx)(te,{className:"w-16 h-16 flex items-center text-yellow-500 mx-auto"}),Object(b.jsx)("h2",{className:"text-xl font-bold py-4 ",children:"Are you sure?"}),Object(b.jsx)("p",{className:"text-sm text-gray-500 px-8",children:e.description})]}),Object(b.jsxs)("div",{className:"p-3  mt-2 text-center space-x-4 md:block",children:[Object(b.jsx)("button",{className:"mb-2 md:mb-0 bg-white px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-gray-600 rounded-full hover:shadow-lg hover:bg-gray-100",onClick:function(){return e.setModalAction(!1)},children:"Cancel"}),Object(b.jsx)("button",{className:"mb-2 md:mb-0 border px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg ".concat(e.modalType===k.DELETE?"border-red-500 hover:bg-red-600 bg-red-500":e.modalType===k.RESTORE_DELETE?"border-yellow-700 hover:bg-yellow-800 bg-yellow-700":e.modalType===k.INFO?"border-blue-500 hover:bg-blue-600 bg-blue-500":"border-yellow-500 hover:bg-yellow-600 bg-yellow-500"),onClick:function(){e.confirmFun(),e.setModalAction(!1)},children:"Confirm"})]})]})})]})},ae=function(e,t){return console.log("T: ",e),e.find((function(e){return e.teacher_id===t}))},re=function(e){Object(c.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setThisTermination=function(e){a.setState({thisTermination:e})},a.setUserInfo=function(e){a.setState({userInfo:e})},a.setLoading=function(e){a.setState({loading:e})},a.setError=function(e){a.setState({error:e})},a.setAction=function(e){a.setState({action:e})},a.componentDidMount=function(){var e=a.props.isExternal?a.props.user_id?a.props.user_id:"":a.props.auth.user?a.props.auth.user.user_id:"";N(e,(function(e,t,s){a.setLoading(e),e||Object(S.e)(s)?!e&&t&&a.setUserInfo(t):a.setError({target:"main-error",msg:s}),console.log("=================FC_GetProfile==================="),console.log({FC_GetProfile:t}),console.log("=================FC_GetProfile===================")})),a.props.FC_GetAllTermination("hd",(function(e,t,s){console.log("================FC_GetAllTermination===================="),console.log({FC_GetAllTermination:t}),console.log("================FC_GetAllTermination===================="),a.setLoading(e),e||Object(S.e)(s)||a.setError({target:"main-error",msg:s})}))},a.restUserCredential=function(e){w({user_id:e.user_id,username:e.username,password:"12345"},(function(e,t){a.setState({loadingRequest:e}),!1===e&&Object(S.e)(t)?a.setError({target:"main-success",msg:"Resetting credential complete successfully"}):!1===e&&a.setError({target:"main-error",msg:t})}))},a.state={openSuspensionModal:!1,operationActionType:"suspend",suspendStartDate:"",suspendEndDate:"",title:"",userInfo:null,comment:"",error:{target:null,msg:""},loading:!0,thisTermination:null,action:null,assign_to_school:!1,loadingRequest:!1,rest_this_user:null},a}return Object(i.a)(s,[{key:"render",value:function(){var e,t,s,a,r,i,c,o,n,l,d=this;return console.log("==================buttonssssss=================="),console.log({user_data:this.props.user_data}),console.log("==================buttonssssss=================="),this.props.user_id&&!Object(S.e)(this.props.user_id)||!0!==this.props.isExternal||(m.o,this.props.isExternal&&(L.a,this.props.close)),!0===this.state.assign_to_school&&void 0!==this.props.user_id?Object(b.jsx)(K.a,{user_id:this.props.user_id,userDetails:{email:null===(e=this.state.userInfo)||void 0===e?void 0:e.staffDetails.basicInfo.email,full_name:null===(t=this.state.userInfo)||void 0===t?void 0:t.staffDetails.basicInfo.full_name,nid:null===(s=this.state.userInfo)||void 0===s?void 0:s.staffDetails.basicInfo.nid,staff_code:null===(a=this.state.userInfo)||void 0===a?void 0:a.staffDetails.basicInfo.staff_code},close:function(){return d.setState({assign_to_school:!1})},district_code:null===(r=this.state.userInfo)||void 0===r||null===(i=r.staffDetails.workInfo)||void 0===i?void 0:i.school_district,school_code:null===(c=this.state.userInfo)||void 0===c||null===(o=c.staffDetails.workInfo)||void 0===o?void 0:o.school_code,school_name:null===(n=this.state.userInfo)||void 0===n||null===(l=n.staffDetails.workInfo)||void 0===l?void 0:l.school_name}):this.state.loading?Object(b.jsx)("div",{className:"p-8 text-center",children:Object(b.jsx)("div",{className:"mx-auto",children:Object(b.jsx)(Q.a,{})})}):null===this.state.userInfo||this.state.userInfo.staffDetails&&this.state.userInfo.staffDetails.basicInfo?this.state.thisTermination&&!this.state.action&&this.state.userInfo?Object(b.jsx)(G,{selectedStaff:this.state.userInfo.staffDetails.basicInfo,close:function(e){return d.setThisTermination(e)},thiTermination:this.state.thisTermination}):this.state.userInfo&&this.state.action&&"TERMINATION"===this.state.action?Object(b.jsx)(X,{selectedStaff:this.state.userInfo.staffDetails.basicInfo,auth:this.props.auth,close:function(){d.setAction(null)}}):this.state.userInfo&&this.state.action&&"SUSPENSION"===this.state.action?Object(b.jsx)(W,{selectedStaff:this.state.userInfo.staffDetails.basicInfo,auth:this.props.auth,close:function(){d.setAction(null)}}):(console.log({user_id:this.props.user_id}),Object(b.jsxs)(b.Fragment,{children:[this.state.userInfo&&Object(b.jsxs)(F.a,{children:[Object(b.jsxs)("div",{className:"flex items-center gap-3 justify-between",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(z.a,{children:this.props.isExternal?"Staff Information":"Profile Information"})}),Object(b.jsxs)("div",{className:"flex items-center gap-2",children:[Object(b.jsx)(L.a,{onClick:function(){d.setState({assign_to_school:!0})},disabled:this.state.loading||this.state.loadingRequest,children:"Change School/ Position"}),this.props.auth.role&&this.props.isExternal&&Object(b.jsxs)("div",{className:"dropdown inline-block relative",children:[Object(b.jsxs)("button",{className:"opacity-80 group-hover:opacity-100 bg-accent-800 bg-opacity-0 hover:bg-opacity-10 text-accent-900 font-semibold py-2 px-4 rounded inline-flex items-center",children:[Object(b.jsx)("span",{className:"mr-1",children:"Manage"}),Object(b.jsxs)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[Object(b.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})," "]})]}),Object(b.jsxs)("ul",{className:"dropdown-menu absolute hidden bg-white shadow text-gray-700 z-50 p-2 rounded",children:[Z.e.school.includes(this.props.auth.role.role)&&this.props.user_id&&!Object(S.e)(this.props.user_id)&&this.props.setEditStaff&&this.props.setAddUserPositions&&this.props.DisableUser&&this.props.user_data&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"p-0.5",children:Object(b.jsx)("button",{onClick:function(){return d.props.user_id&&d.props.setEditStaff(d.props.user_id)},disabled:this.state.loading||this.state.loadingRequest,className:"rounded block bg-gray-500 hover:bg-gray-800 text-white py-2 px-4 w-full whitespace-no-wrap",children:"Edit"})}),Object(b.jsx)("li",{className:"p-0.5",children:Object(b.jsx)("button",{onClick:function(){return d.props.setAddUserPositions(d.props.user_data)},disabled:this.state.loading||this.state.loadingRequest,className:"rounded block bg-blue-200 hover:bg-gray-800 text-blue-900 hover:text-white py-2 px-4 w-full whitespace-no-wrap",children:"Position"})}),Object(b.jsx)("li",{className:"p-0.5",children:Object(b.jsx)("button",{className:"rounded block bg-red-500 hover:bg-red-800 text-white py-2 px-4 w-full whitespace-no-wrap",onClick:function(){return d.props.DisableUser(d.props.user_id)},disabled:this.state.loading||this.state.loadingRequest,children:"Remove"})})]}),this.props.auth.role&&this.props.isExternal&&Z.e.school.includes(this.props.auth.role.role)&&this.props.terminations.allTermination&&!ae(this.props.terminations.allTermination,this.state.userInfo.staffDetails.basicInfo.staff_code)&&Object(b.jsx)("li",{className:"p-0.5",children:Object(b.jsx)(L.a,{className:"p-2",onClick:function(){return d.setAction("SUSPENSION")},disabled:this.state.loading||this.state.loadingRequest,children:"Suspend"})}),this.props.auth.role&&this.props.isExternal&&Z.e.school.includes(this.props.auth.role.role)&&this.props.terminations.allTermination&&!ae(this.props.terminations.allTermination,this.state.userInfo.staffDetails.basicInfo.staff_code)&&Object(b.jsx)("li",{className:"p-0.5",children:Object(b.jsx)(L.a,{theme:"danger",className:"bg-red-800 p-2 hover:bg-red-900",onClick:function(){return d.setAction("TERMINATION")},disabled:this.state.loading||this.state.loadingRequest,children:"Terminate"})}),this.props.auth.role&&this.props.isExternal&&Z.e.school.includes(this.props.auth.role.role)&&this.props.terminations.allTermination&&ae(this.props.terminations.allTermination,this.state.userInfo.staffDetails.basicInfo.staff_code)&&Object(b.jsx)("li",{className:"p-0.5",children:Object(b.jsx)(L.a,{onClick:function(){d.setThisTermination(ae(d.props.terminations.allTermination,d.state.userInfo.staffDetails.basicInfo.staff_code))},disabled:this.state.loading||this.state.loadingRequest,children:"View request"})})]})]}),this.props.auth.role&&this.props.isExternal&&Z.e.system.includes(this.props.auth.role.role)&&this.props.user_info&&this.props.user_info.user_id&&this.props.user_info.username&&Object(b.jsx)(L.a,{theme:"danger-light",onClick:function(){var e,t;return d.setState({rest_this_user:{user_id:null===(e=d.props.user_info)||void 0===e?void 0:e.user_id,username:null===(t=d.props.user_info)||void 0===t?void 0:t.username}})},loading:this.state.loadingRequest,disabled:this.state.loading||this.state.loadingRequest,children:"Reset"}),this.props.close&&Object(b.jsx)("div",{className:"",children:Object(b.jsx)(L.a,{onClick:this.props.close,theme:"default",disabled:this.state.loadingRequest,children:"Close"})})]})]}),"main-success"===this.state.error.target&&Object(b.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(b.jsx)(u.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),Object(b.jsx)("div",{className:"bg-gray-100",children:Object(b.jsx)("div",{className:"container mx-auto my-5 p-5",children:Object(b.jsxs)("div",{className:"md:flex no-wrap md:-mx-2 ",children:[Object(b.jsx)(I,{basicInfo:this.state.userInfo.staffDetails.basicInfo,workInfo:this.state.userInfo.staffDetails.workInfo}),Object(b.jsxs)("div",{className:"w-full md:w-9/12 mx-2",children:[Object(b.jsx)(j,{info:this.state.userInfo.staffDetails.basicInfo}),Object(b.jsx)("div",{className:"my-4"}),Object(b.jsx)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:Object(b.jsxs)("div",{className:"grid grid-cols-2",children:[Object(b.jsx)(A,{userEducations:this.state.userInfo.staffDetails.education?this.state.userInfo.staffDetails.education:[]}),Object(b.jsx)(T,{userExperiences:this.state.userInfo.staffDetails.experience?this.state.userInfo.staffDetails.experience:[]})]})}),Object(b.jsx)("div",{className:"my-4"}),Object(b.jsx)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:Object(b.jsxs)("div",{className:"grid grid-cols-2",children:[Object(b.jsx)(R,{userTerminations:this.state.userInfo.staffDetails.terminationInfo?this.state.userInfo.staffDetails.terminationInfo:[]}),Object(b.jsx)(E,{userSuspensions:this.state.userInfo.staffDetails.suspensionInfo?this.state.userInfo.staffDetails.suspensionInfo:[]})]})}),Object(b.jsx)("div",{className:"my-4"}),Object(b.jsx)("div",{className:"bg-white p-3 shadow-sm rounded-sm",children:Object(b.jsx)("div",{className:"grid grid-cols-2",children:Object(b.jsx)(P,{userTransfers:this.state.userInfo.staffDetails.transferInfo?this.state.userInfo.staffDetails.transferInfo:[]})})})]})]})})}),Object(b.jsx)(Y.b,{allowEdit:this.props.isExternal,staff_code:this.state.userInfo.staffDetails.basicInfo.staff_code,full_name:this.state.userInfo.staffDetails.basicInfo.full_name})]}),null!==this.state.rest_this_user&&Object(b.jsx)(se,{modalType:k.OTHER,confirmFun:function(){return d.restUserCredential(d.state.rest_this_user)},setModalAction:function(e){return!e&&d.setState({rest_this_user:null})},description:"Are you sure you want to reset the user's credential?"})]})):Object(b.jsx)("div",{className:"py-10 px-10",children:Object(b.jsxs)("div",{className:"bg-yellow-50 text-yellow-900 border border-yellow-900 rounded flex flex-col items-center justify-center p-6 my-8",children:[Object(b.jsx)(m.o,{className:"text-6xl md:text-9xl"}),Object(b.jsxs)("div",{className:"text-center flex flex-col",children:[Object(b.jsx)("span",{className:"text-2xl md:text-4xl font-extrabold",children:"Profile not found!"}),Object(b.jsx)("span",{className:"text-lg",children:"Please try again there must be an error, or invalid staff code!"}),this.props.isExternal&&Object(b.jsx)(L.a,{theme:"primary-light",className:"mt-4",onClick:this.props.close,children:"Back"})]})]})})}}]),s}(n.Component),ie=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic,terminations:e.terminations}}),{FC_GetAllTermination:h.l})(re)},124:function(e,t,s){"use strict";var a=s(4),r=s(41),i=s(6),c=s(36),o=s(26),n=s(27),l=s(28),d=s(29),h=s(3),u=s.n(h),m=s(2),b=s(11),j=s(31),p=s(118),x=s(13),f=s(5),_=s.n(f),g=s(8),O=s(18),v=s(25),y=s(9),N=s(1),w=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).addPositionToSchool=function(e){n.setState({schoolPositionsTemp:[e].concat(Object(c.a)(n.state.schoolPositionsTemp.filter((function(t){return t.position_id!==e.position_id}))))})},n.addSchoolPositions=Object(i.a)(u.a.mark((function e(){var t,s,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to add these positions?")){e.next=23;break}if(!(n.state.schoolPositionsTemp.length>0&&void 0===n.props.school?n.props.auth.school:n.props.school)){e.next=23;break}Object(g.a)(),t=[],n.setState({loading:!0}),s=Object(r.a)(n.state.schoolPositionsTemp);try{for(s.s();!(i=s.n()).done;)c=i.value,t.push({school_code:void 0===n.props.school?n.props.auth.school.school_code:n.props.school.school_code,position_code:c.position_code})}catch(o){s.e(o)}finally{s.f()}return console.log("Positions codes: ",t),e.prev=8,e.next=11,_.a.post("".concat(x.c,"/schoolposition/assign"),t);case 11:n.props.appendPositionsToSchool(n.state.schoolPositionsTemp),n.setState({schoolPositionsTemp:[]}),n.setState({loading:!1}),n.setState({success:"Positions added successfully!",error:""}),alert("Positions added successfully!"),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(8),n.setState({loading:!1}),n.setState({success:"",error:Object(y.a)(e.t0)}),console.log("Err: ",Object(a.a)({},e.t0));case 23:case"end":return e.stop()}}),e,null,[[8,18]])}))),n.RemoveSchoolPosition=function(){var e=Object(i.a)(u.a.mark((function e(t,s){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===s||!0!==window.confirm("Are you sure do you want to remove this position")){e.next=15;break}return n.setState({loading:!0}),e.prev=2,e.next=5,_.a.post("".concat(x.c,"/schoolposition/delete/").concat(t),{school_code:s});case 5:r=e.sent,console.log("Delete status: ",r.status),200===r.status?(n.setState({success:"Positions added successfully!",error:""}),n.props.removePositionsToSchool(t)):n.setState({success:"",error:"Something went wrong! try again"}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),n.setState({success:"",error:Object(y.a)(e.t0)}),n.setState({loading:!1}),console.log("Err: ",Object(a.a)({},e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,s){return e.apply(this,arguments)}}(),n.state={searchPositionValue:"",schoolPositionsTemp:[],edit:!1,loading:!1,success:"",error:""},n}return Object(n.a)(s,[{key:"render",value:function(){var e,t,s=this;return Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"bg-white dark:bg-dark-800 p-3 rounded",children:[Object(N.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("span",{className:"text-2xl font-bold text-gray-600",children:!0===this.state.edit?"Assign positions to school":"School positions list"}),Object(N.jsx)("div",{children:Object(N.jsx)(v.a,{onClick:function(){return s.setState({edit:!s.state.edit})},theme:!0===this.state.edit?"default":"accent",children:!0===this.state.edit?"Back to list":"Add new positions"})})]}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{onClick:function(){return s.props.close&&s.props.close()},className:"bg-gray-100 hover:bg-yellow-100 flex items-center justify-center p-1 cursor-pointer rounded-full",children:Object(N.jsx)(b.h,{className:"text-3xl"})})})]}),""!==this.state.success&&Object(N.jsx)("div",{onClick:function(){return s.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(N.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(N.jsxs)("div",{children:["Success: ",this.state.success]}),Object(N.jsx)("div",{children:Object(N.jsx)(b.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(N.jsx)("div",{onClick:function(){return s.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(N.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(N.jsxs)("div",{children:["Error: ",this.state.error]}),Object(N.jsx)("div",{children:Object(N.jsx)(b.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(N.jsxs)("div",{className:"grid md:grid-cols-".concat(!0===this.state.edit?"2":"1"),children:[Object(N.jsxs)("div",{className:"col-span-1 border-r pr-2 ".concat(!0===this.state.edit?"":"hidden"),children:[Object(N.jsx)("div",{className:"",children:Object(N.jsx)(j.a,{onChange:function(e){return s.setState({searchPositionValue:e.target.value})},error:"",placeholder:"Search position...",value:this.state.searchPositionValue,type:"search",name:"post",label:"Search"})}),Object(N.jsx)("div",{className:"h-screen overflow-y-auto",children:0===Object(O.f)(this.props.positions,this.state.searchPositionValue).length?Object(N.jsx)("div",{children:"No positions found!"}):Object(O.f)(this.props.positions,this.state.searchPositionValue).filter((function(e){var t;return e.position_id!==(null===(t=s.state.schoolPositionsTemp.find((function(t){return t.position_id===e.position_id})))||void 0===t?void 0:t.position_id)})).map((function(e,t){return Object(N.jsxs)("div",{className:"border border-gray-300 px-3 py-2 flex flex- justify-between group bg-white hover:bg-blue-50 hover:border-blue-300 gap-3  items-center cursor-pointer my-1 rounded",onClick:function(){s.addPositionToSchool(e)},children:[Object(N.jsx)("div",{className:"flex flex-col",children:Object(N.jsxs)("span",{className:"text-base font-bold text-gray-700 group-hover:text-primary-800",children:[e.position_name,"(",e.qualification_name,")"]})}),Object(N.jsx)("div",{className:"",children:Object(N.jsx)("div",{className:"bg-blue-100 text-primary px-3 py-1 rounded cursor-pointer text-base text-primary-800 group-hover:text-white group-hover:bg-primary-800",children:"Select"})})]},t+1)}))})]}),Object(N.jsxs)("div",{className:"col-span-1 px-3",children:[" ",Object(N.jsxs)("div",{className:"flex flex-col border-b pb-3 border-accent-900",children:[Object(N.jsx)("span",{children:"School"}),Object(N.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(N.jsxs)("span",{className:"text-accent-900 text-xl font-bold",children:[void 0===this.props.school?null===(e=this.props.auth.school)||void 0===e?void 0:e.school_name:this.props.school.school_name," ","(",void 0===this.props.school?null===(t=this.props.auth.school)||void 0===t?void 0:t.school_code:this.props.school.school_code,")"]}),Object(N.jsx)("div",{className:"font-bold text-2xl",children:[].concat(Object(c.a)(this.state.schoolPositionsTemp),Object(c.a)(this.props.schoolPositions)).length})]})]}),Object(N.jsx)("div",{className:"mt-3",children:0===[].concat(Object(c.a)(this.state.schoolPositionsTemp),Object(c.a)(this.props.schoolPositions)).length?Object(N.jsxs)("div",{className:"flex flex-col bg-gray-100 w-full justify-center items-center rounded-md p-4",children:[Object(N.jsx)("div",{className:"text-7xl text-gray-400",children:Object(N.jsx)(p.b,{})}),Object(N.jsx)("span",{className:"text-3xl text-black",children:"School positions not found"}),Object(N.jsx)("span",{className:"text-sm text-gray-600",children:"This school has no positions assigned to it. Please select positions"})]}):Object(N.jsxs)("div",{children:[0!==this.state.schoolPositionsTemp.length&&Object(N.jsx)("div",{className:"text-xl text-primary-800 my-3 font-bold",children:"New pending"}),this.state.schoolPositionsTemp.map((function(e,t){return Object(N.jsx)("div",{className:"border rounded-md px-3 py-2 mb-2 group cursor-pointer ".concat(void 0!==s.state.schoolPositionsTemp.find((function(t){return t.position_id===e.position_id}))?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400 hover:bg-blue-100"," "),children:Object(N.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(N.jsxs)("span",{className:"text-lg font-bold",children:[e.position_name," (",e.qualification_name,")"]}),Object(N.jsx)("div",{className:"",children:Object(N.jsx)("div",{onClick:function(){s.setState({schoolPositionsTemp:s.state.schoolPositionsTemp.filter((function(t){return t.position_id!==e.position_id}))})},className:"bg-white text-accent-900 px-3 py-1 rounded cursor-pointer text-base border border-yellow-400",children:"Remove"})})]})},t+1)})),0!==this.state.schoolPositionsTemp.length&&Object(N.jsx)("div",{children:Object(N.jsx)("div",{onClick:function(){s.addSchoolPositions()},className:"bg-primary-800 text-white hover:bg-blue-900 px-4 py-2 rounded w-max cursor-pointer",children:"Submit positions"})}),0!==this.props.schoolPositions.length&&Object(N.jsx)("div",{className:"font-bold text-lg text-gray-500 my-3",children:"List of school position"}),this.props.schoolPositions.map((function(e,t){return Object(N.jsxs)("div",{className:"border rounded-md px-3 py-2 mb-2 group cursor-pointer ".concat(void 0!==s.state.schoolPositionsTemp.find((function(t){return t.position_code===e.position_code}))?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400 hover:bg-blue-100"," flex flex-row items-center justify-between gap-4"),children:[Object(N.jsx)("div",{className:"",children:Object(N.jsx)("div",{className:"flex flex-row items-center justify-between",children:Object(N.jsxs)("span",{className:"text-lg font-bold",children:[e.position_name," (",e.qualification_name,")"]})})}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{onClick:function(){return s.RemoveSchoolPosition(e.school_has_position_id,e.school_code)},className:"bg-white border border-white text-red-800 group-hover:border-red-500 px-3 py-2 font-bold text-center rounded",children:"Remove"})})]},t+1)}))]})})]})]})]})})}}]),s}(m.Component);t.a=w},130:function(e,t,s){"use strict";s.d(t,"a",(function(){return M}));var a=s(41),r=s(36),i=s(4),c=s(26),o=s(27),n=s(28),l=s(29),d=s(2),h=s.n(d),u=s(11),m=s(107),b=s(16),j=s(12),p=s(24),x=s(30),f=s(40),_=s(104),g=s(31),O=s(48),v=s(105),y=s(25),N=s(106),w=s(116),S=s(1),k=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).submitLogin=function(e){var t;if(e.preventDefault(),""===a.state.nid)return a.setState({error:{target:"nid",msg:"Required!"}});if((null===a.state.first_name||""===a.state.first_name)&&a.props.required.first_name)return a.setState({error:{target:"first_name",msg:"Required!"}});if((null===a.state.last_name||(null===(t=a.state.last_name)||void 0===t?void 0:t.length)<=2)&&a.props.required.last_name)return a.setState({error:{target:"last_name",msg:"Required!"}});if(""===a.state.full_name&&a.props.required.full_name)return a.setState({error:{target:"full_name",msg:"Required!"}});if(""===a.state.phone_numbers&&a.props.required.phone_numbers)return a.setState({error:{target:"phone_numbers",msg:"Required!"}});if(""===a.state.email&&a.props.required.email)return a.setState({error:{target:"email",msg:"Required!"}});if(""===a.state.username&&a.props.required.username)return a.setState({error:{target:"username",msg:"Required!"}});if(""===a.state.staff_code&&a.props.required.staff_code)return a.setState({error:{target:"staff_code",msg:"Required!"}});if(""===a.state.sex&&a.props.required.sex)return a.setState({error:{target:"sex",msg:"Required!"}});if(""===a.state.martial_status&&a.props.required.martial_status)return a.setState({error:{target:"martial_status",msg:"Required!"}});if((null===a.state.martial_status||""===a.state.martial_status)&&a.props.required.martial_status)return a.setState({error:{target:"martial_status",msg:"Required!"}});if(""===a.state.rssb_number&&a.props.required.rssb_number)return a.setState({error:{target:"rssb_number",msg:"Required!"}});if(""===a.state.highest_qualification_id&&a.props.required.highest_qualification_id)return a.setState({error:{target:"highest_qualification_id",msg:"Required!"}});if(""===a.state.nationality_id||null===a.state.nationality_id)return a.setState({error:{target:"nationality_id",msg:"Required!"}});if(""===a.state.dob||null===a.state.dob)return a.setState({error:{target:"dob",msg:"Required!"}});if((""===a.state.bank_id||null===a.state.bank_id)&&a.props.required.bank_id)return a.setState({error:{target:"bank_id",msg:"Required!"}});if(""===a.state.bank_account||null===a.state.bank_account)return a.setState({error:{target:"bank_account",msg:"Required!"}});if(""===a.state.graduation_date&&a.props.required.graduation_date)return a.setState({error:{target:"graduation_date",msg:"Required!"}});if(null===a.state.specialization_id||""===a.state.specialization_id)return a.setState({error:{target:"specialization_id",msg:"Required!"}});if((null===a.state.contract_type||""===a.state.contract_type)&&a.props.required.contract_type)return a.setState({error:{target:"contract_type",msg:"Required!"}});if(""===a.state.hired_date&&a.props.required.hired_date)return a.setState({error:{target:"hired_date",msg:"Required!"}});if(""===a.state.bank_account&&a.props.required.bank_account)return a.setState({error:{target:"bank_account",msg:"Required!"}});var s={bank_account:a.state.bank_account,bank_id:a.state.bank_id,contract_type:a.state.contract_type,dob:a.state.dob,education_domain_id:a.state.education_domain_id,education_sub_domain_id:a.state.education_domain_id,email:a.state.email,first_name:a.state.first_name,full_name:a.state.full_name,graduation_date:a.state.graduation_date,highest_qualification_id:a.state.highest_qualification_id,hired_date:a.state.hired_date,last_name:a.state.last_name,martial_status:a.state.martial_status,middle_name:a.state.middle_name,nationality_id:a.state.nationality_id,nid:a.state.nid,phone_numbers:a.state.phone_numbers,rssb_number:a.state.rssb_number,sex:a.state.sex,specialization_id:a.state.specialization_id,staff_category_id:a.state.staff_category_id,staff_code:a.state.staff_code,username:a.state.username,village_code:a.state.village_code};Object(j.U)(a.props.user_id,s,(function(e,t){!0===e?(a.setState({loading:!1,error:{target:"main-success",msg:"Staff details updated successfully"}}),a.props.success(a.props.user_id,s)):a.setState({loading:!1,error:{target:"main-error",msg:t}}),setTimeout((function(){a.setState({error:{target:null,msg:""}})}),3e3)}))},a.state={loading_assets:!0,loading:!1,error:{target:null,msg:""},nid:"",first_name:"",middle_name:"",last_name:"",full_name:"",phone_numbers:"",email:"",username:"",staff_code:"",sex:"",martial_status:"",highest_qualification_id:"",dob:"",rssb_number:"",nationality_id:"",bank_account:"",bank_id:"",village_code:"",staff_category_id:"",specialization_id:"",contract_type:"",graduation_date:"",education_domain_id:"",education_sub_domain_id:"",hired_date:"",specialization_open:!1},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;!0===this.props.basic.register_assets.loading||null===this.props.basic.register_assets.data?this.props.FC_GetRegistrationAssets((function(t,s){!0===t?e.props.FC_GetUserDetailsInfo(e.props.user_id,(function(t,s,a){!0===t&&null!==s?e.setState({loading_assets:!1,bank_account:s.bank_account,bank_id:s.bank_id,contract_type:s.contract_type,dob:s.dob,education_domain_id:s.education_domain_id,education_sub_domain_id:s.education_sub_dommain_id,email:s.email,first_name:s.first_name,full_name:s.full_name,last_name:s.last_name,graduation_date:s.graduation_date,highest_qualification_id:s.highest_qualification_id,hired_date:s.hired_date,martial_status:s.marital_status,middle_name:s.middle_name,nationality_id:s.nationality_id,nid:s.nid,phone_numbers:s.phone_numbers,rssb_number:s.rssb_number,sex:s.sex,specialization_id:s.specialisation_id,staff_category_id:s.staff_category_id,staff_code:s.staff_code,username:s.username,village_code:s.village_code,error:{target:null,msg:""}}):e.setState({loading_assets:!1,error:{target:"main-error",msg:a}})})):e.setState({error:{target:"main-error",msg:s}})})):this.props.FC_GetUserDetailsInfo(this.props.user_id,(function(t,s,a){!0===t&&null!==s?e.setState({loading_assets:!1,bank_account:s.bank_account,bank_id:s.bank_id,contract_type:s.contract_type,dob:s.dob,education_domain_id:s.education_domain_id,education_sub_domain_id:s.education_sub_dommain_id,email:s.email,first_name:s.first_name,full_name:s.full_name,last_name:s.last_name,graduation_date:s.graduation_date,highest_qualification_id:s.highest_qualification_id,hired_date:s.hired_date,martial_status:s.marital_status,middle_name:s.middle_name,nationality_id:s.nationality_id,nid:s.nid,phone_numbers:s.phone_numbers,rssb_number:s.rssb_number,sex:s.sex,specialization_id:s.specialization_id,staff_category_id:s.staff_category_id,staff_code:s.staff_code,username:s.username,village_code:s.village_code,error:{target:null,msg:""}}):e.setState({loading_assets:!1,error:{target:"main-error",msg:a}})}))}},{key:"render",value:function(){var e=this;if(!0===this.props.basic.register_assets.loading||null===this.props.basic.register_assets.data)return Object(S.jsxs)(x.a,{children:[Object(S.jsx)("div",{className:"py-6 mx-auto text-center",children:Object(S.jsx)(O.a,{})}),Object(S.jsx)("h3",{className:"pt-3 font-bold text-lg text-center",children:"Loading..."})]});if(!0===this.state.loading_assets)return Object(S.jsxs)(x.a,{children:[Object(S.jsx)("div",{className:"py-6 mx-auto text-center",children:Object(S.jsx)(O.a,{})}),Object(S.jsx)("h3",{className:"pt-3 font-bold text-lg text-center",children:"Loading profile info..."})]});var t=this.props.basic.register_assets.data,s=t.specializations.find((function(t){return t.specialization_id===e.state.specialization_id}));return Object(S.jsxs)(S.Fragment,{children:["main-error"===this.state.error.target&&Object(S.jsx)(p.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(S.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(S.jsxs)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(S.jsxs)("div",{className:"py-2 flex items-center border-b",children:[Object(S.jsx)("div",{className:"flex-1 opacity-70",children:Object(S.jsx)(f.a,{children:"Update staff"})}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)(y.a,{onClick:this.props.close,theme:"danger-light",children:"Close"})})]}),Object(S.jsxs)("form",{onSubmit:this.submitLogin,children:[Object(S.jsxs)("div",{className:"p-2 flex flex-wrap",children:[Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"National ID/Passport(*)",name:"nid",type:"text",onChange:function(t){return e.setState({nid:t.target.value,error:{target:null,msg:""}})},value:this.state.nid,error:"nid"===this.state.error.target?this.state.error.msg:"",placeholder:"National Id",className:"p-2"})}),this.props.formAccess.first_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"First name",name:"first_name",onChange:function(t){return e.setState({first_name:t.target.value,full_name:"".concat(null!==t.target.value?t.target.value:""," ").concat(null!==e.state.middle_name?e.state.middle_name:""," ").concat(null!==e.state.last_name?e.state.last_name:""),error:{target:null,msg:""}})},value:this.state.first_name,error:"first_name"===this.state.error.target?this.state.error.msg:"",placeholder:"First name",className:"p-2"})}),this.props.formAccess.middle_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Middle name",name:"middle_name",onChange:function(t){return e.setState({middle_name:t.target.value,full_name:"".concat(null!==e.state.first_name?e.state.first_name:""," ").concat(null!==t.target.value?t.target.value:""," ").concat(null!==e.state.last_name?e.state.last_name:""),error:{target:null,msg:""}})},value:this.state.middle_name,error:"middle_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Middle name",className:"p-2"})}),this.props.formAccess.last_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Last name",name:"last_name",onChange:function(t){return e.setState({last_name:t.target.value,full_name:"".concat(null!==e.state.first_name?e.state.first_name:""," ").concat(null!==e.state.middle_name?e.state.middle_name:""," ").concat(null!==t.target.value?t.target.value:""),error:{target:null,msg:""}})},value:this.state.last_name,error:"last_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Last name",className:"p-2"})}),this.props.formAccess.full_name&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:!0,label:"Full name",name:"full_name",onChange:function(e){},value:this.state.full_name,error:"full_name"===this.state.error.target?this.state.error.msg:"",placeholder:"Full name",className:"p-2"})}),this.props.formAccess.phone_numbers&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Phone number",name:"phone_numbers",onChange:function(t){return e.setState({phone_numbers:t.target.value,error:{target:null,msg:""}})},value:this.state.phone_numbers,error:"phone_numbers"===this.state.error.target?this.state.error.msg:"",placeholder:"0700000000",className:"p-2"})}),this.props.formAccess.email&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"email",name:"email",onChange:function(t){return e.setState({email:t.target.value,error:{target:null,msg:""}})},value:this.state.email,error:"email"===this.state.error.target?this.state.error.msg:"",placeholder:"my@email.com",className:"p-2"})}),this.props.formAccess.username&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Username (your number)",name:"username",onChange:function(t){return e.setState({username:t.target.value,error:{target:null,msg:""}})},value:this.state.username,error:"username"===this.state.error.target?this.state.error.msg:"",placeholder:"0780000000",className:"p-2"})}),this.props.formAccess.staff_code&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Staff code",name:"staff_code",onChange:function(t){return e.setState({staff_code:t.target.value,error:{target:null,msg:""}})},value:this.state.staff_code,error:"staff_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Staff code",className:"p-2"})}),this.props.formAccess.sex&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(_.a,{data:[{title:this.state.sex?this.state.sex:"",value:this.state.sex?this.state.sex:""},{title:"",value:""},{title:"MALE",value:"MALE"},{title:"FEMALE",value:"FEMALE"}],error:"sex"===this.state.error.target?this.state.error.msg:"",value:this.state.sex,onChange:function(t){return e.setState({sex:t.target.value,error:{target:null,msg:""}})},label:"Gender",name:"gender",placeholder:"Select gender"})}),this.props.formAccess.martial_status&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(_.a,{data:[{title:this.state.martial_status?this.state.martial_status:"",value:this.state.martial_status?this.state.martial_status:""}].concat(Object(r.a)(t.marital.map((function(e){return{title:e,value:e}})))),error:"martial_status"===this.state.error.target?this.state.error.msg:"",value:this.state.martial_status,onChange:function(t){e.setState({martial_status:t.target.value,error:{target:null,msg:""}})},label:"Martial Status",name:"matrias_status",placeholder:"Select a value"})}),this.props.formAccess.rssb_number&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"RSSB Number",name:"rssb_number",onChange:function(t){return e.setState({rssb_number:t.target.value,error:{target:null,msg:""}})},value:this.state.rssb_number,error:"rssb_number"===this.state.error.target?this.state.error.msg:"",placeholder:"RSSB number",className:"p-2"})}),this.props.formAccess.highest_qualification_id&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(_.a,{data:[{title:"",value:""}].concat(Object(r.a)(this.props.basic.qualifications.map((function(e){return{value:e.qualification_id,title:e.qualification_name}})))),error:"highest_qualification_id"===this.state.error.target?this.state.error.msg:"",value:this.state.highest_qualification_id,onChange:function(t){return e.setState({highest_qualification_id:t.target.value,error:{target:null,msg:""}})},label:"Highest Qualification",name:"highest_qualification",placeholder:"Select a highest qualification"})}),this.props.formAccess.nationality_id&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(_.a,{data:[{title:"",value:"Select a country"}].concat(Object(r.a)(t.nationality.map((function(e){return{title:e.country,value:e.country_id}})))),error:"nationality_id"===this.state.error.target?this.state.error.msg:"",value:this.state.nationality_id,onChange:function(t){return e.setState({nationality_id:t.target.value,error:{target:null,msg:""}})},label:"Nationality",name:"nationality",placeholder:"Select a country"})}),this.props.formAccess.dob&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Date of birth",name:"dob",type:"date",onChange:function(t){return e.setState({dob:t.target.value,error:{target:null,msg:""}})},value:this.state.dob,error:"dob"===this.state.error.target?this.state.error.msg:"",placeholder:"DOB",className:"p-2"})}),this.props.formAccess.bank_id&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(_.a,{data:[{title:"",value:""}].concat(Object(r.a)(t.banks.map((function(e){return{title:e.bank,value:e.bank_id}})))),error:"bank_id"===this.state.error.target?this.state.error.msg:"",value:this.state.bank_id,onChange:function(t){return e.setState({bank_id:t.target.value,error:{target:null,msg:""}})},label:"Select a bank",name:"bank",placeholder:"Select bank"})}),this.props.formAccess.bank_account&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Bank Account",name:"bank_account",type:"number",onChange:function(t){return e.setState({bank_account:t.target.value,error:{target:null,msg:""}})},value:this.state.bank_account,error:"bank_account"===this.state.error.target?this.state.error.msg:"",placeholder:"Bank account",className:"p-2"})}),this.props.formAccess.village_code&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Village",name:"village_code",onChange:function(t){return e.setState({village_code:t.target.value,error:{target:null,msg:""}})},value:this.state.village_code,error:"village_code"===this.state.error.target?this.state.error.msg:"",placeholder:"Village",className:"p-2"})}),this.props.formAccess.graduation_date&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Graduation date",name:"graduation_date",type:"date",onChange:function(t){return e.setState({graduation_date:t.target.value,error:{target:null,msg:""}})},value:this.state.graduation_date,error:"graduation_date"===this.state.error.target?this.state.error.msg:"",placeholder:"Graduation date",className:"p-2"})}),this.props.formAccess.specialization_id&&Object(S.jsx)(S.Fragment,{children:this.state.specialization_open?Object(S.jsxs)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:[Object(S.jsx)("label",{className:"block",children:"Specialization"}),Object(S.jsx)(N.a,{click:function(t){return e.setState({specialization_id:t.specialization_id,specialization_open:!1})},close:function(){return e.setState({specialization_open:!1})},data:[{value:"",title:""}].concat(Object(r.a)(t.specializations.map((function(e){return{specialization_id:e.specialization_id,specialization_name:e.specialization_name}})))),id:"specialization_id",title:"specialization_name",loading:this.state.loading})]}):Object(S.jsx)("div",{onClick:function(){return e.setState({specialization_open:!0})},className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{error:"specialization_id"===this.state.error.target?this.state.error.msg:"",label:"Specialization",name:"",onChange:function(e){},placeholder:"",value:void 0===s?"":s.specialization_name})})}),this.props.formAccess.contract_type&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(_.a,{data:[{title:this.state.contract_type?this.state.contract_type:"",value:this.state.contract_type?this.state.contract_type:""}].concat(Object(r.a)(t.contract_types.map((function(e){return{value:e,title:e}})))),error:"contract_type"===this.state.error.target?this.state.error.msg:"",value:this.state.contract_type,onChange:function(t){return e.setState({contract_type:t.target.value,error:{target:null,msg:""}})},label:"Contract type",name:"staff_category",placeholder:"Select category"})}),this.props.formAccess.hired_date&&Object(S.jsx)("div",{className:"w-full lg:w-1/2 py-1 px-3",children:Object(S.jsx)(g.a,{disabled:this.state.loading,label:"Date of hire (Date in education)",name:"hired_date",onChange:function(t){return e.setState({hired_date:t.target.value,error:{target:null,msg:""}})},value:this.state.hired_date,error:"hired_date"===this.state.error.target?this.state.error.msg:"",type:"date",placeholder:"Hired date",className:"p-2"})})]}),Object(S.jsxs)("div",{className:"px-6 text-right flex",children:[Object(S.jsx)("div",{className:"flex-1",children:null!==this.state.error.target&&"main-error"!==this.state.error.target&&"main-success"!==this.state.error.target&&Object(S.jsx)("div",{className:"text-sm text-red-400 pr-4",children:"Some fields are required!"})}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)(y.a,{type:"submit",size:"lg",loading:this.state.loading,children:"Update staff details"})})]})]}),Object(S.jsx)("div",{className:"bg-gray-100 py-1 mt-4 rounded",children:""!==this.state.staff_code?Object(S.jsx)(w.b,{allowEdit:!0,staff_code:this.state.staff_code,full_name:this.state.full_name}):Object(S.jsx)("div",{className:"bg-gray-100 rounded-md px-6 py-3 font-extrabold text-gray-500 text-center text-2xl",children:"Loading, please wait..."})})]})]})}}]),s}(h.a.Component),C=Object(b.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_GetRegistrationAssets:j.v,FC_GetUserDetailsInfo:j.G})(k),I=s(121),T=s(18),A=s(119),q=s(6),R=s(20),D=s(3),E=s.n(D),P=s(5),F=s.n(P),z=s(10),L=s(13),H=function(e,t){return null!==e?e.filter((function(s){return s.qualification_name===t.qualification&&null!==e})):[]},G=function(e){var t=Object(d.useState)(null),s=Object(R.a)(t,2),a=s[0],r=s[1],i=Object(d.useState)(null),c=Object(R.a)(i,2),o=(c[0],c[1]),n=Object(d.useState)(!1),l=Object(R.a)(n,2),h=l[0],u=l[1],b=Object(d.useState)(""),p=Object(R.a)(b,2),x=p[0],f=p[1],_=Object(d.useState)(null),g=Object(R.a)(_,2),v=g[0],y=g[1],N=function(){var t=Object(q.a)(E.a.mark((function t(){var s,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.auth.user||""===x){t.next=18;break}return u(!0),t.prev=2,t.next=5,F.a.post("".concat(L.c,"/user/assign/position"),{user_id:e.user.user_id,school_code:e.school.school_code,position_code:x});case 5:s=t.sent,null!==a&&void 0!==(r=a.find((function(e){return e.position_code===x})))&&(y(r.position_name),e.updateUserPosition(e.user.user_id,r.position_name)),console.log("Success: ",s),e.close&&e.close(),alert("User position assignment done successfully!"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log("Err: ",t.t0);case 15:u(!1),t.next=19;break;case 18:alert("Please select a position!");case 19:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(){return t.apply(this,arguments)}}();return Object(d.useEffect)((function(){null===a&&e.basic.academic_calender&&Object(j.B)(e.school.school_code,e.basic.academic_calender.academic_year_id,(function(e,t,s){u(!0),!0===e&&null!==t&&(r(t.school_positions),o(t.school_post_requests),u(!1))}))})),0===H(a,e.user).length?Object(S.jsx)("div",{className:"p-7 mb-7",children:Object(S.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[Object(S.jsx)("div",{children:Object(S.jsx)(m.a,{className:"text-8xl text-gray-300"})}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"text-accent-900 font-extrabold text- text-3xl flex flex-row items-center gap-3",children:[Object(S.jsx)("span",{children:"Missing positions for "}),Object(S.jsx)("div",{className:"font-extrabold bg-accent-900 text-white px-1 rounded-md w-max text-2xl",children:e.user.qualification})]}),Object(S.jsx)("div",{className:"text-gray-600 text- text-lg",children:"There are no available positions for selected qualification in the school. Please, you need to add positions first before assigning to a staff!"}),Object(S.jsx)("div",{className:"flex items-center justify-cente mt-4",children:Object(S.jsx)(z.b,{to:"/assign-school-position",children:Object(S.jsx)("div",{className:"bg-primary-800 text-white rounded text-base font-bold text-center px-3 py-2 cursor-pointer w-max",children:"Click to add school positions"})})})]})]})}):Object(S.jsxs)("div",{className:"px-4 pb-4 bg-gray-50 border-t rounded-b",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:"School name: "}),Object(S.jsxs)("div",{className:"text-xl font-bold",children:[e.school.school_name," (",e.school.school_code,")"]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:"Teacher: "}),Object(S.jsxs)("div",{className:"text-xl font-bold text-primary-800",children:[e.user.first_name," ",e.user.last_name," (",e.user.role,")"]})]}),!0===h?Object(S.jsx)("div",{className:"flex flex-col items-center justify-center w-full p-3 rounded",children:Object(S.jsx)(O.a,{})}):null!==v?Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:"Submitted position: "}),Object(S.jsx)("div",{className:"text-xl font-bold text-green-700 bg-green-100 rounded-lg px-4 py-2",children:v})]}):null!==e.user.position&&Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:"Current position: "}),Object(S.jsx)("div",{className:"text-xl font-bold text-green-700 bg-green-100 rounded-lg px-4 py-2",children:e.user.position})]}),!0===h||null===a||!0===e.loading?Object(S.jsx)("div",{className:"text-2xl font-bold text-yellow-700 text-center",children:"Loading, Please wait..."}):Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{children:[null===e.user.position?"Choose position for (".concat(e.user.qualification,")"):"Update position for (".concat(e.user.qualification,")"),":"," "]}),Object(S.jsx)("div",{children:0===H(a,e.user).length?Object(S.jsxs)("div",{className:"bg-red-100 text-red-900 font-bold px-4 py-2 text-xl rounded",children:["No available posts on your qualification (",e.user.qualification,")"]}):Object(S.jsxs)("select",{value:x,onChange:function(e){return f(e.target.value)},className:"px-3 py-2 rounded-md w-full border-2 border-primary-900",children:[Object(S.jsx)("option",{value:"",children:"Choose school position"}),H(a,e.user).filter((function(t){return t.position_name!==e.user.position})).map((function(e,t){return Object(S.jsx)("option",{value:e.position_code,children:e.position_name+" ("+e.qualification_name+")"},t+1)}))]})})]}),!1===h&&Object(S.jsxs)("div",{className:"flex flex-row justify-between mt-2",children:[Object(S.jsx)("div",{onClick:function(){return e.close&&e.close()},className:"bg-gray-200 text-black px-4 py-2 rounded cursor-pointer w-max",children:"Cancel"}),Object(S.jsx)("div",{onClick:function(){N()},className:"bg-primary-800 text-white px-4 py-2 rounded cursor-pointer w-max",children:"Submit"})]})]})},U=function(e){Object(n.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).submitLogin=function(e){e.preventDefault()},a.componentDidMount=function(){a.startApp()},a.DisableUser=function(e){console.log("deleting candidate"),!0===window.confirm("Are you sure you want to deactivate this user?")&&(a.setState({disable_user_loading:!0}),a.props.FC_DisableUser(e,(function(t,s){!0===t?a.setState({data:a.state.data.filter((function(t){return t.user_id!==e})),disable_user_loading:!1}):a.setState({disable_user_loading:!1,error:{target:"main-error",msg:s}})})))},a.startApp=function(){if(null===a.props.basic.academic_calender)a.setState({error:{target:"main-error",msg:"failed to load data, please reload the page (Refresh)"}});else if(null===a.props.auth.school&&void 0===a.props.school_code)a.setState({error:{target:"main-error",msg:"No school assigned to you"}});else{var e,t=void 0===a.props.school_code?null===(e=a.props.auth.school)||void 0===e?void 0:e.school_code:a.props.school_code;if(a.setState({error:{target:null,msg:""},loading_data:!0}),void 0===t)return a.setState({error:{target:"main-error",msg:"Invalid school ID"}});Object(j.F)(t,(function(e,t,s){!0===e&&null!==t?(console.log({status:e,data:t,msg:s}),a.setState({loading_data:!1,data:t.staff.filter((function(e){return"Active"===e.status})),roles:t.role})):a.setState({loading_data:!1,error:{msg:s,target:"main-error"}})}))}},a.state={disable_user_loading:!1,loading:!1,data:[],roles:[],error:{target:null,msg:""},loading_data:!0,selected_role:"",selected_request_id:"",selected_value:"0",selected_comment:"",selected_auto_level:"",search:"",selected_qualification:"",edit_staff_id:"",addUserPositions:null,view_staff_id:"",change_teacher_post:null,school_register_assets:null,school_register_assets_loading:!0,selected_position_id:"",selected_qualification_id:"",selected_school_code:"",selected_check_validation:""},a}return Object(o.a)(s,[{key:"render",value:function(){var e,t=this;if("main-error"===this.state.error.target)return Object(S.jsx)(p.a,{theme:"danger",fixed:!0,children:this.state.error.msg});var s=""===this.state.selected_role?this.state.data:this.state.data.filter((function(e){return e.role_id===t.state.selected_role}));s.filter((function(e){return!(null==e.first_name||""===e.first_name)})).length;return s=""===this.state.selected_qualification?s:s.filter((function(e){return e.qualification===t.state.selected_qualification})),s=Object(T.f)(s,this.state.search,{email:!0,first_name:!0,full_name:!0,last_name:!0,phone_numbers:!0,qualification:!0,role:!0,role_id:!0,status:!0,user_id:!0,username:!0,nid:!0}),!0===this.state.loading_data?Object(S.jsx)("div",{className:"p-8 text-center",children:Object(S.jsx)("div",{className:"mx-auto",children:Object(S.jsx)(O.a,{})})}):""!==this.state.edit_staff_id?Object(S.jsx)(C,{user_id:this.state.edit_staff_id,success:function(e,s){t.setState({data:t.state.data.map((function(t){return t.user_id===e?Object(i.a)(Object(i.a)({},t),{},{email:s.email,first_name:s.first_name,full_name:s.full_name,last_name:s.last_name,phone_numbers:s.phone_numbers,username:s.username}):t}))})},formAccess:{first_name:!0,middle_name:!0,last_name:!0,full_name:!0,phone_numbers:!0,email:!0,username:!0,staff_code:!0,sex:!0,martial_status:!0,highest_qualification_id:!0,dob:!0,rssb_number:!0,nationality_id:!0,bank_account:!0,bank_id:!0,specialization_id:!0,village_code:!1,contract_type:!0,education_domain_id:!0,education_sub_domain_id:!0,graduation_date:!0,hired_date:!0,staff_category_id:!0},required:{first_name:!0,middle_name:!1,last_name:!0,full_name:!0,phone_numbers:!0,email:!1,username:!0,staff_code:!0,sex:!0,martial_status:!0,highest_qualification_id:!0,dob:!0,rssb_number:!0,nationality_id:!0,bank_account:!0,bank_id:!0,specialization_id:!0,village_code:!1,contract_type:!0,education_domain_id:!0,education_sub_domain_id:!0,graduation_date:!0,hired_date:!0,staff_category_id:!0},close:function(){return t.setState({edit_staff_id:""})}}):!Object(T.e)(this.state.view_staff_id)&&null===this.state.addUserPositions&&Object(T.e)(this.state.edit_staff_id)?Object(S.jsx)(I.UserProfile,{isExternal:!0,user_id:this.state.view_staff_id,close:function(){return t.setState({view_staff_id:""})},setEditStaff:function(e){return t.setState({edit_staff_id:e})},user_data:s.find((function(e){return e.user_id===t.state.view_staff_id})),setAddUserPositions:function(e){return t.setState({addUserPositions:e})},DisableUser:function(e){return t.DisableUser(e)}}):Object(S.jsxs)(d.Fragment,{children:[Object(S.jsxs)(S.Fragment,{children:["main-success"===this.state.error.target&&Object(S.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(S.jsx)(p.a,{theme:"success",fixed:!0,children:this.state.error.msg}),!0===this.state.disable_user_loading&&Object(S.jsx)(p.a,{theme:"info",fixed:!0,children:Object(S.jsx)("span",{className:"animate__animated animate__fadeIn animate__infinite",children:"Disabling..."})}),Object(S.jsxs)(x.a,{children:["main"===this.state.error.target&&Object(S.jsx)(p.a,{theme:"danger",children:this.state.error.msg}),"loading-update-error"===this.state.error.target&&Object(S.jsx)(p.a,{theme:"danger",children:this.state.error.msg}),Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsxs)("div",{className:"flex-1",children:[Object(S.jsx)(f.a,{children:"Staff list"}),Object(S.jsx)("p",{className:"opacity-60 text-lg -mt-1 font-bold text-accent-900 dark:text-accent-800",children:null===(e=this.props.auth.school)||void 0===e?void 0:e.school_name})]}),Object(S.jsx)("div",{className:""})]}),Object(S.jsxs)("div",{className:"mt-3",children:[Object(S.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center pl-3 pr-2 rounded",children:[Object(S.jsx)("div",{className:"flex-1 pr-2",children:Object(S.jsx)(g.a,{error:"",label:"Search",name:"",type:"search",onChange:function(e){return t.setState({search:e.target.value})},placeholder:"Search by name, nid",value:this.state.search,size:"sm"})}),!this.props.auth.school&&Object(S.jsx)("div",{className:"",children:Object(S.jsx)(_.a,{data:[{title:"All Occupations",value:""}].concat(Object(r.a)(this.state.roles.map((function(e){return{title:e.role,value:e.role_id}})))),error:"",name:"select_role",onChange:function(e){return t.setState({selected_role:e.target.value})},label:"Occupation",placeholder:"Select Occupation",value:this.state.selected_role,size:"sm"})}),null!==this.props.basic.qualifications&&Object(S.jsx)("div",{className:"px-2",children:Object(S.jsx)(_.a,{data:[{title:"All",value:""}].concat(Object(r.a)(this.props.basic.qualifications.map((function(e){return{title:e.qualification_name,value:e.qualification_name}})))),error:"",name:"select_qualification",onChange:function(e){return t.setState({selected_qualification:e.target.value})},label:"Qualification",placeholder:"Select Qualification",value:this.state.selected_qualification,size:"sm"})}),Object(S.jsxs)("div",{className:"p-2 px-3 ml-3 bg-accent-800 bg-opacity-30 rounded",children:[Object(S.jsx)("label",{className:"",children:"Results:"}),Object(S.jsx)("h4",{className:"text-2xl -mt-1 font-bold",children:s.length})]})]}),Object(S.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{className:"p-2 border",children:"#"}),Object(S.jsx)("th",{className:"p-2 border",children:"NID/Passport"}),Object(S.jsx)("th",{className:"p-2 border",children:"Staff code"}),Object(S.jsx)("th",{className:"p-2 border",children:"Names"}),Object(S.jsx)("th",{className:"p-2 border",children:"Phone number"}),Object(S.jsx)("th",{className:"p-2 border",children:"Position"}),Object(S.jsx)("th",{className:"p-2 border",children:"Occupation"}),Object(S.jsx)("th",{className:"p-2 border",children:"Validated"}),null!==this.props.auth.role&&"2"!==this.props.auth.role.role_id&&"1"!==this.props.auth.role.role_id&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("th",{className:"p-2 border",children:"Qualification"}),Object(S.jsx)("th",{className:"p-2 border",children:"School"})]}),void 0===this.props.school_code&&Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:s.length<=0?Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(S.jsx)(f.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):s.map((function(e,s){var a,r=Object(A.a)(e);return Object(S.jsxs)(d.Fragment,{children:[Object(S.jsxs)("tr",{className:"group border rounded hover:bg-blue-500 hover:bg-opacity-20 text-sm",children:[Object(S.jsx)("td",{className:"p-2 border",children:s+1},s),Object(S.jsx)("td",{className:"p-2 border",children:e.nid}),Object(S.jsx)("td",{className:"p-2 border",children:e.staff_code}),Object(S.jsx)("td",{className:"p-2 border",children:e.full_name}),Object(S.jsx)("td",{className:"p-2 border",children:e.phone_numbers}),Object(S.jsx)("td",{className:"p-2 border",children:e.position}),Object(S.jsx)("td",{className:"p-2 border",children:e.role}),Object(S.jsx)("td",{className:"w-24 text-center parent-hide-child",children:!1===r.validated?Object(S.jsx)("button",{onClick:function(){return t.setState({selected_check_validation:e.user_id})},className:"text-xs bg-red-400 text-white p-0.5 rounded-full",children:"Non-Validated"}):Object(S.jsx)("span",{className:"text-xs bg-green-500 text-white p-0.5 rounded-full",children:"Validated"})}),null!==t.props.auth.role&&"2"!==t.props.auth.role.role_id&&"1"!==t.props.auth.role.role_id&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("td",{className:"p-2 border",children:e.qualification}),Object(S.jsx)("td",{className:"p-2 border",children:null===(a=e.school)||void 0===a?void 0:a.school_name})]}),void 0===t.props.school_code&&Object(S.jsx)("td",{className:"p-1 border",children:Object(S.jsx)("button",{onClick:function(){return t.setState({view_staff_id:e.user_id})},className:"opacity-80 group-hover:opacity-100 bg-accent-800 bg-opacity-0 hover:bg-opacity-10 text-accent-900 font-semibold py-2 px-4 rounded",children:"View"})})]}),t.state.selected_check_validation===e.user_id&&Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:10,className:"pb-5",children:Object(S.jsxs)("div",{className:"pb-2 rounded-b-lg -mt-1 animate__animated animate__zoomIn animate__faster border bg-red-100",children:[Object(S.jsxs)("div",{className:"p-1 px-2 flex bg-red-200",children:[Object(S.jsx)("h2",{className:"flex-1 text-lg font-bold",children:"Please validate"}),Object(S.jsx)(y.a,{className:"",size:"sm",theme:"danger-light",onClick:function(){return t.setState({selected_check_validation:""})},children:"Close"})]}),Object(S.jsx)("div",{className:"px-2 gap-1 rounded grid md:grid-cols-2 lg:grid-cols-3 pt-2",children:r.errors.map((function(e,t){return Object(S.jsxs)("div",{className:"border rounded full mb-1 mx-2 border-red-300 bg-white p-1 flex",children:[Object(S.jsx)(u.H,{className:"pr-1 text-xl inline-block text-yellow-600"})," ",Object(S.jsx)("p",{children:e})]},t)}))})]})})})]},s)}))})]})]})]})]}),null!==this.state.addUserPositions&&null!==this.props.auth.school&&Object(S.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){t.setState({addUserPositions:null})},backDropClose:null!==this.state.addUserPositions.qualification&&""!==this.state.addUserPositions.qualification,widthSizeClass:v.a.large,displayClose:null!==this.state.addUserPositions.qualification&&""!==this.state.addUserPositions.qualification,title:null===this.state.addUserPositions.qualification||""===this.state.addUserPositions.qualification?"":Object(S.jsx)("div",{className:"text-2xl w-full text-primary-800 -mb-2",children:"ADD USER POSITION"}),padding:{title:!0},children:null===this.state.addUserPositions.qualification||""===this.state.addUserPositions.qualification?Object(S.jsxs)("div",{className:"p-7",children:[Object(S.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[Object(S.jsx)("div",{children:Object(S.jsx)(m.a,{className:"text-8xl text-gray-300"})}),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"text-accent-900 font-extrabold text- text-3xl",children:"Staff qualification is missing"}),Object(S.jsx)("div",{className:"text-black text- text-lg",children:"Please assign qualification. Go to staff profile, then click on change school/position to add qualification"})]})]}),Object(S.jsx)("div",{className:"flex items-center justify-center mt-4",children:Object(S.jsx)("div",{onClick:function(){return t.setState({addUserPositions:null})},className:"bg-primary-800 text-white rounded text-base font-bold text-center px-3 py-2 cursor-pointer w-max",children:"Click to add qualification"})})]}):Object(S.jsx)(G,{user:this.state.addUserPositions,school:this.props.auth.school,auth:this.props.auth,loading:this.state.loading,basic:this.props.basic,close:function(){return t.setState({addUserPositions:null})},updateUserPosition:function(e,s){var r,i=[],c=Object(a.a)(t.state.data);try{for(c.s();!(r=c.n()).done;){var o=r.value;o.user_id===e?i.push({email:o.email,first_name:o.first_name,full_name:o.full_name,last_name:o.last_name,phone_numbers:o.phone_numbers,qualification:o.qualification,role:o.role,role_id:o.role_id,status:o.status,user_id:o.user_id,position:s,username:o.username,bank_account:o.bank_account,dob:o.dob,marital_status:o.marital_status,nationality_id:o.nationality_id,nid:o.nid,rssb_number:o.rssb_number,location:o.location,school:o.school,sex:o.sex,specialization:o.specialization,staff_category:o.staff_category,staff_code:o.staff_code,start_date_in_the_school:o.start_date_in_the_school,teacher_hierarch:o.teacher_hierarch}):i.push(o)}}catch(n){c.e(n)}finally{c.f()}t.setState({data:i})}})})]})}}]),s}(h.a.Component),M=Object(b.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_DisableUser:j.h})(U)},131:function(e,t,s){"use strict";s.d(t,"a",(function(){return I}));var a=s(6),r=s(41),i=s(26),c=s(27),o=s(28),n=s(29),l=s(3),d=s.n(l),h=s(2),u=s(37),m=s(11),b=s(111),j=s(12),p=s(18),x=s(48),f=s(36),_=s(20),g=s(4),O=s(5),v=s.n(O),y=s(107),N=s(13),w=s(1),S=function(){var e=Object(a.a)(d.a.mark((function e(t,s,a){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",alert("Please select atleast one subject"));case 2:return r=t.map((function(e){return{school_code:s,shool_hierarch_id:e.studyhierarchyid}})),a(!1,""),e.prev=4,e.next=7,v.a.post("".concat(N.c,"/schoolhierarch/create"),r);case 7:i=e.sent,a(!0,"School subjects has added successfully!"),console.log("Success: ",i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),a(!0,""),console.log("Err: ",Object(g.a)({},e.t0));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,s,a){return e.apply(this,arguments)}}(),k=function(e){var t,s=Object(h.useState)(null),a=Object(_.a)(s,2),r=a[0],i=a[1],c=Object(h.useState)(!1),o=Object(_.a)(c,2),n=o[0],l=o[1],d=Object(h.useState)(null),x=Object(_.a)(d,2),g=x[0],O=x[1],v=Object(h.useState)(""),N=Object(_.a)(v,2),k=N[0],C=N[1],T=Object(h.useState)([]),A=Object(_.a)(T,2),q=A[0],R=A[1],D=Object(h.useState)(!1),E=Object(_.a)(D,2),P=E[0],F=E[1],z=Object(h.useState)(""),L=Object(_.a)(z,2),H=L[0],G=L[1],U=Object(h.useState)(""),M=Object(_.a)(U,2),B=M[0],V=M[1],X=Object(h.useState)(""),J=Object(_.a)(X,2),W=J[0],Q=J[1],Y=function(){var t=e.school_hierarchy_data;return null!==t?(null!==r&&""!==r&&(t=t.filter((function(e){return e.level_code===r}))),null!==g&&(t=t.filter((function(e){return e.combination_code===g}))),t):[]};return Object(w.jsxs)("div",{className:"fixed bg-black bg-opacity-50 top-0 left-0 w-full h-full z-50 flex items-center justify-center animate__animated animate__fadeIn animate__faster",children:[Object(w.jsxs)("div",{className:"bg-white rounded-md animate__animated animate__zoomIn animate__faster z-50 w-full h-full overflow-auto",children:[Object(w.jsxs)("div",{className:"rounded-t-md flex flex-row items-center justify-between gap-4 px-2 py-2 border-b border-gray-400",children:[Object(w.jsx)("div",{className:"text-xl font-bold ml-2 uppercase mt-2",children:"Assign new subject"}),Object(w.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"flex items-center justify-center p-1 rounded-full bg-gray-100 text-2xl hover:bg-yellow-100 hover:text-accent-900 cursor-pointer",title:"Close window",children:Object(w.jsx)(m.h,{})})]}),Object(w.jsxs)("div",{className:"p-2 md:p-6",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(w.jsx)("div",{className:"text-5xl text-gray-400",children:Object(w.jsx)(y.c,{})}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("span",{className:"text-gray-600",children:"School name"}),Object(w.jsxs)("span",{className:"font-bold -mt-1",children:[e.school.school_name," (",e.school.school_code,")"]})]})]}),Object(w.jsx)("div",{className:"flex flex-col justify-center items-end"})]}),Object(w.jsx)("div",{className:"",children:Object(w.jsx)("div",{className:"mb-10",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"p-2 mb-5",children:Object(w.jsxs)("div",{className:"mt-4",children:[Object(w.jsx)("div",{children:"Filter by"}),Object(w.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(w.jsxs)("select",{onChange:function(e){return i(e.target.value)},value:null===r?"":r,className:"border border-gray-400 rounded px-3 py-2",children:[Object(w.jsx)("option",{value:"",children:"Choose education level"}),Object(w.jsx)("option",{value:"",children:"Show all levels"}),Object(j.A)(e.allHierarchy,{type:j.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(w.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(w.jsxs)("div",{className:"w-full",children:[Object(w.jsxs)("div",{onClick:function(){return l(!n)},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===g?Object(w.jsx)("span",{children:"All- Click to filter by combination"}):Object(w.jsx)("span",{children:null===(t=Object(j.A)(e.allHierarchy,{type:j.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===g})))||void 0===t?void 0:t.combination_name}),Object(w.jsx)("div",{className:"-mr-3",children:!0===n?Object(w.jsx)(m.h,{}):Object(w.jsx)(u.a,{})})]}),!0===n&&Object(w.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(w.jsx)("input",{value:k,onChange:function(e){return C(e.target.value)},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{onClick:function(){return l(!1)},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(w.jsx)(m.h,{})})})]}),null!==g&&Object(w.jsxs)("div",{onClick:function(){O(null),l(!1)},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(w.jsx)("div",{children:Object(w.jsx)(b.a,{className:"text-xl"})}),Object(w.jsx)("span",{children:"Click to view all"})]})]}),Object(w.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(p.f)(Object(j.A)(e.allHierarchy,{type:j.X.COMBINATIONS,status:!0}).combinations,k).length?Object(w.jsx)("div",{className:"text-center text-lg font-bold p-5 px-10 text-gray-500",children:"No result found!"}):Object(p.f)(Object(j.A)(e.allHierarchy,{type:j.X.COMBINATIONS,status:!0}).combinations,k).map((function(e,t){return Object(w.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(g===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){O(e.combination_code),l(!1)},children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:t+1})}),Object(w.jsx)("div",{children:e.combination_name})]},t+1)}))})]})]}),Object(w.jsx)("input",{className:"px-3 py-2 rounded border border-gray-400 w-full",placeholder:"Search keyword...",value:W,onChange:function(e){return Q(e.target.value)}})]})]})}),Object(w.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(w.jsx)("div",{className:"w-full overflow-x-auto",children:Object(w.jsxs)("table",{className:"min-w-full text-left",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-right",children:"Action"})]})}),Object(w.jsx)("tbody",{className:"text-sm",children:null===e.school_hierarchy_data?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:7,children:Object(w.jsx)(I,{})})}):0===Object(p.f)(Y(),W).length?Object(w.jsx)("td",{colSpan:7,children:Object(w.jsx)("div",{className:"text-lg p-3 text-center",children:"No result found"})}):Object(p.f)(Y(),W).map((function(e,t){return Object(w.jsxs)("tr",{className:"".concat(void 0!==q.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))?"text-gray-500":"hover:bg-yellow-50 hover:text-accent-900"," group"),children:[Object(w.jsx)("td",{className:"p-2 border-b text-center",children:t+1}),Object(w.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(w.jsx)("td",{className:"p-2 border-b",children:Object(w.jsx)("div",{className:"flex flex-row items-center justify-end",children:void 0===q.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}))?Object(w.jsx)("div",{onClick:function(){return t=e,void R([].concat(Object(f.a)(q.filter((function(e){return e.studyhierarchyid!==t.studyhierarchyid}))),[t]));var t},className:"rounded bg-yellow-100 group-hover:bg-accent-900 group-hover:text-white px-3 py-2 w-max text-center border border-yellow-300 group-hover:border-accent-900 cursor-pointer text-sm font-bold",children:"Add subject"}):Object(w.jsx)("div",{onClick:function(){return t=e,void R(Object(f.a)(q.filter((function(e){return e.studyhierarchyid!==t.studyhierarchyid}))));var t},className:"rounded bg-red-50 group-hover:bg-red-200 text-black border border-red-100 group-hover:border-red-700 group-hover:text-red-800 px-3 py-2 w-max text-center cursor-pointer text-sm font-bold",children:"Remove"})})})]},t+1)}))})]})})})]})})})]})]}),q.length>0&&Object(w.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-50 bg-blue-600 p-2 animate__animated animate__fadeInUp",children:!1===P?Object(w.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[""!==B&&Object(w.jsx)("div",{className:"bg-red-200 text-red-800 px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return V("")},children:B}),""!==H&&Object(w.jsx)("div",{className:"bg-green-600 text-white px-3 py-2 rounded-md animate_animated animate__zoomIn animate__faster",onClick:function(){return G("")},children:H}),Object(w.jsxs)("div",{className:"text-white flex flex-col items-end mr-2",children:[Object(w.jsx)("span",{className:"text-sm text-blue-300",children:"Selected subjects"}),Object(w.jsx)("span",{className:"text-2xl font-extrabold -mt-2",children:q.length})]}),Object(w.jsx)("div",{onClick:function(){return e.setAddNew(!1)},className:"btn bg-gray-200 text-black rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Cancel"}),Object(w.jsx)("div",{onClick:function(){F(!0),S(q,e.school.school_code,(function(t,s){""!==s&&!0===t&&(G("School subjects added successfully!"),R([]),e.setAddNew(!1),e.setLoadSchoolSubjects()),""===s&&!0===t&&V("Something went wrong. Try again!"),F(!1)})),F(!1)},className:"btn bg-green-700 text-white rounded-md px-4 py-2 hover:bg-gray-700 hover:text-white cursor-pointer border-2 border-gray-200 hover:border-white font-bold",children:"Save changes"})]}):Object(w.jsx)("div",{className:"text-white text-lg text-right py-2",children:"Saving, Please wait..."})})]})},C=s(9),I=function(){return Object(w.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(w.jsx)(x.a,{}),Object(w.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]})},T=function(e){Object(o.a)(s,e);var t=Object(n.a)(s);function s(e){var c;return Object(i.a)(this,s),(c=t.call(this,e)).setAddNew=function(e){c.setState({addNew:e,addingNew:!0===e})},c.setAddingNew=function(e){c.setState({addingNew:e})},c.setLoading=function(e){c.setState({loading:e})},c.FilterSchoolHierarchy=function(e){var t,s=[],a=Object(r.a)(e);try{var i=function(){var e=t.value,a=c.props.allHierarchy.find((function(t){return t.studyhierarchyid===e.shool_hierarch_id&&"0"!==e.status}));void 0!==a&&s.push(a)};for(a.s();!(t=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return s},c.setLoadSchoolSubjects=function(){return Object(j.z)(c.props.school.school_code,(function(e,t){c.setLoading(!0),!0===e&&null!==t?c.setState({school_hierarchy:t,school_hierarchy_data:c.FilterSchoolHierarchy(t),loading:!1}):c.setState({school_hierarchy:[],school_hierarchy_data:[],loading:!1})}))},c.FilteredData=function(){var e=c.state.school_hierarchy_data;return null!==e?(null!==c.state.selected_level_code&&""!==c.state.selected_level_code&&(e=e.filter((function(e){return e.level_code===c.state.selected_level_code}))),null!==c.state.selected_combination_code&&(e=e.filter((function(e){return e.combination_code===c.state.selected_combination_code}))),e):[]},c.RemoveSchoolHierarchy=function(){var e=Object(a.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to remove this subject on school?")){e.next=13;break}return c.setLoading(!0),e.prev=2,e.next=5,v.a.post("".concat(N.c,"/schoolhierarch/delete/").concat(t),{});case 5:s=e.sent,console.log("Success: ",s),200===s.status&&(c.setLoadSchoolSubjects(),c.setState({error:"",success:"School subject removed successfully!"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),c.setState({error:Object(C.a)(e.t0),success:"",loading:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),c.componentDidMount=function(){c.setLoadSchoolSubjects()},c.state={loading:!0,school_hierarchy:null,school_hierarchy_data:null,selected_level_code:null,selected_combination_code:null,filter_by_combination:!1,search_comb:"",addNew:!1,addingNew:!1,success:"",error:"",search:""},c}return Object(c.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.state.school_hierarchy||null===this.state.school_hierarchy||this.state.loading,Object(w.jsxs)(h.Fragment,{children:[Object(w.jsx)("div",{className:"mb-10",style:void 0!==this.props.fixedHeight?{height:"60vh",overflow:"auto"}:{},children:Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"p-2 mb-5",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-3 justify-between",children:[Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("div",{className:"text-2xl font-bold",children:"SCHOOL SUBJECTS ASSIGNMENT"}),Object(w.jsxs)("div",{className:"text-sm text-gray-500",children:[this.props.school.school_name,"(",this.props.school.school_code,")"]})]}),Object(w.jsx)("div",{onClick:function(){t.setAddingNew(!0),t.setAddNew(!0)},className:"border ".concat(!1===this.state.addingNew?"bg-yellow-100 border-yellow-400":"bg-gray-100"," text-black px-3 py-2 rounded text-center hover:text-accent-900 cursor-pointer font-bold"),children:!0===this.state.addingNew?"Loading":"Assign new subjects"})]}),Object(w.jsxs)("div",{className:"mt-4",children:[Object(w.jsx)("div",{children:"Filter by"}),Object(w.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(w.jsxs)("select",{onChange:function(e){return t.setState({selected_level_code:e.target.value})},value:null===this.state.selected_level_code?"":this.state.selected_level_code,className:"border border-gray-400 rounded px-3 py-2",children:[Object(w.jsx)("option",{value:"",children:"Choose education level"}),Object(w.jsx)("option",{value:"",children:"View by all levels"}),Object(j.A)(this.props.allHierarchy,{type:j.X.SCHOOL_LEVELS,status:!0}).levels.map((function(e,t){return Object(w.jsx)("option",{value:e.level_code,children:e.level_name},t+1)}))]}),Object(w.jsxs)("div",{className:"w-full",children:[Object(w.jsxs)("div",{onClick:function(){return t.setState({filter_by_combination:!t.state.filter_by_combination})},className:"w-auto border border-gray-400 rounded px-4 py-2 bg-white flex flex-row items-center justify-between gap-10 cursor-pointer hover:border-accent-900 hover:text-accent-900",children:[null===this.state.selected_combination_code?Object(w.jsx)("span",{children:"All- Click to filter by combination"}):Object(w.jsx)("span",{children:null===(e=Object(j.A)(this.props.allHierarchy,{type:j.X.COMBINATIONS,status:!0}).combinations.find((function(e){return e.combination_code===t.state.selected_combination_code})))||void 0===e?void 0:e.combination_name}),Object(w.jsx)("div",{className:"-mr-3",children:!0===this.state.filter_by_combination?Object(w.jsx)(m.h,{}):Object(w.jsx)(u.a,{})})]}),!0===this.state.filter_by_combination&&Object(w.jsxs)("div",{className:"absolute w-max bg-white px-3 py-3 rounded-b animate__animated animate__zoomIn animate__faster shadow-xl",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"flex flex-row items-center w-full justify-between gap-2",children:[Object(w.jsx)("input",{value:this.state.search_comb,onChange:function(e){return t.setState({search_comb:e.target.value})},placeholder:"Search...",type:"text",className:"border border-gray-400 rounded px-3 py-2 text-sm w-full"}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{onClick:function(){return t.setState({filter_by_combination:!1})},className:"bg-red-100 text-red-800 text-2xl p-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white",children:Object(w.jsx)(m.h,{})})})]}),null!==this.state.selected_combination_code&&Object(w.jsxs)("div",{onClick:function(){return t.setState({selected_combination_code:null,filter_by_combination:!1})},className:"flex flex-row items-center gap-3 text-gray-800 font-bold cursor-pointer hover:text-accent-900 px-3 py-1 my-2 rounded bg-gray-100 w-full",children:[Object(w.jsx)("div",{children:Object(w.jsx)(b.a,{className:"text-xl"})}),Object(w.jsx)("span",{children:"Click to view all"})]})]}),Object(w.jsx)("div",{className:"h-64 overflow-y-auto mt-1 animate__animated animate__fadeIn",style:{minWidth:"28rem"},children:0===Object(p.f)(Object(j.A)(this.props.allHierarchy,{type:j.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).length?Object(w.jsx)("div",{className:"text-center text-lg font-bold p-4 px-10",children:"No result found!"}):Object(p.f)(Object(j.A)(this.props.allHierarchy,{type:j.X.COMBINATIONS,status:!0}).combinations,this.state.search_comb).map((function(e,s){return Object(w.jsxs)("div",{className:"w-full flex flex-row items-center border-b ".concat(t.state.selected_combination_code===e.combination_code?"border-yellow-100 bg-yellow-100 font-bold":"border-gray-200"," py-1 gap-4 hover:bg-yellow-100 cursor-pointer"),onClick:function(){return t.setState({selected_combination_code:e.combination_code,filter_by_combination:!1})},children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"rounded-full bg-yellow-50 border border-yellow-200 h-8 w-8 flex flex-row items-center justify-center font-bold",children:s+1})}),Object(w.jsx)("div",{children:e.combination_name})]},s+1)}))})]})]}),Object(w.jsx)("input",{className:"px-3 py-2 rounded border border-gray-400 w-full",placeholder:"Search keyword...",value:this.state.search,onChange:function(e){return t.setState({search:e.target.value})}})]})]})]}),""!==this.state.success&&Object(w.jsx)("div",{onClick:function(){return t.setState({success:""})},className:"bg-green-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(w.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(w.jsxs)("div",{children:["Success: ",this.state.success]}),Object(w.jsx)("div",{children:Object(w.jsx)(m.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),""!==this.state.error&&Object(w.jsx)("div",{onClick:function(){return t.setState({error:""})},className:"bg-red-600 text-white font-bold pl-4 pr-2 py-2 text-lg rounded-md my-2 fixed right-10 cursor-pointer shadow-xl animate__animated animate__bounceInRight",children:Object(w.jsxs)("div",{className:"flex flex-row justify-between items-center gap-8",children:[Object(w.jsxs)("div",{children:["Error: ",this.state.error]}),Object(w.jsx)("div",{children:Object(w.jsx)(m.h,{className:"text-2xl text-red-600 bg-red-100 rounded-full"})})]})}),Object(w.jsx)("div",{className:"bg-white rounded mx-2 border border-gray-200",children:Object(w.jsx)("div",{className:"w-full overflow-x-auto",children:Object(w.jsxs)("table",{className:"min-w-full text-left",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{className:"font-semibold border-b text-base",children:[Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300 text-center",children:"#"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Subject"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Level"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Combination"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Grade"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300",children:"Periods"}),Object(w.jsx)("th",{className:"p-2 border-b-2 border-gray-300"})]})}),Object(w.jsx)("tbody",{className:"text-sm",children:null===this.state.school_hierarchy_data?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:7,children:Object(w.jsx)(I,{})})}):0===Object(p.f)(this.FilteredData(),this.state.search).length?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:7,children:Object(w.jsx)("div",{className:"text-center text-lg text-gray-500 p-3",children:"No result found"})})}):Object(p.f)(this.FilteredData(),this.state.search).map((function(e,s){return Object(w.jsxs)("tr",{className:"hover:bg-yellow-50 group",children:[Object(w.jsx)("td",{className:"p-2 border-b text-center",children:s+1}),Object(w.jsxs)("td",{className:"p-2 border-b",children:[e.course_code,"-",e.course_name]}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.level_name}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.combination_name}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.grade_name}),Object(w.jsx)("td",{className:"p-2 border-b",children:e.teaching_period}),Object(w.jsx)("td",{className:"border-b",children:Object(w.jsx)("div",{className:"flex justify-end",children:Object(w.jsx)("div",{onClick:function(){if(console.log("Current item: ",e),null!==t.state.school_hierarchy){var s=t.state.school_hierarchy.find((function(t){return t.studyhierarchyid===e.studyhierarchyid}));console.log("Compared: ",s),void 0!==s&&t.RemoveSchoolHierarchy(s.school_study_hierarchy_id)}},className:"bg-red-50 text-red-800 px-3 py-2 mx-1 my-1 rounded font-bold group-hover:bg-red-700 group-hover:text-white cursor-pointer",children:"Remove"})})})]},s+1)}))})]})})})]})}),!0===this.state.addNew&&Object(w.jsx)(k,{school:this.props.school,setAddNew:this.setAddNew,allHierarchy:this.props.allHierarchy,school_hierarchy_data:this.props.allHierarchy,setLoadSchoolSubjects:this.setLoadSchoolSubjects})]})}}]),s}(h.Component);t.b=T},141:function(e,t,s){"use strict";s.r(t),s.d(t,"SchoolsList",(function(){return w}));var a=s(26),r=s(27),i=s(28),c=s(29),o=s(2),n=s.n(o),l=s(11),d=s(16),h=s(12),u=s(24),m=s(25),b=s(30),j=s(40),p=s(31),x=s(48),f=s(124),_=s(130),g=s(131),O=s(7),v=s(18),y=s(1),N=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).submitLogin=function(e){e.preventDefault()},r.componentDidMount=function(){var e;Object(O.a)(null===(e=r.props.auth.role)||void 0===e?void 0:e.access,O.b.VIEW_SCHOOLS_LIST,(function(){r.startApp()})),null===r.props.basic.positions&&r.props.FC_GetAllPositions((function(e,t){console.log(e)})),null===r.props.schoolHierarchyStore.hierarchy&&r.props.FC_AllSchoolHierarchyDetails(!1,(function(e,t){}))},r.startApp=function(){if(null===r.props.basic.academic_calender)r.setState({error:{target:"main",msg:"failed to load data, please reload the page (Refresh)"}});else if(null===r.props.auth.district)r.setState({error:{target:"main",msg:"No district assigned to you"}});else{var e=r.props.auth.district.district_code;Object(h.C)(e,(function(e,t,s){!0===e&&null!==t?(console.log({status:e,data:t,msg:s}),r.setState({loading_data:!1,data:t})):r.setState({loading_data:!1,error:{msg:s,target:"requests-error"}})}))}},r.selectSchool=function(e){return r.setState({selected_school:e})},r.state={loading:!1,data:[],error:{target:null,msg:""},loading_data:!1,selected_level:"",search:"",schoolPositionsShow:null,selected_school:null,school_tab:"details"},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t=this,s=Object(v.f)(this.state.data,this.state.search,{school_name:!0,school_category:!0,school_code:!0,region_code:!0,school_status:!0});return"main"===this.state.error.target?Object(y.jsx)(b.a,{children:Object(y.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg})}):!0===this.state.loading_data||null===this.props.schoolHierarchyStore.hierarchy?Object(y.jsx)(b.a,{children:Object(y.jsx)("div",{className:"mx-auto p-8",children:Object(y.jsx)(x.a,{})})}):null!==this.state.selected_school?Object(y.jsxs)(b.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(y.jsx)("div",{className:"py-2",children:Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("div",{className:"pr-3",children:Object(y.jsx)(m.a,{onClick:this.selectSchool.bind(this.componentDidCatch,null),children:Object(y.jsx)(l.c,{className:"text-2xl"})})}),Object(y.jsxs)("div",{className:"",children:[Object(y.jsx)("p",{children:"Shool name"}),Object(y.jsx)(j.a,{children:this.state.selected_school.school_name})]})]})}),Object(y.jsxs)("div",{className:"my-2",children:[Object(y.jsx)(m.a,{className:"px-4 mr-1 ".concat("details"===this.state.school_tab?"":"opacity-60"),theme:"primary",onClick:function(){return t.setState({school_tab:"details"})},children:"Details"}),Object(y.jsx)(m.a,{className:"px-4 mr-1 ".concat("staff-list"===this.state.school_tab?"":"opacity-60"),theme:"primary",onClick:function(){return t.setState({school_tab:"staff-list"})},children:"Staff list"}),Object(y.jsx)(m.a,{className:"px-4 mr-1 ".concat("subjects"===this.state.school_tab?"":"opacity-60"),theme:"primary",onClick:function(){return t.setState({school_tab:"subjects"})},children:"School subjects"}),Object(y.jsx)(m.a,{theme:"primary",onClick:function(){t.state.selected_school&&t.props.basic.academic_calender&&t.setState({school_tab:"post-list"})},className:"px-4 mr-1 ".concat("post-list"===this.state.school_tab?"":"opacity-60"),children:"Positions"})]}),Object(y.jsxs)("div",{className:"p-2 mt-2",children:["details"===this.state.school_tab&&Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("div",{className:"pr-4",children:Object(y.jsx)(l.E,{className:"text-9xl"})}),Object(y.jsxs)("div",{className:"p-3 text-lg",children:[Object(y.jsxs)("div",{className:"flex p-1",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{children:"School category:"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("b",{children:this.state.selected_school.school_category})})]}),Object(y.jsxs)("div",{className:"flex p-1",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{children:"School code:"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("b",{children:this.state.selected_school.school_code})})]}),Object(y.jsxs)("div",{className:"flex p-1",children:[Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{children:"School status:"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("b",{children:this.state.selected_school.school_status})})]})]})]}),Object(y.jsx)("div",{className:"".concat("staff-list"===this.state.school_tab?"":"hidden"),children:Object(y.jsx)(_.a,{school_code:this.state.selected_school.school_code})}),"subjects"===this.state.school_tab&&null!==this.state.selected_school&&null!==this.props.schoolHierarchyStore.hierarchy&&Object(y.jsx)(g.b,{school:{school_code:this.state.selected_school.school_code,school_name:this.state.selected_school.school_name,schoolcategory:this.state.selected_school.school_category,schoolstatus:this.state.selected_school.school_status,regioncode:this.state.selected_school.region_code},allHierarchy:this.props.schoolHierarchyStore.hierarchy,fixedHeight:!0}),"post-list"===this.state.school_tab&&Object(y.jsx)("div",{className:"",children:null!==this.state.schoolPositionsShow&&null!==this.props.basic.positions&&Object(y.jsx)(f.a,{auth:this.props.auth,positions:this.props.basic.positions,schoolPositions:this.state.schoolPositionsShow.school_positions,school:this.state.schoolPositionsShow.school,appendPositionsToSchool:function(e){t.state.schoolPositionsShow&&t.props.basic.academic_calender&&Object(h.B)(t.state.schoolPositionsShow.school_code,t.props.basic.academic_calender.academic_year_id,(function(e,s,a){null!==s&&(t.setState({loading_data:!0}),!0===e&&(t.state.schoolPositionsShow&&t.setState({schoolPositionsShow:{school_code:t.state.schoolPositionsShow.school_code,school_id:t.state.schoolPositionsShow.school_id,school_positions:s.school_positions,school:t.state.schoolPositionsShow.school}}),t.setState({loading_data:!1})))}))},removePositionsToSchool:function(e){t.state.schoolPositionsShow&&t.props.basic.academic_calender&&Object(h.B)(t.state.schoolPositionsShow.school_code,t.props.basic.academic_calender.academic_year_id,(function(e,s,a){null!==s&&(t.setState({loading_data:!0}),!0===e&&(t.state.schoolPositionsShow&&t.setState({schoolPositionsShow:{school_code:t.state.schoolPositionsShow.school_code,school_id:t.state.schoolPositionsShow.school_id,school_positions:s.school_positions,school:t.state.schoolPositionsShow.school}}),t.setState({loading_data:!1})))}))},close:function(){return t.setState({schoolPositionsShow:null})}})})]})]}):Object(y.jsx)(o.Fragment,{children:Object(y.jsxs)(y.Fragment,{children:["main-success"===this.state.error.target&&Object(y.jsx)(u.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(y.jsxs)(b.a,{children:["loading-update-error"===this.state.error.target&&Object(y.jsx)(u.a,{theme:"danger",children:this.state.error.msg}),Object(y.jsxs)(j.a,{children:[null===(e=this.props.auth.district)||void 0===e?void 0:e.district_name," district's Schools"]}),Object(y.jsxs)("div",{className:"flex mt-2",children:[Object(y.jsx)("div",{className:"flex-1",children:Object(y.jsxs)("p",{className:"opacity-60 -mt-1",children:["Total: ",Object(y.jsx)("b",{children:this.state.data.length})]})}),Object(y.jsx)("div",{className:""})]}),Object(y.jsxs)("div",{className:"mt-3",children:[Object(y.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center px-3 rounded",children:[Object(y.jsx)("div",{className:"flex-1 pr-2",children:Object(y.jsx)(p.a,{error:"",label:"Search",name:"",onChange:function(e){return t.setState({search:e.target.value})},placeholder:"Search by district name",value:this.state.search,size:"sm"})}),Object(y.jsx)("div",{className:""})]}),Object(y.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"#"}),Object(y.jsx)("th",{children:"School code"}),Object(y.jsx)("th",{children:"School name"}),Object(y.jsx)("th",{children:"Category"}),Object(y.jsx)("th",{children:"Region Code"}),Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("th",{})]})}),Object(y.jsx)("tbody",{children:s.length<=0?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(y.jsx)(j.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):s.map((function(e,s){return Object(y.jsx)(o.Fragment,{children:Object(y.jsxs)("tr",{className:"border rounded hover:bg-blue-500 hover:bg-opacity-20 group",children:[Object(y.jsx)("td",{className:"p-2 border",children:s+1},s),Object(y.jsx)("td",{className:"p-2 border",children:e.school_code}),Object(y.jsx)("td",{className:"p-2 border",children:e.school_name}),Object(y.jsx)("td",{className:"p-2 border",children:e.school_category}),Object(y.jsx)("td",{className:"p-2 border",children:e.region_code}),Object(y.jsx)("td",{className:"p-2 border",children:e.school_status}),Object(y.jsx)("td",{className:"flex flex-row items-center justify-right p-1",children:Object(y.jsx)(m.a,{size:"sm",className:"w-full",theme:"accent-light",onClick:function(){t.selectSchool(e),t.props.basic.academic_calender&&Object(h.B)(e.school_code,t.props.basic.academic_calender.academic_year_id,(function(s,a,r){null!==a&&(t.setState({loading_data:!0}),!0===s&&null!==e&&(t.setState({schoolPositionsShow:{school_code:null===e||void 0===e?void 0:e.school_code,school_id:e.school_id,school_positions:a.school_positions,school:e}}),t.setState({loading_data:!1})))}))},children:"Select"})})]})},s)}))})]})]})]})]})})}}]),s}(n.a.Component),w=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic,schoolHierarchyStore:e.schoolHierarchyStore}}),{FC_GetAllPositions:h.j,FC_AllSchoolHierarchyDetails:h.c})(N)}}]);
//# sourceMappingURL=10.8b795f95.chunk.js.map