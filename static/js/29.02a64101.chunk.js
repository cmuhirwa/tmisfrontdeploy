(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[29],{404:function(e,t,s){"use strict";s(4);var r=s(17),a=s(53),c=s(2);t.a=function(e){var t=e.title,s=e.name;return Object(c.jsx)(a.a,{className:"max-w-screen-sm mx-auto text-center animate__animated animate__zoomIn animate__faster",children:Object(c.jsxs)("div",{className:"py-4",children:[Object(c.jsx)("div",{className:"text-6xl p-4 rounded-full bg-red-100 text-red-700 inline-block ",children:Object(c.jsx)(r.i,{})}),Object(c.jsx)("h2",{className:"text-2xl font-bold",children:t}),Object(c.jsxs)("p",{className:"pt-4 text-gray-500",children:["To request a ",s," you must have experience of one year in education and one year at the current school."]})]})})}},405:function(e,t,s){"use strict";var r=s(32),a=s(4),c=s(17),n=s(38),i=s(15),o=s(2);t.a=function(e){var t,s,l,d,h,u,j=e.transf,m=e.expand,x=void 0!==m&&m,b=e.remove_loading,p=void 0!==b&&b,_=e.removeTransfer,f=Object(a.useState)(!1),g=Object(r.a)(f,2),O=g[0],v=g[1];return console.log(j),Object(o.jsxs)("div",{className:"p-2 bg-white mb-3 border rounded ",children:[Object(o.jsxs)("div",{className:"flex",children:[Object(o.jsx)("div",{className:"p-3 hidden lg:flex items-center  ".concat("APPROVED"===j.requested_status?"text-green-700 bg-green-100":"text-accent-800 bg-accent-400"," rounded flex items-center"),children:Object(o.jsx)(c.hb,{size:80})}),Object(o.jsxs)("div",{className:"flex-1 pl-3 pt-1",children:[Object(o.jsxs)("section",{className:"hover:underline cursor-pointer",onClick:function(){return v(!O)},children:[Object(o.jsx)("span",{className:"p-1 rounded px-2 py-0.5 text-sm  ".concat("APPROVED"===j.requested_status?"bg-green-600 text-white":"bg-accent-900 text-white"),children:j.requested_status})," ",Object(o.jsxs)("h2",{className:"text-lg font-bold",children:[j.position_code," ",j.position_name]})]}),Object(o.jsxs)("div",{className:"pt-1",children:[Object(o.jsxs)("section",{className:"flex flex-col lg:flex-row gap-1 lg:gap-0 lg:items-center pt-2",children:[Object(o.jsxs)("section",{className:"border pl-2 hover:bg-gray-200 pr-4 rounded  lg:--rounded-r-full",children:[Object(o.jsx)("h6",{className:" font-light text-sm text-yellow-600",children:"Current school"}),Object(o.jsxs)("h3",{className:" font-bold",children:[null===(t=j.school_from_info)||void 0===t?void 0:t.school_code," - ",null===(s=j.school_from_info)||void 0===s?void 0:s.school_name]}),Object(o.jsxs)("h4",{className:"text-sm -mt-1 text-gray-500",children:[null===(l=j.school_from_info)||void 0===l?void 0:l.district_name," -"," ",null===(d=j.school_from_info)||void 0===d?void 0:d.sector_name]})]}),Object(o.jsx)("section",{className:"text-gray-500",children:Object(o.jsx)(c.r,{size:40})}),null===(h=j.requested_school_info)||void 0===h?void 0:h.map((function(e,t){return Object(o.jsxs)("section",{className:" flex-1 pl-4 bg-gray-100 rounded hover:bg-gray-200 ".concat(0===t?"lg:--rounded-l-full rounded-r p-1 mr-2 ":" px-1 rounded mr-2 py-2","  ").concat(j.approved_school_id===e.school_code?"text-green-800 bg-green-100 hover:bg-green-200 border-green-400 border-2":"border"),children:[Object(o.jsxs)("h6",{className:" font-light text-sm text-yellow-600",children:["Requested school ",t+1]}),Object(o.jsxs)("h4",{className:" font-bold",children:[null===e||void 0===e?void 0:e.school_code," - ",null===e||void 0===e?void 0:e.school_name]}),Object(o.jsxs)("h4",{className:"text-sm -mt-1 opacity-70",children:[e.district_name," - ",null===e||void 0===e?void 0:e.sector_name]})]},t)}))]}),Object(o.jsxs)("section",{className:"pt-2",children:[Object(o.jsx)("label",{className:"text-gray-500 inline-block pr-1",children:"Date: "})," ",Object(o.jsx)("b",{children:j.teacher_requested_transfer_date})]})]})]})]}),(O||x)&&Object(o.jsx)("div",{className:"animate__animated  animate__fadeIn animate__faster mt-2 border-t pt-2 grid grid-cols-2",children:[{title:"Transfer type",value:j.transfer_type},{title:"transfer_reason",value:j.transfer_reason},{title:"Requested transfer date",value:j.teacher_requested_transfer_date},{title:"Decision provided on",value:j.incoming_decision_date}].map((function(e,t){return e.value?Object(o.jsxs)("div",{className:"border px-2 py-1.5  flex items-center",children:[Object(o.jsxs)("span",{className:"text-gray-500",children:[e.title,": "]})," ",Object(o.jsx)("h6",{className:"font-bold text-black",children:e.value})]},t):null}))}),j.teacher_comment&&(null===(u=j.teacher_comment)||void 0===u?void 0:u.length)>=1&&Object(o.jsxs)("div",{className:"p-2 my-2 rounded border",children:[Object(o.jsx)("span",{className:"text-gray-500",children:"Transfer reason: "})," ",Object(o.jsx)("h6",{className:"font-bold text-black",children:j.teacher_comment})]}),_&&j.teacher_transfer_id&&"APPROVED"!==j.requested_status&&Object(o.jsx)("div",{className:"pt-4 text-right",children:Object(o.jsx)(n.a,{onClick:_.bind(undefined,j.teacher_transfer_id),theme:"danger-light",loading:p,children:"Remove transfer request"})}),null!==j.mayor_letter&&Object(o.jsx)("div",{className:"p-2 text-right",children:Object(o.jsx)("a",{href:"".concat(i.e,"/").concat(j.mayor_letter),target:"_blank",rel:"noreferrer",download:!0,children:Object(o.jsx)(n.a,{theme:"accent-light",children:"Download transfer letter"})})})]})}},560:function(e,t,s){"use strict";s.r(t),s.d(t,"TransfersList",(function(){return F}));var r=s(8),a=s(26),c=s(27),n=s(28),i=s(29),o=s(4),l=s.n(o),d=s(17),h=s(31),u=s(14),j=s(54),m=s(38),x=s(53),b=s(404),p=s(79),_=s(36),f=s(6),g=s(43),O=s(45),v=s(349),N=s(61),y=s(365),w=s(18),S=s(2),C=function(e){var t=e.number,s=e.title,r=e.description,a=e.theme,c=e.active,n=e.priority,i=e.onClick;return Object(S.jsxs)("div",{onClick:i,className:"p-2 rounded-t-md cursor-pointer border-b-4 flex flex-col text-center lg:text-left lg:flex-row items-center border-".concat(a,"-500 ").concat(!0===c?"bg-".concat(a,"-100"):""," ").concat(!1===n?"opacity-60":""),children:[Object(S.jsx)("section",{className:"p-2 lg:p-3 rounded-full border-4 ".concat("bg-".concat(a,"-500")," 0 ").concat("border-".concat(a,"yellow"===a?"-600":"-200"),"  ").concat("yellow"===a?"text-black":"text-white"," w-9 h-9 lg:w-14 lg:h-14 flex items-center text-center"),children:Object(S.jsx)("h3",{className:"text-center w-full text-xl lg:text-3xl font-bold ",children:t})}),Object(S.jsxs)("section",{className:"pl-2",children:[Object(S.jsx)("h3",{className:"lg:text-xl text-lg font-bold",children:s}),Object(S.jsx)("p",{className:"text-gray-400 text-sm",children:r})]})]})},k=function(e){e.close;return Object(S.jsxs)(x.a,{className:"max-w-screen-md mx-auto text-center",children:[Object(S.jsx)("h1",{className:"text-2xl",children:"Transfer is closed"}),Object(S.jsx)("p",{className:"text-center pt-2 text-gray-700",children:"The transfer is closed"})]})},q=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){var e,t;return null!==(e=r.props.auth.position)&&void 0!==e&&e.position_code?null!==(t=r.props.auth.position)&&void 0!==t&&t.qualification_id?void Object(u.fb)(r.props.auth.position.qualification_id,r.props.auth.position.position_code,(function(e,t,s){r.setState({loading_district:!1,districts:null===t?[]:t,error:e?{target:null,msg:""}:{target:"main-error",msg:s}})})):r.setState({error:{msg:"You have no qualification assigned to you.",target:"main-error"}}):r.setState({error:{msg:"You have no position assigned to you.",target:"main-error"}})},r.selectDistrict=function(e){var t,s,a,c;null!==e&&r.props.auth.user&&null!==(t=r.props.auth.position)&&void 0!==t&&t.position_code&&null!==(s=r.props.auth.position)&&void 0!==s&&s.qualification_id?e.total_vacant>=1?(r.setState({selected_district:e,step:2,loading_schools:!0}),Object(u.x)(e.district_code,null===(a=r.props.auth.position)||void 0===a?void 0:a.position_code,null===(c=r.props.auth.position)||void 0===c?void 0:c.qualification_id,(function(e,t,s){r.setState({loading_schools:!1,schools:t,error:!0===e?{target:null,msg:""}:{target:"main-error",msg:s}})}))):window.alert("No vacant found in ".concat(e.district_name," district.")):window.alert("Please verify your profile")},r.selectSchool=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.state.selected_schools.length>=3&&t||(t?r.setState({selected_schools:[].concat(Object(g.a)(r.state.selected_schools),[e])}):r.setState({selected_schools:r.state.selected_schools.filter((function(t){return t.school_code!==e.school_code}))}))},r.loadReasons=function(){r.state.reasons.length<=0&&(r.setState({loading_reasons:!0}),Object(u.cb)((function(e,t,s){r.setState({loading_reasons:!1,reasons:t,error:!1===e?{msg:"",target:null}:{target:"error",msg:s}})})))},r.submitTransferRequest=function(){var e;if(!r.props.auth)return r.setState({error:{target:"transfer-error",msg:"Authentication info are not completed"}});if(!r.props.auth.school)return r.setState({error:{target:"transfer-error",msg:"Check your school information."}});if(!r.state.selected_district)return r.setState({error:{target:"transfer-error",msg:"The district assigned to you is not valid"}});if(!r.props.auth.user)return r.setState({error:{target:"transfer-error",msg:"Incomplete profile info"}});if(!r.props.basic.academic_calender||!r.props.auth||!r.props.auth.school||!r.state.selected_district||!r.props.auth.user)return r.setState({error:{target:"transfer-error",msg:"Incomplete profile info"}});var t=r.props.auth.school.school_code.substring(0,2),s={academic_year_id:"1",district_from_id:t,district_to_id:r.state.selected_district.district_code,requested_school_id:r.state.selected_schools.map((function(e){return e.school_code})),school_from_id:r.props.auth.school.school_code,teacher_comment:r.state.candidate_comment,teacher_reason_id:[],teacher_supporting_document:[],transfer_type:t!==r.state.selected_district.district_code?"External":"Internal"};r.setState({loading_submit_transfer:!0,error:{target:null,msg:""}}),Object(u.Db)(s,null===(e=r.props.auth.user)||void 0===e?void 0:e.staff_code,(function(e,t,s){console.log({res:t}),!0===e?r.setState({loading_submit_transfer:!1,transfer_success:!0}):(console.log({msg:s}),r.setState({loading_submit_transfer:!1,error:{target:"transfer-error",msg:s}}),r.props.reloadTransfers())}))},r.state={loading_schools:!1,loading_district:!0,districts:[],schools:[],selected_district:null,error:{target:null,msg:""},selected_qualification:"",search:"",step:1,search_district:"",search_school:"",selected_schools:[],reasons:[],selected_reasons:[],loading_reasons:!1,candidate_comment:"",transfer_success:!1,loading_submit_transfer:!1},r}return Object(c.a)(s,[{key:"render",value:function(){var e,t,s,r,a,c,n,i,o,l,h,u=this;if(!1===this.props.auth.is_transfer_open)return Object(S.jsx)(k,{});if(null===(null===(e=this.props.auth.user)||void 0===e?void 0:e.resident_surpoting_document)||""===(null===(t=this.props.auth.user)||void 0===t?void 0:t.resident_surpoting_document)||null===(s=this.props.auth.user)||void 0===s||!s.resident_district_id)return Object(S.jsxs)(x.a,{children:[Object(S.jsxs)("div",{className:"text-center py-4 bg-red-100 bg-opacity-60 mb-4 text-red-800",children:[Object(S.jsx)("h1",{className:"text-2xl font-bold",children:"Your document of residence is required"}),Object(S.jsxs)("p",{className:"text-gray-600",children:["Please add the document in order to continue, the document can be found on ",Object(S.jsx)("b",{children:"Irembo"})]})]}),Object(S.jsx)(y.a,{auth:this.props.auth,FC_UpdateUserDocuments:this.props.FC_UpdateUserDocuments})]});if("main-error"===this.state.error.target)return Object(S.jsx)(j.a,{theme:"danger",fixed:!0,children:this.state.error.msg});var b=Object(w.j)(this.state.districts,this.state.search_district,{district_code:!0,district_name:!0}),f=Object(w.j)(this.state.schools,this.state.search_school,{school_code:!0,school_name:!0,sector_name:!0});return!0===this.state.transfer_success?Object(S.jsx)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(S.jsxs)("div",{className:"py-4 text-center",children:[Object(S.jsx)(d.l,{size:90,className:"mx-auto text-green-500"}),Object(S.jsx)("h3",{className:"font-bold text-lg",children:null===(r=this.props.auth.user)||void 0===r?void 0:r.full_name}),Object(S.jsxs)("p",{className:"text-gray-500 pb-4",children:["Your transfer request has been submitted successfully."," "]}),Object(S.jsx)(m.a,{theme:"accent-light",size:"md",onClick:function(){return u.props.close()},children:"View transfer request"})]})}):Object(S.jsxs)(S.Fragment,{children:["main-success"===this.state.error.target&&Object(S.jsx)(j.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"sticky top-14 z-50 ",children:Object(S.jsxs)(x.a,{children:[Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsxs)("div",{className:"flex-1",children:[Object(S.jsxs)(p.a,{size:"lg",className:" py-2 lg:pb-3 lg:pt-2 font-light text-left text-gray-500",children:["Apply for transfer"," ",this.state.selected_district&&Object(S.jsxs)("span",{children:[" ","in"," ",Object(S.jsxs)("b",{className:"text-primary-800",children:[this.state.selected_district.district_name," district"]})]})]}),Object(S.jsxs)("p",{className:"-mt-3 pb-2 text-gray-400",children:["Position name:"," ",Object(S.jsxs)("b",{className:"text-primary-800",children:[null===(a=this.props.auth.position)||void 0===a?void 0:a.position_code," ",null===(c=this.props.auth.position)||void 0===c?void 0:c.position_name]})]}),Object(S.jsxs)("p",{className:"-mt-3 pb-2 text-gray-400",children:["Qualification:"," ",Object(S.jsx)("b",{className:"text-primary-800",children:null===(n=this.props.auth.position)||void 0===n?void 0:n.qualification_name})]})]}),!1===this.state.loading_submit_transfer&&Object(S.jsx)(m.a,{size:"md",theme:"danger-light",onClick:function(){return window.confirm("Are you sure you want to stop the request process \n All your previous choices will be lost")?u.props.onClick():null},children:"Close"})]}),Object(S.jsx)("div",{className:"pt-2 grid  grid-cols-3 border p-2 rounded-md",children:[{step:1,title:"Choose a district",description:"Select a district where you want to be transferred"},{step:2,title:"Choose school",description:"You can select up to 3 schools"},{step:3,title:"Complete transfer",description:"Complete the information"}].map((function(e){return Object(S.jsx)(C,{onClick:function(){!0!==u.state.loading_submit_transfer&&(1===e.step&&u.setState({step:1,schools:[],loading_schools:!1,selected_schools:[]}),2===e.step&&3===u.state.step&&u.setState({step:2}))},active:e.step===u.state.step,description:e.description,number:e.step,theme:e.step===u.state.step?"yellow":u.state.step>e.step?"green":"gray",title:e.title,priority:e.step<=u.state.step},e.step)}))})]})}),1===this.state.step&&Object(S.jsx)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"p-2",children:Object(S.jsx)(N.a,{error:"",label:"",name:"",onChange:function(e){return u.setState({search_district:e.target.value})},placeholder:"Search district by name",value:this.state.search_district})}),!0===this.state.loading_district?Object(S.jsx)("div",{className:"py-8 text-center text-8xl text-accent-900",children:Object(S.jsx)(_.a,{className:"mx-auto"})}):this.state.districts.length>=1?Object(S.jsx)(S.Fragment,{children:b.length<=0?Object(S.jsxs)("div",{className:"py-4 text-center",children:[Object(S.jsx)("h2",{className:"text-lg",children:"No results found!"}),Object(S.jsx)("p",{className:"text-gray-500",children:"Please use a correct district name"})]}):Object(S.jsx)("div",{className:"grid lg:grid-cols-2 gap-2 ",children:b.map((function(e){return Object(S.jsxs)("div",{onClick:u.selectDistrict.bind(u,e),className:"p-2 flex items-center cursor-pointer rounded border  px-3 hover:text-yellow-600 hover:border-yellow-600 hover:bg-yellow-50 bg-white text-lg",children:[Object(S.jsxs)("h4",{className:"flex-1 text-lg",children:[" ",Object(S.jsx)("b",{children:e.district_name})," district"]}),Object(S.jsx)("span",{className:"bg-yellow-100 text-yellow-700 font-bold py-0.5 inline-block text-sm px-1.5 rounded-full",children:e.total_vacant}),e.total_vacant>=1&&Object(S.jsx)("button",{className:"",children:Object(S.jsx)(d.E,{})})]},e.district_code)}))})}):Object(S.jsxs)("div",{className:"py-4 text-center",children:[Object(S.jsx)("h2",{className:"text-8xl text-gray-400 text-center",children:Object(S.jsx)(O.f,{className:"inline"})}),Object(S.jsx)("h2",{className:"text-center p-4 text-gray-400 font-bold text-2xl",children:Object(S.jsx)("p",{children:"No vacant found on"})})," ",Object(S.jsx)("p",{className:"-mt-3 pb-2 text-gray-400 text-lg",children:Object(S.jsxs)("b",{className:"text-black",children:[null===(i=this.props.auth.position)||void 0===i?void 0:i.position_code," -"," ",null===(o=this.props.auth.position)||void 0===o?void 0:o.position_name," -"," ",null===(l=this.props.auth.position)||void 0===l?void 0:l.qualification_name]})})]})]})}),2===this.state.step&&Object(S.jsxs)(S.Fragment,{children:[!0===this.state.loading_schools?Object(S.jsxs)("div",{className:"py-4 text-center",children:[Object(S.jsx)(d.db,{size:"160px",className:"text-gray-600 mx-auto animate__animated animate__swing animate__slow animate__infinite"}),Object(S.jsx)("h2",{className:"text-3xl text-gray-600 pb-2 pt-4",children:"Looking for the vacancies"}),Object(S.jsx)("p",{className:"text-gray-500",children:"Please wait"})]}):Object(S.jsx)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"py-0.5 my-2 px-2 flex items-center bg-gray-100 rounded",children:[Object(S.jsx)("section",{children:Object(S.jsxs)(m.a,{theme:"default",className:"flex items-center text-blue-600",onClick:function(){return u.setState({step:1,schools:[],loading_schools:!1,selected_schools:[]})},children:[Object(S.jsx)(d.z,{size:30})," Back"]})}),Object(S.jsx)("section",{className:"flex-1",children:Object(S.jsx)(N.a,{error:"",label:"",name:"",onChange:function(e){return u.setState({search_school:e.target.value})},placeholder:"Search schools by name",value:this.state.search_school})})]}),this.state.schools.length>=1?Object(S.jsx)(S.Fragment,{children:f.length<=0?Object(S.jsxs)("div",{className:"py-4 text-center",children:[Object(S.jsx)("h2",{className:"text-lg",children:"No results found!"}),Object(S.jsx)("p",{className:"tet-gray-500",children:"Please use a correct school name"})]}):Object(S.jsx)("div",{className:"grid lg:grid-cols-2 gap-2 pb-20",children:f.map((function(e){var t,s=u.state.selected_schools.find((function(t){return t.school_code===e.school_code}));return e.school_code===(null===(t=u.props.auth.school)||void 0===t?void 0:t.school_code)?null:Object(S.jsxs)("div",{onClick:u.selectSchool.bind(u,e,void 0===s),className:"pr-2 pl-1 py-1 flex cursor-pointer rounded border  px-3 ".concat(void 0===s?"hover:text-yellow-600 hover:border-yellow-600 hover:bg-yellow-50":"hover:text-green-600 border-green-600 bg-green-100","  bg-white text-lg"),children:[Object(S.jsx)("button",{className:"pr-2 text-3xl",children:void 0===s?Object(S.jsx)(d.k,{className:"".concat(u.state.selected_schools.length>=3?"text-gray-400":"text-gray-800")}):Object(S.jsx)(d.j,{className:"text-green-500"})}),Object(S.jsxs)("section",{className:"flex-1",children:[Object(S.jsxs)("h4",{className:"",children:[Object(S.jsx)("span",{children:e.school_code})," ",Object(S.jsx)("b",{children:e.school_name})]}),Object(S.jsxs)("p",{className:"text-sm text-gray-600",children:["Sector: ",Object(S.jsx)("b",{children:e.sector_name})]})]}),Object(S.jsxs)("section",{children:[Object(S.jsxs)("p",{className:"text-xs text-gray-400",children:["Vacant","(s)"]}),Object(S.jsx)("h4",{className:" font-bold text-right   ",children:e.vacant_posts})]})]},e.school_code)}))})}):Object(S.jsxs)("div",{className:"py-6 text-center",children:[Object(S.jsx)(O.f,{size:"120px",className:"text-gray-600 mx-auto animate__animated animate__zoomIn animate__slow "}),Object(S.jsxs)("h2",{className:"text-3xl text-gray-600 pb-2 pt-4",children:["Sorry, there is no vacancies for you in"," ",Object(S.jsx)("b",{children:null===(h=this.state.selected_district)||void 0===h?void 0:h.district_name})]}),Object(S.jsxs)("p",{className:"text-gray-500",children:["Please look for another district, ",Object(S.jsx)("br",{})," or try again next time"]})]})]})}),this.state.selected_schools.length>=1&&Object(S.jsxs)("div",{className:"p-2 bottom-0 items-center right-0 left-0 lg:pl-72 fixed bg-white border-t flex",children:[Object(S.jsxs)("section",{className:"flex-1",children:[Object(S.jsxs)("label",{className:"block px-0.5 m-0 text-sm",children:["Selected schools:"," ",Object(S.jsx)("b",{children:this.state.selected_schools.length})]}),Object(S.jsx)("section",{className:"pt-0.5",children:this.state.selected_schools.map((function(e){return Object(S.jsx)("section",{className:"inline-block m-0.5 p-0.5 px-1 rounded-md bg-yellow-100 font-bold text-yellow-600 text-sm",children:e.school_name},e.school_code)}))})]}),Object(S.jsx)("div",{className:"",children:Object(S.jsx)(m.a,{size:"lg",onClick:function(){u.setState({step:3})},children:"Continue"})})]})]}),3===this.state.step&&Object(S.jsxs)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:["transfer-error"===this.state.error.target&&Object(S.jsx)(j.a,{theme:"danger",children:this.state.error.msg}),Object(S.jsxs)("div",{className:"p-1",children:[Object(S.jsx)(y.a,{auth:this.props.auth,FC_UpdateUserDocuments:this.props.FC_UpdateUserDocuments}),Object(S.jsxs)("div",{className:"pt-3",children:[Object(S.jsx)("h4",{children:"Add reason"}),Object(S.jsx)(v.a,{onChange:function(e){return u.setState({candidate_comment:e.target.value})},value:this.state.candidate_comment,error:"",label:"",placeholder:"Explain your reasons",name:"",disabled:this.state.loading_submit_transfer})]}),Object(S.jsx)("div",{className:"text-right",children:Object(S.jsx)(m.a,{size:"lg",onClick:this.submitTransferRequest,loading:this.state.loading_submit_transfer,children:"Submit transfer request"})})]})]})]})]})}}]),s}(l.a.Component),T=Object(h.b)((function(e){return{auth:e.auth,basic:e.basic,placement:e.placement}}),{FC_UpdateUserDocuments:u.Nb})(q),D=s(405),E=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).removeTransfer=function(e){var t,s=null===(t=c.props.basic.academic_calender)||void 0===t?void 0:t.academic_year_id;if(!s)return c.setState({error:{msg:"No academic year found",target:"main-error"}});window.confirm("Are you sure you want to remove your transfer request?")&&(c.setState({deleting_transfer_id:e}),Object(u.rb)(e,s,(function(t,s){!0===t?c.setState({deleting_transfer_id:"",current_transfer:null!==c.state.current_transfer&&c.state.current_transfer.teacher_transfer_id===e?null:c.state.current_transfer,transfers:c.state.transfers.filter((function(t){return t.teacher_transfer_id!==e})),error:{target:"main-success",msg:s}}):c.setState({deleting_transfer_id:"",error:{target:"main-error",msg:s}})})))},c.openForm=function(e){return c.setState({add_transfer:e})},c.UpdateTransferTeacherDecision=function(e){if(null===c.state.current_transfer||null===e)return c.setState({error:{target:"teacher-decision-error",msg:"No selected transfer found!"}});window.confirm("Are you sure you want to ".concat(e," your transfer?. this process is irreversible."))&&c.props.auth.user&&(c.setState({loading_user_decision:!0}),Object(u.Mb)({teacher_decision:e,teacher_transfer_id:c.state.current_transfer.teacher_transfer_id+""},(function(t,s,a){!0===t?(c.setState({loading_user_decision:!1,current_transfer:null!==c.state.current_transfer?Object(r.a)(Object(r.a)({},c.state.current_transfer),{},{teacher_decision:e}):null,error:{target:"teacher-decision-success",msg:"Your transfer has been ".concat(e," successfully.")}}),"REJECTED"===e&&(window.alert("Your changes has been applied, Please Reload your browser in order to see the changes"),window.location.reload())):c.setState({loading_user_decision:!1,error:{target:"teacher-decision-error",msg:"Error: ".concat(a,".")}})})))},c.state={loading:!1,add_transfer:!1,transfers:[],current_transfer:null,error:{target:null,msg:""},deleting_transfer_id:"",has_permutation_request:!1,loading_user_decision:!1},c}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.startComponent(!0)}},{key:"startComponent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===t&&this.setState({loading:!0}),Object(u.bb)((function(s,r,a){!0===s&&null!==r?e.setState({loading:!1,has_permutation_request:r.has_permutation_request,transfers:r.transferWithNoCurrentAcademic?r.transferWithNoCurrentAcademic:[],current_transfer:r.transferWithCurrentAcademic}):!0===t&&e.setState({transfers:[],loading:!1,error:{target:"main-error",msg:a}})}))}},{key:"render",value:function(){var e,t,s,r,a,c,n=this;return!0===this.state.has_permutation_request?Object(S.jsxs)(x.a,{className:"max-w-screen-md mx-auto py-4 text-center animate__animated animate__zoomIn animate__faster",children:[Object(S.jsx)("h2",{className:" text-6xl text-center text-red-400 pb-4",children:Object(S.jsx)(d.x,{className:"inline-block"})}),Object(S.jsxs)("h4",{className:"text-xl font-bold",children:["It looks like you have already requested for a permutation, ",Object(S.jsx)("br",{}),"You can't Request a transfer"]}),Object(S.jsxs)("p",{className:"text-gray-600 pt-2",children:["If you want to request for a transfer, ",Object(S.jsx)("br",{})," you will need to remove your permutation."]})]}):this.props.auth.has_one_year?!0===this.state.add_transfer?!1===this.props.auth.is_transfer_open?Object(S.jsx)(k,{}):Object(f.c)(null===(c=this.props.auth.role)||void 0===c?void 0:c.access,f.b.TRANSFER_FORM_OPEN)?Object(S.jsx)(T,{onClick:this.openForm.bind(this,!1),reloadTransfers:this.startComponent,close:function(){n.setState({add_transfer:!1}),n.startComponent()}}):Object(S.jsx)("div",{className:"p-4 text-xl text-center text-gray-400",children:"Transfer is closed"}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"bg-white",children:Object(S.jsx)(x.a,{transparent:!0,className:"",children:Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsxs)("section",{className:"flex-1 text-gray-600",children:[Object(S.jsx)(p.a,{children:"My Transfers"}),!1===this.state.loading&&Object(S.jsxs)("p",{children:["Total transfers:"," ",null===this.state.current_transfer?this.state.transfers.length:this.state.transfers.length+1]})]}),Object(S.jsx)("section",{children:null!==this.state.current_transfer&&"PENDING"===this.state.current_transfer.requested_status&&Object(S.jsxs)("p",{className:"text-sm text-yellow-700 ",children:["If you want to make changes on your request, ",Object(S.jsx)("br",{})," delete the current request and request a new one."]})})]})})}),Object(S.jsxs)(x.a,{transparent:!0,className:"",children:["main-error"===this.state.error.target&&Object(S.jsx)(j.a,{theme:"danger",fixed:!0,onClick:function(){return n.setState({error:{msg:"",target:null}})},children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(S.jsx)(j.a,{theme:"success",fixed:!0,onClick:function(){return n.setState({error:{msg:"",target:null}})},children:this.state.error.msg}),Object(S.jsx)("div",{className:"py-2",children:!1===this.state.loading&&Object(S.jsx)(S.Fragment,{children:null!==this.state.current_transfer&&this.state.current_transfer.teacher_transfer_id?Object(S.jsxs)(S.Fragment,{children:["teacher-decision-error"===this.state.error.target&&Object(S.jsx)(j.a,{theme:"danger",children:this.state.error.msg}),"teacher-decision-success"===this.state.error.target&&Object(S.jsx)(j.a,{theme:"success",children:this.state.error.msg}),Object(S.jsx)(D.a,{transf:this.state.current_transfer,expand:!0,remove_loading:this.state.current_transfer.teacher_transfer_id===this.state.deleting_transfer_id,removeTransfer:!0===this.props.auth.is_transfer_open?this.removeTransfer:void 0}),null!==this.state.current_transfer&&null!==this.state.current_transfer.approved_school_id&&"APPROVED"===this.state.current_transfer.requested_status&&Object(S.jsxs)("div",{className:"p-2 bg-white -mt-4 border rounded flex",children:[Object(S.jsx)("div",{className:"flex-1"}),null!==this.state.current_transfer.teacher_decision?Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"text-right p-3 flex items-center gap-2",children:[Object(S.jsx)("p",{className:"text-gray-700",children:"Teacher's transfer decision"}),"ACCEPTED"===this.state.current_transfer.teacher_decision?Object(S.jsx)("span",{className:"p-2 text-green-600 bg-green-100 rounded font-bold px-2 py-1",children:"ACCEPTED"}):Object(S.jsx)("span",{className:"p-2 text-red-600 bg-red-100 rounded font-bold px-2 py-1",children:this.state.current_transfer.teacher_decision})]})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(m.a,{className:"mr-2",theme:"danger-light",onClick:this.UpdateTransferTeacherDecision.bind(this,"REJECTED"),loading:this.state.loading_user_decision,children:Object(S.jsxs)("section",{className:"flex items-center",children:[Object(S.jsx)("section",{className:"text-4xl pr-3",children:Object(S.jsx)(d.O,{})}),Object(S.jsxs)("section",{className:"text-left flex-1",children:[Object(S.jsx)("h4",{children:"Reject Transfer"}),Object(S.jsx)("p",{className:"font-light text-sm",children:"Hagarika taransiferi"})]})]})}),Object(S.jsx)(m.a,{className:"mr-2",theme:"success",onClick:this.UpdateTransferTeacherDecision.bind(this,"ACCEPTED"),loading:this.state.loading_user_decision,children:Object(S.jsxs)("section",{className:"flex items-center",children:[Object(S.jsx)("section",{className:"text-4xl pr-3",children:Object(S.jsx)(d.l,{})}),Object(S.jsxs)("section",{className:"text-left flex-1",children:[Object(S.jsx)("h4",{children:"Accept Transfer"}),Object(S.jsx)("p",{className:"font-light text-sm",children:"Emeza taransiferi"})]})]})})]})]})]}):Object(S.jsx)(S.Fragment,{children:Object(f.c)(null===(e=this.props.auth.role)||void 0===e?void 0:e.access,f.b.TRANSFER_FORM_OPEN)?Object(S.jsxs)("div",{className:"text-center py-8",children:[Object(S.jsx)("h2",{className:"text-2xl font-bold ",children:"You haven't yet requested for a transfer?"}),Object(S.jsx)("p",{className:"text-gray-500 pb-2",children:"Send your transfer application if you want to be transferred"}),Object(S.jsx)(m.a,{onClick:this.openForm.bind(this,!0),children:"Request new transfer"})]}):Object(S.jsx)(k,{})})})}),Object(S.jsx)("div",{className:"pt-5 ".concat(null!==this.state.current_transfer&&null!==(null===(t=this.state.current_transfer)||void 0===t?void 0:t.teacher_transfer_id)&&void 0!==(null===(s=this.state.current_transfer)||void 0===s?void 0:s.teacher_transfer_id)&&(null===(r=this.state.current_transfer)||void 0===r||null===(a=r.teacher_transfer_id)||void 0===a?void 0:a.length)>=1?"opacity-40":""),children:!0===this.state.loading?Object(S.jsx)("div",{className:"py-8 text-center text-6xl",children:Object(S.jsx)(_.a,{className:"mx-auto"})}):this.state.transfers.length<=0?Object(S.jsx)("div",{className:"text-3xl py-8 text-center text-gray-500"}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h2",{className:"text-2xl text-gray-700 font-bold pb-2",children:"Old transfers"}),this.state.transfers.map((function(e,t){return Object(S.jsx)(D.a,{transf:e},t)}))]})})]})]}):Object(S.jsx)(b.a,{title:"You are not qualified to request a transfer",name:"transfer"})}}]),s}(l.a.Component),F=Object(h.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(E)}}]);
//# sourceMappingURL=29.02a64101.chunk.js.map