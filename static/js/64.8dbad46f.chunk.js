(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[64],{622:function(t,e,a){"use strict";a.r(e),a.d(e,"GeneralPlacementReport",(function(){return B}));var i=a(19),s=a(20),c=a(21),r=a(22),l=a(4),o=a(16),n=a(58),d=a(36),b=a(13),p=a(140),u=a(25),h=a(15),x=a(41),j=a(29),m=a(69),f=a(26),_=a(23),g=a(93),v=a(24),O=a(1),y=function(t){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"rounded-full h-12 w-12 bg-gray-100 hover:bg-primary-100 flex items-center justify-center",children:Object(O.jsx)(v.a,{className:"text-3xl"})})}),Object(O.jsxs)("div",{className:"font-extrabold text-2xl text-primary-800 border-b border-primary-800 px-3 py-2 w-full",children:[t.selectedDistrictDetails.district_name," District placement details"]})]}),Object(O.jsxs)("div",{className:"grid grid-cols-12 my-8",children:[Object(O.jsxs)("div",{className:"col-span-4 flex flex-row gap-6 pl-3 pt-3",children:[Object(O.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(O.jsx)("span",{className:"font-light",children:"District name"}),Object(O.jsx)("span",{className:"font-extrabold text-xl",children:t.selectedDistrictDetails.district_name})]}),Object(O.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(O.jsx)("span",{className:"font-light",children:"District Code"}),Object(O.jsx)("span",{className:"font-extrabold text-xl",children:t.selectedDistrictDetails.district_code})]})]}),Object(O.jsx)("div",{className:"col-span-8",children:Object(O.jsx)("div",{className:"p-4 grid grid-cols-12 w-full gap-5",children:t.selectedDistrictDetails.details.map((function(t,e){return Object(O.jsxs)("div",{className:"col-span-4 bg-primary-100 rounded-lg overflow-hidden flex flex-row",children:[Object(O.jsx)("div",{className:"text-xl w-full text-center flex items-center justify-center bg-gray-100 p-3 py-5 border-r border-primary-800 font-light",children:t.qualification_name}),Object(O.jsx)("div",{className:"font-extrabold text-3xl text-primary-800 w-full text-center flex items-center justify-center",children:t.total})]},e+1)}))})})]})]})},N=function(t){Object(c.a)(a,t);var e=Object(r.a)(a);function a(t){var s,c,r,l;return Object(i.a)(this,a),(l=e.call(this,t)).getDistrictSchools=function(t,e){var a=e.pla_district_total_summary.find((function(e){return e.district_code===t})),i=e.district_total_summary.find((function(e){return e.district_code===t}));return{total_schools:void 0===i?0:parseInt(i.total),placed_schools:void 0===a?0:parseInt(a.total)}},l.getDistrictData=function(t,e){var a,i=null===(a=l.props.generalReport)||void 0===a?void 0:a.find((function(a){return a.district_code===t&&a.qualification.toLocaleLowerCase()===e.toLocaleLowerCase()}));return void 0!==i?parseInt(i.total):0},l.totalTeachersOnDistrict=function(t){var e,a=0,i=Object(j.a)(l.props.basic.qualifications);try{for(i.s();!(e=i.n()).done;){var s=e.value;a+=l.getDistrictData(t,s.qualification_name)}}catch(c){i.e(c)}finally{i.f()}return a},l.sortData=function(t){var e,a,i,s,c,r,o,n=[];switch(null===(e=l.state.sortBy)||void 0===e?void 0:e.column){case"teachers":n="ASC"===(null===(a=l.state.sortBy)||void 0===a?void 0:a.status)?t.sort((function(t,e){return t.total-e.total})):"DESC"===(null===(i=l.state.sortBy)||void 0===i?void 0:i.status)?t.sort((function(t,e){return e.total-t.total})):t;break;case"schools_submitted":n="ASC"===(null===(s=l.state.sortBy)||void 0===s?void 0:s.status)?t.sort((function(t,e){return t.placed_schools-e.placed_schools})):"DESC"===(null===(c=l.state.sortBy)||void 0===c?void 0:c.status)?t.sort((function(t,e){return e.placed_schools-t.placed_schools})):t;break;case"remaining":n="ASC"===(null===(r=l.state.sortBy)||void 0===r?void 0:r.status)?t.sort((function(t,e){return t.schools-t.placed_schools-(e.schools-e.placed_schools)})):"DESC"===(null===(o=l.state.sortBy)||void 0===o?void 0:o.status)?t.sort((function(t,e){var a=t.schools-t.placed_schools;return e.schools-e.placed_schools-a})):t;break;default:n=t}return n},l.districtsWithTotals=function(){var t=[];if(null!==l.props.districts&&null!==l.props.generalReport&&null!==l.state.schools_submitted_placements){var e,a=Object(j.a)(l.props.districts);try{for(a.s();!(e=a.n()).done;){var i=e.value;t.push({district_code:i.district_code,district_name:i.district_name,total:l.totalTeachersOnDistrict(i.district_code),schools:l.getDistrictSchools(i.district_code,l.state.schools_submitted_placements).total_schools,placed_schools:l.getDistrictSchools(i.district_code,l.state.schools_submitted_placements).placed_schools})}}catch(s){a.e(s)}finally{a.f()}}return t=l.state.pinned_districts.length>0?t.filter((function(t){return void 0!==l.state.pinned_districts.find((function(e){return e===t.district_code}))})):t,Object(h.v)(l.sortData(t),l.state.search_district)},l.getGrandTotal=function(){var t,e=0,a=0,i=0,s=0,c=Object(j.a)(l.districtsWithTotals());try{for(c.s();!(t=c.n()).done;){var r=t.value;e+=r.placed_schools,a+=r.schools,i+=r.schools-r.placed_schools,s+=r.total}}catch(o){c.e(o)}finally{c.f()}return{total_placed_schools:e,total_schools:a,total_pending_schools:i,total_teachers:s}},l.pinDistrict=function(t){var e,a,i;"3"!==(null===(e=l.props.auth.role)||void 0===e?void 0:e.role_id)&&"2"!==(null===(a=l.props.auth.role)||void 0===a?void 0:a.role_id)&&"1"!==(null===(i=l.props.auth.role)||void 0===i?void 0:i.role_id)&&(void 0===l.state.pinned_districts.find((function(e){return e===t}))?l.setState({pinned_districts:[].concat(Object(x.a)(l.state.pinned_districts),[t])}):l.setState({pinned_districts:l.state.pinned_districts.filter((function(e){return e!==t}))}))},l.state={loading:!1,sortBy:null,search_district:"",selectedDistrictDetails:null,schools_submitted_placements:null,pinned_districts:"3"!==(null===(s=l.props.auth.role)||void 0===s?void 0:s.role_id)&&"2"!==(null===(c=l.props.auth.role)||void 0===c?void 0:c.role_id)&&"1"!==(null===(r=l.props.auth.role)||void 0===r?void 0:r.role_id)||null===l.props.auth.district?[]:[l.props.auth.district.district_code]},l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this;void 0!==this.props.selected_district&&this.setState({selectedDistrictDetails:{district_code:this.props.selected_district.district_code,district_name:this.props.selected_district.district_name,details:this.props.basic.qualifications.map((function(e){return{qualification_name:e.qualification_name,total:t.getDistrictData(t.props.selected_district.district_code,e.qualification_name)}})),total:this.totalTeachersOnDistrict(this.props.selected_district.district_code)}}),null===this.state.schools_submitted_placements&&null!==this.props.basic.academic_calender&&Object(b.sb)(this.props.basic.academic_calender.academic_year_id,this.props.selected_month,(function(e,a,i){console.log(i),t.setState({loading:e}),null!==i&&!1===e&&t.setState({schools_submitted_placements:i,loading:!1})}))}},{key:"render",value:function(){var t,e,a,i,s=this;return!0===this.props.loading||!0===this.state.loading||null===this.props.districts||null===this.props.generalReport?Object(O.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(O.jsx)(u.a,{}),Object(O.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):null!==this.state.selectedDistrictDetails?Object(O.jsx)(y,{selectedDistrictDetails:this.state.selectedDistrictDetails}):Object(O.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-between gap-3 mb-5",children:[Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("span",{className:"font-extrabold text-2xl text-primary-800",children:"Teacher placement summary"}),Object(O.jsx)("span",{className:"-mt-1",children:"This file presents number of existing in the district"})]}),Object(O.jsxs)("div",{className:"flex flex-row items-center gap-8 justify-end",children:[Object(O.jsxs)("div",{className:"flex flex-col text-green-700",children:[Object(O.jsx)("span",{children:"Existing teachers"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-green-600",children:Object(h.i)(this.getGrandTotal().total_teachers)})]}),Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("span",{children:"Total Schools"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-gray-800",children:Object(h.i)(this.getGrandTotal().total_schools)})]}),Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("span",{children:"Submitted Schools"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-primary-800",children:Object(h.i)(this.getGrandTotal().total_placed_schools)})]}),Object(O.jsxs)("div",{className:"flex flex-col text-yellow-700",children:[Object(O.jsx)("span",{children:"Pending Schools"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-accent-900",children:Object(h.i)(this.getGrandTotal().total_pending_schools)})]})]})]}),Object(O.jsxs)("div",{className:"mb-3 flex flex-row items-center gap-2",children:[Object(O.jsx)("input",{type:"text",value:this.state.search_district,onChange:function(t){return s.setState({search_district:t.target.value})},placeholder:"Search by district",className:"px-3 py-2 rounded border border-gray-400 w-full font-bold text-primary-800"}),Object(O.jsx)("div",{className:"w-56",children:Object(O.jsx)(g.a,{fileData:this.districtsWithTotals().map((function(t,e){return{no:"".concat(e+1),DistrictCode:"".concat(t.district_code),DistrictName:"".concat(t.district_name),A2:"".concat(s.getDistrictData(t.district_code,"a2")),A1:"".concat(s.getDistrictData(t.district_code,"a1")),A0:"".concat(s.getDistrictData(t.district_code,"a0")),TotalPlacedTeachers:"".concat(t.total),TotalDistrictSchools:"".concat(t.schools),TotalSchoolsSubmitted:"".concat(t.placed_schools),PendingSchools:"".concat(t.schools-t.placed_schools)}})),fileName:"Districts Teacher placement summary",btnName:"Download EXCEL"})})]}),Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-primary-800 text-left font-extrabold bg-primary-100 text-sm",children:[Object(O.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"#"}),Object(O.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District code"}),Object(O.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District name"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("th",{className:"border border-blue-300 text-center px-4 py-2",children:t.qualification_name},e+1)})),Object(O.jsx)("th",{className:"border border-blue-300 text-left text-green-700 bg-green-50",children:Object(O.jsxs)("div",{onClick:function(){return s.setState({sortBy:{status:null===s.state.sortBy||"ASC"===s.state.sortBy.status?"DESC":"ASC",column:"teachers"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-left",children:[Object(O.jsx)("span",{children:"Existing teachers"}),Object(O.jsx)(m.f,{})]})}),Object(O.jsx)("th",{className:"border border-blue-300 text-center px-3 py-2",children:"Total schools"}),Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsxs)("div",{onClick:function(){return s.setState({sortBy:{status:null===s.state.sortBy||"ASC"===s.state.sortBy.status?"DESC":"ASC",column:"schools_submitted"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-center",children:[Object(O.jsx)("span",{children:"Schools submitted"}),Object(O.jsx)(m.f,{})]})}),Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsxs)("div",{onClick:function(){return s.setState({sortBy:{status:null===s.state.sortBy||"ASC"===s.state.sortBy.status?"DESC":"ASC",column:"remaining"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-center",children:[Object(O.jsx)("span",{children:"Remaining"}),Object(O.jsx)(m.f,{})]})})]})}),Object(O.jsx)("tbody",{children:0===this.districtsWithTotals().length?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:10,className:"text-center text-2xl font-extralight p-5 animate__animated animate__fadeIn border border-gray-300",children:"No Result Found!"})}):this.districtsWithTotals().map((function(t,e){return Object(O.jsxs)("tr",{onClick:function(){return s.pinDistrict(t.district_code)},className:"hover:bg-primary-100 cursor-pointer",children:[Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:e+1}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_code}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_name}),s.props.basic.qualifications.map((function(e,a){return Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-center",children:Object(h.i)(s.getDistrictData(t.district_code,e.qualification_name))},a+1)})),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-green-600 text-center",children:Object(h.i)(t.total)}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-gray-800 text-center",children:null===s.state.schools_submitted_placements?"Loading...":Object(h.i)(t.schools)}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-blue-600 text-center",children:null===s.state.schools_submitted_placements?"Loading...":Object(h.i)(t.placed_schools)}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-accent-900 text-center",children:null===s.state.schools_submitted_placements?"Loading...":Object(h.i)(t.schools-t.placed_schools)})]},e+1)}))})]}),this.state.pinned_districts.length>0&&"3"!==(null===(t=this.props.auth.role)||void 0===t?void 0:t.role_id)&&"2"!==(null===(e=this.props.auth.role)||void 0===e?void 0:e.role_id)&&"1"!==(null===(a=this.props.auth.role)||void 0===a?void 0:a.role_id)&&Object(O.jsx)("div",{className:"my-5",children:Object(O.jsx)(_.a,{onClick:function(){return s.setState({pinned_districts:[]})},theme:"accent",children:"Unpin selected district"})}),"3"===(null===(i=this.props.auth.role)||void 0===i?void 0:i.role_id)&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"my-3",children:"You can view details for the above summary by viewing schools lists and generating PDF format placement reports"}),Object(O.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(O.jsx)(f.b,{className:"bg-accent-800 font-bold px-3 py-2 rounded hover:bg-yellow-800 hover:text-white",to:"/placement-list-dde",children:"View placement list details"}),Object(O.jsx)(f.b,{className:"border border-accent-900 text-accent-900 font-bold px-3 py-2 rounded hover:bg-accent-800 hover:text-black",to:"/placement-books",children:"Print placement reports"})]})]})]})}}]),a}(l.Component),D=function(t){Object(c.a)(a,t);var e=Object(r.a)(a);function a(t){var s,c,r,l;return Object(i.a)(this,a),(l=e.call(this,t)).getDistrictSummaryLimit=function(t){var e=l.props.districts_limits.find((function(e){return e.district===t}));return void 0===e?null:e},l.getTotalPlacedDistrict=function(t){var e,a=0,i=l.props.districts_placements.filter((function(e){return e.district_code===t})),s=Object(j.a)(i);try{for(s.s();!(e=s.n()).done;){var c=e.value;a+=parseInt(c.total)}}catch(r){s.e(r)}finally{s.f()}return a},l.districtsWithTotals=function(){var t=null===l.props.districts?[]:l.props.districts.map((function(t){return{district_code:t.district_code,district_name:t.district_name,totals:l.getDistrictSummaryLimit(t.district_name),total_placed:l.getTotalPlacedDistrict(t.district_code)}}));return t=l.state.pinned_districts.length>0?t.filter((function(t){return void 0!==l.state.pinned_districts.find((function(e){return e===t.district_code}))})):t,Object(h.v)(t,l.state.search_district)},l.getDistrictData=function(t,e){var a=l.props.districts_placements.find((function(a){return a.district_code===t&&a.qualification.toLocaleLowerCase()===e.toLocaleLowerCase()}));return void 0!==a?parseInt(a.total):0},l.getDistrictDataAvailable=function(t,e){var a=0,i=l.props.districts_limits.find((function(e){return e.district===t}));if(void 0!==i)switch(e.toLocaleLowerCase()){case"a2":a=i.A2.Total;break;case"a1":a=i.A1.Total;break;case"a0":a=i.A0.Total}return a},l.totalTeachersOnDistrict=function(t){var e,a=0,i=Object(j.a)(l.props.basic.qualifications);try{for(i.s();!(e=i.n()).done;){var s=e.value;a+=l.getDistrictData(t,s.qualification_name)}}catch(c){i.e(c)}finally{i.f()}return a},l.totalAvailable=function(t){var e=0;if(null!==l.props.districts){var a,i=Object(j.a)(l.props.districts);try{for(i.s();!(a=i.n()).done;){var s=a.value;e+=l.getDistrictDataAvailable(s.district_name,t)}}catch(c){i.e(c)}finally{i.f()}}return e},l.totalPlaced=function(t){var e=0;if(null!==l.props.districts){var a,i=Object(j.a)(l.props.districts);try{for(i.s();!(a=i.n()).done;){var s=a.value;e+=l.getDistrictData(s.district_code,t)}}catch(c){i.e(c)}finally{i.f()}}return e},l.getAllTotalAvailable=function(){var t,e=0,a=Object(j.a)(l.props.basic.qualifications);try{for(a.s();!(t=a.n()).done;){var i=t.value;e+=l.totalAvailable(i.qualification_name)}}catch(s){a.e(s)}finally{a.f()}return e},l.getAllTotalExisting=function(){var t,e=0,a=Object(j.a)(l.props.basic.qualifications);try{for(a.s();!(t=a.n()).done;){var i=t.value;e+=l.totalPlaced(i.qualification_name)}}catch(s){a.e(s)}finally{a.f()}return e},l.pinDistrict=function(t){var e,a,i;"3"!==(null===(e=l.props.auth.role)||void 0===e?void 0:e.role_id)&&"2"!==(null===(a=l.props.auth.role)||void 0===a?void 0:a.role_id)&&"1"!==(null===(i=l.props.auth.role)||void 0===i?void 0:i.role_id)&&(void 0===l.state.pinned_districts.find((function(e){return e===t}))?l.setState({pinned_districts:[].concat(Object(x.a)(l.state.pinned_districts),[t])}):l.setState({pinned_districts:l.state.pinned_districts.filter((function(e){return e!==t}))}))},l.getDistrictToBePlaced=function(t,e){if(null!==l.props.toBePlacedData){var a=l.props.toBePlacedData.find((function(a){return a.district_code===t&&a.qualification_name.toLowerCase()===e.toLocaleLowerCase()}));if(void 0!==a)return parseInt(a.approved)}return 0},l.getDistrictNameToBePlaced=function(t,e){if(null!==l.props.toBePlacedData){var a=l.props.toBePlacedData.find((function(a){return a.district_name.toLocaleLowerCase()===t.toLocaleLowerCase()&&a.qualification_name.toLowerCase()===e.toLocaleLowerCase()}));if(void 0!==a)return parseInt(a.approved)}return 0},l.getTotalDistrictToBePlaced=function(t){var e=0;if(null!==l.props.toBePlacedData){var a,i=l.props.toBePlacedData.filter((function(e){return e.district_code===t})),s=Object(j.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;e+=parseInt(c.approved)}}catch(r){s.e(r)}finally{s.f()}}return e},l.getTotalQualificationToBePlacedByQualification=function(t){var e=0;if(null!==l.props.toBePlacedData){var a,i=l.props.toBePlacedData.filter((function(e){return e.qualification_name.toLocaleLowerCase()===t.toLocaleLowerCase()})),s=Object(j.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;e+=parseInt(c.approved)}}catch(r){s.e(r)}finally{s.f()}}return e},l.getTotalQualificationToBePlacedTotals=function(){var t=0;if(null!==l.props.toBePlacedData){var e,a=Object(j.a)(l.props.toBePlacedData);try{for(a.s();!(e=a.n()).done;){var i=e.value;t+=parseInt(i.approved)}}catch(s){a.e(s)}finally{a.f()}}return t},l.getTeachersAvailableAndToBePlaced=function(t,e){return l.getDistrictToBePlaced(t,e)+l.getDistrictData(t,e)},l.componentDidMount=function(){null===l.props.toBePlacedData&&(l.setState({loading:!0}),l.props.loadToBePlacedData())},l.state={loading:!1,search_district:"",sortBy:null,pinned_districts:"3"!==(null===(s=l.props.auth.role)||void 0===s?void 0:s.role_id)&&"2"!==(null===(c=l.props.auth.role)||void 0===c?void 0:c.role_id)&&"1"!==(null===(r=l.props.auth.role)||void 0===r?void 0:r.role_id)||null===l.props.auth.district?[]:[l.props.auth.district.district_code]},l}return Object(s.a)(a,[{key:"render",value:function(){var t,e,a,i,s,c,r,l=this;return!0===this.state.loading||null===this.props.toBePlacedData?Object(O.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(O.jsx)(u.a,{}),Object(O.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):Object(O.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-between gap-3 mb-5",children:[Object(O.jsxs)("div",{className:"flex flex-col pl-4 pt-5",children:[Object(O.jsx)("span",{className:"font-extrabold text-2xl text-primary-800",children:"Posts management"}),Object(O.jsx)("span",{className:"-mt-1",children:"This includes total ceiling and available teachers comparison"}),Object(O.jsx)("div",{className:"mt-3",children:Object(O.jsx)(g.a,{fileData:this.districtsWithTotals().map((function(t,e){return{no:"".concat(e+1),District_Code:"".concat(t.district_code),District_Name:"".concat(t.district_name),AO_Placed:"".concat(l.getDistrictData(t.district_code,"a0")),A0_to_be_placed:"".concat(l.getDistrictToBePlaced(t.district_code,"a0")),A0_grand_total:"".concat(l.getTeachersAvailableAndToBePlaced(t.district_code,"a0")),A0_total_ceiling:"".concat(l.getDistrictDataAvailable(t.district_name,"a0")),A1_Placed:"".concat(l.getDistrictData(t.district_code,"a1")),A1_to_be_placed:"".concat(l.getDistrictToBePlaced(t.district_code,"a1")),A1_grand_total:"".concat(l.getTeachersAvailableAndToBePlaced(t.district_code,"a1")),A1_total_ceiling:"".concat(l.getDistrictDataAvailable(t.district_name,"a1")),A2_Placed:"".concat(l.getDistrictData(t.district_code,"a2")),A2_to_be_placed:"".concat(l.getDistrictToBePlaced(t.district_code,"a2")),A2_grand_total:"".concat(l.getTeachersAvailableAndToBePlaced(t.district_code,"a2")),A2_total_ceiling:"".concat(l.getDistrictDataAvailable(t.district_name,"a2")),Grand_total_teachers:"".concat(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code)),Grand_total_ceiling:"".concat(null===t.totals?"0":t.totals.Total.Total),Total_vacant:"".concat(null===t.totals?"0":t.totals.Total.Total-(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code)))}})),fileName:"Districts ceiling tracking report",btnName:"Download EXCEL"})})]}),"3"!==(null===(t=this.props.auth.role)||void 0===t?void 0:t.role_id)&&"2"!==(null===(e=this.props.auth.role)||void 0===e?void 0:e.role_id)&&"1"!==(null===(a=this.props.auth.role)||void 0===a?void 0:a.role_id)&&Object(O.jsx)("div",{className:"",children:Object(O.jsx)("table",{className:"",children:Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{className:"bg-primary-100 font-light",children:[Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Report type"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300 text-gray-800",children:t.qualification_name},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Total"})]}),Object(O.jsxs)("tr",{className:"bg-gray-100 font-bold",children:[Object(O.jsx)("td",{className:"border border-gray-300 px-3",children:"National Ceiling"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-gray-300",children:Object(h.i)(l.totalAvailable(t.qualification_name.toLocaleLowerCase()))},e+1)})),Object(O.jsx)("td",{className:"border border-gray-300 px-3",children:Object(h.i)(this.getAllTotalAvailable())})]}),Object(O.jsxs)("tr",{className:"text-green-700",children:[Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Current teachers"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300",children:Object(h.i)(l.totalPlaced(t.qualification_name))},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:Object(h.i)(this.getAllTotalExisting())})]}),Object(O.jsxs)("tr",{className:"text-yellow-700",children:[Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Posts to be placed"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300",children:Object(h.i)(l.getTotalQualificationToBePlacedByQualification(t.qualification_name))},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:Object(h.i)(this.getTotalQualificationToBePlacedTotals())})]}),Object(O.jsxs)("tr",{className:"bg-accent-400 text-black",children:[Object(O.jsx)("td",{className:"border border-blue-300 font-extrabold px-3",children:"Total Vacant"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-bold border border-blue-300",children:Object(h.i)(l.totalAvailable(t.qualification_name.toLocaleLowerCase())-l.getTotalQualificationToBePlacedByQualification(t.qualification_name)-l.totalPlaced(t.qualification_name))},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3 font-extrabold text-black",children:Object(h.i)(this.getAllTotalAvailable()-this.getTotalQualificationToBePlacedTotals()-this.getAllTotalExisting())})]})]})})})]}),Object(O.jsx)("div",{className:"mb-3 flex flex-row items-center gap-2",children:Object(O.jsx)("input",{type:"text",value:this.state.search_district,onChange:function(t){return l.setState({search_district:t.target.value})},placeholder:"Search by district",className:"px-3 py-2 rounded border border-gray-400 w-full font-bold text-primary-800"})}),Object(O.jsx)("div",{className:"overflow-x-auto",style:{width:"calc(100vw - 300px)"},children:Object(O.jsxs)("table",{className:"",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-primary-800 text-left font-extrabold bg-primary-100 text-xs",children:[Object(O.jsx)("th",{className:"px-1 py-2 border border-blue-300",children:"#"}),Object(O.jsx)("th",{className:"px-1 py-2 border border-blue-300",children:"District code"}),Object(O.jsx)("th",{className:"px-1 py-2 border border-blue-300",children:"District name"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"my-2",children:t.qualification_name}),Object(O.jsx)("table",{className:"w-full text-xs",children:Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"Placed"})}),Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"To be placed"})}),Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"G.Total"})}),Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"Ceiling"})})]})})})]})},e+1)})),Object(O.jsx)("th",{className:"border border-blue-300 text-left text-primary-800",children:Object(O.jsx)("div",{onClick:function(){return l.setState({sortBy:{status:null===l.state.sortBy||"ASC"===l.state.sortBy.status?"DESC":"ASC",column:"teachers"}})},className:" flex flex-row items-center gap-3 px-2 py-2 hover:bg-primary-100 cursor-pointer text-left",children:Object(O.jsx)("span",{children:"Total teachers"})})}),Object(O.jsx)("th",{className:"border border-blue-300 text-center px-3 py-2",children:"Total Ceiling"}),Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsx)("div",{onClick:function(){return l.setState({sortBy:{status:null===l.state.sortBy||"ASC"===l.state.sortBy.status?"DESC":"ASC",column:"schools_submitted"}})},className:" flex flex-row items-center gap-3 px-2 py-2 hover:bg-primary-100 cursor-pointer text-center",children:Object(O.jsx)("span",{children:"Vacant posts"})})})]})}),Object(O.jsx)("tbody",{children:0===this.districtsWithTotals().length?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:10,className:"text-center text-2xl font-extralight p-5 animate__animated animate__fadeIn border border-gray-300",children:"No Result Found!"})}):this.districtsWithTotals().map((function(t,e){return Object(O.jsxs)("tr",{onClick:function(){l.pinDistrict(t.district_code)},className:"hover:bg-primary-100 cursor-pointer text-xs",children:[Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-center",children:e+1}),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-center",children:t.district_code}),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300",children:t.district_name}),l.props.basic.qualifications.map((function(e,a){return Object(O.jsx)("td",{className:"border border-gray-300 text-center",children:Object(O.jsx)("div",{children:Object(O.jsx)("table",{className:"w-full text-xs",children:Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"border border-blue-300 py-2 ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>l.getDistrictData(t.district_code,e.qualification_name)?"":"bg-red-100"),children:Object(O.jsx)("div",{className:"w-6 px-1 text-center",children:Object(h.i)(l.getDistrictData(t.district_code,e.qualification_name))})}),Object(O.jsx)("td",{className:"border border-blue-300 py-2 ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>l.getDistrictData(t.district_code,e.qualification_name)?"":"bg-red-100"),children:Object(O.jsx)("div",{className:"w-6 px-1 text-center ".concat(l.getDistrictToBePlaced(t.district_code,e.qualification_name)>0?"text-accent-900":"text-gray-600"),children:Object(h.i)(l.getDistrictToBePlaced(t.district_code,e.qualification_name))})}),Object(O.jsx)("td",{className:"border py-2 ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>=l.getTeachersAvailableAndToBePlaced(t.district_code,e.qualification_name)?"bg-green-50 text-green-700 border-blue-300":"bg-red-600 text-white border-red-700"),children:Object(O.jsx)("div",{className:"w-6 text-center px-1",children:Object(h.i)(l.getTeachersAvailableAndToBePlaced(t.district_code,e.qualification_name))})}),Object(O.jsx)("td",{className:"border ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>=l.getTeachersAvailableAndToBePlaced(t.district_code,e.qualification_name)?"bg-accent-400 border-blue-300":"bg-red-700 text-white border-red-600"," py-2 text-center"),children:Object(O.jsx)("div",{className:"w-6 px-1",children:Object(h.i)(l.getDistrictDataAvailable(t.district_name,e.qualification_name))})})]})})})})},a+1)})),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-primary-600 text-center",children:Object(h.i)(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code))}),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-gray-800 text-center",children:null===t.totals?"Loading...":Object(h.i)(t.totals.Total.Total)}),Object(O.jsx)("td",{className:"px-1 py-2 border ".concat(null===t.totals?"":t.totals.Total.Total-(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code))<0?"bg-red-600 text-white border-red-700":"text-blue-600 border-gray-300","  text-center"),children:null===t.totals?0:Object(h.i)(t.totals.Total.Total-(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code)))})]},e+1)}))})]})}),this.state.pinned_districts.length>0&&"3"!==(null===(i=this.props.auth.role)||void 0===i?void 0:i.role_id)&&"2"!==(null===(s=this.props.auth.role)||void 0===s?void 0:s.role_id)&&"1"!==(null===(c=this.props.auth.role)||void 0===c?void 0:c.role_id)&&Object(O.jsx)("div",{className:"my-5",children:Object(O.jsx)(_.a,{onClick:function(){return l.setState({pinned_districts:[]})},theme:"accent",children:"Unpin selected district"})}),"3"===(null===(r=this.props.auth.role)||void 0===r?void 0:r.role_id)&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"my-3",children:"You can view details for the above summary by viewing schools lists and generating PDF format placement reports"}),Object(O.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(O.jsx)(f.b,{className:"bg-accent-800 font-bold px-3 py-2 rounded hover:bg-yellow-800 hover:text-white",to:"/placement-list-dde",children:"View placement list details"}),Object(O.jsx)(f.b,{className:"border border-accent-900 text-accent-900 font-bold px-3 py-2 rounded hover:bg-accent-800 hover:text-black",to:"/placement-books",children:"Print placement reports"})]})]})]})}}]),a}(l.Component),T=new Date,w=function(t){Object(c.a)(a,t);var e=Object(r.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).setLoading=function(t){return s.setState({loading:t})},s.FC_LoadGeneralReport=function(){s.setLoading(!0),null!==s.props.basic.academic_calender&&Object(b.xc)(s.props.basic.academic_calender.academic_year_id,s.state.selected_month,(function(t,e,a){s.setLoading(t),!1===t&&""===e&&null!==a?(s.setState({generalReport:a,loading:!1}),console.log("Test report",a)):""!==e&&s.setState({error:e,generalReport:[]})}))},s.loadToBePlaced=function(){"vacant"===s.state.report_type&&null===s.state.districts_to_be_placed&&(s.setLoading(!0),Object(b.cb)((function(t,e,a){s.setLoading(t),!1===t&&null!==a&&s.setState({districts_to_be_placed:a})})))},s.componentDidMount=function(){null===s.state.districts_limits&&(s.setLoading(!0),Object(b.wc)((function(t,e){s.setState({loading:t,districts_limits:e})}))),null===s.state.districts&&(s.setLoading(!0),Object(p.b)((function(t,e,a){null!==e&&s.setState({districts:e,loading:!1})}))),"general"===s.state.report_type&&null===s.state.generalReport&&s.FC_LoadGeneralReport(),s.loadToBePlaced()},s.state={loading:!1,report_type:"general",generalReport:null,selected_month:h.e[T.getMonth()],error:"",districts:null,districts_limits:null,districts_to_be_placed:null},s}return Object(s.a)(a,[{key:"render",value:function(){var t=this;return!0===this.state.loading?Object(O.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(O.jsx)(u.a,{}),Object(O.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"px-3 md:px-6 py-6",children:[Object(O.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(O.jsx)("div",{className:"text-2xl font-extrabold",children:"General placement report"}),Object(O.jsxs)("div",{className:"flex flex-row items-center justify-end gap-1 bg-white p-1 rounded",children:[Object(O.jsx)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"general"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("general"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"),children:"General report"}),Object(O.jsx)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"vacant"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("vacant"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"),children:"Posts Management"}),Object(O.jsxs)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"search"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("search"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"," flex flex-row items-center gap-1"),children:[Object(O.jsx)("div",{children:Object(O.jsx)(n.f,{className:"text-2xl"})}),Object(O.jsx)("span",{children:"Search"})]})]})]}),Object(O.jsxs)("div",{className:"bg-white p-3 rounded mt-5",children:[""!==this.state.error&&Object(O.jsxs)("div",{title:"Click to close alert",onClick:function(){return t.setState({error:""})},className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 text-base font-light w-full cursor-pointer hover:bg-red-100 flex flex-row items-center justify-between gap-3 mb-3 animate__animated animate__shakeX",children:[Object(O.jsx)("span",{children:this.state.error}),Object(O.jsx)("div",{children:Object(O.jsx)(o.r,{className:"text-2xl hover:text-red-600"})})]}),Object(O.jsxs)("div",{children:["general"===this.state.report_type&&Object(O.jsx)(N,{loading:this.state.loading,generalReport:this.state.generalReport,selected_month:this.state.selected_month,error:this.state.error,districts:this.state.districts,basic:this.props.basic,auth:this.props.auth}),"vacant"===this.state.report_type&&null!==this.state.districts_limits&&null!==this.state.generalReport&&Object(O.jsx)(D,{districts:this.state.districts,basic:this.props.basic,auth:this.props.auth,districts_limits:this.state.districts_limits,districts_placements:this.state.generalReport,toBePlacedData:this.state.districts_to_be_placed,loading:this.state.loading,loadToBePlacedData:function(){t.loadToBePlaced()}})]})]})]})})}}]),a}(l.Component),B=Object(d.b)((function(t){return{auth:t.auth,basic:t.basic,placement:t.placement}}),{})(w)}}]);
//# sourceMappingURL=64.8dbad46f.chunk.js.map