(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[72],{584:function(e,t,s){"use strict";s.r(t),s.d(t,"RegisterForDataValidation",(function(){return g}));var i=s(19),r=s(20),a=s(21),n=s(22),l=s(4),d=s.n(l),c=s(36),o=s(13),u=s(386),h=s(23),_=s(53),f=s(47),m=s(39),j=s(385),b=s(1),O=function(e){Object(a.a)(s,e);var t=Object(n.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).CheckNidHandler=function(e){if(e.preventDefault(),r.state.nid.length<=4)return r.setState({error:{target:"nid",msg:"NID or passport is required!"}});r.setState({loading:!0,user_found:null}),Object(o.Cb)(r.state.nid,(function(e,t,s){e?r.setState({user_details:t,loading:!1,user_found:null!==t&&null!==t.user_id?"FOUND":"NOT-FOUND"}):r.setState({loading:!1,user_found:"NOT-FOUND"})}))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,error:{msg:"",target:null},nid:"",user_details:null,user_found:null},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,i,r,a,n,l,d=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:" bg-white p-2 flex items-center",children:[null!==this.state.user_found&&Object(b.jsx)(h.a,{onClick:function(){return d.setState({user_found:null})},theme:"default",children:"Back"}),Object(b.jsx)("h1",{className:"text-2xl font-bold pl-3",children:"Create new staff"})]}),"main-error"===this.state.error.target&&Object(b.jsx)(f.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(b.jsx)(f.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(b.jsxs)(_.a,{children:[null===this.state.user_found&&Object(b.jsx)("form",{onSubmit:this.CheckNidHandler,children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(m.a,{error:"nid"===this.state.error.target?this.state.error.msg:"",label:"Nid/Passport",name:"",onChange:function(e){return d.setState({nid:e.target.value})},placeholder:"Enter NID/Phone number",value:this.state.nid,disabled:this.state.loading})}),Object(b.jsx)("div",{className:"pt-8 pl-2",children:Object(b.jsx)(h.a,{loading:this.state.loading,type:"submit",children:"Check Id"})})]})}),null!==this.state.user_found&&Object(b.jsx)(b.Fragment,{children:"FOUND"===this.state.user_found&&null!==this.state.user_details&&null!==this.state.user_details.user_id?Object(b.jsx)("div",{children:null!==this.props.auth.school?Object(b.jsxs)("div",{className:"text-center py-4",children:[Object(b.jsx)("h1",{className:"text-2xl font-bold",children:"Teacher Already in the system and allocated to another school"}),Object(b.jsx)("p",{children:"For more info, call the DDE"})]}):Object(b.jsx)(j.a,{user_id:this.state.user_details.user_id,userDetails:{email:this.state.user_details.email?this.state.user_details.email:"",full_name:null!==(e=this.state.user_details)&&void 0!==e&&e.full_name?null===(t=this.state.user_details)||void 0===t?void 0:t.full_name:"",nid:null!==(s=this.state.user_details)&&void 0!==s&&s.nid?null===(i=this.state.user_details)||void 0===i?void 0:i.nid:"",staff_code:null!==(r=this.state.user_details)&&void 0!==r&&r.staff_code?null===(a=this.state.user_details)||void 0===a?void 0:a.staff_code:""},close:function(){return d.setState({user_found:null})}})}):Object(b.jsx)("div",{children:Object(b.jsx)(u.a,{district_id:null!==(n=this.props.auth.district)&&void 0!==n&&n.district_code?null===(l=this.props.auth.district)||void 0===l?void 0:l.district_code:"",select_district_active:!0,nid_value:this.state.nid,assignType:"REGISTER",exclude_roles:["3","4","18","21","22","25","26"],only_post_for_school:!0,user_id:"",formAccess:{first_name:!0,last_name:!0,full_name:!0,middle_name:!0,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!0,last_name:!0,full_name:!0,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){d.setState({error:{msg:"A new staff has been registered",target:"main-success"}})}})})})]})]})}}]),s}(d.a.Component),g=Object(c.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:o.D})(O)}}]);
//# sourceMappingURL=72.45645f83.chunk.js.map