{"version":3,"sources":["containers/PlacementPlacementSummaryREB/PlacementPlacementSummaryREB.tsx"],"names":["PlacementPlacementSummaryREB","connect","auth","useState","loading","setLoading","MONTHS_LIST","Date","getMonth","month","setMonth","error","setError","district_total_summary","pla_district_total_summary","data","setData","useEffect","FC_GetNonReportedPlacementReport","status","err","TotalSchools","TotalPercentage","TotalReported","totalNonSubmittedNumberSum","className","onChange","el","target","value","label","placeholder","name","map","title","theme","colSpan","length","itm","i","foundPlacement","find","district_code","Total","total","Reported","percentageNumber","percentage","totalNonSubmittedNumber","district_name"],"mappings":"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","file":"static/js/70.d39e58cb.chunk.js","sourcesContent":["import React, { FC, ReactElement, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Auth,\n  FC_GetNonReportedPlacementReport,\n  FC_GetNonReportedPlacement_Interface,\n} from \"../../actions\";\nimport Alert from \"../../components/Alert/Alert\";\nimport DashboardContainer from \"../../components/DashboardContainer/DashboardContainer\";\nimport Heading from \"../../components/Heading/Heading\";\nimport InputSelect from \"../../components/Inputs/InputSelect\";\nimport Loading from \"../../components/Loading/Loading\";\nimport { StoreState } from \"../../reducers\";\nimport { MONTHS_LIST, percentage } from \"../../utils/functions\";\n\ntype PlacementPlacementSummaryREBProps = {\n  auth: Auth;\n};\n\nconst _PlacementPlacementSummaryREB: FC<PlacementPlacementSummaryREBProps> = ({\n  auth,\n}): ReactElement => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [month, setMonth] = useState<string>(\n    MONTHS_LIST[new Date().getMonth()]\n  );\n  const [error, setError] = useState<string>(\"\");\n  const [data, setData] = useState<FC_GetNonReportedPlacement_Interface>({\n    district_total_summary: [],\n    pla_district_total_summary: [],\n  });\n\n  useEffect(() => {\n    if (loading === true) {\n      FC_GetNonReportedPlacementReport(month, \"1\", (status, data, err) => {\n        if (data !== null) setData(data);\n        if (error !== \"\") setError(err);\n        setLoading(false);\n      });\n    }\n  }, [loading, month, error]);\n\n  let TotalSchools = 0;\n  let TotalPercentage = 0;\n  let TotalReported = 0;\n  let totalNonSubmittedNumberSum = 0;\n  /* function body */\n  return (\n    <DashboardContainer>\n      <div className=\"py-1 border-b flex items-center\">\n        <div className=\"flex-1\">\n          <Heading>Non Reported placement report</Heading>\n          <p className=\"text-gray-500\">\n            List of districts, with the reported and non reported {\"(\"}Placement\n            report{\")\"}\n          </p>\n        </div>\n\n        <div className=\"pr-2\">Register the stuff</div>\n\n        <div className=\"\">\n          <InputSelect\n            onChange={(el) => {\n              setMonth(el.target.value);\n              if (el.target.value !== month) setLoading(true);\n            }}\n            value={month}\n            error={\"\"}\n            label={\"Select month\"}\n            placeholder={\"Select month\"}\n            name={\"\"}\n            data={MONTHS_LIST.map((el) => ({\n              title: el,\n              value: el,\n            }))}\n          />\n        </div>\n      </div>\n\n      {error !== \"\" && <Alert theme=\"danger\">{error}</Alert>}\n\n      <table className=\"w-full\">\n        <thead>\n          <tr className=\"text-left\">\n            <th className=\"p-2 border\">#</th>\n            <th className=\"p-2 border\">District name</th>\n            <th className=\"p-2 border\">Total schools</th>\n            <th className=\"p-2 border\">Reported schools</th>\n            <th className=\"p-2 border\">Reported schools %</th>\n            <th className=\"p-2 border\">Non Reported schools</th>\n          </tr>\n        </thead>\n        <tbody>\n          {loading === true && (\n            <tr>\n              <td colSpan={8} className=\"py-8 text-center\">\n                <Loading />\n              </td>\n            </tr>\n          )}\n\n          {loading === false && data.district_total_summary.length === 0 && (\n            <tr>\n              <td colSpan={8} className=\"py-8 text-center\">\n                <h2 className=\"text-2xl\">No placement found!</h2>\n                <p>No placement found!</p>\n              </td>\n            </tr>\n          )}\n          {data.district_total_summary.map((itm, i) => {\n            let foundPlacement = data.pla_district_total_summary.find(\n              (el) => el.district_code === itm.district_code\n            );\n\n            let Total = +itm.total;\n            let Reported = foundPlacement ? foundPlacement.total : 0;\n            let percentageNumber = percentage(+Reported, +itm.total);\n            let totalNonSubmittedNumber = foundPlacement\n              ? +itm.total - +foundPlacement.total\n              : itm.total;\n            //\n            TotalSchools = TotalSchools + Total;\n            TotalReported = +TotalReported + +Reported;\n            TotalPercentage = +TotalPercentage + +percentageNumber;\n            totalNonSubmittedNumberSum =\n              +totalNonSubmittedNumberSum + +totalNonSubmittedNumber;\n            return (\n              <tr>\n                <td className=\"border p-2\">{i + 1}</td>\n                <td className=\"border p-2\">{itm.district_name}</td>\n                <td className=\"border p-2\">{itm.total}</td>\n                <td className=\"border p-2\">{Reported}</td>\n                <td\n                  className={`border p-2 font-bold  ${\n                    percentageNumber === 100\n                      ? \"text-green-900 bg-green-50\"\n                      : \"text-blue-800\"\n                  }`}\n                >\n                  {percentageNumber}%\n                </td>\n                <td className=\"border p-2 text-red-800 font-bold\">\n                  {totalNonSubmittedNumber}\n                </td>\n              </tr>\n            );\n          })}\n\n          {data.district_total_summary.length >= 1 && (\n            <tr>\n              <td className=\"border p-2\" colSpan={2}></td>\n              <td className=\"border p-2\">{TotalSchools}</td>\n              <td className=\"border p-2\">{TotalReported}</td>\n              <td className=\"border p-2 font-bold text-blue\">\n                {percentage(+TotalReported, +TotalSchools)}%\n              </td>\n              <td className=\"border p-2 font-bold text-red-800\">\n                {totalNonSubmittedNumberSum}\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </DashboardContainer>\n  );\n};\n\nconst mapStateToProps = ({ auth }: StoreState): { auth: Auth } => {\n  return { auth: auth };\n};\n\nexport const PlacementPlacementSummaryREB = connect(\n  mapStateToProps,\n  {}\n)(_PlacementPlacementSummaryREB);\n"],"sourceRoot":""}