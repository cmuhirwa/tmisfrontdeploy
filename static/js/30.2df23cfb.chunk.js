(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[30],{348:function(t,e,a){"use strict";a.d(e,"a",(function(){return b})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return p})),a.d(e,"d",(function(){return h}));var i=a(3),r=a(7),s=a(9),c=a.n(s),l=a(13),o=a(15),n=a(10),d=a(11),b=function(t){return t(!0,null,""),function(){var e=Object(r.a)(Object(i.a)().mark((function e(a){var r,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(n.a)(),e.next=4,c.a.get("".concat(o.d,"/teachertransfers/requesteddde"));case 4:r=e.sent,console.log("===================================="),console.log({getAllTransfers:r}),console.log("===================================="),s=r.data.filter((function(t){return"APPROVED"===t.requested_status})),a({type:l.a.GET_ALL_TRANSFER,payload:s}),t(!1,s,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t(!1,null,Object(d.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},u=function(){var t=Object(r.a)(Object(i.a)().mark((function t(e){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(!1,[{district_code:"11",district_name:"Nyarugenge"},{district_code:"12",district_name:"Gasabo"},{district_code:"13",district_name:"Kicukiro"},{district_code:"21",district_name:"Nyanza"},{district_code:"22",district_name:"Gisagara"},{district_code:"23",district_name:"Nyaruguru"},{district_code:"24",district_name:"Huye"},{district_code:"25",district_name:"Nyamagabe"},{district_code:"26",district_name:"Ruhango"},{district_code:"27",district_name:"Muhanga"},{district_code:"28",district_name:"Kamonyi"},{district_code:"31",district_name:"Karongi"},{district_code:"32",district_name:"Rutsiro"},{district_code:"33",district_name:"Rubavu"},{district_code:"34",district_name:"Nyabihu"},{district_code:"35",district_name:"Ngororero"},{district_code:"36",district_name:"Rusizi"},{district_code:"37",district_name:"Nyamasheke"},{district_code:"41",district_name:"Rulindo"},{district_code:"42",district_name:"Gakenke"},{district_code:"43",district_name:"Musanze"},{district_code:"44",district_name:"Burera"},{district_code:"45",district_name:"Gicumbi"},{district_code:"51",district_name:"Rwamagana"},{district_code:"52",district_name:"Nyagatare"},{district_code:"53",district_name:"Gatsibo"},{district_code:"54",district_name:"Kayonza"},{district_code:"55",district_name:"Kirehe"},{district_code:"56",district_name:"Ngoma"},{district_code:"57",district_name:"Bugesera"}],"");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(r.a)(Object(i.a)().mark((function t(e,a){var r,s,l;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0,r=0,null,""),t.prev=2,Object(n.a)(),(s=new FormData).append("teacher_supporting_document",e),t.next=8,c.a.post("".concat(o.d,"/teachertransfers/uploadSupportingDocument"),s,{onUploadProgress:function(t){r=+(null===t||void 0===t?void 0:t.loaded)/+t.total*100,a(!0,r,null,"")}});case 8:l=t.sent,console.log("Uploaded document: ",l.data),a(!1,r,l.data,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0),a(!1,r,"",Object(d.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,a){return t.apply(this,arguments)}}(),h=function(t,e,a){a(!0,"");return function(){var s=Object(r.a)(Object(i.a)().mark((function r(s){var b,u;return Object(i.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a(!0,""),console.log("==================doc_title=================="),console.log({doc_title:""}),console.log("==================doc_title=================="),a(!0,""),(b=new FormData).append("teacher_transfer_id",t),b.append("mayor_letter",e),console.log("==================*********************=================="),console.log({doc_title:""}),console.log("==================*********************=================="),i.prev=11,Object(n.a)(),i.next=15,c.a.post("".concat(o.d,"/teachertransfers/outgoing"),b);case 15:u=i.sent,console.log("Uploaded document: ",u.data),s({type:l.a.UPLOAD_SIGNED_DOCUMENT,payload:{teacher_transfer_id:t,mayor_letter:u.data.mayor_letter}}),a(!1,""),i.next=25;break;case 21:i.prev=21,i.t0=i.catch(11),console.error(i.t0),a(!1,Object(d.a)(i.t0));case 25:case"end":return i.stop()}}),r,null,[[11,21]])})));return function(t){return s.apply(this,arguments)}}()}},562:function(t,e,a){"use strict";a.r(e),a.d(e,"GeneralPlacementReport",(function(){return S}));var i=a(27),r=a(28),s=a(29),c=a(30),l=a(4),o=a(17),n=a(123),d=a(32),b=a(13),u=a(348),p=a(34),h=a(18),m=a(44),x=a(21),j=a(97),f=a(24),_=a(39),g=a(124),v=a(49),O=a(2),y=function(t){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"rounded-full h-12 w-12 bg-gray-100 hover:bg-primary-100 flex items-center justify-center",children:Object(O.jsx)(v.a,{className:"text-3xl"})})}),Object(O.jsxs)("div",{className:"font-extrabold text-2xl text-primary-800 border-b border-primary-800 px-3 py-2 w-full",children:[t.selectedDistrictDetails.district_name," District placement details"]})]}),Object(O.jsxs)("div",{className:"grid grid-cols-12 my-8",children:[Object(O.jsxs)("div",{className:"col-span-4 flex flex-row gap-6 pl-3 pt-3",children:[Object(O.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(O.jsx)("span",{className:"font-light",children:"District name"}),Object(O.jsx)("span",{className:"font-extrabold text-xl",children:t.selectedDistrictDetails.district_name})]}),Object(O.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(O.jsx)("span",{className:"font-light",children:"District Code"}),Object(O.jsx)("span",{className:"font-extrabold text-xl",children:t.selectedDistrictDetails.district_code})]})]}),Object(O.jsx)("div",{className:"col-span-8",children:Object(O.jsx)("div",{className:"p-4 grid grid-cols-12 w-full gap-5",children:t.selectedDistrictDetails.details.map((function(t,e){return Object(O.jsxs)("div",{className:"col-span-4 bg-primary-100 rounded-lg overflow-hidden flex flex-row",children:[Object(O.jsx)("div",{className:"text-xl w-full text-center flex items-center justify-center bg-gray-100 p-3 py-5 border-r border-primary-800 font-light",children:t.qualification_name}),Object(O.jsx)("div",{className:"font-extrabold text-3xl text-primary-800 w-full text-center flex items-center justify-center",children:t.total})]},e+1)}))})})]})]})},N=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(t){var r,s,c,l;return Object(i.a)(this,a),(l=e.call(this,t)).getDistrictSchools=function(t,e){var a=e.pla_district_total_summary.find((function(e){return e.district_code===t})),i=e.district_total_summary.find((function(e){return e.district_code===t}));return{total_schools:void 0===i?0:parseInt(i.total),placed_schools:void 0===a?0:parseInt(a.total)}},l.getDistrictData=function(t,e){var a,i=null===(a=l.props.generalReport)||void 0===a?void 0:a.find((function(a){return a.district_code===t&&a.qualification.toLocaleLowerCase()===e.toLocaleLowerCase()}));return void 0!==i?parseInt(i.total):0},l.totalTeachersOnDistrict=function(t){var e,a=0,i=Object(x.a)(l.props.basic.qualifications);try{for(i.s();!(e=i.n()).done;){var r=e.value;a+=l.getDistrictData(t,r.qualification_name)}}catch(s){i.e(s)}finally{i.f()}return a},l.sortData=function(t){var e,a,i,r,s,c,o,n=[];switch(null===(e=l.state.sortBy)||void 0===e?void 0:e.column){case"teachers":n="ASC"===(null===(a=l.state.sortBy)||void 0===a?void 0:a.status)?t.sort((function(t,e){return t.total-e.total})):"DESC"===(null===(i=l.state.sortBy)||void 0===i?void 0:i.status)?t.sort((function(t,e){return e.total-t.total})):t;break;case"schools_submitted":n="ASC"===(null===(r=l.state.sortBy)||void 0===r?void 0:r.status)?t.sort((function(t,e){return t.placed_schools-e.placed_schools})):"DESC"===(null===(s=l.state.sortBy)||void 0===s?void 0:s.status)?t.sort((function(t,e){return e.placed_schools-t.placed_schools})):t;break;case"remaining":n="ASC"===(null===(c=l.state.sortBy)||void 0===c?void 0:c.status)?t.sort((function(t,e){return t.schools-t.placed_schools-(e.schools-e.placed_schools)})):"DESC"===(null===(o=l.state.sortBy)||void 0===o?void 0:o.status)?t.sort((function(t,e){var a=t.schools-t.placed_schools;return e.schools-e.placed_schools-a})):t;break;default:n=t}return n},l.districtsWithTotals=function(){var t=[];if(null!==l.props.districts&&null!==l.props.generalReport&&null!==l.state.schools_submitted_placements){var e,a=Object(x.a)(l.props.districts);try{for(a.s();!(e=a.n()).done;){var i=e.value;t.push({district_code:i.district_code,district_name:i.district_name,total:l.totalTeachersOnDistrict(i.district_code),schools:l.getDistrictSchools(i.district_code,l.state.schools_submitted_placements).total_schools,placed_schools:l.getDistrictSchools(i.district_code,l.state.schools_submitted_placements).placed_schools})}}catch(r){a.e(r)}finally{a.f()}}return t=l.state.pinned_districts.length>0?t.filter((function(t){return void 0!==l.state.pinned_districts.find((function(e){return e===t.district_code}))})):t,Object(h.k)(l.sortData(t),l.state.search_district)},l.getGrandTotal=function(){var t,e=0,a=0,i=0,r=0,s=Object(x.a)(l.districtsWithTotals());try{for(s.s();!(t=s.n()).done;){var c=t.value;e+=c.placed_schools,a+=c.schools,i+=c.schools-c.placed_schools,r+=c.total}}catch(o){s.e(o)}finally{s.f()}return{total_placed_schools:e,total_schools:a,total_pending_schools:i,total_teachers:r}},l.pinDistrict=function(t){var e,a,i;"3"!==(null===(e=l.props.auth.role)||void 0===e?void 0:e.role_id)&&"2"!==(null===(a=l.props.auth.role)||void 0===a?void 0:a.role_id)&&"1"!==(null===(i=l.props.auth.role)||void 0===i?void 0:i.role_id)&&(void 0===l.state.pinned_districts.find((function(e){return e===t}))?l.setState({pinned_districts:[].concat(Object(m.a)(l.state.pinned_districts),[t])}):l.setState({pinned_districts:l.state.pinned_districts.filter((function(e){return e!==t}))}))},l.state={loading:!1,sortBy:null,search_district:"",selectedDistrictDetails:null,schools_submitted_placements:null,pinned_districts:"3"!==(null===(r=l.props.auth.role)||void 0===r?void 0:r.role_id)&&"2"!==(null===(s=l.props.auth.role)||void 0===s?void 0:s.role_id)&&"1"!==(null===(c=l.props.auth.role)||void 0===c?void 0:c.role_id)||null===l.props.auth.district?[]:[l.props.auth.district.district_code]},l}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;void 0!==this.props.selected_district&&this.setState({selectedDistrictDetails:{district_code:this.props.selected_district.district_code,district_name:this.props.selected_district.district_name,details:this.props.basic.qualifications.map((function(e){return{qualification_name:e.qualification_name,total:t.getDistrictData(t.props.selected_district.district_code,e.qualification_name)}})),total:this.totalTeachersOnDistrict(this.props.selected_district.district_code)}}),null===this.state.schools_submitted_placements&&null!==this.props.basic.academic_calender&&Object(b.cb)(this.props.basic.academic_calender.academic_year_id,this.props.selected_month,(function(e,a,i){console.log(i),t.setState({loading:e}),null!==i&&!1===e&&t.setState({schools_submitted_placements:i,loading:!1})}))}},{key:"render",value:function(){var t,e,a,i,r=this;return!0===this.props.loading||!0===this.state.loading||null===this.props.districts||null===this.props.generalReport?Object(O.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(O.jsx)(p.a,{}),Object(O.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):null!==this.state.selectedDistrictDetails?Object(O.jsx)(y,{selectedDistrictDetails:this.state.selectedDistrictDetails}):Object(O.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-between gap-3 mb-5",children:[Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("span",{className:"font-extrabold text-2xl text-primary-800",children:"Teacher placement summary"}),Object(O.jsx)("span",{className:"-mt-1",children:"This file presents number of existing in the district"})]}),Object(O.jsxs)("div",{className:"flex flex-row items-center gap-8 justify-end",children:[Object(O.jsxs)("div",{className:"flex flex-col text-green-700",children:[Object(O.jsx)("span",{children:"Existing teachers"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-green-600",children:Object(h.f)(this.getGrandTotal().total_teachers)})]}),Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("span",{children:"Total Schools"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-gray-800",children:Object(h.f)(this.getGrandTotal().total_schools)})]}),Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("span",{children:"Submitted Schools"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-primary-800",children:Object(h.f)(this.getGrandTotal().total_placed_schools)})]}),Object(O.jsxs)("div",{className:"flex flex-col text-yellow-700",children:[Object(O.jsx)("span",{children:"Pending Schools"}),Object(O.jsx)("span",{className:"text-3xl font-extrabold -mt-1 text-accent-900",children:Object(h.f)(this.getGrandTotal().total_pending_schools)})]})]})]}),Object(O.jsxs)("div",{className:"mb-3 flex flex-row items-center gap-2",children:[Object(O.jsx)("input",{type:"text",value:this.state.search_district,onChange:function(t){return r.setState({search_district:t.target.value})},placeholder:"Search by district",className:"px-3 py-2 rounded border border-gray-400 w-full font-bold text-primary-800"}),Object(O.jsx)("div",{className:"w-56",children:Object(O.jsx)(g.a,{fileData:this.districtsWithTotals().map((function(t,e){return{no:"".concat(e+1),DistrictCode:"".concat(t.district_code),DistrictName:"".concat(t.district_name),A2:"".concat(r.getDistrictData(t.district_code,"a2")),A1:"".concat(r.getDistrictData(t.district_code,"a1")),A0:"".concat(r.getDistrictData(t.district_code,"a0")),TotalPlacedTeachers:"".concat(t.total),TotalDistrictSchools:"".concat(t.schools),TotalSchoolsSubmitted:"".concat(t.placed_schools),PendingSchools:"".concat(t.schools-t.placed_schools)}})),fileName:"Districts Teacher placement summary",btnName:"Download EXCEL"})})]}),Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-primary-800 text-left font-extrabold bg-primary-100 text-sm",children:[Object(O.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"#"}),Object(O.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District code"}),Object(O.jsx)("th",{className:"px-4 py-2 border border-blue-300",children:"District name"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("th",{className:"border border-blue-300 text-center px-4 py-2",children:t.qualification_name},e+1)})),Object(O.jsx)("th",{className:"border border-blue-300 text-left text-green-700 bg-green-50",children:Object(O.jsxs)("div",{onClick:function(){return r.setState({sortBy:{status:null===r.state.sortBy||"ASC"===r.state.sortBy.status?"DESC":"ASC",column:"teachers"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-left",children:[Object(O.jsx)("span",{children:"Existing teachers"}),Object(O.jsx)(j.c,{})]})}),Object(O.jsx)("th",{className:"border border-blue-300 text-center px-3 py-2",children:"Total schools"}),Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsxs)("div",{onClick:function(){return r.setState({sortBy:{status:null===r.state.sortBy||"ASC"===r.state.sortBy.status?"DESC":"ASC",column:"schools_submitted"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-center",children:[Object(O.jsx)("span",{children:"Schools submitted"}),Object(O.jsx)(j.c,{})]})}),Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsxs)("div",{onClick:function(){return r.setState({sortBy:{status:null===r.state.sortBy||"ASC"===r.state.sortBy.status?"DESC":"ASC",column:"remaining"}})},className:" flex flex-row items-center gap-3 px-4 py-2 hover:bg-primary-100 cursor-pointer text-center",children:[Object(O.jsx)("span",{children:"Remaining"}),Object(O.jsx)(j.c,{})]})})]})}),Object(O.jsx)("tbody",{children:0===this.districtsWithTotals().length?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:10,className:"text-center text-2xl font-extralight p-5 animate__animated animate__fadeIn border border-gray-300",children:"No Result Found!"})}):this.districtsWithTotals().map((function(t,e){return Object(O.jsxs)("tr",{onClick:function(){return r.pinDistrict(t.district_code)},className:"hover:bg-primary-100 cursor-pointer",children:[Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:e+1}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_code}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300",children:t.district_name}),r.props.basic.qualifications.map((function(e,a){return Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-center",children:Object(h.f)(r.getDistrictData(t.district_code,e.qualification_name))},a+1)})),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-green-600 text-center",children:Object(h.f)(t.total)}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-gray-800 text-center",children:null===r.state.schools_submitted_placements?"Loading...":Object(h.f)(t.schools)}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-blue-600 text-center",children:null===r.state.schools_submitted_placements?"Loading...":Object(h.f)(t.placed_schools)}),Object(O.jsx)("td",{className:"px-4 py-2 border border-gray-300 text-accent-900 text-center",children:null===r.state.schools_submitted_placements?"Loading...":Object(h.f)(t.schools-t.placed_schools)})]},e+1)}))})]}),this.state.pinned_districts.length>0&&"3"!==(null===(t=this.props.auth.role)||void 0===t?void 0:t.role_id)&&"2"!==(null===(e=this.props.auth.role)||void 0===e?void 0:e.role_id)&&"1"!==(null===(a=this.props.auth.role)||void 0===a?void 0:a.role_id)&&Object(O.jsx)("div",{className:"my-5",children:Object(O.jsx)(_.a,{onClick:function(){return r.setState({pinned_districts:[]})},theme:"accent",children:"Unpin selected district"})}),"3"===(null===(i=this.props.auth.role)||void 0===i?void 0:i.role_id)&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"my-3",children:"You can view details for the above summary by viewing schools lists and generating PDF format placement reports"}),Object(O.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(O.jsx)(f.b,{className:"bg-accent-800 font-bold px-3 py-2 rounded hover:bg-yellow-800 hover:text-white",to:"/placement-list-dde",children:"View placement list details"}),Object(O.jsx)(f.b,{className:"border border-accent-900 text-accent-900 font-bold px-3 py-2 rounded hover:bg-accent-800 hover:text-black",to:"/placement-books",children:"Print placement reports"})]})]})]})}}]),a}(l.Component),D=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(t){var r,s,c,l;return Object(i.a)(this,a),(l=e.call(this,t)).getDistrictSummaryLimit=function(t){var e=l.props.districts_limits.find((function(e){return e.district===t}));return void 0===e?null:e},l.getTotalPlacedDistrict=function(t){var e,a=0,i=l.props.districts_placements.filter((function(e){return e.district_code===t})),r=Object(x.a)(i);try{for(r.s();!(e=r.n()).done;){var s=e.value;a+=parseInt(s.total)}}catch(c){r.e(c)}finally{r.f()}return a},l.districtsWithTotals=function(){var t=null===l.props.districts?[]:l.props.districts.map((function(t){return{district_code:t.district_code,district_name:t.district_name,totals:l.getDistrictSummaryLimit(t.district_name),total_placed:l.getTotalPlacedDistrict(t.district_code)}}));return t=l.state.pinned_districts.length>0?t.filter((function(t){return void 0!==l.state.pinned_districts.find((function(e){return e===t.district_code}))})):t,Object(h.k)(t,l.state.search_district)},l.getDistrictData=function(t,e){var a=l.props.districts_placements.find((function(a){return a.district_code===t&&a.qualification.toLocaleLowerCase()===e.toLocaleLowerCase()}));return void 0!==a?parseInt(a.total):0},l.getDistrictDataAvailable=function(t,e){var a=0,i=l.props.districts_limits.find((function(e){return e.district===t}));if(void 0!==i)switch(e.toLocaleLowerCase()){case"a2":a=i.A2.Total;break;case"a1":a=i.A1.Total;break;case"a0":a=i.A0.Total}return a},l.totalTeachersOnDistrict=function(t){var e,a=0,i=Object(x.a)(l.props.basic.qualifications);try{for(i.s();!(e=i.n()).done;){var r=e.value;a+=l.getDistrictData(t,r.qualification_name)}}catch(s){i.e(s)}finally{i.f()}return a},l.totalAvailable=function(t){var e=0;if(null!==l.props.districts){var a,i=Object(x.a)(l.props.districts);try{for(i.s();!(a=i.n()).done;){var r=a.value;e+=l.getDistrictDataAvailable(r.district_name,t)}}catch(s){i.e(s)}finally{i.f()}}return e},l.totalPlaced=function(t){var e=0;if(null!==l.props.districts){var a,i=Object(x.a)(l.props.districts);try{for(i.s();!(a=i.n()).done;){var r=a.value;e+=l.getDistrictData(r.district_code,t)}}catch(s){i.e(s)}finally{i.f()}}return e},l.getAllTotalAvailable=function(){var t,e=0,a=Object(x.a)(l.props.basic.qualifications);try{for(a.s();!(t=a.n()).done;){var i=t.value;e+=l.totalAvailable(i.qualification_name)}}catch(r){a.e(r)}finally{a.f()}return e},l.getAllTotalExisting=function(){var t,e=0,a=Object(x.a)(l.props.basic.qualifications);try{for(a.s();!(t=a.n()).done;){var i=t.value;e+=l.totalPlaced(i.qualification_name)}}catch(r){a.e(r)}finally{a.f()}return e},l.pinDistrict=function(t){var e,a,i;"3"!==(null===(e=l.props.auth.role)||void 0===e?void 0:e.role_id)&&"2"!==(null===(a=l.props.auth.role)||void 0===a?void 0:a.role_id)&&"1"!==(null===(i=l.props.auth.role)||void 0===i?void 0:i.role_id)&&(void 0===l.state.pinned_districts.find((function(e){return e===t}))?l.setState({pinned_districts:[].concat(Object(m.a)(l.state.pinned_districts),[t])}):l.setState({pinned_districts:l.state.pinned_districts.filter((function(e){return e!==t}))}))},l.getDistrictToBePlaced=function(t,e){if(null!==l.props.toBePlacedData){var a=l.props.toBePlacedData.find((function(a){return a.district_code===t&&a.qualification_name.toLowerCase()===e.toLocaleLowerCase()}));if(void 0!==a)return parseInt(a.approved)}return 0},l.getDistrictNameToBePlaced=function(t,e){if(null!==l.props.toBePlacedData){var a=l.props.toBePlacedData.find((function(a){return a.district_name.toLocaleLowerCase()===t.toLocaleLowerCase()&&a.qualification_name.toLowerCase()===e.toLocaleLowerCase()}));if(void 0!==a)return parseInt(a.approved)}return 0},l.getTotalDistrictToBePlaced=function(t){var e=0;if(null!==l.props.toBePlacedData){var a,i=l.props.toBePlacedData.filter((function(e){return e.district_code===t})),r=Object(x.a)(i);try{for(r.s();!(a=r.n()).done;){var s=a.value;e+=parseInt(s.approved)}}catch(c){r.e(c)}finally{r.f()}}return e},l.getTotalQualificationToBePlacedByQualification=function(t){var e=0;if(null!==l.props.toBePlacedData){var a,i=l.props.toBePlacedData.filter((function(e){return e.qualification_name.toLocaleLowerCase()===t.toLocaleLowerCase()})),r=Object(x.a)(i);try{for(r.s();!(a=r.n()).done;){var s=a.value;e+=parseInt(s.approved)}}catch(c){r.e(c)}finally{r.f()}}return e},l.getTotalQualificationToBePlacedTotals=function(){var t=0;if(null!==l.props.toBePlacedData){var e,a=Object(x.a)(l.props.toBePlacedData);try{for(a.s();!(e=a.n()).done;){var i=e.value;t+=parseInt(i.approved)}}catch(r){a.e(r)}finally{a.f()}}return t},l.getTeachersAvailableAndToBePlaced=function(t,e){return l.getDistrictToBePlaced(t,e)+l.getDistrictData(t,e)},l.componentDidMount=function(){null===l.props.toBePlacedData&&(l.setState({loading:!0}),l.props.loadToBePlacedData())},l.state={loading:!1,search_district:"",sortBy:null,pinned_districts:"3"!==(null===(r=l.props.auth.role)||void 0===r?void 0:r.role_id)&&"2"!==(null===(s=l.props.auth.role)||void 0===s?void 0:s.role_id)&&"1"!==(null===(c=l.props.auth.role)||void 0===c?void 0:c.role_id)||null===l.props.auth.district?[]:[l.props.auth.district.district_code]},l}return Object(r.a)(a,[{key:"render",value:function(){var t,e,a,i,r,s,c,l=this;return!0===this.state.loading||null===this.props.toBePlacedData?Object(O.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(O.jsx)(p.a,{}),Object(O.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):Object(O.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-between gap-3 mb-5",children:[Object(O.jsxs)("div",{className:"flex flex-col pl-4 pt-5",children:[Object(O.jsx)("span",{className:"font-extrabold text-2xl text-primary-800",children:"Posts management"}),Object(O.jsx)("span",{className:"-mt-1",children:"This includes total ceiling and available teachers comparison"})]}),"3"!==(null===(t=this.props.auth.role)||void 0===t?void 0:t.role_id)&&"2"!==(null===(e=this.props.auth.role)||void 0===e?void 0:e.role_id)&&"1"!==(null===(a=this.props.auth.role)||void 0===a?void 0:a.role_id)&&Object(O.jsx)("div",{className:"",children:Object(O.jsx)("table",{className:"",children:Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{className:"bg-primary-100 font-light",children:[Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Report type"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300 text-gray-800",children:t.qualification_name},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Total"})]}),Object(O.jsxs)("tr",{className:"bg-gray-100 font-bold",children:[Object(O.jsx)("td",{className:"border border-gray-300 px-3",children:"National Ceiling"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-gray-300",children:Object(h.f)(l.totalAvailable(t.qualification_name.toLocaleLowerCase()))},e+1)})),Object(O.jsx)("td",{className:"border border-gray-300 px-3",children:Object(h.f)(this.getAllTotalAvailable())})]}),Object(O.jsxs)("tr",{className:"text-green-700",children:[Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Current teachers"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300",children:Object(h.f)(l.totalPlaced(t.qualification_name))},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:Object(h.f)(this.getAllTotalExisting())})]}),Object(O.jsxs)("tr",{className:"text-yellow-700",children:[Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:"Posts to be placed"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-light border border-blue-300",children:Object(h.f)(l.getTotalQualificationToBePlacedByQualification(t.qualification_name))},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3",children:Object(h.f)(this.getTotalQualificationToBePlacedTotals())})]}),Object(O.jsxs)("tr",{className:"bg-accent-400 text-black",children:[Object(O.jsx)("td",{className:"border border-blue-300 font-extrabold px-3",children:"Total Vacant"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("td",{className:"px-5 py-1 font-bold border border-blue-300",children:Object(h.f)(l.totalAvailable(t.qualification_name.toLocaleLowerCase())-l.getTotalQualificationToBePlacedByQualification(t.qualification_name)-l.totalPlaced(t.qualification_name))},e+1)})),Object(O.jsx)("td",{className:"border border-blue-300 px-3 font-extrabold text-black",children:Object(h.f)(this.getAllTotalAvailable()-this.getTotalQualificationToBePlacedTotals()-this.getAllTotalExisting())})]})]})})})]}),Object(O.jsx)("div",{className:"mb-3 flex flex-row items-center gap-2",children:Object(O.jsx)("input",{type:"text",value:this.state.search_district,onChange:function(t){return l.setState({search_district:t.target.value})},placeholder:"Search by district",className:"px-3 py-2 rounded border border-gray-400 w-full font-bold text-primary-800"})}),Object(O.jsx)("div",{className:"overflow-x-auto",style:{width:"calc(100vw - 300px)"},children:Object(O.jsxs)("table",{className:"",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-primary-800 text-left font-extrabold bg-primary-100 text-xs",children:[Object(O.jsx)("th",{className:"px-1 py-2 border border-blue-300",children:"#"}),Object(O.jsx)("th",{className:"px-1 py-2 border border-blue-300",children:"District code"}),Object(O.jsx)("th",{className:"px-1 py-2 border border-blue-300",children:"District name"}),this.props.basic.qualifications.map((function(t,e){return Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"my-2",children:t.qualification_name}),Object(O.jsx)("table",{className:"w-full text-xs",children:Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"Placed"})}),Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"To be placed"})}),Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"G.Total"})}),Object(O.jsx)("td",{className:"border border-blue-300 px-1 py-2",children:Object(O.jsx)("div",{className:"w-14",children:"Ceiling"})})]})})})]})},e+1)})),Object(O.jsx)("th",{className:"border border-blue-300 text-left text-primary-800",children:Object(O.jsx)("div",{onClick:function(){return l.setState({sortBy:{status:null===l.state.sortBy||"ASC"===l.state.sortBy.status?"DESC":"ASC",column:"teachers"}})},className:" flex flex-row items-center gap-3 px-2 py-2 hover:bg-primary-100 cursor-pointer text-left",children:Object(O.jsx)("span",{children:"Total teachers"})})}),Object(O.jsx)("th",{className:"border border-blue-300 text-center px-3 py-2",children:"Total Ceiling"}),Object(O.jsx)("th",{className:"border border-blue-300 text-center",children:Object(O.jsx)("div",{onClick:function(){return l.setState({sortBy:{status:null===l.state.sortBy||"ASC"===l.state.sortBy.status?"DESC":"ASC",column:"schools_submitted"}})},className:" flex flex-row items-center gap-3 px-2 py-2 hover:bg-primary-100 cursor-pointer text-center",children:Object(O.jsx)("span",{children:"Vacant posts"})})})]})}),Object(O.jsx)("tbody",{children:0===this.districtsWithTotals().length?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:10,className:"text-center text-2xl font-extralight p-5 animate__animated animate__fadeIn border border-gray-300",children:"No Result Found!"})}):this.districtsWithTotals().map((function(t,e){return Object(O.jsxs)("tr",{onClick:function(){l.pinDistrict(t.district_code)},className:"hover:bg-primary-100 cursor-pointer text-xs",children:[Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-center",children:e+1}),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-center",children:t.district_code}),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300",children:t.district_name}),l.props.basic.qualifications.map((function(e,a){return Object(O.jsx)("td",{className:"border border-gray-300 text-center",children:Object(O.jsx)("div",{children:Object(O.jsx)("table",{className:"w-full text-xs",children:Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"border border-blue-300 py-2 ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>l.getDistrictData(t.district_code,e.qualification_name)?"":"bg-red-100"),children:Object(O.jsx)("div",{className:"w-6 px-1 text-center",children:Object(h.f)(l.getDistrictData(t.district_code,e.qualification_name))})}),Object(O.jsx)("td",{className:"border border-blue-300 py-2 ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>l.getDistrictData(t.district_code,e.qualification_name)?"":"bg-red-100"),children:Object(O.jsx)("div",{className:"w-6 px-1 text-center ".concat(l.getDistrictToBePlaced(t.district_code,e.qualification_name)>0?"text-accent-900":"text-gray-600"),children:Object(h.f)(l.getDistrictToBePlaced(t.district_code,e.qualification_name))})}),Object(O.jsx)("td",{className:"border py-2 ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>=l.getTeachersAvailableAndToBePlaced(t.district_code,e.qualification_name)?"bg-green-50 text-green-700 border-blue-300":"bg-red-600 text-white border-red-700"),children:Object(O.jsx)("div",{className:"w-6 text-center px-1",children:Object(h.f)(l.getTeachersAvailableAndToBePlaced(t.district_code,e.qualification_name))})}),Object(O.jsx)("td",{className:"border ".concat(l.getDistrictDataAvailable(t.district_name,e.qualification_name)>=l.getTeachersAvailableAndToBePlaced(t.district_code,e.qualification_name)?"bg-accent-400 border-blue-300":"bg-red-700 text-white border-red-600"," py-2 text-center"),children:Object(O.jsx)("div",{className:"w-6 px-1",children:Object(h.f)(l.getDistrictDataAvailable(t.district_name,e.qualification_name))})})]})})})})},a+1)})),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-primary-600 text-center",children:Object(h.f)(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code))}),Object(O.jsx)("td",{className:"px-1 py-2 border border-gray-300 text-gray-800 text-center",children:null===t.totals?"Loading...":Object(h.f)(t.totals.Total.Total)}),Object(O.jsx)("td",{className:"px-1 py-2 border ".concat(null===t.totals?"":t.totals.Total.Total-(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code))<0?"bg-red-600 text-white border-red-700":"text-blue-600 border-gray-300","  text-center"),children:null===t.totals?0:Object(h.f)(t.totals.Total.Total-(t.total_placed+l.getTotalDistrictToBePlaced(t.district_code)))})]},e+1)}))})]})}),this.state.pinned_districts.length>0&&"3"!==(null===(i=this.props.auth.role)||void 0===i?void 0:i.role_id)&&"2"!==(null===(r=this.props.auth.role)||void 0===r?void 0:r.role_id)&&"1"!==(null===(s=this.props.auth.role)||void 0===s?void 0:s.role_id)&&Object(O.jsx)("div",{className:"my-5",children:Object(O.jsx)(_.a,{onClick:function(){return l.setState({pinned_districts:[]})},theme:"accent",children:"Unpin selected district"})}),"3"===(null===(c=this.props.auth.role)||void 0===c?void 0:c.role_id)&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"my-3",children:"You can view details for the above summary by viewing schools lists and generating PDF format placement reports"}),Object(O.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(O.jsx)(f.b,{className:"bg-accent-800 font-bold px-3 py-2 rounded hover:bg-yellow-800 hover:text-white",to:"/placement-list-dde",children:"View placement list details"}),Object(O.jsx)(f.b,{className:"border border-accent-900 text-accent-900 font-bold px-3 py-2 rounded hover:bg-accent-800 hover:text-black",to:"/placement-books",children:"Print placement reports"})]})]})]})}}]),a}(l.Component),w=new Date,T=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(i.a)(this,a),(r=e.call(this,t)).setLoading=function(t){return r.setState({loading:t})},r.FC_LoadGeneralReport=function(){r.setLoading(!0),null!==r.props.basic.academic_calender&&Object(b.Yb)(r.props.basic.academic_calender.academic_year_id,r.state.selected_month,(function(t,e,a){r.setLoading(t),!1===t&&""===e&&null!==a?(r.setState({generalReport:a,loading:!1}),console.log("Test report",a)):""!==e&&r.setState({error:e,generalReport:[]})}))},r.loadToBePlaced=function(){"vacant"===r.state.report_type&&null===r.state.districts_to_be_placed&&(r.setLoading(!0),Object(b.N)((function(t,e,a){r.setLoading(t),!1===t&&null!==a&&r.setState({districts_to_be_placed:a})})))},r.componentDidMount=function(){null===r.state.districts_limits&&(r.setLoading(!0),Object(b.Xb)((function(t,e){r.setState({loading:t,districts_limits:e})}))),null===r.state.districts&&(r.setLoading(!0),Object(u.b)((function(t,e,a){null!==e&&r.setState({districts:e,loading:!1})}))),"general"===r.state.report_type&&null===r.state.generalReport&&r.FC_LoadGeneralReport(),r.loadToBePlaced()},r.state={loading:!1,report_type:"general",generalReport:null,selected_month:h.c[w.getMonth()],error:"",districts:null,districts_limits:null,districts_to_be_placed:null},r}return Object(r.a)(a,[{key:"render",value:function(){var t=this;return!0===this.state.loading?Object(O.jsxs)("div",{className:"bg-white p-4 flex flex-col items-center justify-center",children:[Object(O.jsx)(p.a,{}),Object(O.jsx)("div",{className:"animate__animated animate__falseIn animate__infinite mt-2 text-lg font-light",children:"Loading, please wait..."})]}):Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"px-3 md:px-6 py-6",children:[Object(O.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3",children:[Object(O.jsx)("div",{className:"text-2xl font-extrabold",children:"General placement report"}),Object(O.jsxs)("div",{className:"flex flex-row items-center justify-end gap-1 bg-white p-1 rounded",children:[Object(O.jsx)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"general"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("general"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"),children:"General report"}),Object(O.jsx)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"vacant"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("vacant"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"),children:"Posts Management"}),Object(O.jsxs)("div",{onClick:function(){!1===t.state.loading&&t.setState({report_type:"search"})},className:"px-3 py-2 rounded w-max hover:bg-yellow-50 hover:text-accent-900 ".concat("search"===this.state.report_type?"cursor-not-allowed bg-yellow-100 text-yellow-800 font-bold animate__animated animate__fadeIn":"bg-white cursor-pointer font-bold"," flex flex-row items-center gap-1"),children:[Object(O.jsx)("div",{children:Object(O.jsx)(n.e,{className:"text-2xl"})}),Object(O.jsx)("span",{children:"Search"})]})]})]}),Object(O.jsxs)("div",{className:"bg-white p-3 rounded mt-5",children:[""!==this.state.error&&Object(O.jsxs)("div",{title:"Click to close alert",onClick:function(){return t.setState({error:""})},className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 text-base font-light w-full cursor-pointer hover:bg-red-100 flex flex-row items-center justify-between gap-3 mb-3 animate__animated animate__shakeX",children:[Object(O.jsx)("span",{children:this.state.error}),Object(O.jsx)("div",{children:Object(O.jsx)(o.o,{className:"text-2xl hover:text-red-600"})})]}),Object(O.jsxs)("div",{children:["general"===this.state.report_type&&Object(O.jsx)(N,{loading:this.state.loading,generalReport:this.state.generalReport,selected_month:this.state.selected_month,error:this.state.error,districts:this.state.districts,basic:this.props.basic,auth:this.props.auth}),"vacant"===this.state.report_type&&null!==this.state.districts_limits&&null!==this.state.generalReport&&Object(O.jsx)(D,{districts:this.state.districts,basic:this.props.basic,auth:this.props.auth,districts_limits:this.state.districts_limits,districts_placements:this.state.generalReport,toBePlacedData:this.state.districts_to_be_placed,loading:this.state.loading,loadToBePlacedData:function(){t.loadToBePlaced()}})]})]})]})})}}]),a}(l.Component),S=Object(d.b)((function(t){return{auth:t.auth,basic:t.basic,placement:t.placement}}),{})(T)}}]);
//# sourceMappingURL=30.2df23cfb.chunk.js.map