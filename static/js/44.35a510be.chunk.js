(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[44],{377:function(e,t,s){"use strict";var a=s(32),r=s(3),c=s(17),i=s(47),n=s(15),l=s(2);t.a=function(e){var t,s,d,o,h,j,b=e.transf,m=e.expand,x=void 0!==m&&m,u=e.remove_loading,_=void 0!==u&&u,g=e.removeTransfer,f=Object(r.useState)(!1),O=Object(a.a)(f,2),p=O[0],v=O[1];return console.log(b),Object(l.jsxs)("div",{className:"p-2 bg-white mb-3 border rounded ",children:[Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("div",{className:"p-3 hidden lg:flex items-center  ".concat("APPROVED"===b.requested_status?"text-green-700 bg-green-100":"text-accent-800 bg-accent-400"," rounded flex items-center"),children:Object(l.jsx)(c.lb,{size:80})}),Object(l.jsxs)("div",{className:"flex-1 pl-3 pt-1",children:[Object(l.jsxs)("section",{className:"hover:underline cursor-pointer",onClick:function(){return v(!p)},children:[Object(l.jsx)("span",{className:"p-1 rounded px-2 py-0.5 text-sm  ".concat("APPROVED"===b.requested_status?"bg-green-600 text-white":"bg-accent-900 text-white"),children:b.requested_status})," ",Object(l.jsxs)("h2",{className:"text-lg font-bold",children:[b.position_code," ",b.position_name]})]}),Object(l.jsxs)("div",{className:"pt-1",children:[Object(l.jsxs)("section",{className:"flex flex-col lg:flex-row gap-1 lg:gap-0 lg:items-center pt-2",children:[Object(l.jsxs)("section",{className:"border pl-2 hover:bg-gray-200 pr-4 rounded  lg:--rounded-r-full",children:[Object(l.jsx)("h6",{className:" font-light text-sm text-yellow-600",children:"Current school"}),Object(l.jsxs)("h3",{className:" font-bold",children:[null===(t=b.school_from_info)||void 0===t?void 0:t.school_code," - ",null===(s=b.school_from_info)||void 0===s?void 0:s.school_name]}),Object(l.jsxs)("h4",{className:"text-sm -mt-1 text-gray-500",children:[null===(d=b.school_from_info)||void 0===d?void 0:d.district_name," -"," ",null===(o=b.school_from_info)||void 0===o?void 0:o.sector_name]})]}),Object(l.jsx)("section",{className:"text-gray-500",children:Object(l.jsx)(c.p,{size:40})}),null===(h=b.requested_school_info)||void 0===h?void 0:h.map((function(e,t){return Object(l.jsxs)("section",{className:" flex-1 pl-4 bg-gray-100 rounded hover:bg-gray-200 ".concat(0===t?"lg:--rounded-l-full rounded-r p-1 mr-2 ":" px-1 rounded mr-2 py-2","  ").concat(b.approved_school_id===e.school_code?"text-green-800 bg-green-100 hover:bg-green-200 border-green-400 border-2":"border"),children:[Object(l.jsxs)("h6",{className:" font-light text-sm text-yellow-600",children:["Requested school ",t+1]}),Object(l.jsxs)("h4",{className:" font-bold",children:[null===e||void 0===e?void 0:e.school_code," - ",null===e||void 0===e?void 0:e.school_name]}),Object(l.jsxs)("h4",{className:"text-sm -mt-1 opacity-70",children:[e.district_name," - ",null===e||void 0===e?void 0:e.sector_name]})]},t)}))]}),Object(l.jsxs)("section",{className:"pt-2",children:[Object(l.jsx)("label",{className:"text-gray-500 inline-block pr-1",children:"Date: "})," ",Object(l.jsx)("b",{children:b.teacher_requested_transfer_date})]})]})]})]}),(p||x)&&Object(l.jsx)("div",{className:"animate__animated  animate__fadeIn animate__faster mt-2 border-t pt-2 grid grid-cols-2",children:[{title:"Transfer type",value:b.transfer_type},{title:"transfer_reason",value:b.transfer_reason},{title:"Requested transfer date",value:b.teacher_requested_transfer_date},{title:"Decision provided on",value:b.incoming_decision_date}].map((function(e,t){return e.value?Object(l.jsxs)("div",{className:"border px-2 py-1.5  flex items-center",children:[Object(l.jsxs)("span",{className:"text-gray-500",children:[e.title,": "]})," ",Object(l.jsx)("h6",{className:"font-bold text-black",children:e.value})]},t):null}))}),b.teacher_comment&&(null===(j=b.teacher_comment)||void 0===j?void 0:j.length)>=1&&Object(l.jsxs)("div",{className:"p-2 my-2 rounded border",children:[Object(l.jsx)("span",{className:"text-gray-500",children:"Transfer reason: "})," ",Object(l.jsx)("h6",{className:"font-bold text-black",children:b.teacher_comment})]}),g&&b.teacher_transfer_id&&"APPROVED"!==b.requested_status&&Object(l.jsx)("div",{className:"pt-4 text-right",children:Object(l.jsx)(i.a,{onClick:g.bind(undefined,b.teacher_transfer_id),theme:"danger-light",loading:_,children:"Remove transfer request"})}),null!==b.mayor_letter&&Object(l.jsx)("div",{className:"p-2 text-right",children:Object(l.jsx)("a",{href:"".concat(n.e,"/").concat(b.mayor_letter),target:"_blank",rel:"noreferrer",download:!0,children:Object(l.jsx)(i.a,{theme:"accent-light",children:"Download transfer letter"})})})]})}},553:function(e,t,s){"use strict";s.r(t),s.d(t,"RebTransferWithIssue",(function(){return y}));var a=s(28),r=s(29),c=s(30),i=s(31),n=s(3),l=s.n(n),d=s(54),o=s(17),h=s(27),j=s(16),b=s(52),m=s(47),x=s(51),u=s(61),_=s(48),g=s(53),f=s(19),O=s(377),p=s(2),v={target:null,msg:""},N=function(e){Object(c.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).loadingData=function(e,t,s){r.setState({loading:!0,selected_transfer_id:null,data:[]}),Object(j.z)({district_code:e,limit:r.state.limit,page:t,status:s||r.state.status},(function(e,s,a){r.setState({loading:!1,data:null!==s&&void 0!==s&&s.district_transfer_request?null===s||void 0===s?void 0:s.district_transfer_request:[],total:null!==s&&void 0!==s&&s.total_transfer?s.total_transfer:0,next:null!==s&&void 0!==s&&s.next?+(null===s||void 0===s?void 0:s.next):0,previous:null!==s&&void 0!==s&&s.previous?+(null===s||void 0===s?void 0:s.previous):0,error:e?v:{target:"main-error",msg:a},page:t})}))},r.changeTransferStatus=function(e,t){e&&t&&window.confirm("Are you sure you want to change the status?")&&(r.setState({transfer_update_loading:!0}),Object(j.h)({teacher_transfer_id:e,transfer_issue_status:t},(function(e,t,s){r.setState({transfer_update_loading:!1,error:e?{target:"main-success",msg:"The transfer has been updated successful"}:{target:"main-error",msg:s}})})))},r.selectDistrict=function(e){!0!==r.state.transfer_update_loading&&(r.setState({selected_district:e}),null!==e&&r.loadingData(e.district_code,1,r.state.status))},r.changeStatus=function(e){!0!==r.state.transfer_update_loading&&r.state.status!==e&&null!==r.state.selected_district&&(r.setState({status:e}),r.loadingData(r.state.selected_district.district_code,1,e))},r.paginateData=function(e){!0!==r.state.transfer_update_loading&&null!==r.state.selected_district&&r.loadingData(r.state.selected_district.district_code,e)},r.state={loading:!1,loading_districts:!1,districts:[],tab:"DISTRICT-LIST",search_district:"",selected_district:null,error:v,data:[],limit:10,page:1,total:0,next:0,previous:0,status:"ISSUED",selected_transfer_id:null,loading_request:!1,transfer_update_loading:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading_districts:!0}),Object(j.v)((function(t,s,a){e.setState({loading_districts:!1,districts:s,error:t?v:{target:"main-error",msg:a}})}))}},{key:"render",value:function(){var e=this,t=Object(f.i)(this.state.districts,this.state.search_district,{district_code:!0,district_name:!0}),s=(this.state.total/this.state.limit).toFixed(0),a=this.state.data.find((function(t){return t.teacher_transfer_id===e.state.selected_transfer_id}));return Object(p.jsxs)(p.Fragment,{children:["main-success"===this.state.error.target&&Object(p.jsx)(b.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(p.jsx)(b.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),null!==this.state.selected_transfer_id&&void 0!==a&&Object(p.jsx)(g.c,{backDrop:!0,theme:g.b.default,close:function(){return e.setState({selected_transfer_id:null})},backDropClose:!1,widthSizeClass:g.a.extraLarge,displayClose:!0,title:"Transfer details",padding:{title:!0,body:!1,footer:void 0},children:Object(p.jsxs)("div",{className:"border-t",children:[Object(p.jsxs)("div",{className:"p-4 text-gray-500",children:[Object(p.jsxs)("section",{children:["Transfer id:"," ",Object(p.jsx)("b",{className:"text-black",children:a.teacher_transfer_id})]}),Object(p.jsxs)("section",{children:["Teacher names:"," ",Object(p.jsx)("b",{className:"text-black",children:a.teacher_full_name})]}),Object(p.jsxs)("section",{children:["Teacher's Phone number:"," ",Object(p.jsx)("b",{className:"text-black",children:a.teacher_phone_number})]})]}),Object(p.jsx)(O.a,{expand:!0,transf:a}),Object(p.jsx)("div",{className:"pt-3 px-2 bg-gray-100 m-2",children:a.transfer_issue_comment&&Object(p.jsx)("div",{className:"p-2 rounded bg-gray-100",children:a.transfer_issue_comment})}),this.state.selected_transfer_id&&Object(p.jsxs)("div",{className:"p-4 text-right  gap-2",children:[Object(p.jsx)(m.a,{theme:"danger",onClick:this.changeTransferStatus.bind(this,this.state.selected_transfer_id,"ISSUE-APPROVED"),loading:this.state.transfer_update_loading,children:"ISSUE-APPROVED"})," ",Object(p.jsx)(m.a,{theme:"success",onClick:this.changeTransferStatus.bind(this,this.state.selected_transfer_id,"NO-ISSUE"),loading:this.state.transfer_update_loading,children:"NO-ISSUE"})]})]})}),Object(p.jsx)(x.a,{children:Object(p.jsxs)("div",{className:"flex items-center",children:[null!==this.state.selected_district&&Object(p.jsx)("section",{className:"pr-2",children:Object(p.jsx)(m.a,{theme:"default",onClick:this.selectDistrict.bind(this,null),children:Object(p.jsx)(o.f,{})})}),Object(p.jsxs)("section",{className:"flex-1",children:[Object(p.jsx)("h1",{className:"text-2xl font-bold",children:"Transfer with issues"}),null===this.state.selected_district?Object(p.jsx)("p",{className:"p-0 text-gray-500",children:"Transfers reported by DDE's"}):Object(p.jsxs)("p",{className:"m-0 font-bold text-accent-900",children:[this.state.selected_district.district_name," district"]})]}),Object(p.jsx)("div",{className:"",children:null!==this.state.selected_district&&Object(p.jsxs)("div",{className:"flex flex-1 gap-1 text-right ",children:[Object(p.jsx)(m.a,{size:"sm",theme:"NO-ISSUE"===this.state.status?"success":"success-light",onClick:this.changeStatus.bind(this,"NO-ISSUE"),children:"NO-ISSUE"}),Object(p.jsx)(m.a,{size:"sm",theme:"ISSUE-APPROVED"===this.state.status?"danger":"danger-light",onClick:this.changeStatus.bind(this,"ISSUE-APPROVED"),children:"ISSUE-APPROVED"}),Object(p.jsx)(m.a,{size:"sm",theme:"ISSUED"===this.state.status?"accent":"accent-light",onClick:this.changeStatus.bind(this,"ISSUED"),children:"ISSUED"})]})})]})}),null===this.state.selected_district?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"p-2",children:Object(p.jsx)(u.a,{error:"",label:"",name:"",onChange:function(t){return e.setState({search_district:t.target.value})},placeholder:"Search district by name",value:this.state.search_district})}),!0===this.state.loading_districts?Object(p.jsx)("div",{className:"py-8 text-center text-8xl text-accent-900",children:Object(p.jsx)(_.a,{className:"mx-auto"})}):this.state.districts.length>=1?Object(p.jsx)(p.Fragment,{children:t.length<=0?Object(p.jsxs)("div",{className:"py-4 text-center",children:[Object(p.jsx)("h2",{className:"text-lg",children:"No results found!"}),Object(p.jsx)("p",{className:"text-gray-500",children:"Please use a correct district name"})]}):Object(p.jsx)("div",{className:"grid lg:grid-cols-2 gap-2 ",children:t.map((function(t){return Object(p.jsxs)("div",{onClick:e.selectDistrict.bind(e,t),className:"p-2 flex items-center cursor-pointer rounded border  px-3 hover:text-yellow-600 hover:border-yellow-600 hover:bg-yellow-50 bg-white text-lg",children:[Object(p.jsxs)("h4",{className:"flex-1 text-lg",children:[" ",Object(p.jsx)("b",{children:t.district_name})," district"]}),Object(p.jsx)("button",{className:"",children:Object(p.jsx)(o.H,{})})]},t.district_code)}))})}):Object(p.jsxs)("div",{className:"py-4 text-center",children:[Object(p.jsx)("h2",{className:"text-8xl text-gray-400 text-center",children:Object(p.jsx)(d.f,{className:"inline"})}),Object(p.jsx)("h2",{className:"text-center p-4 text-gray-400 font-bold text-2xl",children:Object(p.jsx)("p",{children:"No results found on"})})," "]})]})})}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(x.a,{className:"animate__animated animate__zoomIn animate__faster",children:[Object(p.jsxs)("table",{className:"w-full",children:[Object(p.jsx)("thead",{className:"text-left bg-white",children:Object(p.jsxs)("tr",{className:"bg-accent-900 bg-opacity-10",children:[Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"#"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"Names"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"School Code"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"School name"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position code"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"Position name"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"Qualification"}),Object(p.jsx)("th",{className:"p-2 border-gray-300 border",children:"Error"})]})}),Object(p.jsx)("tbody",{children:!0===this.state.loading?Object(p.jsx)("tr",{className:" ",children:Object(p.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(p.jsx)(_.a,{})})}):this.state.data.length<=0?Object(p.jsx)("tr",{children:Object(p.jsx)("td",{colSpan:8,className:"py-4 text-center border",children:Object(p.jsx)("h1",{className:"text-2xl text-gray-400",children:"No data found"})})}):this.state.data.map((function(t,s){var a,r;return Object(p.jsxs)("tr",{className:"bg-white cursor-pointer hover:bg-yellow-400 hover:bg-opacity-30",onClick:function(){!0!==e.state.transfer_update_loading&&e.setState({selected_transfer_id:t.teacher_transfer_id})},children:[Object(p.jsx)("td",{className:"border p-2",children:s+1}),Object(p.jsx)("td",{className:"p-2 border",children:t.teacher_full_name}),Object(p.jsx)("td",{className:"p-2 border",children:null===(a=t.school_from_info)||void 0===a?void 0:a.school_code}),Object(p.jsx)("td",{className:"p-2 border",children:null===(r=t.school_from_info)||void 0===r?void 0:r.school_name}),Object(p.jsx)("td",{className:"p-2 border",children:t.position_code}),Object(p.jsx)("td",{className:"p-2 border text-sm",children:t.position_name}),Object(p.jsx)("td",{className:"p-2 border",children:t.qualification_name}),Object(p.jsx)("td",{className:"p-2 border",children:t.transfer_issue_comment&&null!==t.transfer_issue_comment?Object(p.jsx)("span",{className:"text-sm p-0.5 bg-red-400 px-2 rounded-full font-bold text-white",children:"Issue"}):Object(p.jsx)("span",{})})]},s)}))})]}),Object(p.jsx)("div",{className:"flex gap-3 mx-auto pt-3",children:Array(+s).fill("0").map((function(t,s){return Object(p.jsx)("button",{className:"p-2 py-1 ".concat(+e.state.page===s+1?"bg-accent-800 text-black font-bold":"bg-opacity-25"," rounded-full bg-accent-800 "),onClick:e.paginateData.bind(e,s+1),children:s+1})}))})]})})]})}}]),s}(l.a.Component),y=Object(h.b)((function(e){return{auth:e.auth}}),{})(N)}}]);
//# sourceMappingURL=44.35a510be.chunk.js.map