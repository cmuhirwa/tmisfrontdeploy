(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[44],{353:function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var c=s(29),r=s(30),i=s(31),a=s(32),n=s(4),l=s.n(n),d=s(17),o=s(27),h=s(14),j=s(358),u=s(49),m=s(53),b=s(39),p=s(43),_=s(54),x=s(2),O=function(e){Object(i.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){r.props.district_code||r.loadDistricts(),void 0===r.props.school_code&&r.setState({current_school:!1})},r.loadDistricts=function(){r.state.districts.length<=0&&(r.setState({loading_districts:!0}),Object(h.v)((function(e,t,s){e?r.setState({loading_districts:!1,districts:t}):r.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},r.selectDistrict=function(e){r.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),r.reloadDistrictResurces(e.district_code)},r.reloadDistrictResurces=function(e){e&&(r.setState({loading_resource:!0}),r.props.FC_GetAssignAssets(e,(function(e,t){e?r.setState({loading_resource:!1}):r.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,district_code:r.props.district_code?r.props.district_code:"",district_name:r.props.district_name?r.props.district_name:"",current_school:!0,selected_district:r.props.district_code?r.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,c,r,i=this;return"user-updates-success"===this.state.error.target?Object(x.jsx)(m.a,{className:"animate__animated animate__zoomIn ",children:Object(x.jsxs)("div",{className:"text-center py-10",children:[Object(x.jsx)(d.l,{className:"text-8xl text-green-600 mx-auto"}),Object(x.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(x.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(x.jsx)("br",{})," you can close the window and continue with other users"]}),Object(x.jsx)(u.a,{theme:"success-light",onClick:function(){i.props.close(),i.props.refreshApp&&i.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(x.jsxs)(x.Fragment,{children:["main-error"===this.state.error.target&&Object(x.jsx)(_.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(x.jsx)(_.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(x.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return i.setState({open_select_district:!1})}}),Object(x.jsx)(p.c,{backDrop:!0,backDropClose:!0,close:function(){return i.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:p.b.default,widthSizeClass:p.a.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(x.jsx)(b.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(x.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(x.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(x.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(x.jsx)("h6",{children:e.district_code}),Object(x.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(x.jsx)(u.a,{theme:"accent-light",size:"sm",onClick:i.selectDistrict.bind(i,e),children:"Select district"})]},t)}))})})]}),Object(x.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(x.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(x.jsx)(u.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(x.jsx)(m.a,{children:Object(x.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(x.jsx)("div",{className:"",children:Object(x.jsx)(d.c,{className:"text-6xl"})}),Object(x.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(x.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(x.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(x.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(x.jsx)("b",{children:null===(c=this.props.userDetails)||void 0===c?void 0:c.email})]})]})]})}),Object(x.jsx)("div",{className:"my-2 hidden",children:Object(x.jsx)(m.a,{children:Object(x.jsxs)("div",{className:"flex gap-3",children:[Object(x.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(x.jsx)(x.Fragment,{})}),Object(x.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(x.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(r=this.props)||void 0===r?void 0:r.school_name)}),Object(x.jsx)(u.a,{onClick:function(){return i.setState({current_school:!i.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(j.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!1,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){i.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){i.props.refreshApp&&i.props.refreshApp(),i.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(l.a.Component),f=Object(o.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.q})(O)},537:function(e,t,s){"use strict";s.r(t),s.d(t,"DisabledUsers",(function(){return g}));var c=s(29),r=s(30),i=s(31),a=s(32),n=s(4),l=s.n(n),d=s(27),o=s(14),h=s(54),j=s(49),u=s(53),m=s(77),b=s(61),p=s(39),_=s(20),x=s(353),O=s(2),f=function(e){Object(i.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){r.startApp()},r.startApp=function(){r.setState({loading:!0,error:{target:null,msg:""}}),Object(o.r)((function(e,t,s){!0===e&&null!==t?r.setState({loading:!1,data:t}):r.setState({loading:!1,error:{msg:s,target:"main-error"}})}))},r.state={data:[],error:{target:null,msg:""},search:"",loading:!0,selected_user:null},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this,t=Object(_.j)(this.state.data,this.state.search,{school_code:!0,district_code:!0,position_code:!0,school_name:!0,district_name:!0,full_name:!0,first_name:!0,last_name:!0,email:!0,middle_name:!0,nid:!0,phone_numbers:!0,staff_code:!0});return!0===this.state.loading?Object(O.jsx)("div",{className:"p-8 text-center",children:Object(O.jsx)("div",{className:"mx-auto",children:Object(O.jsx)(p.a,{})})}):null!==this.state.selected_user&&null!==this.state.selected_user.user_id?Object(O.jsx)(x.a,{user_id:this.state.selected_user.user_id,userDetails:{email:this.state.selected_user.email+"",full_name:this.state.selected_user.full_name+"",nid:this.state.selected_user.nid+"",staff_code:this.state.selected_user.staff_code+""},close:function(){return e.setState({selected_user:null})}}):Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(O.Fragment,{children:["main-success"===this.state.error.target&&Object(O.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(O.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(O.jsxs)(u.a,{children:[Object(O.jsx)("div",{className:"flex items-center",children:Object(O.jsx)("div",{className:"flex-1",children:Object(O.jsx)(m.a,{children:"Disabled users"})})}),Object(O.jsxs)("div",{className:"mt-3",children:[Object(O.jsxs)("div",{className:"border border-t mt-2 mb-1 flex items-center pl-3 pr-2 rounded",children:[Object(O.jsx)("div",{className:"flex-1 pr-2",children:Object(O.jsx)(b.a,{error:"",label:"Search",name:"",type:"search",onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search by district name, staff code",value:this.state.search,size:"sm"})}),Object(O.jsxs)("div",{className:"p-2 px-3 ml-3 bg-accent-800 bg-opacity-30 rounded",children:[Object(O.jsx)("label",{className:"",children:"Results:"}),Object(O.jsx)("h4",{className:"text-2xl -mt-1 font-bold",children:t.length})]})]}),Object(O.jsxs)("table",{className:"w-full text-left table-auto",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"p-2 border",children:"#"}),Object(O.jsx)("th",{className:"p-2 border",children:"NID"}),Object(O.jsx)("th",{className:"p-2 border",children:"First name"}),Object(O.jsx)("th",{className:"p-2 border",children:"Last name"}),Object(O.jsx)("th",{className:"p-2 border",children:"Middle name"}),Object(O.jsx)("th",{className:"p-2 border",children:"Full name"}),Object(O.jsx)("th",{className:"p-2 border",children:"Phone number"}),Object(O.jsx)("th",{className:"p-2 border"})]})}),Object(O.jsx)("tbody",{children:t.length<=0?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:8,className:"p-8 border rounded border-opacity-25 animate__animated animate__fadeIn text-center",children:Object(O.jsx)(m.a,{size:"md",className:"opacity-60 font-light",children:"No results found"})})}):t.map((function(t,s){return Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)("tr",{className:"group border rounded hover:bg-blue-500 hover:bg-opacity-20 text-sm",children:[Object(O.jsx)("td",{className:"p-2 border",children:s+1},s),Object(O.jsx)("td",{className:"p-2 border",children:t.nid}),Object(O.jsx)("td",{className:"p-2 border",children:t.first_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.middle_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.last_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.full_name}),Object(O.jsx)("td",{className:"p-2 border",children:t.phone_numbers}),Object(O.jsx)("td",{className:" text-center border",children:Object(O.jsx)(j.a,{size:"sm",theme:"accent-light",className:"w-full",onClick:function(){return e.setState({selected_user:t})},children:"Open profile"})})]})},s)}))})]})]})]})]})})}}]),s}(l.a.Component),g=Object(d.b)((function(e){return{auth:e.auth,basic:e.basic}}),{FC_DisableUser:o.k})(f)}}]);
//# sourceMappingURL=44.4764d241.chunk.js.map