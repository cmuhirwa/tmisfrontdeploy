(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[48],{378:function(e,t,a){"use strict";a(4);var s=a(15),n=a(70),r=a(1);t.a=function(e){var t=e.onChange,a=e.value,i=e.placeholder,c=e.disabled,l=void 0!==c&&c,d=e.name,o=e.Input_className,j=void 0===o?"":o,h=e.InputContainer_className,b=void 0===h?"":h,u=e.MainContainer_className,m=void 0===u?"":u,x=e.size,g=void 0===x?"md":x,O=e.max;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"w-full my-2 ".concat(m),children:Object(r.jsx)("div",{className:"rounded relative ".concat(b," "),children:Object(r.jsxs)("div",{className:"flex p-1 px-2 rounded-lg items-center border bg-gray-100",children:[Object(r.jsx)("label",{htmlFor:d,className:"text-3xl text-gray-700",children:Object(r.jsx)(s.Eb,{})}),Object(r.jsx)("input",{type:"search",name:d,id:d,placeholder:i,onChange:t,className:" outline-none bg-transparent flex-1\n                w-full text-lg \n                ".concat(Object(n.a)(g),"\n                px-3 ").concat(j),value:a,disabled:l,maxLength:O})]})})})})}},627:function(e,t,a){"use strict";a.r(t),a.d(t,"TrainerAttendance",(function(){return C}));var s=a(19),n=a(20),r=a(21),i=a(22),c=a(4),l=a.n(c),d=a(42),o=a(36),j=a(13),h=a(47),b=a(23),u=a(53),m=a(92),x=a(24),g=a(16),O=a(9),p=a(41),_=a(15),v=a(378),N=a(39),f=a(27),y=a(1),S={target:null,msg:""},R=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).clearAlert=function(){return setTimeout((function(){n.setState({alert:S})}),3e3)},n.addTraineeToAttendance=function(){var e;n.state.results_trainee?(n.setState({loading_add_training:!0}),Object(j.d)({attended_days:n.state.days,training_id:n.props.training.training_id,training_to_group_id:n.props.training.training_to_group_id+"",user_id:(null===(e=n.state.results_trainee)||void 0===e?void 0:e.user_id)+""},(function(e,t){e?n.setState({loading_add_training:!1,add_new_trainee:!1,alert:{target:"MAIN-SUCCESS",msg:"Trainee added to the room successfully!"},trainee:n.state.results_trainee?[].concat(Object(p.a)(n.state.trainee),[n.state.results_trainee]):n.state.trainee}):n.setState({loading_add_training:!1,alert:{msg:"Error: ".concat(t),target:"MAIN-ERROR"}}),n.clearAlert()}))):n.setState({alert:{target:"MAIN-ERROR",msg:"No results found"}})},n.searchTrainee=function(){return n.setState({results_trainee:null,alert:S}),n.state.search_nid.length<=4?(n.setState({alert:{target:"MAIN-ERROR",msg:"NID is not valid"}}),void n.clearAlert()):"number"!==typeof+n.state.search_nid?(n.setState({alert:{target:"MAIN-ERROR",msg:"NID must numbers only"}}),void n.clearAlert()):(n.setState({loading_search:!0,results_trainee:null,alert:S}),void Object(j.ub)(n.state.search_nid,n.props.training.training_id+"",(function(e,t,a){e?n.setState({results_trainee:t,loading_search:!1}):n.setState({results_trainee:null,loading_search:!1,alert:{target:"TRAINEE-RESULTS-ERROR",msg:"No Results: ".concat(a)}}),n.clearAlert()})))},n.submitUpdateDays=function(){var e;if(0===n.state.days)return n.setState({alert:{target:"MAIN-ERROR",msg:"Please select days"}}),void n.clearAlert();n.setState({set_attendance_loading:!0}),Object(j.jc)({attended_days:n.state.days,training_id:n.props.training.training_id,training_to_group_id:n.props.training.training_to_group_id,user_id:(null===(e=n.state.selected_attendance_set)||void 0===e?void 0:e.user_id)||""},(function(e,t){e?n.setState({set_attendance_loading:!1,trainee:n.state.selected_attendance_set?n.state.trainee.map((function(e){var t;return e.nid+""===(null===(t=n.state.selected_attendance_set)||void 0===t?void 0:t.nid)+""?Object(O.a)(Object(O.a)({},e),{},{attended_days:+n.state.days}):e})):n.state.trainee,alert:{target:"MAIN-SUCCESS",msg:"Attendance updated successfully"}}):n.setState({set_attendance_loading:!1,alert:{target:"MAIN-ERROR",msg:"Error: ".concat(t)}}),n.clearAlert()}))},n.state={loading:!0,alert:S,trainee:[],loading_trainee:!0,add_new_trainee:!1,loading_search:!1,search_nid:"",results_trainee:null,loading_add_training:!1,selected_attendance_set:null,days:0,set_attendance_loading:!1},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.auth.user)return this.setState({alert:{target:"MAIN-ERROR",msg:""}});Object(j.vb)(this.props.training.training_to_group_id,(function(t,a,s){t?e.setState({trainee:a,loading:!1}):e.setState({trainee:[],loading:!1,alert:{target:"MAIN-ERROR",msg:"Error: ".concat(s)}})}))}},{key:"render",value:function(){var e,t,a,s,n,r,i,c,l=this;return Object(y.jsxs)(y.Fragment,{children:["MAIN-ERROR"===this.state.alert.target&&Object(y.jsx)(h.a,{theme:"danger",fixed:!0,children:this.state.alert.msg}),"MAIN-SUCCESS"===this.state.alert.target&&Object(y.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.alert.msg}),!0===this.state.add_new_trainee&&Object(y.jsx)(f.d,{backDrop:!0,close:function(){return l.setState({add_new_trainee:!1})},backDropClose:!1,displayClose:!0,padding:{title:!0,body:void 0,footer:void 0},title:"Search Trainee",children:Object(y.jsxs)("div",{className:"border-t p-4",children:[Object(y.jsxs)("div",{className:"py-0.5 px-2 bg-white gap-2 items-center rounded border flex",children:[Object(y.jsx)("section",{className:"flex-1",children:Object(y.jsx)(v.a,{onChange:function(e){return l.setState({search_nid:e.target.value})},value:this.state.search_nid,placeholder:"Search NID",name:"",size:"sm"})}),Object(y.jsx)("section",{children:Object(y.jsx)(b.a,{onClick:this.searchTrainee,loading:this.state.loading_search,type:"button",theme:"primary-light",children:"Search trainee"})})]}),Object(y.jsxs)("div",{className:"",children:["TRAINEE-RESULTS-ERROR"===this.state.alert.target&&Object(y.jsxs)("div",{className:"text-center py-4",children:[Object(y.jsx)("h2",{className:"text-4xl inline-block text-gray-600",children:Object(y.jsx)(_.jb,{})}),Object(y.jsx)("p",{className:"t-2 text-lg",children:this.state.alert.msg})]}),null!==this.state.results_trainee&&Object(y.jsxs)("div",{className:"flex animate__animated animate__zoomIn animate__faster",children:[Object(y.jsx)("section",{children:Object(y.jsx)("h4",{className:"text-8xl text-gray-700",children:Object(y.jsx)(_.c,{})})}),Object(y.jsxs)("div",{className:"flex-1 p-2",children:[[{title:"Full name",value:null===(e=this.state.results_trainee)||void 0===e?void 0:e.full_name},{title:"NID",value:null===(t=this.state.results_trainee)||void 0===t?void 0:t.nid},{title:"Phone",value:null===(a=this.state.results_trainee)||void 0===a?void 0:a.phone_numbers},{title:"Trainee category",value:null===(s=this.state.results_trainee)||void 0===s?void 0:s.trainee_category_name}].map((function(e,t){return Object(y.jsxs)("div",{className:"p-2 px-3 bg-gray-100 flex gap-2 mb-1 rounded",children:[Object(y.jsx)("section",{className:"text-gray-500",children:e.title}),Object(y.jsx)("section",{className:"font-bold",children:e.value})]},t)})),Object(y.jsx)("div",{className:"pt-2 text-right",children:Object(y.jsx)(b.a,{type:"button",onClick:this.addTraineeToAttendance,loading:this.state.loading_add_training,children:"Add trainee to attendance"})})]})]})]})]})}),null!==this.state.selected_attendance_set&&Object(y.jsx)(f.d,{backDrop:!0,close:function(){return l.setState({selected_attendance_set:null})},backDropClose:!1,displayClose:!0,padding:{title:!0,body:void 0,footer:void 0},title:"Add attendance time",children:Object(y.jsxs)("div",{className:"border-t p-2",children:[Object(y.jsxs)("div",{className:"flex animate__animated animate__zoomIn animate__faster",children:[Object(y.jsx)("section",{children:Object(y.jsx)("h4",{className:"text-8xl text-gray-700",children:Object(y.jsx)(_.c,{})})}),Object(y.jsx)("div",{className:"flex-1 p-2",children:[{title:"Full name",value:null===(n=this.state.selected_attendance_set)||void 0===n?void 0:n.full_name},{title:"NID",value:null===(r=this.state.selected_attendance_set)||void 0===r?void 0:r.nid},{title:"Phone",value:null===(i=this.state.selected_attendance_set)||void 0===i?void 0:i.phone_numbers},{title:"Trainee category",value:null===(c=this.state.selected_attendance_set)||void 0===c?void 0:c.trainee_category_name}].map((function(e,t){return Object(y.jsxs)("div",{className:"p-2 px-3 bg-gray-100 flex gap-2 mb-1 rounded",children:[Object(y.jsx)("section",{className:"text-gray-500",children:e.title}),Object(y.jsx)("section",{className:"font-bold",children:e.value})]},t)}))})]}),Object(y.jsxs)("div",{className:"p-3 rounded border flex items-center",children:[Object(y.jsx)("section",{className:"flex-1 pr-4",children:Object(y.jsx)(N.a,{onChange:function(e){return l.setState({days:+e.target.value})},value:this.state.days,error:"",label:"Days",placeholder:"",name:""})}),Object(y.jsx)("section",{className:"pt-5",children:Object(y.jsx)(b.a,{size:"lg",theme:"success",type:"button",onClick:this.submitUpdateDays,loading:this.state.set_attendance_loading,children:"Update days"})})]})]})}),Object(y.jsx)("div",{className:"lg:sticky top-3 z-50 mb-",children:Object(y.jsx)(u.a,{children:Object(y.jsxs)("div",{className:"flex w-full py-2",children:[Object(y.jsx)("div",{className:"pr-2",children:Object(y.jsx)(b.a,{theme:"default",size:"sm",onClick:this.props.close,children:"Back"})}),Object(y.jsxs)("div",{className:"flex-1 ",children:[Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsxs)("div",{className:"flex-1",children:[Object(y.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"My Training room"}),Object(y.jsx)("span",{className:"text-sm text-gray-600",children:"Training: "}),Object(y.jsx)("br",{}),Object(y.jsxs)(m.a,{size:"md",children:[Object(y.jsx)("section",{className:"text-gray-400 pb-2 font-normal",children:Object(y.jsx)("b",{className:"text-black font-bold",children:this.props.training.training_title})})," "]})]}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)(b.a,{onClick:function(){return l.setState({add_new_trainee:!0})},size:"lg",type:"button",children:"Add Trainee"})})]}),Object(y.jsx)("div",{className:"bg-gray-50 rounded border p-2 grid grid-cols-3 gap-2",children:[{title:"Area",value:this.props.training.area_name},{title:"Sub-Area",value:this.props.training.sub_area},{title:"District",value:this.props.training.district_name},{title:"Start date",value:Object(g.a)(this.props.training.start_date)},{title:"End date",value:Object(g.a)(this.props.training.end_date)},{title:"Center name",value:this.props.training.center_name},{title:"Room name",value:this.props.training.room_name},{title:"Max Trainee",value:this.props.training.max_trainee}].map((function(e,t){return Object(y.jsxs)("section",{className:"p-2 rounded border bg-white px-4 flex gap-2",children:[Object(y.jsxs)("label",{className:"text-gray-400",children:[e.title,":"]}),Object(y.jsx)("label",{className:"font-bold",children:e.value})]},t)}))})]})]})})}),Object(y.jsx)(u.a,{children:Object(y.jsxs)("table",{className:"w-full my-1",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{className:"bg-yellow-50",children:[Object(y.jsx)("th",{className:"border p-2",children:"#"}),Object(y.jsx)("th",{className:"border p-2",children:"ID"}),Object(y.jsx)("th",{className:"border p-2",children:"Names"}),Object(y.jsx)("th",{className:"border p-2",children:"Phone number"}),Object(y.jsx)("th",{className:"border p-2",children:"Email"}),Object(y.jsx)("th",{className:"border p-2",children:"Trainee type"}),Object(y.jsx)("th",{className:"border p-2"}),Object(y.jsx)("th",{className:"border p-2"})]})}),Object(y.jsxs)("tbody",{children:[this.state.loading&&Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:9,className:"py-8 text-center",children:Object(y.jsx)("section",{className:"inline",children:Object(y.jsx)(x.a,{})})})}),this.state.trainee.map((function(e,t){return Object(y.jsxs)("tr",{className:"hover:bg-accent-400",children:[Object(y.jsx)("td",{className:"border p-2",children:t+1}),Object(y.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.nid}),Object(y.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.full_name}),Object(y.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.phone_numbers}),Object(y.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.email}),Object(y.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.trainee_category_name}),Object(y.jsx)("td",{className:"border p-2",children:null===e||void 0===e?void 0:e.attended_days}),Object(y.jsx)("td",{className:"border p-2 w-2",children:Object(y.jsx)(b.a,{size:"sm",theme:"accent-light",type:"button",onClick:function(){return l.setState({selected_attendance_set:e,days:e.attended_days||0})},children:"Attendance"})}),Object(y.jsx)("td",{className:"border p-2 w-2",children:Object(y.jsx)(b.a,{size:"sm",theme:"danger-light",type:"button",children:"Remove"})})]},t)}))]})]})})]})}}]),a}(l.a.Component),A=Object(o.b)((function(e){return{auth:e.auth}}),{})(R),E={target:null,msg:""},I=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,alert:E,trainings:[],selected:null,loading_trainings:!0},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;if(!this.props.auth.user)return this.setState({alert:{target:"MAIN-ERROR",msg:""}});Object(j.R)(null===(e=this.props.auth.user)||void 0===e?void 0:e.user_id,(function(e,a,s){e?t.setState({trainings:a,loading:!1}):t.setState({trainings:[],loading:!1,alert:{target:"MAIN-ERROR",msg:"Error: ".concat(s)}})}))}},{key:"render",value:function(){var e=this;return null!==this.state.selected?Object(y.jsx)(A,{training:this.state.selected,close:function(){return e.setState({selected:null})}}):Object(y.jsxs)(y.Fragment,{children:["MAIN-ERROR"===this.state.alert.target&&Object(y.jsx)(h.a,{theme:"danger",fixed:!0,children:this.state.alert.msg}),"MAIN-SUCCESS"===this.state.alert.target&&Object(y.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.alert.msg}),Object(y.jsx)("div",{className:"lg:sticky top-3 z-50 mb-4",children:Object(y.jsx)(u.a,{children:Object(y.jsxs)("div",{className:"flex w-full items-center py-2",children:[Object(y.jsx)("div",{className:"pr-4 text-4xl",children:Object(y.jsx)(d.d,{})}),Object(y.jsxs)("div",{className:"flex-1",children:[Object(y.jsx)(m.a,{size:"md",children:"My Trainings"}),Object(y.jsx)("p",{className:"text-gray-600 text-sm",children:"Trainings assigned to you"})]})]})})}),Object(y.jsx)(u.a,{children:Object(y.jsxs)("table",{className:"w-full my-1",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"border p-2",children:"#"}),Object(y.jsx)("th",{className:"border p-2",children:"Training title"}),Object(y.jsx)("th",{className:"border p-2",children:"Start date"}),Object(y.jsx)("th",{className:"border p-2",children:"End Date"}),Object(y.jsx)("th",{className:"border p-2",children:"Center"}),Object(y.jsx)("th",{className:"border p-2",children:"District"}),Object(y.jsx)("th",{className:"border p-2",children:"Group capacity"}),Object(y.jsx)("th",{className:"border p-2",children:"Attended"}),Object(y.jsx)("th",{className:"border p-2"})]})}),Object(y.jsxs)("tbody",{children:[this.state.loading&&Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:9,className:"py-8 text-center",children:Object(y.jsx)("section",{className:"inline",children:Object(y.jsx)(x.a,{})})})}),this.state.trainings.length<=0&&Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:9,className:"py-8 text-center",children:Object(y.jsx)("section",{className:"inline text-2xl text-gray-300",children:"No trainings group assigned to you"})})}),this.state.trainings.map((function(t,a){return Object(y.jsxs)("tr",{className:"hover:bg-accent-400",children:[Object(y.jsx)("td",{className:"border p-2",children:a+1}),Object(y.jsx)("td",{className:"border p-2",children:t.training_title}),Object(y.jsx)("td",{className:"border p-2",children:Object(g.a)(t.start_date)}),Object(y.jsx)("td",{className:"border p-2",children:Object(g.a)(t.end_date)}),Object(y.jsx)("td",{className:"border p-2",children:t.center_name}),Object(y.jsx)("td",{className:"border p-2",children:t.district_name}),Object(y.jsx)("td",{className:"border p-2",children:t.total_trainee}),Object(y.jsx)("td",{className:"border p-2",children:t.max_trainee}),Object(y.jsx)("td",{className:"border p-2 w-2",children:Object(y.jsx)(b.a,{size:"sm",theme:"accent-light",type:"button",onClick:function(){return e.setState({selected:t})},children:"Open"})})]},a)}))]})]})})]})}}]),a}(l.a.Component),C=Object(o.b)((function(e){return{auth:e.auth}}),{})(I)}}]);
//# sourceMappingURL=48.ac6613f6.chunk.js.map