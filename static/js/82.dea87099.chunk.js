(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[82],{599:function(t,e,n){"use strict";n.r(e),n.d(e,"TrainingsList",(function(){return N}));var i=n(41),a=n(19),r=n(20),s=n(21),l=n(22),c=n(4),d=n.n(c),o=n(42),g=n(36),u=n(13),h=n(47),j=n(23),_=n(54),x=n(92),b=n(24),m=n(480),f=n(481),p=n(453),O=n(1),v={target:null,msg:""},S=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).selectTrainingToEdit=function(t){r.setState({selected_training_edit:t})},r.clearError=function(){return setTimeout((function(){r.setState({alert:v})}),3e3)},r.createTrainingDraft=function(){var t;window.confirm("Are you sure you want to request for training application?")&&(r.setState({loading_create_training_draft:!0}),Object(u.q)((null===(t=r.props.auth.stakeholder)||void 0===t?void 0:t.development_partner_id)+"",(function(t,e,n){r.setState({loading_create_training_draft:!1,trainings:t&&e?[e].concat(Object(i.a)(r.state.trainings)):r.state.trainings,selected_training_edit:t&&e?e.id:r.state.selected_training_edit,alert:t?v:{target:"MAIN-ERROR",msg:"Error: ".concat(n)}}),r.clearError()})))},r.deleteTraining=function(t){window.confirm("Are you sure you want to delete the training?")&&(r.setState({delete_training:t.toString()}),Object(u.v)(t.toString(),(function(e,n){r.setState({delete_training:null,trainings:e?r.state.trainings.filter((function(e){return e.id.toString()!==t.toString()})):r.state.trainings,alert:e?{target:"MAIN-SUCCESS",msg:"Training has been deleted successfully!"}:{target:"MAIN-ERROR",msg:"Error: ".concat(n)}}),r.clearError()})))},r.state={loading:!0,alert:v,selected_training_edit:null,selected_training_details:null,trainings:[],loading_create_training_draft:!1,delete_training:null},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t,e;if(null===(t=this.props.auth.stakeholder)||void 0===t||!t.development_partner_id)return this.setState({loading:!1,alert:{msg:"No Training institution assigned to you",target:"MAIN-ERROR"}});this.getTrainings(null===(e=this.props.auth.stakeholder)||void 0===e?void 0:e.development_partner_id)}},{key:"getTrainings",value:function(t){var e=this;this.setState({loading:!0}),Object(u.P)(t,(function(t,n,i){e.setState({loading:!1,alert:t?v:{target:"MAIN-ERROR",msg:i},trainings:n}),e.clearError()}))}},{key:"render",value:function(){var t,e=this;return null!==this.state.selected_training_edit?Object(O.jsx)(m.a,{training_id:this.state.selected_training_edit,close:function(){return e.setState({selected_training_edit:null})}}):null!==this.state.selected_training_details?Object(O.jsx)(f.a,{deleteUpdate:function(){var t;e.setState({selected_training_details:null}),e.getTrainings((null===(t=e.props.auth.stakeholder)||void 0===t?void 0:t.development_partner_id)+"")},training_id:this.state.selected_training_details,close:function(){return e.setState({selected_training_details:null})},editTraining:function(t){return e.setState({selected_training_edit:t})}}):Object(O.jsxs)(O.Fragment,{children:["MAIN-ERROR"===this.state.alert.target&&Object(O.jsx)(h.a,{theme:"danger",fixed:!0,children:this.state.alert.msg}),"MAIN-SUCCESS"===this.state.alert.target&&Object(O.jsx)(h.a,{theme:"success",fixed:!0,children:this.state.alert.msg}),Object(O.jsx)("div",{className:"lg:sticky top-3 z-50 mb-4",children:Object(O.jsx)(_.a,{children:Object(O.jsxs)("div",{className:"flex w-full items-center py-2",children:[Object(O.jsx)("div",{className:"pr-4 text-4xl",children:Object(O.jsx)(o.d,{})}),Object(O.jsxs)("div",{className:"flex-1",children:[Object(O.jsx)(x.a,{size:"md",children:"Trainings list"}),Object(O.jsx)("p",{className:"text-gray-600 text-sm",children:"Training institution"})]}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)(j.a,{size:"md",type:"button",onClick:this.createTrainingDraft.bind(this,(null===(t=this.props.auth.stakeholder)||void 0===t?void 0:t.development_partner_id)+""),theme:"success-light",loading:this.state.loading_create_training_draft,children:"Create a training draft"})})]})})}),Object(O.jsxs)("div",{className:"container mx-auto px-2",children:[!0===this.state.loading&&Object(O.jsx)("div",{className:"mx-auto py-6 text-center",children:Object(O.jsx)("div",{className:"inline",children:Object(O.jsx)(b.a,{})})}),this.state.trainings.length<=0&&!1===this.state.loading&&Object(O.jsxs)("div",{className:"mx-auto py-8 text-center opacity-50",children:[Object(O.jsx)("h1",{className:"text-9xl text-center mx-auto",children:Object(O.jsx)(o.d,{className:"inline"})}),Object(O.jsx)("h2",{className:"text-2xl font-bold",children:"No Trainings found"}),Object(O.jsxs)("p",{className:"text-gray-500",children:["You can add a new training request ",Object(O.jsx)("br",{})," by clicking on"," ",Object(O.jsx)("u",{children:"Requesting new training"})]})]}),this.state.trainings.map((function(t,n){return Object(O.jsx)(p.a,{training:t,viewDetails:function(t){return e.setState({selected_training_details:t.toString()})},deleteTraining:e.deleteTraining,update_loading:null,editTraining:function(t){return e.setState({selected_training_edit:t.toString()})},delete_loading:e.state.delete_training},n)}))]})]})}}]),n}(d.a.Component),N=Object(g.b)((function(t){return{auth:t.auth}}),{})(S)}}]);
//# sourceMappingURL=82.dea87099.chunk.js.map