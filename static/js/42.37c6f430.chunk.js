(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[42],{139:function(e,t,s){"use strict";var c=s(20),a=s(2),n=s(54),l=s(13),r=s(26),i=s(1),o=void 0;t.a=function(e){var t=e.permutation,s=e.more,d=void 0!==s&&s,b=e.approveUser,j=e.approveReb,u=e.loading,m=void 0!==u&&u,x=e.close,h=Object(a.useState)(!1),p=Object(c.a)(h,2),O=p[0],f=p[1],g=!0===d||O,v=t.usersInfo.find((function(e){return e.user_id===t.user_one})),N=t.usersInfo.find((function(e){return e.user_id===t.user_two})),_=t.schools.find((function(e){return e.school_code===t.school_one})),y=t.schools.find((function(e){return e.school_code===t.school_two})),S=function(e,t){return void 0===e||void 0===t?Object(i.jsx)("div",{className:"p-2 text-center text-lg",children:"No users found"}):Object(i.jsxs)("div",{className:"flex-1 w-full rounded bg-white border",children:[Object(i.jsxs)("div",{className:"rounded m-1 border flex ".concat(!0===g?"":"items-center"),children:[Object(i.jsx)("section",{children:Object(i.jsx)(l.a,{className:"text-gray-400",size:g?80:30})}),Object(i.jsx)("div",{className:"flex-1 pl-2",children:[{label:"Names: ",value:e.full_name,more:!0,inline:!1},{label:"Staff code: ",value:e.staff_code,more:!1,inline:!0},{label:"NID: ",value:e.nid,more:!1,inline:!0},{label:"Sex: ",value:e.sex,more:!1,inline:!0},{label:"Phone number: ",value:e.phone_numbers,inline:!0,more:!1},{label:"Martial status: ",value:e.marital_status,inline:!0,more:!1}].map((function(e,t){return!1===e.more&&!1===g?null:e.value?Object(i.jsxs)("section",{className:"border-b ".concat(!0===e.inline?"flex py-1 items-center":""),children:[Object(i.jsx)("span",{className:"text-sm text-gray-500 block",children:null===e||void 0===e?void 0:e.label}),Object(i.jsx)("h2",{className:" ".concat(!1===e.inline?"-mt-1":"pl-2"," font-bold block "),children:null===e||void 0===e?void 0:e.value})]},t):null}))})]}),Object(i.jsxs)("div",{className:"rounded m-1 border flex items-center mt-3",children:[Object(i.jsx)("section",{className:"px-4",children:Object(i.jsx)(n.c,{className:"text-gray-400",size:g?50:20})}),Object(i.jsx)("div",{className:"flex-1",children:[{label:"School code: ",value:t.school_code,inline:!0,more:!0},{label:"School name: ",value:t.school_name,inline:!0,more:!1}].map((function(e,t){return!0===e.more&&!1===g?null:e.value?Object(i.jsxs)("section",{className:"border-b ".concat(!0===e.inline?"flex py-1 items-center":""),children:[Object(i.jsx)("span",{className:"text-sm text-gray-500 block",children:null===e||void 0===e?void 0:e.label}),Object(i.jsx)("h2",{className:" ".concat(!1===e.inline?"-mt-1":"pl-2"," font-bold block "),children:null===e||void 0===e?void 0:e.value})]},t):null}))})]})]})};return Object(i.jsxs)("div",{className:"bg-white p-2 mb-3 rounded animate__animated animate__zoomIn animate__faster",children:[x&&!m&&Object(i.jsx)("div",{className:"text-right pb-2 border-b mb-2",children:Object(i.jsx)(r.a,{className:"",onClick:x,theme:"danger-light",children:"Close"})}),Object(i.jsxs)("div",{className:"items-center flex flex-col md:flex-row cursor-pointer",onClick:f.bind(o,!g),children:[S(v,_),Object(i.jsx)("div",{className:"-mx-2 z-40 ",children:Object(i.jsx)(l.cb,{className:"rounded ".concat("Approved"===t.reb_status?"text-green-500":"text-accent-900"," "),size:50})}),S(N,y)]}),g&&Object(i.jsxs)("div",{className:"pt-3",children:[Object(i.jsx)("div",{className:"p-1 px-2 rounded mt-2 border grid lg:grid-cols-3 gap-1 ",children:[{label:"Permutation Code: ",value:t.permutation_code,inline:!0},{label:"Position: ",value:"".concat(t.position_code," - ").concat(t.position_name),inline:!0},{label:"Qualification name: ",value:t.qualification_name,inline:!0},{label:"Qualification name: ",value:t.role,inline:!0},{label:"Initiated date: ",value:t.user_one_date,inline:!0},{label:"Accepted date: ",value:t.user_two_date,inline:!0}].map((function(e,t){return Object(i.jsxs)("section",{className:"border-b border-l pl-2 ".concat(!0===e.inline?"flex py-1 items-center":""),children:[Object(i.jsx)("span",{className:"text-sm text-gray-500 block",children:null===e||void 0===e?void 0:e.label}),Object(i.jsx)("h2",{className:" ".concat(!1===e.inline?"-mt-1":"pl-2"," font-bold block "),children:null===e||void 0===e?void 0:e.value})]},t)}))}),Object(i.jsxs)("div",{className:"grid grid-cols-2 pt-3 items-center",children:[Object(i.jsxs)("div",{className:"flex gap-1",children:[t.reb_status&&Object(i.jsxs)("section",{className:"flex items-center gap-1 px-2 py-0.5 rounded-lg  ".concat("Accepted"===t.permutation_status?"bg-green-100 text-green-900":"bg-accent-400 text-accent-900"),children:[Object(i.jsx)("span",{className:"text-xs opacity-70",children:"User status"}),Object(i.jsx)("h5",{className:"text  block  font-bold ",children:t.permutation_status})]}),t.reb_status&&Object(i.jsxs)("section",{className:"flex items-center gap-1 px-2 py-0.5 rounded-lg  ".concat("Approved"===t.reb_status?"bg-green-100 text-green-900":"bg-accent-400 text-accent-900"),children:[Object(i.jsx)("span",{className:"text-xs opacity-70",children:"REB status"}),Object(i.jsx)("h5",{className:"text  block  font-bold ",children:t.reb_status})]})]}),Object(i.jsxs)("div",{className:"text-right grid gap-2",children:[b&&Object(i.jsx)(r.a,{onClick:b.bind(o,t.permutation_id),loading:m,size:"lg",children:"Approve permutation"}),j&&Object(i.jsx)(i.Fragment,{children:"Approved"!==t.reb_status&&Object(i.jsx)(r.a,{onClick:j.bind(o,t.permutation_id),loading:m,size:"lg",children:"Approve permutation"})})]})]})]})]})}},178:function(e,t,s){"use strict";s.r(t),s.d(t,"RebAprovePermutation",(function(){return O}));var c=s(4),a=s(30),n=s(31),l=s(32),r=s(33),i=s(2),o=s.n(i),d=s(17),b=s(10),j=s(34),u=s(44),m=s(43),x=s(139),h=s(1),p=function(e){Object(l.a)(s,e);var t=Object(r.a)(s);function s(e){var n;return Object(a.a)(this,s),(n=t.call(this,e)).componentDidMount=function(){n.loadData(1,12)},n.loadData=function(e,t){n.setState({loading:!0}),Object(b.W)(e+"",t+"",(function(e,t,s){!0===e&&null!==t?n.setState({error:{target:null,msg:""},loading:!1,permutations:null===t||void 0===t?void 0:t.permutations,limit:0,page:0}):n.setState({error:{target:"main-error",msg:s},loading:!1,permutations:[],limit:0,page:0})}))},n.approveRebPermutation=function(e){n.setState({loading_approve:e+""}),Object(b.V)(e+"",(function(t,s){!0===t?n.setState({loading_approve:"",error:{target:"main-success",msg:""},permutations:n.state.permutations.map((function(t){return t.permutation_id===e+""?Object(c.a)(Object(c.a)({},t),{},{reb_status:"Approved"}):t}))}):n.setState({loading_approve:"",error:{msg:s,target:"main-error"},permutations:[]})})),console.log(e),console.log("data are here")},n.state={loading:!0,permutations:[],selected_permutation:"",error:{target:null,msg:""},page:1,limit:20,loading_approve:""},n}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return!0===this.state.loading?Object(h.jsxs)("div",{className:"py-8 text-center",children:[Object(h.jsx)(m.a,{}),Object(h.jsx)("h4",{className:"text-lg pt-2 text-gray-600",children:"Loading permutations..."})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{className:"p-2 flex",children:Object(h.jsx)("section",{className:"",children:Object(h.jsx)(u.a,{children:"Permutations"})})}),Object(h.jsx)("div",{className:"px-2 container mx-auto",children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"p-1 rounded",children:Object(h.jsxs)("table",{className:" w-full rounded",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{className:"bg-white",children:[Object(h.jsx)("th",{className:"border p-2 text-left",children:"#"}),Object(h.jsxs)("th",{className:"border p-2 text-left bg-blue-50",children:["Candidate 1"," ",Object(h.jsx)("span",{className:"text-xs bg-yellow-500 px-2 py-0.5 rounded-full",children:"Initiator"})]}),Object(h.jsx)("th",{className:"border p-2 text-left bg-blue-50",children:"School 1"}),Object(h.jsx)("th",{className:"border p-2 text-left bg-blue-50",children:"Candidate 2"}),Object(h.jsx)("th",{className:"border p-2 text-left bg-blue-50",children:"School 2"}),Object(h.jsx)("th",{className:"border p-2 text-left",children:"Users status"}),Object(h.jsx)("th",{className:"border p-2 text-left",children:"Dates"})]})}),Object(h.jsx)("tbody",{children:this.state.permutations.map((function(t,s){var c=t.usersInfo.find((function(e){return e.user_id===t.user_one})),a=t.usersInfo.find((function(e){return e.user_id===t.user_two})),n=t.schools.find((function(e){return e.school_code===t.school_one})),l=t.schools.find((function(e){return e.school_code===t.school_two}));return e.state.selected_permutation===t.permutation_id?Object(h.jsx)("tr",{className:"",children:Object(h.jsx)("td",{colSpan:30,className:"pt-1",children:Object(h.jsx)(x.a,{more:!0,permutation:t,approveReb:e.approveRebPermutation,loading:e.state.loading_approve===t.permutation_id,close:function(){return e.setState({selected_permutation:""})}})})},s):Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{className:"p-1"})}),Object(h.jsxs)("tr",{className:"hover:bg-blue-200 cursor-pointer bg-white my-2",onClick:function(){return e.setState({selected_permutation:t.permutation_id+""})},children:[Object(h.jsx)("td",{className:"border p-2",children:s+1}),Object(h.jsxs)("td",{className:"border p-2 bg-blue-100 bg-opacity-20",children:[Object(h.jsx)("h6",{className:"font-bold",children:null===c||void 0===c?void 0:c.full_name}),Object(h.jsx)("span",{title:"Staff code",className:"text-sm text-gray-400",children:null===c||void 0===c?void 0:c.staff_code})]}),Object(h.jsxs)("td",{className:"border p-2 bg-blue-200 bg-opacity-20",children:[Object(h.jsx)("h6",{className:"font-bold",children:null===n||void 0===n?void 0:n.school_name}),Object(h.jsx)("span",{title:"School code",className:"text-sm text-gray-400",children:t.school_one})]}),Object(h.jsxs)("td",{className:"border p-2 bg-indigo-100 bg-opacity-20",children:[Object(h.jsx)("h6",{className:"font-bold",children:null===a||void 0===a?void 0:a.full_name}),Object(h.jsx)("span",{title:"Staff code",className:"text-sm text-gray-400",children:null===a||void 0===a?void 0:a.staff_code})]}),Object(h.jsxs)("td",{className:"border p-2 bg-indigo-200 bg-opacity-20",children:[Object(h.jsx)("h6",{className:"font-bold",children:null===l||void 0===l?void 0:l.school_name}),Object(h.jsx)("span",{title:"School code",className:"text-sm text-gray-400",children:t.school_two})]}),Object(h.jsxs)("td",{className:"border p-2",children:[Object(h.jsxs)("h6",{className:"text-sm",children:["User: ",Object(h.jsx)("b",{children:t.permutation_status})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("h6",{className:"text-sm",children:["REB:"," ",Object(h.jsx)("b",{className:"".concat("Approved"===t.reb_status?"text-green-500":""),children:t.reb_status})]})]}),Object(h.jsxs)("td",{className:"border p-2",children:[Object(h.jsxs)("h6",{className:"text-sm",children:["Created: ",Object(h.jsx)("b",{children:t.user_one_date})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("h6",{className:"text-sm",children:["User 2: ",Object(h.jsx)("b",{children:t.user_two_date})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("h6",{className:"text-sm",children:["REB: ",Object(h.jsx)("b",{children:t.user_two_date})]})]})]})]},s)}))})]})})})})]})}}]),s}(o.a.Component),O=Object(d.b)((function(e){return{auth:e.auth}}),{})(p)}}]);
//# sourceMappingURL=42.37c6f430.chunk.js.map