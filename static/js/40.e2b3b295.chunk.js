(this.webpackJsonpTMIS=this.webpackJsonpTMIS||[]).push([[40],{109:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return r}));var a,c,r,n=s(13),i=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(a||(a={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(c||(c={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(r||(r={}));t.c=function(e){var t,s=e.title,l=e.backDrop,d=e.theme,o=e.close,x=e.backDropClose,j=e.widthSizeClass,h=e.displayClose,b=e.padding,m=void 0===b?{title:!0,body:!0,footer:!0}:b;switch(d){case a.primary:t="blue-primary";break;case a.secondary:t="gray-300";break;case a.danger:t="red-500";break;case a.success:t="green-500";break;case a.warning:t="yellow-500";break;default:t="white"}return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{onClick:function(){return x&&o()},className:"fixed bg-black bg-opacity-".concat(!0===l?"60":"0"," h-full w-full left-0 top-0 z-50 animate__animated animate__fadeIn animate__faster")}),Object(i.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?c.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(j," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==c.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(j===r.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(i.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===m.title?"py-4 px-4":""," rounded-t text-").concat(d===a.default||d===a.secondary?"black":"white"),children:[s&&""!==s?Object(i.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(i.jsx)("div",{}),!1===h?"":Object(i.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(i.jsx)(n.k,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return o()}})})]}),Object(i.jsx)("div",{className:"space-x-3 ".concat(!0===m.body?"py-4 px-4":""),children:Object(i.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(i.jsx)("div",{className:"flex float-right ".concat(!0===m.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},184:function(e,t,s){"use strict";s.r(t),s.d(t,"TransferApproval",(function(){return L}));var a,c=s(31),r=s(32),n=s(33),i=s(34),l=s(2),d=s(13),o=s(17),x=s(11),j=s(28),h=s(20),b=s(141),m=s(5),u=s(30),p=s(7),f=s(3),O=s.n(f),g=s(6),v=s.n(g),_=s(40),y=s(10),N=s(139),w=s(1);!function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.CANCELED="CANCELED"}(a||(a={}));var k=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).GetTransferRequestsDetailsList=function(){var e=Object(p.a)(O.a.mark((function e(t){var s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,v.a.get("".concat(y.d,"/teachertransfer/districtDetails/").concat(t));case 4:200===(s=e.sent).status&&(a.setState({data:s.data,loading:!1,filterSchools:0===s.data.length?[]:s.data.filter((function(e){return null!==e.requested_school_info})).map((function(e){var t,s=[],a=Object(u.a)(e.requested_school_info);try{for(a.s();!(t=a.n()).done;){var c=t.value;s.push({school_code:c.school_code,district_name:c.district_name,school_name:c.school_name,sector_name:c.sector_name})}}catch(r){a.e(r)}finally{a.f()}return s}))[0]}),console.log("Res: ",s.data)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: ",Object(m.a)({},e.t0)),a.setState({data:[],loading:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.ReturnFilteredData=function(){if(null===a.state.data)return[];var e=a.state.data;return e=null===a.state.selected_status?a.state.data:a.state.data.filter((function(e){return e.requested_status===a.state.selected_status})),e=null===a.state.selected_filterSchool?e:e.filter((function(e){var t;return void 0!==(null===(t=e.requested_school_info)||void 0===t?void 0:t.find((function(e){return e.school_code===a.state.selected_filterSchool})))})),Object(h.h)(e,a.state.searchData)},a.componentDidMount=function(){a.GetTransferRequestsDetailsList(a.props.transferDetails.district_code)},a.state={loading:!1,searchData:"",data:null,selected_status:null,filterSchools:[],selected_filterSchool:null},a}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return null===this.state.data||!0===this.state.loading?Object(w.jsx)(j.a,{children:Object(w.jsxs)("div",{className:"flex flex-col items-center justify-center p-3",children:[Object(w.jsx)(_.a,{}),Object(w.jsx)("div",{className:"",children:"Loading, please wait..."})]})}):Object(w.jsxs)(j.a,{children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(w.jsxs)("div",{onClick:this.props.backToApproval,className:"flex flex-row items-center gap-2 bg-blue-100 text-primary-800 hover:text-white hover:bg-primary-800 rounded cursor-pointer px-3 py-2 font-bold",children:[Object(w.jsx)("div",{children:Object(w.jsx)(d.y,{className:"text-2xl"})}),Object(w.jsx)("span",{children:"Back"})]}),Object(w.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"text-2xl font-light -mb-1 text-gray-700",children:"Transfer requests details"}),Object(w.jsx)("div",{className:"flex flex-row items-center w-full justify-between",children:Object(w.jsxs)("div",{className:"font-extrabold text-black text-lg ml-1 flex items-center gap-2",children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"",children:Object(w.jsx)(d.Z,{className:"text-2xl"})})}),Object(w.jsxs)("span",{children:[this.props.transferDetails.district_name," district"]})]})})]}),Object(w.jsx)("div",{children:Object(w.jsxs)("select",{onChange:function(t){return e.setState({selected_status:""===t.target.value?null:t.target.value})},value:null===this.state.selected_status?"":this.state.selected_status,className:"border border-gray-500 rounded px-3 py-2",children:[Object(w.jsx)("option",{value:"",children:"Filter by status"}),Object(w.jsx)("option",{value:"",children:"All requests"}),[{key:a.PENDING,value:"Waiting requests"},{key:a.APPROVED,value:"Approved requests"},{key:a.REJECTED,value:"Rejected requests"}].map((function(e,t){return Object(w.jsx)("option",{value:e.key,children:e.value},t+1)}))]})})]})]})}),Object(w.jsx)("div",{className:"",children:Object(w.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full mt-2",children:[Object(w.jsx)("div",{children:Object(w.jsxs)("select",{onChange:function(t){return e.setState({selected_filterSchool:""===t.target.value?null:t.target.value})},className:"px-3 py-2 rounded border border-gray-500",children:[Object(w.jsx)("option",{value:"",children:"All requested schools"}),this.state.filterSchools.map((function(e,t){return Object(w.jsx)("option",{value:e.school_code,children:e.school_name},t+1)}))]})}),Object(w.jsx)("div",{className:"",children:Object(w.jsxs)("div",{className:"border border-blue-400 text-primary-800 rounded px-3 py-2 flex flex-row items-center gap-2",children:[Object(w.jsx)("div",{children:Object(w.jsx)(N.a,{className:"text-xl"})}),Object(w.jsx)("span",{children:"Export"})]})})]})}),Object(w.jsx)("div",{children:Object(w.jsxs)("table",{className:"w-full mt-5",children:[Object(w.jsx)("thead",{className:"bg-blue-100 text-primary-800 text-left text-sm",children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Full name"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Qualification"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Position"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Phone number"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Current district"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Current school"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Requested school"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Accepted school"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"Status"})]})}),Object(w.jsxs)("tbody",{children:[Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:10,children:Object(w.jsx)("input",{onChange:function(t){return e.setState({searchData:t.target.value})},placeholder:"Search by name",className:"border border-gray-400 px-3 py-2 rounded w-full my-1"})})}),0===this.ReturnFilteredData().length?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:10,className:"",children:Object(w.jsx)("div",{className:"bg-gray-100 rounded-md p-5 text-2xl font-light text-center",children:"No requests found!"})})}):this.ReturnFilteredData().map((function(e,t){var s,c,r;return Object(w.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":""," hover:bg-blue-50 group text-sm"),children:[Object(w.jsx)("td",{className:"px-3 py-2",children:t+1}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.teacher_full_name}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.qualification_name}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.position_name}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.teacher_phone_number}),Object(w.jsx)("td",{className:"px-3 py-2",children:null===(s=e.school_from_info)||void 0===s?void 0:s.district_name}),Object(w.jsx)("td",{className:"px-3 py-2",children:null===(c=e.school_from_info)||void 0===c?void 0:c.school_name}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.requested_school_info.map((function(e,t){return Object(w.jsxs)("div",{children:[e.school_name,", ",""]})}))}),Object(w.jsx)("td",{children:null===(r=e.approved_school_info)||void 0===r?void 0:r.school_name}),Object(w.jsx)("td",{children:e.requested_status===a.PENDING?"Waiting":e.requested_status})]},t+1)}))]})]})})]})}}]),s}(l.Component),D=s(109),C=s(54),S=s(36),T=s(29),A=function(e){return Object(w.jsx)("div",{children:e.index<=3?Object(w.jsxs)("div",{className:"bg-gray-800 font-bold flex flex-row items-center justify-between px-3 py-2 mb-1 animate__animated animate__zoomIn",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsx)("div",{className:"bg-green-600 text-white rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(w.jsx)("div",{className:"text-green-400",children:e.district_detail.district_name})]}),Object(w.jsx)("div",{children:Object(w.jsx)(T.b,{className:"text-xl text-green-500"})})]}):4===e.index?Object(w.jsxs)("div",{className:"bg-accent-900 flex flex-row items-center justify-between px-3 py-2 mb-1",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2 font-bold",children:[Object(w.jsx)("div",{className:"bg-white text-accent-900 rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(w.jsx)("div",{children:e.district_detail.district_name})]}),Object(w.jsx)("div",{children:Object(w.jsx)(S.c,{className:"text-xl animate-spin"})})]}):Object(w.jsxs)("div",{className:"bg-gray-800 flex flex-row items-center justify-between px-3 py-2 mb-1  animate__animated animate__fadeIn",children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsx)("div",{className:"bg-gray-500 rounded-full flex items-center h-6 w-6 justify-center",children:e.index}),Object(w.jsx)("div",{children:e.district_detail.district_name})]}),Object(w.jsx)("div",{children:Object(w.jsx)(d.J,{className:"text-xl animate-pulse text-gray-400"})})]})})},R=s(140),q=s.n(R),I=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){setInterval((function(){a.state.count<1e4&&a.setState({count:a.state.count+1})}),30)},a.state={count:0,loading:!1,chartData:{options:{chart:{id:"basic-bar"},xaxis:{categories:["Nyarugenge","Kicukiro","Gasabo","Muhanga","Kayonza","Nyaruguru","Kamonyi","Musanze","Gicumbi","Rubavu"]}},series:[{name:"series-1",data:[1,2,4,1,8,3,5,7,9,5]}]}},a}return Object(r.a)(s,[{key:"render",value:function(){return Object(w.jsx)(l.Fragment,{children:Object(w.jsxs)("div",{className:"h-screen bg-white fixed z-40 left-0 right-0 animate__animated animate__fadeIn",children:[Object(w.jsx)("div",{className:"bg-primary-800 text-white fixed top-18 left-0 right-0 w-full z-50",children:Object(w.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[Object(w.jsxs)("div",{className:"px-3 py-2 flex flex-row items-center gap-2",children:[Object(w.jsx)("div",{children:Object(w.jsx)(C.d,{className:"text-5xl -mt-1 animate__animated animate__flash"})}),Object(w.jsx)("div",{className:"text-2xl font-extrabold",children:"Transfer runner"})]}),Object(w.jsx)("div",{className:"px-2",children:Object(w.jsx)("div",{className:"bg-green-600 hover:bg-green-800 rounded-md font-bold px-3 py-2 cursor-pointer border border-white",children:"Reload process"})})]})}),Object(w.jsxs)("div",{className:"bg-black h-full overflow-y-auto text-white pt-12 grid grid-cols-12",children:[Object(w.jsx)("div",{className:"col-span-3 w-full h-full bg-gray-700 pt-3",children:this.props.districts_requests.map((function(e,t){return Object(w.jsx)(A,{index:t+1,district_detail:e},t)}))}),Object(w.jsxs)("div",{className:"col-span-9 pt-6 pl-3",children:[Object(w.jsxs)("div",{className:"flex flex-row w-full",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{}),Object(w.jsx)("div",{className:"font-extrabold text-lg text-gray-400",children:"Placement progress (Nyanza)"}),Object(w.jsxs)("div",{className:"bg-gray-800 h-52 border border-gray-700 rounded-md p-3 px-4 text-sm text-green-300 overflow-hidden cursor-not-allowed flex items-center justify-center gap-3  animate__animated animate__zoomIn",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:Object(w.jsx)(C.d,{className:"text-9xl text-gray-200 animate__animated animate__flash"})}),Object(w.jsxs)("div",{className:"flex flex-row items-center justify-center text-gray-400",children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)(d.H,{className:"text-xl animate-spin"})}),Object(w.jsx)("div",{children:"23 mins remaining"})]})]}),Object(w.jsxs)("div",{className:"flex flex-col text-xs font-extralight",children:[Object(w.jsx)("span",{children:"Initializing process ..."}),Object(w.jsx)("span",{children:"Placing process ..."}),Object(w.jsx)("span",{children:"Placing process, tasking ..."}),Object(w.jsx)("span",{children:"Placing process ..."}),Object(w.jsx)("span",{children:"Placing process ..."}),Object(w.jsx)("span",{children:"Placing process, waiting ..."})]})]})]}),Object(w.jsx)("div",{className:"pt-8 pl-3",children:Object(w.jsxs)("div",{className:"flex flex-row items-center gap-3 mb-3",children:[Object(w.jsxs)("div",{className:"bg-gray-600 rounded-md p-3 animate__animated animate__zoomIn",children:[Object(w.jsx)("div",{children:"Waiting"}),Object(w.jsx)("div",{className:"text-4xl font-extrabold",children:Object(h.f)(22382-this.state.count)})]}),Object(w.jsxs)("div",{className:"bg-green-800 rounded-md p-3 w-1/2 animate__animated animate__zoomIn",children:[Object(w.jsx)("div",{children:"Approved"}),Object(w.jsx)("div",{className:"text-4xl font-extrabold",children:Object(h.f)(this.state.count+(this.state.count-1))})]}),Object(w.jsxs)("div",{className:"bg-red-800 rounded-md p-3 w-1/2 animate__animated animate__zoomIn",children:[Object(w.jsx)("div",{children:"Rejected"}),Object(w.jsx)("div",{className:"text-4xl font-extrabold",children:Object(h.f)(this.state.count)})]})]})})]}),Object(w.jsx)("div",{className:"mr-2",children:Object(w.jsx)("div",{className:"h-4 w-full bg-gray-600 mt-2 rounded-full  animate__animated animate__fadeIn",children:Object(w.jsx)("div",{className:"bg-yellow-400 h-4 rounded-full",style:{width:"70%"}})})}),Object(w.jsxs)("div",{className:"mt-3",children:[Object(w.jsx)("div",{className:"mb-2 font-bold text-lg text-gray-400",children:"Districts Transfer monitoring"}),Object(w.jsx)("div",{className:"px-3 mr-2 rounded-md bg-gray-800",children:Object(w.jsx)(q.a,{options:this.state.chartData.options,series:this.state.chartData.series,type:"bar",width:"100%"})})]})]})]})]})})}}]),s}(l.Component),E=s.p+"static/media/robot2.79aa3484.gif",P=s(112),z=s(26),F=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).GetAlgorithmResults=function(){var e=Object(p.a)(O.a.mark((function e(t){var s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,v.a.get("".concat(y.d,"/teachertransfer/results/").concat(t));case 4:s=e.sent,a.setState({data:s.data,loading:!1,round:0===s.data.length?"1":s.data[s.data.length-1].round_id}),console.log("Res: ",s.data),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),a.setState({data:[],loading:!1}),console.log("error: ",e.t0),console.log("error: ",Object(m.a)({},e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),a.getData=function(){if(null!==a.state.data){var e=a.state.data.find((function(e){return e.round_id===a.state.round}));if(void 0!==e)return e.datas}return[]},a.getRounds=function(){var e=[];if(null!==a.state.data){var t,s=Object(u.a)(a.state.data);try{for(s.s();!(t=s.n()).done;){var c=t.value;e=[].concat(Object(z.a)(e),[c.round_id])}}catch(r){s.e(r)}finally{s.f()}}return e},a.componentDidMount=function(){null===a.state.data&&a.GetAlgorithmResults(a.props.academic_calendar.academic_year_id)},a.state={loading:!1,data:null,round:"1"},a}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return!0===this.state.loading||null===this.state.data?Object(w.jsx)(j.a,{children:Object(w.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 w-full text-center py-5",children:[Object(w.jsx)(_.a,{}),Object(w.jsx)("div",{children:"Loading..."})]})}):Object(w.jsxs)("div",{className:"p-4",children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsx)("span",{className:"font-bold text-3xl text-green-700",children:"Transfer algorithm results"}),Object(w.jsxs)("div",{className:"flex items-center justify-center my-3 gap-3",children:[Object(w.jsx)("select",{onChange:function(t){return e.setState({round:t.target.value})},className:"border border-gray-500 px-3 py-2 rounded",children:this.getRounds().map((function(e,t){return Object(w.jsxs)("option",{value:e,children:["Round ",e]},t+1)}))}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{onClick:function(){return e.GetAlgorithmResults(e.props.academic_calendar.academic_year_id)},className:"bg-accent-900 text-white px-3 py-2 rounded cursor-pointer",children:"Reload results"})}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{onClick:this.props.close,className:"bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded cursor-pointer",children:"Close window"})})]})]})}),Object(w.jsx)("div",{children:0===this.state.data.length?Object(w.jsx)("div",{className:"bg-gray-200 rounded-md p-6 text-center text-3xl",children:"No result found!"}):Object(w.jsxs)("table",{className:"w-full",children:[Object(w.jsx)("thead",{className:"bg-blue-100",children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"#"}),Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"District"}),Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"School code"}),Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"School name"}),Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"Position"}),Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"Teachers placed"}),Object(w.jsx)("th",{className:"px-3 py-2 text-left",children:"Vacants"})]})}),Object(w.jsx)("tbody",{children:this.getData().map((function(e,t){var s,a,c;return Object(w.jsxs)("tr",{className:"border-b",children:[Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:t+1}),Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:null===(s=e.school_info)||void 0===s?void 0:s.district_name}),Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:null===(a=e.school_info)||void 0===a?void 0:a.school_code}),Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:null===(c=e.school_info)||void 0===c?void 0:c.school_name}),Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:e.position_info.position_name}),Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:e.placed_teachers}),Object(w.jsx)("td",{className:"px-3 py-2 text-left",children:e.vacant_posts})]},t+1)}))})]})})]})}}]),s}(l.Component),G=function(e){Object(n.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){null===a.props.transferAlgorithm.transfers&&a.props.FC_Load_All_Transfers((function(e){return a.setState({loading:e})}))},a.TotalWaiting=function(e){if(null===e)return 0;var t=0;return e.map((function(e){return t+=parseInt(e.total_requested_pending)})),t},a.RunAlgorithm=function(){a.props.Run_Transfer_Algorithm((function(e){!1===e&&(a.setState({loading:!0}),a.props.FC_Load_All_Transfers((function(t){!0===t&&!1===e&&a.setState({loading:!1,success:"Transfer done successfully!"})})))}))},a.state={loading:!1,viewTransferDetails:null,confirm_run_algorithm:!1,run_algorithm_page:!1,success:"",view_algorithm_results:!1},a}return Object(r.a)(s,[{key:"render",value:function(){var e,t=this;return null===this.props.transferAlgorithm.transfers||!0===this.state.loading?Object(w.jsx)(j.a,{children:Object(w.jsxs)("div",{className:"flex flex-col items-center justify-center p-3",children:[Object(w.jsx)(_.a,{}),Object(w.jsx)("div",{className:"",children:"Loading, please wait..."})]})}):!0===this.state.run_algorithm_page?Object(w.jsx)(I,{districts_requests:this.props.transferAlgorithm.transfers}):null===this.state.viewTransferDetails?Object(w.jsxs)(l.Fragment,{children:[Object(w.jsxs)(j.a,{children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-4 justify-between",children:[Object(w.jsxs)("div",{className:"w-max",children:[Object(w.jsx)("div",{className:"text-3xl font-extrabold",children:"Transfer approval"}),Object(w.jsxs)("div",{className:"font-extrabold text-primary-800",children:["Academic year:"," ",null===(e=this.props.basic.academic_calender)||void 0===e?void 0:e.academic_year_name]})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsx)("div",{children:Object(w.jsx)(d.m,{})}),Object(w.jsx)("span",{children:"Transfer start date: "}),Object(w.jsx)("span",{children:this.props.basic.academic_calender&&Object(h.a)(this.props.basic.academic_calender.transfer_request_start)})]}),Object(w.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(w.jsx)("div",{children:Object(w.jsx)(d.m,{})}),Object(w.jsx)("span",{children:"Transfer ending date: "}),Object(w.jsx)("span",{children:this.props.basic.academic_calender&&Object(h.a)(this.props.basic.academic_calender.transfer_request_end)})]})]})]}),Object(w.jsxs)("div",{className:"border-t border-gray-400 my-5 flex flex-row items-center gap-3 justify-between py-2",children:[Object(w.jsx)("div",{className:"text-2xl font-light",children:"Transfer requests"}),Object(w.jsxs)("div",{onClick:function(){return t.setState({confirm_run_algorithm:!0})},className:"bg-accent-900 hover:bg-yellow-900 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max",children:[Object(w.jsx)("div",{children:Object(w.jsx)(b.a,{className:"text-2xl"})}),Object(w.jsx)("span",{children:"Run transfer algorithm"})]})]}),Object(w.jsx)("div",{children:Object(w.jsxs)("table",{className:"w-full",children:[Object(w.jsx)("thead",{className:"bg-blue-100 text-primary-800 text-left",children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"District code"}),Object(w.jsx)("th",{className:"px-3 py-2",children:"District name"}),Object(w.jsx)("th",{className:"px-3 py-2 text-center",children:"Approved"}),Object(w.jsx)("th",{className:"px-3 py-2 text-center",children:"Rejected"}),Object(w.jsx)("th",{className:"px-3 py-2 text-center",children:"Waiting"}),Object(w.jsx)("th",{className:"px-3 py-2 text-center",children:"Total"}),Object(w.jsx)("th",{className:"px-3 py-2 text-right"})]})}),Object(w.jsx)("tbody",{children:0===this.props.transferAlgorithm.transfers.length?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:8,className:"",children:Object(w.jsx)("div",{className:"bg-gray-100 rounded-md p-5 text-2xl font-light text-center my-2",children:"No requests found!"})})}):this.props.transferAlgorithm.transfers.map((function(e,s){return Object(w.jsxs)("tr",{className:"".concat(s%2!==0?"bg-gray-100":""," hover:bg-blue-50 group"),children:[Object(w.jsx)("td",{className:"px-3 py-2",children:s+1}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.district_code}),Object(w.jsx)("td",{className:"px-3 py-2",children:e.district_name}),Object(w.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_approved}),Object(w.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_rejected}),Object(w.jsx)("td",{className:"px-3 py-2 text-center",children:e.total_requested_pending}),Object(w.jsx)("td",{className:"px-3 py-2 text-center",children:parseInt(e.total_requested_approved)+parseInt(e.total_requested_rejected)+parseInt(e.total_requested_pending)}),Object(w.jsx)("td",{className:"py-2",children:Object(w.jsx)("div",{className:"w-full flex justify-end",children:Object(w.jsx)("div",{onClick:function(){return t.setState({viewTransferDetails:e})},className:"".concat(s%2!==0?"bg-white":"bg-gray-100"," group-hover:bg-blue-100 group-hover:text-primary-800 px-2 py-1 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max"),children:"Details"})})})]},s+1)}))})]})})]}),!0===this.state.view_algorithm_results&&Object(w.jsx)(D.c,{backDrop:!0,theme:D.b.default,close:function(){return t.setState({view_algorithm_results:!1})},backDropClose:!0,widthSizeClass:D.a.maxWidth,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:null!==this.props.basic.academic_calender&&Object(w.jsx)(F,{academic_calendar:this.props.basic.academic_calender,reload:function(){},close:function(){return t.setState({view_algorithm_results:!1,confirm_run_algorithm:!1,success:""})}})}),!0===this.state.confirm_run_algorithm&&Object(w.jsx)(D.c,{backDrop:!0,theme:D.b.default,close:function(){return!1===t.props.transferAlgorithm.placing_loading_status&&t.setState({confirm_run_algorithm:!1})},backDropClose:!0,widthSizeClass:D.a.medium,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:Object(w.jsx)("div",{className:"p-5 py-6",children:Object(w.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[Object(w.jsx)("div",{className:"text-accent-900 mt-3",children:""===this.state.success&&!1===this.props.transferAlgorithm.placing_loading_status&&Object(w.jsx)(C.d,{className:"text-8xl ".concat("animate-bounce")})}),!1===this.props.transferAlgorithm.placing_loading_status?""!==this.state.success?Object(w.jsxs)("div",{className:"flex flex-col w-full items-center justify-center p-4",children:[Object(w.jsx)("div",{children:Object(w.jsx)(S.b,{className:"text-9xl text-green-600"})}),Object(w.jsx)("div",{className:"text-center text-3xl w-full",children:this.state.success}),Object(w.jsxs)("div",{className:"text-center text-xl font-extrabold text-accent-900 w-full",children:[this.TotalWaiting(this.props.transferAlgorithm.transfers)," ","teachers waiting"]}),0===this.TotalWaiting(this.props.transferAlgorithm.transfers)?Object(w.jsx)("div",{onClick:function(){return t.setState({confirm_run_algorithm:!1,run_algorithm_page:!1,success:""})},className:"bg-green-600 rounded px-3 py-2 cursor-pointer text-white hover:bg-green-800",children:"Click to confirm transfer"}):Object(w.jsxs)("div",{onClick:function(){return t.RunAlgorithm()},className:"bg-accent-900 hover:bg-yellow-900 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max mt-4",children:[Object(w.jsx)("div",{children:Object(w.jsx)(b.a,{className:"text-2xl"})}),Object(w.jsx)("span",{children:"Run again"})]})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"text-3xl font-extrabold animate__animated animate__fadeIn",children:"Start transfer"}),Object(w.jsx)("div",{className:"text-center my-2 mb-5",children:"If you start the process, the robotra will start placing at all districts at time. Please make sure you have stable internet so that the action can not be interrupted"}),Object(w.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[Object(w.jsxs)("div",{onClick:function(){return!1===t.props.transferAlgorithm.placing_loading_status&&t.setState({confirm_run_algorithm:!1})},className:"bg-gray-200 hover:bg-gray-600 text-black hover:text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max",children:[Object(w.jsx)("div",{children:Object(w.jsx)(d.M,{className:"text-2xl"})}),Object(w.jsx)("span",{children:"Cancel"})]}),Object(w.jsxs)("div",{onClick:function(){return t.RunAlgorithm()},className:"bg-green-600 hover:bg-green-800 text-white px-3 py-2 cursor-pointer rounded font-bold flex flex-row items-center gap-2 w-max animate__animated animate__fadeIn",children:[Object(w.jsx)("div",{children:Object(w.jsx)(b.a,{className:"text-2xl"})}),Object(w.jsx)("span",{children:"Yes, start"})]})]})]}):Object(w.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[Object(w.jsx)("img",{src:E,alt:"TMIS",className:"w-80 animate__animated animate__zoomInUp"}),Object(w.jsxs)("div",{className:"text-gray-600 text-lg mb-5 text-center -mt-3 flex flex-row items-center gap-2 z-50",children:[Object(w.jsx)("div",{children:Object(w.jsx)(P.d,{className:"text-3xl animate-spin"})}),Object(w.jsx)("span",{children:"Transfer algorithm is running..."})]})]})]})})})]}):Object(w.jsx)(k,{transferDetails:this.state.viewTransferDetails,backToApproval:function(){t.setState({viewTransferDetails:null})}})}}]),s}(l.Component),L=Object(o.b)((function(e){return{auth:e.auth,basic:e.basic,transferAlgorithm:e.transferAlgorithm}}),{FC_Load_All_Transfers:x.Y,Run_Transfer_Algorithm:x.wb})(G)}}]);
//# sourceMappingURL=40.e2b3b295.chunk.js.map