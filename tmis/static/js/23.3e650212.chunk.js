(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[23],{106:function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return c}));var i,r,c,a=s(11),n=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(i||(i={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(r||(r={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(c||(c={}));t.c=function(e){var t,s=e.title,o=e.backDrop,d=e.theme,l=e.close,h=e.backDropClose,u=e.widthSizeClass,_=e.displayClose,m=e.padding,p=void 0===m?{title:!0,body:!0,footer:!0}:m;switch(d){case i.primary:t="blue-500";break;case i.secondary:t="gray-300";break;case i.danger:t="red-500";break;case i.success:t="green-500";break;case i.warning:t="yellow-500";break;default:t="white"}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{onClick:function(){return h&&l()},className:"animate__animated animate__fadeIn animate__faster modal fixed bg-black bg-opacity-".concat(!0===o?"60":"0")}),Object(n.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?r.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(u," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==r.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(u===c.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(n.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===p.title?"py-4 px-4":""," rounded-t text-").concat(d===i.default||d===i.secondary?"black":"white"),children:[s&&""!==s?Object(n.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(n.jsx)("div",{}),!1===_?"":Object(n.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(n.jsx)(a.h,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return l()}})})]}),Object(n.jsx)("div",{className:"space-x-3 ".concat(!0===p.body?"py-4 px-4":""),children:Object(n.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(n.jsx)("div",{className:"flex float-right ".concat(!0===p.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},112:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var i=s(26),r=s(27),c=s(28),a=s(29),n=s(2),o=s.n(n),d=s(11),l=s(16),h=s(12),u=s(113),_=s(25),m=s(30),p=s(48),j=s(106),b=s(24),x=s(1),f=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).componentDidMount=function(){r.props.district_code||r.loadDistricts(),void 0===r.props.school_code&&r.setState({current_school:!1})},r.loadDistricts=function(){r.state.districts.length<=0&&(r.setState({loading_districts:!0}),Object(h.q)((function(e,t,s){e?r.setState({loading_districts:!1,districts:t}):r.setState({loading_districts:!1,districts:[],error:{msg:s,target:"main-error"}})})))},r.selectDistrict=function(e){r.setState({selected_district:e.district_code,district_code:e.district_code,district_name:e.district_name,open_select_district:!1}),r.reloadDistrictResurces(e.district_code)},r.reloadDistrictResurces=function(e){e&&(r.setState({loading_resource:!0}),r.props.FC_GetAssignAssets(e,(function(e,t){e?r.setState({loading_resource:!1}):r.setState({loading_resource:!1,error:{target:"main-error",msg:"Failed to load district resource, please try again later"}})})))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,district_code:r.props.district_code?r.props.district_code:"",district_name:r.props.district_name?r.props.district_name:"",current_school:!0,selected_district:r.props.district_code?r.props.district_code:"",loading_resource:!1,error:{msg:"",target:null},loading_districts:!1,districts:[],open_select_district:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,i,r,c=this;return"user-updates-success"===this.state.error.target?Object(x.jsx)(m.a,{className:"animate__animated animate__zoomIn ",children:Object(x.jsxs)("div",{className:"text-center py-10",children:[Object(x.jsx)(d.g,{className:"text-8xl text-green-600 mx-auto"}),Object(x.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"The user has been updated successfully"}),Object(x.jsxs)("p",{className:"mt-2 text-gray-600 pb-4",children:["The information has been updated successfully, ",Object(x.jsx)("br",{})," you can close the window and continue with other users"]}),Object(x.jsx)(_.a,{theme:"success-light",onClick:function(){c.props.close(),c.props.refreshApp&&c.props.refreshApp()},children:"Goo back to the profile"})]})}):Object(x.jsxs)(x.Fragment,{children:["main-error"===this.state.error.target&&Object(x.jsx)(b.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(x.jsx)(b.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(x.jsxs)("div",{className:" ",children:[!0===this.state.open_select_district&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"fixed top-0 bottom-0 z-50 right-0 left-0 bg-black bg-opacity-60",onClick:function(){return c.setState({open_select_district:!1})}}),Object(x.jsx)(j.c,{backDrop:!0,backDropClose:!0,close:function(){return c.setState({open_select_district:!1})},title:"Choose district",displayClose:!0,theme:j.b.default,widthSizeClass:j.a.medium,padding:{title:!0,body:!0,footer:!0},children:!0===this.state.loading_districts?Object(x.jsx)(p.a,{className:"mx-auto text-center"}):0===this.state.districts.length?Object(x.jsx)("div",{className:"py-5 text-center",children:"No results found!"}):Object(x.jsx)("div",{children:this.state.districts.map((function(e,t){return Object(x.jsxs)("div",{className:"p-1 border-b flex hover:bg-yellow-50",children:[Object(x.jsx)("h6",{children:e.district_code}),Object(x.jsx)("h6",{className:"flex-1 font-bold px-4",children:e.district_name}),Object(x.jsx)(_.a,{theme:"accent-light",size:"sm",onClick:c.selectDistrict.bind(c,e),children:"Select district"})]},t)}))})})]}),Object(x.jsxs)("div",{className:"flex p-1 items-center border-b container mx-auto",children:[Object(x.jsx)("h1",{className:"text-2xl flex-1 font-bold ",children:"Change user schools & Position"}),Object(x.jsx)(_.a,{theme:"danger-light",onClick:this.props.close,children:"Close"})]}),void 0!==this.props.userDetails&&Object(x.jsx)(m.a,{children:Object(x.jsxs)("div",{className:" bg-white mb-2 rounded items-center flex",children:[Object(x.jsx)("div",{className:"",children:Object(x.jsx)(d.a,{className:"text-6xl"})}),Object(x.jsxs)("div",{className:"flex-1 pl-2 grid grid-cols-2",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Names: "})," ",Object(x.jsx)("b",{children:null===(e=this.props.userDetails)||void 0===e?void 0:e.full_name})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"NID: "})," ",Object(x.jsx)("b",{children:null===(t=this.props.userDetails)||void 0===t?void 0:t.nid})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Staff code: "})," ",Object(x.jsx)("b",{children:null===(s=this.props.userDetails)||void 0===s?void 0:s.staff_code})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-600",children:"Email: "})," ",Object(x.jsx)("b",{children:null===(i=this.props.userDetails)||void 0===i?void 0:i.email})]})]})]})}),Object(x.jsx)("div",{className:"my-2",children:Object(x.jsx)(m.a,{children:Object(x.jsxs)("div",{className:"flex gap-3",children:[Object(x.jsx)("div",{className:"flex-1 flex items-center bg-gray-100 rounded p-1",children:!1===this.state.current_school&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{className:"text-lg pr-3",children:[Object(x.jsx)("b",{children:this.state.district_name}),"District"]}),Object(x.jsx)(_.a,{onClick:function(){c.setState({open_select_district:!0}),c.loadDistricts()},size:"sm",theme:"accent-light",children:"Choose District"}),this.props.district_code+""!==this.state.selected_district+""&&this.props.district_code&&this.props.district_code&&this.props.district_name&&Object(x.jsxs)(_.a,{onClick:function(){c.props.district_code&&c.props.district_code&&c.selectDistrict({district_code:c.props.district_code,district_name:c.props.district_code})},size:"sm",theme:"accent-light",children:["Choose ",Object(x.jsx)("b",{children:this.props.district_name})]})]})}),Object(x.jsxs)("div",{className:"flex p-1 rounded bg-gray-100",children:[" ",Object(x.jsx)("h3",{className:"text-lg pr-3",children:!0===this.state.current_school&&(null===(r=this.props)||void 0===r?void 0:r.school_name)}),Object(x.jsx)(_.a,{onClick:function(){return c.setState({current_school:!c.state.current_school})},size:"sm",theme:"accent-light",children:!1===this.state.current_school?"Another school":"Current school"})]})]})})}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(u.a,{exclude_roles:["3","4","18","21","22","25","26"],district_id:this.state.selected_district,assignType:"ASSIGN",no_position:!0,school:!0===this.state.current_school&&this.props.school_code&&this.props.school_name?{school_id:this.props.school_code,school_name:this.props.school_name}:void 0,current_position:this.props.current_position,only_post_for_school:!0,user_id:this.props.user_id,formAccess:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!1,phone_numbers:!1,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!1,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!1,last_name:!1,full_name:!1,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){c.setState({error:{target:"user-updates-success",msg:"User updated successfully"}}),setTimeout((function(){c.props.refreshApp&&c.props.refreshApp(),c.props.close()}),4e3)},button_title:"Update staff info"})})]})]})}}]),s}(o.a.Component),g=Object(l.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:h.m})(f)},156:function(e,t,s){"use strict";s.r(t),s.d(t,"RegisterForDataValidation",(function(){return f}));var i=s(26),r=s(27),c=s(28),a=s(29),n=s(2),o=s.n(n),d=s(16),l=s(12),h=s(113),u=s(25),_=s(30),m=s(24),p=s(31),j=s(112),b=s(1),x=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).CheckNidHandler=function(e){if(e.preventDefault(),r.state.nid.length<=4)return r.setState({error:{target:"nid",msg:"NID or passport is required!"}});r.setState({loading:!0,user_found:null}),Object(l.H)(r.state.nid,(function(e,t,s){e?r.setState({user_details:t,loading:!1,user_found:null!==t&&null!==t.user_id?"FOUND":"NOT-FOUND"}):r.setState({loading:!1,user_found:"NOT-FOUND"})}))},r.clearError=function(){return r.setState({error:{msg:"",target:null}})},r.state={loading:!1,error:{msg:"",target:null},nid:"",user_details:null,user_found:null},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t,s,i,r,c,a,n,o=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:" bg-white p-2 flex items-center",children:[null!==this.state.user_found&&Object(b.jsx)(u.a,{onClick:function(){return o.setState({user_found:null})},theme:"default",children:"Back"}),Object(b.jsx)("h1",{className:"text-2xl font-bold pl-3",children:"Create new staff"})]}),"main-error"===this.state.error.target&&Object(b.jsx)(m.a,{theme:"danger",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(b.jsx)(m.a,{theme:"success",fixed:!0,onClick:this.clearError,children:this.state.error.msg}),Object(b.jsxs)(_.a,{children:[null===this.state.user_found&&Object(b.jsx)("form",{onSubmit:this.CheckNidHandler,children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(p.a,{error:"nid"===this.state.error.target?this.state.error.msg:"",label:"Nid/Passport",name:"",onChange:function(e){return o.setState({nid:e.target.value})},placeholder:"Enter NID/Phone number",value:this.state.nid,disabled:this.state.loading})}),Object(b.jsx)("div",{className:"pt-8 pl-2",children:Object(b.jsx)(u.a,{loading:this.state.loading,type:"submit",children:"Check Id"})})]})}),null!==this.state.user_found&&Object(b.jsx)(b.Fragment,{children:"FOUND"===this.state.user_found&&null!==this.state.user_details&&null!==this.state.user_details.user_id?Object(b.jsx)("div",{children:Object(b.jsx)(j.a,{user_id:this.state.user_details.user_id,userDetails:{email:this.state.user_details.email?this.state.user_details.email:"",full_name:null!==(e=this.state.user_details)&&void 0!==e&&e.full_name?null===(t=this.state.user_details)||void 0===t?void 0:t.full_name:"",nid:null!==(s=this.state.user_details)&&void 0!==s&&s.nid?null===(i=this.state.user_details)||void 0===i?void 0:i.nid:"",staff_code:null!==(r=this.state.user_details)&&void 0!==r&&r.staff_code?null===(c=this.state.user_details)||void 0===c?void 0:c.staff_code:""},close:function(){return o.setState({user_found:null})}})}):Object(b.jsx)("div",{children:Object(b.jsx)(h.a,{district_id:null!==(a=this.props.auth.district)&&void 0!==a&&a.district_code?null===(n=this.props.auth.district)||void 0===n?void 0:n.district_code:"",select_district_active:!0,nid_value:this.state.nid,assignType:"REGISTER",exclude_roles:["3","4","18","21","22","25","26"],only_post_for_school:!0,user_id:"",formAccess:{first_name:!0,last_name:!0,full_name:!0,middle_name:!0,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!0},required:{first_name:!0,last_name:!0,full_name:!0,middle_name:!1,nid:!0,phone_numbers:!0,role_id:!0,country_id:!1,district_code:!0,sector_code:!1,school_code:!0,qualification_id:!0,academic_year_id:!0,stakeholder_id:!1,start_date_in_the_school:!0,position_id:!1},success:function(e){o.setState({error:{msg:"A new staff has been registered",target:"main-success"}})}})})})]})]})}}]),s}(o.a.Component),f=Object(d.b)((function(e){return{auth:e.auth}}),{FC_GetAssignAssets:l.m})(x)}}]);
//# sourceMappingURL=23.3e650212.chunk.js.map