(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[33],{154:function(e,t,r){"use strict";r.r(t),r.d(t,"_ChangePassword",(function(){return g})),r.d(t,"ChangePassword",(function(){return O}));var s,a=r(6),n=r(26),o=r(27),c=r(28),i=r(29),d=r(3),l=r.n(d),u=r(5),p=r.n(u),m=r(2),f=r(16),h=r(30),b=r(48),x=r(13),w=r(8),_=r(9),j=r(1);!function(e){e.MAIN="MAIN",e.CURRENT_PASSWORD="CURRENT_PASSWORD",e.NEW_PASSWORD="NEW_PASSWORD",e.CONFIRM_PASSWORD="CONFIRM_PASSWORD"}(s||(s={}));var g=function(e){Object(c.a)(r,e);var t=Object(i.a)(r);function r(e){var o;return Object(n.a)(this,r),(o=t.call(this,e)).setLoading=function(e){o.setState({loading:e})},o.Fn_ChangePassword=function(){var e=Object(a.a)(l.a.mark((function e(t){var r,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==o.state.current_password){e.next=3;break}return e.abrupt("return",o.setState({formError:{target:s.CURRENT_PASSWORD,msg:"Please fill current or existing password"}}));case 3:if(""!==o.state.new_password){e.next=5;break}return e.abrupt("return",o.setState({formError:{target:s.NEW_PASSWORD,msg:"Please fill new password"}}));case 5:if(!(o.state.new_password.length<5)){e.next=7;break}return e.abrupt("return",o.setState({formError:{target:s.NEW_PASSWORD,msg:"Please password characters should not be less than 5"}}));case 7:if(""!==o.state.confirm_password){e.next=9;break}return e.abrupt("return",o.setState({formError:{target:s.CONFIRM_PASSWORD,msg:"Please confirm your new password"}}));case 9:if(o.state.confirm_password===o.state.new_password){e.next=11;break}return e.abrupt("return",o.setState({formError:{target:s.CONFIRM_PASSWORD,msg:"Password does not match with new password"}}));case 11:if(null===o.props.auth.user){e.next=27;break}return a={user_id:null===(r=o.props.auth.user)||void 0===r?void 0:r.user_id,current_password:o.state.current_password,new_password:o.state.new_password},o.setLoading(!0),Object(w.a)(),e.prev=15,e.next=18,p.a.post("".concat(x.c,"/changepassword/new"),a);case 18:n=e.sent,console.log("status: ",n.status),n&&o.setState({current_password:"",new_password:"",confirm_password:"",formError:null,success:"Password changed successfully!"}),o.setLoading(!1),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(15),o.setState({formError:{target:s.MAIN,msg:Object(_.a)(e.t0)},success:"",loading:!1});case 27:case"end":return e.stop()}}),e,null,[[15,24]])})));return function(t){return e.apply(this,arguments)}}(),o.state={loading:!1,current_password:"",new_password:"",confirm_password:"",formError:null,success:""},o}return Object(o.a)(r,[{key:"render",value:function(){var e,t,r,a,n,o,c,i=this;return!0===this.state.loading?Object(j.jsxs)("div",{className:"bg-white rounded-md p-4 flex flex-col items-center justify-center m-5",children:[Object(j.jsx)(b.a,{}),Object(j.jsx)("div",{className:"text-xl",children:"Loading, please wait..."})]}):Object(j.jsx)("div",{children:Object(j.jsxs)(h.a,{children:[Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("span",{className:"text-3xl font-bold -mb-1",children:"Change password"}),Object(j.jsx)("span",{className:"text-primary-800 font-bold",children:null===(e=this.props.auth.user)||void 0===e?void 0:e.full_name})]}),""!==this.state.success&&Object(j.jsx)("div",{onClick:function(){return i.setState({success:""})},className:"bg-green-100 text-green-800 rounded px-3 py-2 cursor-pointer",children:this.state.success}),null!==this.state.formError&&this.state.formError.target===s.MAIN&&Object(j.jsx)("div",{onClick:function(){return i.setState({formError:null})},className:"bg-red-100 text-red-800 rounded px-3 py-2 cursor-pointer",children:this.state.formError.msg}),Object(j.jsx)("div",{className:"mt-5",children:Object(j.jsxs)("form",{onSubmit:this.Fn_ChangePassword,children:[Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("label",{className:"text-base",htmlFor:"",children:"Current password"}),Object(j.jsx)("input",{type:"password",value:this.state.current_password,onChange:function(e){return i.setState({formError:null,current_password:e.target.value})},className:"border ".concat((null===(t=this.state.formError)||void 0===t?void 0:t.target)===s.CURRENT_PASSWORD?"border-red-600 animate__animated animate__shakeX animate__faster":"border-gray-400","  rounded px-3 py-2")}),(null===(r=this.state.formError)||void 0===r?void 0:r.target)===s.CURRENT_PASSWORD&&Object(j.jsx)("span",{className:"text-red-600 font-bold",children:this.state.formError.msg})]}),Object(j.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(j.jsx)("label",{className:"text-base",htmlFor:"",children:"New password"}),Object(j.jsx)("input",{type:"password",value:this.state.new_password,onChange:function(e){return i.setState({formError:null,new_password:e.target.value})},className:"border ".concat((null===(a=this.state.formError)||void 0===a?void 0:a.target)===s.NEW_PASSWORD?"border-red-600 animate__animated animate__shakeX animate__faster":"border-gray-400","  rounded px-3 py-2")}),(null===(n=this.state.formError)||void 0===n?void 0:n.target)===s.NEW_PASSWORD&&Object(j.jsx)("span",{className:"text-red-600 font-bold",children:this.state.formError.msg})]}),Object(j.jsxs)("div",{className:"flex flex-col mt-3",children:[Object(j.jsx)("label",{className:"text-base",htmlFor:"",children:"Confirm password"}),Object(j.jsx)("input",{type:"password",value:this.state.confirm_password,onChange:function(e){return i.setState({formError:null,confirm_password:e.target.value})},className:"border ".concat((null===(o=this.state.formError)||void 0===o?void 0:o.target)===s.CONFIRM_PASSWORD?"border-red-600 animate__animated animate__shakeX animate__faster":"border-gray-400","  rounded px-3 py-2")}),(null===(c=this.state.formError)||void 0===c?void 0:c.target)===s.CONFIRM_PASSWORD&&Object(j.jsx)("span",{className:"text-red-600 font-bold",children:this.state.formError.msg})]}),Object(j.jsx)("div",{className:"my-4",children:Object(j.jsx)("button",{className:"cursor-pointer bg-primary-800 text-white rounded px-3 py-2 hover:bg-blue-900",type:"submit",children:"Change password"})})]})})]})})}}]),r}(m.Component),O=Object(f.b)((function(e){return{auth:e.auth}}),{})(g)}}]);
//# sourceMappingURL=33.5ffb40eb.chunk.js.map